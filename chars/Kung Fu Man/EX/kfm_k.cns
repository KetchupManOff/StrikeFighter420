[Data]
life              = 1000    ;体力ゲージの最大値を決めます
power             = 3000    ;パワーゲージ最大値（デフォルトは 3000 = Lv.3 になります・オプション）
attack            = 100     ;攻撃力パーセンテージ（デフォルトは 100% になります）
defence           = 100     ;防御力パーセンテージ（デフォルトは 100% になります）
fall.defence_up   = 50      ;一時的に上昇するダウン時の防御力パーセンテージ
liedown.time      = 50      ;倒れてから起き上がるまでの時間
airjuggle         = 15      ;ジャグルポイント限界値　★１
sparkno           = 1       ;デフォルトのヒットスパーク番号（fightfx.airか、キャラのairから呼び出す）
guard.sparkno     = 40      ;デフォルトのガードスパーク番号（fightfx.airか、キャラのairから呼び出す）
KO.echo           = 0       ;ＫＯ時の声にエコーを掛けるかどうか（0=しない・1=する）
volume            = 0      ;キャラの音量　255が最高
intpersistindex   = 5,20    ;Varを次のラウンドへ持ち越しが可能 (最小=0, 最大=59)  ★２
floatpersistindex = 40      ;FVarを次のラウンドへ持ち越しが可能 (最小=0, 最大=39) ★２

;---------------------------------------------------------------------------
;サイズ設定
[Size]
xscale           = 1        ;キャラ画像の横のスケール
yscale           = 1        ;キャラ画像の縦のスケール
ground.back      = 15       ;キャラの幅（地上後方）
ground.front     = 16       ;キャラの幅（地上前方）
air.back         = 12       ;キャラの幅（空中後方）
air.front        = 12       ;キャラの幅（空中前方）
height           = 60       ;跳び越す相手のためのキャラの高さ
attack.dist      = 160      ;攻撃を出した時に相手がガード体勢に入る最低の距離
proj.attack.dist = 90       ;相手がガード体勢に入る発射物との最低の距離
proj.doscale     = 0        ;xscaleとyscaleが発射物のスケールにも影響するかどうか（0=しない・1=する）
head.pos         = 0, -90  ;BindToTargetの時に必要な頭の座標
mid.pos          = 0, -60  ;BindToTargetの時に必要な体中心の座標
shadowoffset     = 0        ;影の垂直方向の位置
draw.offset      = 0,0      ;キャラ描画表示位置（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
;移動速度設定
[Velocity]
walk.fwd     = 3.3          ;前進歩行速度
walk.back    = -3.1         ;後退歩行速度
run.fwd      = 7.2, 0       ;前に走る時の速度（Ｘ軸,Ｙ軸）
run.back     = -6,-4      ;後ろに走る時の速度（Ｘ軸,Ｙ軸）
jump.neu     = 0,-10       ;垂直ジャンプ速度（Ｘ軸,Ｙ軸）
jump.back    = -4           ;後ジャンプ速度
jump.fwd     = 4.2          ;前ジャンプ速度
runjump.back = -2.55,-8.1   ;後ろに走りながらのジャンプ速度（オプション）
runjump.fwd  = 4.8,-9.5     ;前に走りながらのジャンプ速度（オプション）
airjump.neu  = 0,-8.1       ;空中垂直ジャンプ速度（オプション）
airjump.back = -2.5         ;空中後ジャンプ速度（オプション）
airjump.fwd  = 2.55         ;空中前ジャンプ速度（オプション）

;---------------------------------------------------------------------------
;動作設定
[Movement]
airjump.num     = 1      ;空中ジャンプが出来る回数（オプション）
airjump.height  = 35     ;空中ジャンプするために必要な最低限の高さ（オプション）
yaccel          = .54    ;重力（垂直下降加速度）
stand.friction  = .85    ;立ち状態の摩擦係数
crouch.friction = .82    ;しゃがみ状態の摩擦係数

[Quotes]
victory1 = "You must defeat Tu Shou to stand a chance."
victory2 = "You need a lot of training. Come back in ten years."
victory3 = "You look familiar. Did I see you on TV?"
victory4 = "Your moves are too predictable. You want to learn Kung Fu Palm? It's not for novices."
victory5 = "That was a good workout."
victory6 = "I want to challenge more skilled fighters."
victory7 = "What do you mean my girlfriend is in another temple?"
;---------------------------------------------------------------------------
; ステイトの解説
; [Statedef STATENO]
; type = ?      S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
; movetype = ?  I/A/H    Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
; physics = ?   S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
; juggle = ?             その攻撃に使うジャグル数
;

;---------------------------------------------------------------------------
; 各種ジャンプ
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
facep2 = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; AirJump Start
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 44

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = 41

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > Const720p(-8)
trigger1 = SelfAnimExist(anim + 3)
trigger1 = anim >= 41 && anim <= 43
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type    = A
physics = A

[State 51, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 52, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; commonより ダッシュ
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1

[State 191, 3]
type = PlaySnd
trigger1 = Time= 0
value = 100, 0
loop = 1
channel = 1

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = 0
;---------------------------------------------------------------------------
; ステップ
[Statedef 101]
type    = S
physics = S
ctrl = 0
anim = 101
velset = 0,0

[State 106, 4]
type = ChangeState
trigger1 = Time = 7
value = 102

; 空中
[Statedef 102]
type    = A
physics = A
ctrl = 1
anim = 102
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = 7.5
y = -3.8

[State 105, 2]
type = null;CtrlSet
trigger1 = Time = 2
value = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -5
value = 103


; 着地
[Statedef 103]
type    = S
physics = N
ctrl = 0
anim = 103
velset = 0,0

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 106, 4]
type = ChangeState
trigger1 = Time = 7
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; commonより バックステップ
[Statedef 105]
type    = S
physics = S
ctrl = 0
anim = 104
velset = 0,0

[State 106, 4]
type = ChangeState
trigger1 = Time = 7
value = 106

; 空中
[Statedef 106]
type    = A
physics = A
ctrl = 1
anim = 105
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = -7.5
y = -3.8

[State 105, 2]
type = null;CtrlSet
trigger1 = Time = 2
value = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -5
value = 107


; 着地
[Statedef 107]
type    = S
physics = N
ctrl = 0
anim = 106
velset = 0,0

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 106, 4]
type = ChangeState
trigger1 = Time = 7
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 120, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 120, Stop Guarding]
type = ChangeState
TriggerAll = var(59)>0 
trigger1 = numhelper(35000)
trigger1 = !InGuardDist && !Helper(35000),InGuardDist
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command = "holddown"
value = 131

[State 130, Hi to Lo]
type = ChangeState
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
value = 131

[State 130, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 130, AI_Stop Guarding]
type = ChangeState
TriggerAll = var(59)>0
trigger1 = numhelper(35000)
trigger1 = !InGuardDist && !Helper(35000),InGuardDist 
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holddown"
value = 130

[State 120, Lo to Hi]
type = ChangeState
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
value = 130

[State 131, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 131, AI_Stop Guarding]
type = ChangeState
TriggerAll = var(59)>0
trigger1 = numhelper(35000)
trigger1 = !InGuardDist && !Helper(35000),InGuardDist 
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132]
type = ChangeState
triggerall = var(59)<=0
triggerall = sysvar(0)
trigger1 = command = "holdback" 
trigger1 = inguarddist
value = 130

[State 132, AI]
Type = ChangeState
TriggerAll = var(59)>0
TriggerAll = sysvar(0)
Trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
triggerall = var(59)<=0
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

[State 132, AI_Stop Guarding]
type = ChangeState
TriggerAll = var(59)>0
trigger1 = numhelper(35000)
trigger1 = !InGuardDist && !Helper(35000),InGuardDist
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
triggerall = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 140, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
Type = ChangeState
TriggerAll = var(59)<=0
Trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, AI]
Type = ChangeState
TriggerAll = var(59)>0
Trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)<=0,(command = "holddown"),(EnemyNear(Var(57)),StateType!=A))

[State 150, Hi to Lo]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 2]
Type = ChangeState
TriggerAll = var(59)<=0
Trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, AI]
Type = ChangeState
TriggerAll = var(59)>0
Trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)<=0,(command = "holddown"),(EnemyNear(Var(57)),StateType!=A))

[State 152, Hi to Lo]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
TriggerAll = var(59)<=0
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, Hi to Lo]
type = StateTypeSet
triggerAll=Statetype = S
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType!=A
trigger1 = !(var(53)!=0 && EnemyNear(Var(57)),stateno=var(53))
trigger1 = !(var(54)!=0 && EnemyNear(Var(57)),stateno=var(54))
trigger1 = !(var(55)!=0 && EnemyNear(Var(57)),stateno=var(55))
trigger2 = var(56)!=0 && EnemyNear(Var(57)),stateno=var(56)
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
triggerAll=Statetype = C
triggerall = var(59)>0
trigger1 = EnemyNear(Var(57)),StateType=A
trigger1 = !(var(56)!=0 && EnemyNear(Var(57)),stateno=var(56))
trigger2 = var(53)!=0 && EnemyNear(Var(57)),stateno = var(53)
trigger3 = var(54)!=0 && EnemyNear(Var(57)),stateno = var(54)
trigger4 = var(55)!=0 && EnemyNear(Var(57)),stateno = var(55)
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = var(59)<=0
trigger1 = command = "holdback" 
trigger2 = var(59)>0
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52


;---------------------------------------------------------------------------
; タイムオーバーで負けた時
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 191, 3]
type = PlaySnd
trigger1 = animelem = 6
value = 170,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; 勝った動作１
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = 1
value = 182

;---------------------------------------------------------------------------
; 勝った動作
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0


[State 191, 3]
type = PlaySnd
trigger1 = var(10)=0
trigger1 = animelem = 1
value = 182,0

[State 191, 3]
type = PlaySnd
trigger1 = var(10)=1
trigger1 = animelem = 1
value = 182,3

[State 181, 4]
type = AssertSpecial
trigger1 = var(10)=1
trigger1 = time = [0,250]
flag = roundnotover

[State 181, 4]
type = AssertSpecial
trigger1 = var(10)=0
trigger1 = time = [0,150]
flag = roundnotover

;---------------------------------------------------------------------------
; 通常登場
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 180, 1]
type = VarRandom
trigger1 = Time = 1
v = 2
range = 0,1

[state a]
type = changestate
trigger1 = var(2)=1
trigger1 = time = 1
value = 194

[state a]
type = changestate
trigger1 = var(2)=0
trigger1 = time = 1
value = 193

;---------------------------------------------------------------------------
; 通常登場
[Statedef 193]
type = S
ctrl = 0
anim = 193
velset = 0,0

[State 180, 1]
type = VarRandom
trigger1 = Time = 1
v = 2
range = 0,1

[state a]
Type = PlaySnd
trigger1 = animelem = 4
value = 190, 0

[state a]
Type = PlaySnd
trigger1 = animelem = 5
value = 777, 18
channel = 3

[state a]
Type = PlaySnd
trigger1 = animelem = 5
value = 777, 19
channel = 4

[state a]
Type = PlaySnd
trigger1 = animelem = 75
value = 190, 3

[state a]
Type = PlaySnd
trigger1 = var(2)=1
trigger1 = animelem = 75
value = 190, 4

[state a]
Type = PlaySnd
trigger1 = var(2)=0
trigger1 = animelem = 75
value = 195, 0

[State 3010, 0]
type = EnvShake
trigger1 = animelem = 75
time = 12
freq = 120
ampl = 7


[State a];オーラ
type = Explod
trigger1 = time >= 55&&time <= 171
trigger1 = numexplod(2515)=0
anim = 2515
id = 2515
sprpriority = -5
postype = p1
pos = -9,-6
bindtime = -1
under = 0
ownpal = 1
scale = 0.46,0.40
pausemovetime = 999
supermovetime = 999

[State a];オーラ
type = Explod
trigger1 = time >= 55&&time <= 171
trigger1 = numexplod(2516)=0
anim = 2516
id = 2516
sprpriority = 10
postype = p1
pos = -10,-8;0
bindtime = -1
under = 0
ownpal = 1
scale = 0.46,0.42
pausemovetime = 999
supermovetime = 999

[State a];オーラ
type = Explod
trigger1 = time >= 55&&time <= 171
trigger1 = numexplod(2514)=0
anim = 2513
id = 2513
sprpriority = -5
postype = p1
pos = -24,10
bindtime = -1
pausemovetime = 999
supermovetime = 999
under = 0
ownpal = 1
scale = 0.44,0.45

[State a];オーラ
type = Explod
trigger1 = time >= 55&&time <= 171
trigger1 = numexplod(2514)=0
anim = 2514
id = 2514
sprpriority = 10
postype = p1
pos = -24,10
bindtime = -1
under = 0
ownpal = 1
scale = 0.44,0.45
pausemovetime = 999
supermovetime = 999

[State explod];エフェクト
type = Explod
trigger1 = animelem = 76,=0
anim = 6250
id = 6250
sprpriority = -3
postype = p1
pos = -10,-1
bindtime = 1
supermove = 0
scale = 0.5,0.53
under = 0
ownpal = 1

[state a]
type = removeexplod
trigger1 = time = 161
id = 2513
[state a]
type = removeexplod
trigger1 = time = 161
id = 2514
[state a]
type = removeexplod
trigger1 = time = 161
id = 2515
[state a]
type = removeexplod
trigger1 = time = 161
id = 2516

[State 191, 2] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 4] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; 通常登場
[Statedef 194]
type = S
ctrl = 0
anim = 19003
velset = 0,0

[state a]
type = playsnd
trigger1 = animelem = 4
value = 1400,3

[state a]
type = playsnd
trigger1 = animelem = 6
value = 1050,0

[state a]
type = playsnd
trigger1 = animelem = 6
value = 1050,1

[state a]
type = playsnd
trigger1 = animelem = 7
value = 1200,2

[State 1020, 4]
type = EnvShake
trigger1 = animelem = 6,=2
time = 15
ampl = -6
freq = 95
phase = 95

[State explod];エフェクト
type = Explod
trigger1 = animelem = 6,=2
anim = 6250
id = 6250
sprpriority = -3
postype = p1
pos = 55,5
bindtime = 1
supermove = 0
scale = 0.35,0.35
under = 0
ownpal = 1

[State 191, Wood 1]
type = Explod
trigger1 = AnimElemTime(1) = 0
persistent = 0
anim = 19000
postype = p1
pos = 260, -90
velocity = -4.2, -7
accel = 0, .32
removetime = 48

[State 191, Wood 2]
type = Explod
trigger1 = AnimElemTime(6) = 1
anim = 19001
postype = p1
pos = 60, -70
velocity = 2, -4
accel = 0, .32
removetime = 35

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 挑発の動作
[Statedef 195]
type = S
ctrl = 0
anim = 19002
velset = 0,0
movetype = A
physics = S
sprpriority = 2
juggle  = 5
poweradd= 100

[state a]
Type = PlaySnd
trigger1 = animelem = 4,=0
value = 190, 3

[state a]
Type = PlaySnd
trigger1 = animelem = 4,=0
value = 1600, 0

[State 3010, 0]
type = EnvShake
trigger1 = animelem = 4,=0
time = 12
freq = 120
ampl = 7

[State 440, 3]
type = HitDef
trigger1 = animelem = 4
attr = C, NA
damage    = 10
hitflag = MAFD
guardflag = L
pausetime = 1,1
sparkno = s-1
getpower = 106,106
sparkxy = -15,-69
hitsound   = s225,0
guardsound = s121,0
guard.sparkno = s-1
ground.type = Trip
ground.slidetime = 21
ground.hittime  = 15
ground.velocity = -0.2,-8
air.velocity = -4,-4
guard.velocity = -5
fall = 1

[State explod];エフェクト
type = Explod
trigger1 = animelem = 4,=3
anim = 6250
id = 6250
sprpriority = -3
postype = p1
pos = -10,-1
bindtime = 1
supermove = 0
scale = 0.5,0.53
under = 0
ownpal = 1

[State 191, 4] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl=1

;---------------------------------------------------------------------------
;上段受け
[Statedef 340]
type = S
movetype = I
physics = S
anim = 252
sprpriority = 3
velset = 0,0
poweradd = 150
ctrl = 0

[State 340, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 16

[State 340, 3]
type = PalFX
trigger1 = animelemtime(3)>=0 && animelemtime(7)<0
time = 1
add = 60,60,255

[State 340, 4]
type = envshake
trigger1 = time = 0
time = 10
freq = 100
ampl = -3

[State 340, 5]
type = explod
trigger1 = Time = 1
anim = 6260
pos = 50,-70
postype = p1
facing = 1
sprpriority = 3
bindtime = -1
pausemovetime = 60
ownpal = 1

[State 340, 6]
type = PlaySnd
trigger1 = Time = 0
value =  s777,6

[State 340, 7]
type = PlaySnd
trigger1 = Time = 0
value = s300,23

[State 340, 8]
type = Pause
trigger1 = time = 1
time = 16
movetime = 13

[State 340, 9]
type = CtrlSet
trigger1 = animelem = 7
value = 1

[State 340, 10]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;下段受け
[Statedef 350]
type = C
movetype = I
physics = C
anim = 253
sprpriority = 3
velset = 0,0
poweradd = 150
ctrl = 0

[State 350, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 16

[State 350, 3]
type = PalFX
trigger1 = animelemtime(2)>=0 && animelemtime(4)<0
time = 1
add = 60,60,255

[State 350, 4]
type = explod
trigger1 = Time = 1
anim = 6260
pos = 42,-57
postype = p1
facing = 1
sprpriority = 3
bindtime = -1
pausemovetime = 60
ownpal = 1

[State 350, 5]
type = envshake
trigger1 = time = 0
time = 10
freq = 100
ampl = -3

[State 350, 6]
type = PlaySnd
trigger1 = Time = 0
value =  s777,6

[State 340, 7];おおっ
type = PlaySnd
trigger1 = Time = 0
value = s300,23

[State 350, 8]
type = Pause
trigger1 = time = 1
time = 16
movetime = 13

[State 350, 9]
type = CtrlSet
trigger1 = animelem = 5
value = 1

[State 350, 10]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;空中受け
[Statedef 355]
type = A
movetype = I
physics = N
anim = 254
sprpriority = 3
velset = 0,0
poweradd = 150
ctrl = 0

[State 350, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 16

[State 350, 3]
type = PalFX
trigger1 = 1
time = 1
add = 60,60,255

[State 350, 4]
type = explod
trigger1 = Time = 1
anim = 6260
pos = 40,-50
postype = p1
facing = 1
sprpriority = 2
bindtime = -1
pausemovetime = 60
ownpal = 1

[State 350, 5]
type = envshake
trigger1 = time = 0
time = 10
freq = 100
ampl = -3

[State 350, 6]
type = PlaySnd
trigger1 = Time = 0
value = s777,6

[State 340, 7]
type = PlaySnd
trigger1 = Time = 0
value = s300,23

[State 350, 9]
type = Pause
trigger1 = time = 1
time = 16
movetime = 16

[State 350, 10]
type = CtrlSet
trigger1 = time = 9
value = 1

[State 350, 11]
type = changeState
trigger1 = time >= 10
value = 356

;---------------------------------------------------------------------------
;空中受けの後
[Statedef 356]
type = A
movetype = I
physics = N
anim = 255
sprpriority = 3
velset = 0,0
ctrl = 1

[State 356, 1]
type = gravity
trigger1 = 1

[State 356, 2] 
type = changeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 0

:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
;---------------------------------------------------------------------------
; 遠距離立ち・弱・パンチ・の動作
[Statedef 200]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 3                      
;Commonly-used controllers:
velset = 0,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 200                       ;このステートで表示するスプライトステート番号(0で変化無し)
poweradd = 20                    ;このステートを使った時のパワー増加量(0で変化無し)

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 30, 0                   ;ダメージ量（左が当たった時、右はガードした時）
getpower = 60,10
animtype = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = M                    ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 5, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 16,16                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s-1               ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = 0,0              ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = s202, 0                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.sparkno = s-1
guardsound = s120, 0                ;ガードした時の音（同上）
ground.type = high               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 10            ;相手が後にすべる時間
ground.hittime  = 12             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -3             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.5,-2     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = Low                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7000
pos = floor(p2dist x/2 +26) , floor(p2dist y/2 -77)
postype = p1
stateno = 7000
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7010
pos = floor(p2dist x/2-25), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7010
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
value = 201, 0
channel = 10

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 近距離立ち・弱・パンチ・の動作
[Statedef 205]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 8                      
;Commonly-used controllers:
velset = 0,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 205                       ;このステートで表示するスプライトステート番号(0で変化無し)
poweradd = 25                    ;このステートを使った時のパワー増加量(0で変化無し)
sprpriority = 2                  ;表示した絵の重なり具合(2一番前　0通常　-1奥)

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 29, 0                   ;ダメージ量（左が当たった時、右はガードした時）
getpower = 60,10
animtype = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = M                  ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 5, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 15,16                ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s-1                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = 0,0               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = s202, 0                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.sparkno = s-1
guardsound = s120, 0                ;ガードした時の音（同上）
ground.type = high              ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 9             ;相手が後にすべる時間
ground.hittime  = 13             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -5             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.9,-2     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = Low                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7000
pos = floor(p2dist x/2 +26) , floor(p2dist y/2 -77)
postype = p1
stateno = 7000
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7010
pos = floor(p2dist x/2-25), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7010
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,0

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
value = 201, 0
channel = 10

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離強パンチ
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 70
ctrl = 0
velset = 0,0
anim = 210

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
value = 221, 0
channel = 10

[State 210, 2]
type = HitDef
trigger1 = animelem = 6 || animelem = 7
trigger1 = movecontact = 0
attr = S, NA
animtype  = Medium
damage    = 108
getpower = 106,10
guardflag = M
pausetime = 16,18
priority = 5, Hit
sparkno = s-1
sparkxy = 0,0
hitsound   = s222,0
guardsound = s122,0
guard.sparkno = s-1
ground.type = high
ground.slidetime = 23
ground.hittime  = 24
ground.velocity = -8
air.velocity = -4.5,-3

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +35) , floor(p2dist y/2 -66)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-33), floor(p2dist y/2 -66)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 近距離立ち・強・パンチ・の動作
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 70
ctrl = 0
velset = 0,0
anim = 215
sprpriority = 2

[State 200, 1]
type = PlaySnd
trigger1 = Time = 3
value = 200, 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 221, 0
channel = 10

[State 210, 2]
type = HitDef
trigger1 = time = 1
attr = S, NA
animtype  = Medium
damage    = 78
getpower = 106,106
guardflag = M
priority = 5, Hit
pausetime = 15,16
sparkno = s-1
sparkxy = 0,0
hitsound   = s222,0
guard.sparkno = s-1
guardsound = s122,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -6
air.velocity = -4,-3

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +29) , floor(p2dist y/2 -70)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-29), floor(p2dist y/2 -70)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[State 215, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 鬼車
[Statedef 216]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 65
ctrl = 0
velset = 2,0
anim = 216
sprpriority = 2

[State 200, 1]
type = PlaySnd
trigger1 = Time = 4
value = 200, 3

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 221, 0
channel = 10

[State 210, 2]
type = HitDef
trigger1 = animelem = 5
Trigger1 = prevstateNo != [200,450]
Trigger1 = p2Statetype != A
attr = S, NA
animtype = up
damage    = 88
getpower = 126,10
guardflag = M
pausetime = 11,13
priority = 5, Hit
sparkno = s-1
sparkxy = 0,0
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 23
ground.hittime  = 23
ground.Velocity = 0.0
guard.Velocity = -9.5
Air.Velocity = 0,3
yAccel = 10
Ground.cornerpush.veloff = 0
Air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
envshake.ampl=4
envshake.time=5
p2stateno = 217

[State 210, 2]
type = HitDef
trigger1 = animelem = 5
Trigger1 = prevstateNo != [200,450]
Trigger1 = p2Statetype = A
attr = S, NA
animtype = up
damage    = 88
getpower = 126,10
guardflag = M
pausetime = 11,13
priority = 5, Hit
sparkno = s-1
sparkxy = 0,0
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 23
ground.hittime  = 23
ground.Velocity = 0.0
guard.Velocity = -9.5
Air.Velocity = 0,3
yAccel = 10
Ground.cornerpush.veloff = 0
Air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
envshake.ampl=4
envshake.time=5
p2stateno = 218

[State 210, 2]
type = HitDef
trigger1 = animelem = 5
Trigger1 = prevstateNo = [200,499]
attr = S, NA
animtype = back
damage    = 88
getpower = 106,10
guardflag = M
pausetime = 11,13
priority = 5, Hit
sparkno = s-1
sparkxy = 0,0
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 23
ground.hittime  = 19
ground.Velocity = -8
guard.Velocity = -9.5
Air.Velocity = -5,10
Ground.cornerpush.veloff = 0
Air.cornerpush.veloff = 0
fall = 0
fall.recover = 0
envshake.ampl=4
envshake.time=5

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +28) , floor(p2dist y/2 -76)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.41
;Size.YScale = 0.41
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-30), floor(p2dist y/2 -71)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 215, 2]
type = velset
trigger1 = AnimTime = 4
x=0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

[State 215, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 217]
type    = L
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 10001

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
type = Velset
Trigger1 = animelem = 1,= 0
X = 0
y = -2

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
type = Velset
Trigger1 = animelem = 1,= 4
X = 0
y = 5

[State 821, 3] 
type = Velset
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0

[State 821, 3] 
type = posset
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0


[State 821, 3] 
type = SelfState
Trigger1 = Time >= 50
value = 5120 

;---------------------------------------------------------------------------
[Statedef 218]
type    = L
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 10002

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
type = Veladd
Trigger1 = animelem = 1,<= 3
X = 0
y = -0.1

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
type = Veladd
Trigger1 = animelem = 1,>= 3
X = 0
y = 1.28

[State 821, 3] 
type = posset
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0

[State 821, 3] 
type = Velset
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
y = 0


[State 821, 3] 
type = SelfState
Trigger1 = Time >= 50
value = 5120 



;---------------------------------------------------------------------------
; 下段突き
[Statedef 405]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 45
ctrl = 0
velset = 2,0
anim = 219
sprpriority = 2

[State 200, 1]
type = PlaySnd
trigger1 = Time = 4
value = 777,22

[State 210, 1]
type = PlaySnd
trigger1 = Time = 1
value = 221, 0
channel = 10

[State 210, 1]
type = PlaySnd
trigger1 = Time = 26
value = 221, 0
channel = 10

[State 210, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype = up
damage    = 50
getpower = 126,10
guardflag = M
pausetime = 11,13
priority = 5, Hit
hitflag = MAFD
sparkno = s-1
sparkxy = 0,0
hitsound   = s777,21
guard.sparkno = s-1
guardsound = s121,0
ground.type = trip
ground.slidetime = 23
ground.hittime  = 23
ground.Velocity = -2,-4
guard.Velocity = -9.5
Air.Velocity = -2,-4
yAccel = 10
Ground.cornerpush.veloff = 0
Air.cornerpush.veloff = 0
envshake.ampl=8
envshake.time=8

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +28) , floor(p2dist y/2 -7)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.48
;Size.YScale = 0.48
ignorehitpause = 1
persistent = 0

[State 215, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 肘打ち
[Statedef 246]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 50
ctrl = 0
anim = 1511
sprpriority = 2

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 221, 0
channel = 10

[State 2];攻撃の指定
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = hard
damage    = 75,10
getpower = 106,16
guardflag = M
pausetime = 15,15
sparkno = s-1
sparkxy = -20,-69
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -10,0
air.velocity = -4,-4.5
fall = 0
air.fall = 1
fall.recover = 0
envshake.ampl=6
envshake.time=8
ground.cornerpush.veloff = -14

;---------------------[効果音]
[state a];おりゃァ
type = playsnd
trigger1 = animelem = 2
value = 200, 3

[state a]
type = velset
trigger1 = animelem = 2,=1
x = 2

[state a]
type = velset
trigger1 = animelem = 3,=1
x = 3

[state a]
type = velset
trigger1 = animelem = 4,=1
x = 30

[state a]
type = velset
trigger1 = animelem = 5,=0
x = 3

[state a]
type = velset
trigger1 = animelem = 5,=3
x = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-29), floor(p2dist y/2 -10)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.96
persistent = 0
ignorehitpause = 1

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離 立ち・弱・キック
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 30
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,0

[State 230, 1]
type = PlaySnd
trigger1 = Time = 1
value = 230, 0
channel = 10

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = light
damage    = 30
getpower = 60,10
guardflag = M
pausetime = 13,14
priority = 4, Hit
sparkno = s-1
sparkxy = 0,0
hitsound   = s224,0
guard.sparkno = s-1
guardsound = s120,0
ground.type = low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -5
air.velocity = -2.5,-3.5

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7000
pos = floor(p2dist x/2 +33) , floor(p2dist y/2 -67)
postype = p1
stateno = 7000
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7010
pos = floor(p2dist x/2-33), floor(p2dist y/2 -67)
postype = p2
facing = -1
stateno = 7010
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.88
;Size.YScale = 0.88
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.98
persistent = 0
ignorehitpause = 1

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;後回し中段蹴り

[Statedef 535]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 100
ctrl = 0
velset = 0,0
anim = 235
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,2

[State 240, 1]
type = PlaySnd
trigger1 = Time = 1
value = 221, 0
channel = 10

[state a]
type = velset
trigger1 = animelem = 4
x = 5

[state a]
type = velset
trigger1 = animelem = 5
x = 11

[state a]
type = velset
trigger1 = animelem = 6
x = 0

[State 1040, explod]
type = explod
trigger1 = animElem = 4,=1
anim = 6200
sprpriority = 3
ownpal = 1
removeongethit = 1
pos = 35, 6
scale = 1,1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = hard
damage    = 118
getpower = 106,10
guardflag = M
pausetime = 12,12
priority = 7, Hit
sparkno = s-1
sparkxy = 0,0
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 18
ground.velocity = -9,-2
air.velocity = -8,-3.2
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 7
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +39) , floor(p2dist y/2 -66)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -69)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ガードキャンセルふっ飛ばし攻撃
[Statedef 236]
type    = S
movetype= A
physics = S
juggle  = 7
poweradd= -500
ctrl = 0
velset = 0,0
anim = 235
sprpriority = 2

[State 700, 2];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[State 3040, 7];画面フラッシュ
type = EnvColor
trigger1 = movehit = 1
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 1

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,2

[State 240, 1]
type = PlaySnd
trigger1 = Time = 1
value = 221, 0
channel = 10

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 290, 0

[state a]
type = velset
trigger1 = animelem = 4
x = 8

[state a]
type = velset
trigger1 = animelem = 5
x = 14

[state a]
type = velset
trigger1 = animelem = 6
x = 0

[State 1040, explod]
type = explod
trigger1 = animElem = 4,=1
anim = 6200
sprpriority = 3
ownpal = 1
removeongethit = 1
pos = 35, 6
scale = 1,1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = hard
damage    = 108
getpower = 106,10
guardflag = M
pausetime = 12,12
priority = 7, Hit
sparkno = s-1
sparkxy = 0,0
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 18
ground.velocity = -9,-2
air.velocity = -8,-3.2
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 7
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +39) , floor(p2dist y/2 -66)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -69)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離 立ち・強・キック
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 80
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 240, 1]
type = PlaySnd
trigger1 = Time = 1
value = 221, 0
channel = 10

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = hard
damage    = 108
getpower = 106,10
guardflag = M
pausetime = 14,19
priority = 5, Hit
sparkno = s-1
sparkxy = -15,-80
hitsound   = s225,0
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 17
ground.velocity = -10
air.velocity = -3,-3.2

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +40) , floor(p2dist y/2 -75)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-40), floor(p2dist y/2 -78)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 近距離立ち・強・キック
[Statedef 245]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 80
ctrl = 0
velset = 0,0
anim = 245
sprpriority = 2

[State 240, 1]
type = PlaySnd
trigger1 = Time = 1
value = 221, 0
channel = 10

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
value = 200, 1

[State 240, 2]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = Hard
getpower = 116,10
damage    = 112
guardflag = M
pausetime = 14,15
priority = 5, Hit
sparkno = s-1
sparkxy = -45,-42
hitsound   = s225,0
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8
air.velocity = -4,-3.2

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +32) , floor(p2dist y/2 -36)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-25), floor(p2dist y/2 -39)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 氷柱割り
[Statedef 206]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 60
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2

[state a]
type = posadd
trigger1 = animelemtime(4) = 0
x = 8

[state a]
type = posadd
trigger1 = animelemtime(4) = 1
x = 6

[state a]
type = posadd
trigger1 = animelemtime(4) = 2
x = 4

[state a]
type = posadd
trigger1 = animelemtime(4) = 3
x = 2

[State 240, 1]
type = PlaySnd
trigger1 = Time = 0
value = 221, 0
channel = 10

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 200, 3

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = hard
damage    = 78
getpower = 106,106
guardflag = H
pausetime = 13,14
priority = 5, Hit
sparkno = s-1
sparkxy = -15,-29
hitsound   = s222,0
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10,0
air.velocity = -3,-3
air.fall = 1
fall.recover = 0
envshake.ampl=4
envshake.time=6

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +39) , floor(p2dist y/2 -26)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.4
;Size.YScale = 0.4
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-29), floor(p2dist y/2 -29)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 氷柱割り(キャンセル版)
[Statedef 251]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 60
ctrl = 0
velset = 0,0
anim = 251
sprpriority = 2

[state a]
type = posadd
trigger1 = animelemtime(4) = 0
x = 8

[state a]
type = posadd
trigger1 = animelemtime(4) = 1
x = 6

[state a]
type = posadd
trigger1 = animelemtime(4) = 2
x = 4

[state a]
type = posadd
trigger1 = animelemtime(4) = 3
x = 2

[State 240, 1]
type = PlaySnd
trigger1 = Time = 0
value = 221, 0
channel = 10

[State 200, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 200, 1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = hard
damage    = 69
getpower = 106,106
guardflag = M
pausetime = 13,14
priority = 5, Hit
sparkno = s-1
sparkxy = -15,-29
hitsound   = s222,0
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10,0
air.velocity = -10,0
air.fall = 1
fall.recover = 0
envshake.ampl=5
envshake.time=6

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +39) , floor(p2dist y/2 -26)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.4
;Size.YScale = 0.4
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-29), floor(p2dist y/2 -29)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;屈み・弱・パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 30
ctrl = 0
anim = 400
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,0

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 201, 0
channel = 10

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 29
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = M
getpower = 60,60
pausetime = 15,16
sparkno = s-1
sparkxy = -10,-47
hitsound   = s202,0
guard.sparkno = s-1
guardsound = s120,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 11
ground.velocity = -3
air.velocity = -2.5,-3

[State 400, 3]
type = CtrlSet
trigger1 = animelem = 8
value = 1

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7000
pos = floor(p2dist x/2 +25) , floor(p2dist y/2 -55)
postype = p1
stateno = 7000
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7010
pos = floor(p2dist x/2-25), floor(p2dist y/2 -55)
postype = p2
facing = -1
stateno = 7010
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み・強・パンチ
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 60
ctrl = 0
anim = 410
sprpriority = 2

[State 410, 1]
type = PlaySnd
trigger1 = Time = 0
value = 221, 0
channel = 10

[State 200, 1]
type = PlaySnd
trigger1 = Time = 2
value = 200, 1

[State 410, 2]
type = HitDef
trigger1 = time = 0
attr = C, NA
damage    = 78
animtype  = Medium
hitflag = MAF
guardflag = M
pausetime = 15,16
getpower = 106,106
sparkno = s-1
sparkxy = -10,-83
hitsound   = s222,0
guard.sparkno = s-1
guardsound = s122,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7
air.velocity = -3,-6

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +28) , floor(p2dist y/2 -52)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-28), floor(p2dist y/2 -52)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み・弱・キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 30
ctrl = 0
anim = 430
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,0

[State 430, 1]
type = PlaySnd
trigger1 = Time = 0
value = 230, 0
channel = 10

[State 430, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 29
animtype  = Light
hitflag = MF
guardflag = L
pausetime = 13,15
sparkno = s-1
sparkxy = -10,-14
hitsound   = s224,0
getpower = 60,60
guard.sparkno = s-1
guardsound = s120,0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 11
ground.velocity = -4.5
air.velocity = -2,-2
down.velocity = -5,0
down.hittime = 20

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7000
pos = floor(p2dist x/2 +23) , floor(p2dist y/2 -7)
postype = p1
stateno = 7000
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7010
pos = floor(p2dist x/2-23), floor(p2dist y/2 -7)
postype = p2
facing = -1
stateno = 7010
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;特殊下段蹴り
[Statedef 437]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 60
ctrl = 0
anim = 420
sprpriority = 2

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 221, 0
channel = 10

[State 440, 2]
type = PlaySnd
trigger1 = Time = 4
value = 200, 3

[State 410, 2]
type = HitDef
trigger1 = time = 0
attr = C, NA
damage    = 65
animtype  = Medium
hitflag = MAF
guardflag = L
pausetime = 18,19
getpower = 106,10
sparkno = s-1
sparkxy = -10,-14
hitsound   = s225,0
guard.sparkno = s-1
guardsound = s122,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 12
ground.velocity = -10
air.velocity = -7,-6
envshake.ampl=3
envshake.time=3

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -10)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.4
;Size.YScale = 0.4
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-29), floor(p2dist y/2 -10)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み・強・キック
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 70
ctrl = 0
anim = 440
sprpriority = 2

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 221, 0
channel = 10

[State 440, 3]
type = HitDef
trigger1 = animelem = 4
trigger1 = movecontact = 0
attr = C, NA
damage    = 100
hitflag = MAF
guardflag = L
pausetime = 17,18
sparkno = s-1
getpower = 106,106
sparkxy = -15,-69
hitsound   = s225,0
guardsound = s121,0
guard.sparkno = s-1
ground.type = Trip
ground.slidetime = 21
ground.hittime  = 15
ground.velocity = -2,-4
air.velocity = -2,-4
guard.velocity = -5


[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -7)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-29), floor(p2dist y/2 -7)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;空中・弱・パンチ
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 30
ctrl = 0
anim = 600
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,0

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 201, 0
channel = 10

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 39
getpower = 50,0
guardflag = H
priority = 4
pausetime = 13,14
sparkno = s-1
sparkxy = -10,-62
hitsound   = s202,0
guard.sparkno = s-1
guardsound = s120,0
ground.type = low
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7000
pos = floor(p2dist x/2 +26) , floor(p2dist y/2 -69)
postype = p1
stateno = 7000
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7010
pos = floor(p2dist x/2-22), floor(p2dist y/2 -88)
postype = p2
facing = -1
stateno = 7010
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;斜め空中・弱・パンチ
[Statedef 605]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 40
ctrl = 0
anim = 605
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,0

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 201, 0
channel = 10

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 39
getpower = 50,0
guardflag = H
priority = 4
pausetime = 13,14
sparkno = s-1
sparkxy = -10,-62
hitsound   = s202,0
guard.sparkno = s-1
guardsound = s120,0
ground.type = low
ground.slidetime = 5
ground.hittime  = 8
ground.velocity = -4
air.velocity = -1.3,-3

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7000
pos = floor(p2dist x/2 +26) , floor(p2dist y/2 -69)
postype = p1
stateno = 7000
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7010
pos = floor(p2dist x/2-22), floor(p2dist y/2 -88)
postype = p2
facing = -1
stateno = 7010
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;空中・強・パンチ
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 60
ctrl = 0
anim = 610
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,2

[State 200, 1]
type = PlaySnd
trigger1 = Time = 2
value = 221, 0
channel = 10

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 88
guardflag = H
getpower = 80,0
priority = 5
pausetime = 14,15
sparkno = s-1
sparkxy = -10,-62
hitsound   = s222,0
guard.sparkno = s-1
guardsound = s122,0
animtype = Med
ground.type = low
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -5
air.velocity = -3,-4

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +27) , floor(p2dist y/2 -92)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-27), floor(p2dist y/2 -102)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;斜め空中・強・パンチ
[Statedef 615]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 60
ctrl = 0
anim = 615
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,2

[State 200, 1]
type = PlaySnd
trigger1 = Time = 2
value = 221, 0
channel = 10

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 88
guardflag = H
getpower = 80,0
priority = 5
pausetime = 15,16
sparkno = s-1
sparkxy = -10,-62
hitsound   = s222,0
guard.sparkno = s-1
guardsound = s122,0
animtype = Med
ground.type = low
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -5
air.velocity = -3,-4

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -72)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-27), floor(p2dist y/2 -80)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;空中・弱・キック
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 30
ctrl = 0
anim = 630
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,0

[State 630, 1]
type = PlaySnd
trigger1 = Time = 1
value = 230, 0
channel = 10

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 39
getpower = 50,0
guardflag = H
priority = 4
pausetime = 13,14
sparkno = s-1
sparkxy = -5,-67
hitsound   = s224,0
guard.sparkno = s-1
guardsound = s120,0
ground.type = low
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = -4
air.velocity = -2,-3

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7000
pos = floor(p2dist x/2 +16) , floor(p2dist y/2 -49)
postype = p1
stateno = 7000
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7010
pos = floor(p2dist x/2-16), floor(p2dist y/2 -88)
postype = p2
facing = -1
stateno = 7010
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;垂直空中・弱・キック
[Statedef 635]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 30
ctrl = 0
anim = 635
sprpriority = 2


[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,0

[State 630, 1]
type = PlaySnd
trigger1 = Time = 2
value = 230, 0
channel = 10

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 39
getpower = 50,0
guardflag = H
priority = 4
pausetime = 12,12
sparkno = s-1
sparkxy = -5,-30
hitsound   = s224,0
guard.sparkno = s-1
guardsound = s120,0
ground.type = low
ground.slidetime = 8
ground.hittime  = 11
ground.velocity = -4
air.velocity = -2,-3

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7000
pos = floor(p2dist x/2 +32) , floor(p2dist y/2 -72)
postype = p1
stateno = 7000
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7010
pos = floor(p2dist x/2-22), floor(p2dist y/2 -88)
postype = p2
facing = -1
stateno = 7010
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;空中・強・キック
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 60
ctrl = 0
anim = 640
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,2

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 221, 0
channel = 10

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 85
guardflag = H
getpower = 80,0
priority = 5
pausetime = 16,17
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,0
guard.sparkno = s-1
guardsound = s121,0
animtype = Med
ground.type = low
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -5
air.velocity = -3,-4

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -85)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-27), floor(p2dist y/2 -98)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;空中斜め・強・キック
[Statedef 645]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 60
ctrl = 0
anim = 645
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = random < 350
trigger1 = AnimElem = 1
value = 200,2

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 221, 0
channel = 10

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 88
guardflag = H
getpower = 80,0
priority = 5
pausetime = 16,17
sparkno = s-1
sparkxy = -10,-30
hitsound   = s225,0
guard.sparkno = s-1
guardsound = s121,0
animtype = Med
ground.type = low
ground.slidetime = 17
ground.hittime  = 20
ground.velocity = -5
air.velocity = -3,-4

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +32) , floor(p2dist y/2 -64)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-27), floor(p2dist y/2 -90)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
;空中ふっ飛ばし攻撃
[Statedef 690]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 100
ctrl = 0
anim = 690
sprpriority = 2

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 1
value = 200,2

[State 640, 2]
type = PlaySnd
trigger1 = Time = 0
value = 221, 0
channel = 10

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = hard
damage    = 122
getpower = 120,30
guardflag = H
pausetime = 14,14
sparkno = s-1
priority = 7
sparkxy = -15,-54
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -7,-4.5
air.velocity = -7,-4.8
fall = 1
fall.recover = 0
envshake.ampl=4
envshake.time=6

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -82)
postype = p1
stateno = 7001
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-27), floor(p2dist y/2 -90)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0

;---------------------------------------------------------------------------
;緊急回避前
[Statedef 700]
; type = S      S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
; movetype = I    Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
; physics = N   S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 700
velset = 0,0
sprpriority = 2

[State 290, 1]
type = poweradd
triggerall = time = 0
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
trigger3 = prevstateno = 152
trigger4 = prevstateno = 153
trigger5 = prevstateno = 154
value = -1000

[State 700, 2];無敵の状態を作る
type = NotHitBy
triggerall = 1
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
trigger3 = prevstateno = 152
trigger4 = prevstateno = 153
trigger5 = prevstateno = 154
value = SCA

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 1];無敵の状態を作る
type = hitBy
trigger1 = animelem = 9,<=0
value = SCA,NT,ST,HT

[state a]
type = playerpush
trigger1 = animelem = 7,<=0
value = 0

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 700, 0

[State 600, 1]
type = velset
trigger1 = Time = 0
x = 0

[State 600, 1]
type = velset
trigger1 = animelem = 3
x = 8

[State 600, 1]
type = velset
trigger1 = animelem = 7
x = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;緊急回避後ろ
[Statedef 701]
; type = S      S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
; movetype = I    Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
; physics = S   S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 701
sprpriority = 2
velset = 0,0

[State 290, 1]
type = poweradd
triggerall = time = 0
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
trigger3 = prevstateno = 152
trigger4 = prevstateno = 153
trigger5 = prevstateno = 154
value = -1000

[State 700, 2];無敵の状態を作る
type = NotHitBy
triggerall = 1
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
trigger3 = prevstateno = 152
trigger4 = prevstateno = 153
trigger5 = prevstateno = 154
value = SCA

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 1];無敵の状態を作る
type = NotHitBy
trigger1 = animelem = 9,<=0
value = SCA

[state a]
type = playerpush
trigger1 = animelem = 8,<= 0
value = 0

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 700, 0

[State 600, 1]
type = velset
trigger1 = Time = 0
x = 0

[State 600, 1]
type = velset
trigger1 = animelem = 4
x = -7.5

[State 600, 1]
type = velset
trigger1 = animelem = 8
x = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ダウン回避
[Statedef 702]
; type = S      S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
; movetype = I    Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
; physics = S   S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 702
sprpriority = 2
velset = 0,0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 1];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[state a]
type = playerpush
trigger1 = animelem = 5,<=0
value = 0

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 700, 0

[State 600, 1]
type = velset
trigger1 = Time = 0
x = -6

[State 600, 1]
type = veladd
trigger1 = vel x <= 0
trigger1 = gametime % 2
x = 0.4

[state a]
type = velset
trigger1 = vel x >= 0
x = 0


[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 大外刈り
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 150
velset = 0,0
anim = 1800
ctrl = 0

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
Trigger1 = p2stateno != 150 && 151 && 152 && 153 && 130 && 131 && 140
attr = S, NT          ;ｓ：立ち　ｎ：通常　ｔ：投げ
hitflag = M-          ;コンボの途中から投げが入らないよう設定してある
priority = 7, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
;p1facing = ifelse (command = "holdfwd", -1, 1) ;前を押したらターンする設定
p2facing = 1          ;？
p1stateno = 1805       ;投げが成功した場合の移動する１Ｐのステート
p2stateno = 1810       ;投げが成功した場合の移動する２Ｐのステート
;hitsound = S800,0
fall = 1              ;落ちる力を２Ｐにかけるか

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1



; 大外刈り・投げ
[Statedef 1805]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
anim = 1805
ctrl = 0

[state a]
type = playsnd
trigger1 = animelem = 2
value = 800,1

[state a]
type = playsnd
trigger1 = animelem = 9
value = 225,0

[state a]
type = playsnd
trigger1 = animelem = 12
value = 850,2

[state a]
type = playsnd
trigger1 = animelem = 7
value = 777,23

[state a]
type = playsnd
trigger1 = animelem = 17
value = 777,21;1550,1

[state a]
type = playsnd
trigger1 = animelem = 16
value = 777,22

[State 1020, 4]
type = EnvShake
trigger1 = animelem = 12
trigger2 = animelem = 17
time = 10
ampl = -5
freq = 95
phase = 90

[State 1000, 5];1
type = Explod
trigger1 = animelem = 2
anim = 7081
sprpriority = 1
postype = p1
velset = 0,0
pos = 36,-82
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5];1
type = Explod
trigger1 = animelem = 9
anim = 30002
sprpriority = 3
postype = p1
velset = 0,0
pos = 31,-28
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State 1000, 5];2
type = Explod
trigger1 = animelem = 17
anim = 30002
sprpriority = 3
postype = p1
velset = 0,0
pos = 93,-6
bindtime = 1
supermove = 1
under = 0
ownpal = 1

[State explod];エフェクト
type = Explod
trigger1 = animelem = 12
anim = 6250
id = 6250
sprpriority = -3
postype = p1
pos = 70,0
bindtime = 1
supermove = 0
scale = 0.5,0.55
under = 0
ownpal = 1

;:::相手

[State 801, 2]
type = TargetBind
trigger1 = time = 0
pos = 36,0

[State 801, 2]
type = TargetBind
trigger1 = animelem = 1
trigger2 = animelem = 4
pos = 36,0

[State 801, 2]
type = TargetBind
trigger1 = animelem = 3
pos = 40,0

[State 801, 2]
type = TargetBind
trigger1 = animelem = 5
pos = 32,0

[State 801, 2]
type = TargetBind
trigger1 = animelem = 6
pos = 44,-16

[State 801, 2]
type = TargetBind
trigger1 = animelem = 7
pos = 48,-8

[State 801, 2]
type = TargetBind
trigger1 = animelem = 8
pos = 44,0

[State 801, 2]
type = TargetBind
trigger1 = animelem = 9
pos = 13,-43

[State 801, 2]
type = TargetBind
trigger1 = animelem = 10
pos = 34,-51

[State 801, 2]
type = TargetBind
trigger1 = animelem = 11
pos = 59,0

[State 801, 2]
type = TargetBind
trigger1 = animelem = 12
pos = 80,0


[state a]
type = targetlifeadd
trigger1 = animelem = 9
value = -49
kill = 0

[state a]
type = targetlifeadd
trigger1 = animelem = 12
value = -49
kill = 0

[state a]
type = targetlifeadd
trigger1 = animelem = 17
value = -49


;:::相手

[state a]
type = posadd
trigger1 = animelem = 19
x = 48

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = time = 0
edge = 103,0


[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;投げられている相手
[Statedef 1810]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1810

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = turn
trigger1 = animelem = 13

[state a]
type = velset
trigger1 = animelem = 13
x = 3
y = -5

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
type = VelAdd
Trigger1 = animelem = 13,>= 0
y = .4

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 

;---------------------------------------------------------------------------
;巴投げ
[Statedef 850]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
Trigger1 = p2stateno != 150 && 151 && 152 && 153 && 130 && 131 && 140
attr = S, NT          ;ｓ：立ち　ｎ：通常　ｔ：投げ
hitflag = M-          ;コンボの途中から投げが入らないよう設定してある
priority = 7, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
;p1facing = ifelse (command = "holdfwd", -1, 1) ;前を押したらターンする設定
p2facing = 1          ;？
p1stateno = 851       ;投げが成功した場合の移動する１Ｐのステート
p2stateno = 855       ;投げが成功した場合の移動する２Ｐのステート
;hitsound = S800,0
fall = 1              ;落ちる力を２Ｐにかけるか

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;投げている自分
[Statedef 851]
type    = S
movetype= A
physics = N
anim = 851
sprpriority = 5

[state a]
type = turn
trigger1 = animtime = 0

;---------------------[サウンド]
[State 810, Grab Sound]
type = PlaySnd
trigger1 = AnimElem = 2
value = 800, 1

[State 810, Grab Sound];放り投げ
type = PlaySnd
trigger1 = AnimElem = 5
value = 777, 0

[State 810, Grab Sound];おうりゃ
type = PlaySnd
trigger1 = AnimElem = 5
value = 801, 0

;---------------------[エフェクト]
[State 1000, 5]
type = Explod
trigger1 = animelem = 2
anim = 7080
sprpriority = 3
postype = p1
velset = 0,0
pos = 18,-76
bindtime = 1
supermove = 1
under = 0
ownpal = 1

;---------------------[位置設定]
[state a]
type = posadd
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 6
x = -16


;---------------------[相手の制御]
[State 801, 2]
type = TargetBind
trigger1 = animelem = 1
pos = 20,0

[State 801, 2]
type = TargetBind
trigger1 = animelem = 2
pos = 12,-8

[State 801, 2]
type = TargetBind
trigger1 = animelem = 3
pos = -4,-20

[State 801, 2]
type = TargetBind
trigger1 = animelem = 4
pos = -11,-69

[State 801, 2]
type = TargetBind
trigger1 = animelem = 5
pos = -55,-47


[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = animelemtime(5) = 3
value = -167

[State 1020, 4]
type = PlaySnd
trigger1 = animelemtime(8) = 5
value = 777, 1

;:::相手

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = animelem = 5
edge = 60,60

[State 821, 3] 
type = changeState
trigger1 = animtime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
;投げられている相手
[Statedef 855]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 855

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = velset
trigger1 = animelem = 6
x = 3
y = -4

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
type = VelAdd
Trigger1 = animelem = 6,>= 0
y = .4

[State 1020, 4]
type = EnvShake
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
time = 12
ampl = -5
freq = 105
phase = 105

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;必殺技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;疾風瞬歩・弱
[Statedef 900]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 105
velset = 0,0
anim = 900
ctrl = 0

;---------------------[演出]

[State 1000, Afterimage]
type = Afterimage
trigger1 = animelem = 4,=0
time = 9
trans = add1
length = 4
timeGap = 3
frameGap = 1
palBright = 0, 0, 0
palContrast = 128, 128, 128
palAdd = 0, 0, 0
palMul = 1, 1, 1

[state a]
type = playsnd
trigger1 = animelem = 4,=0
value = 777,7

[state a]
type = playsnd
trigger1 = animelem = 4,=1
value = 777,8

[State explod];エフェクト
type = Explod
trigger1 = animelem = 4,=0
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = 26,9
bindtime = 1
supermove = 0
scale = 1.2,0.85
under = 0
ownpal = 1
;---------------------[移動]

[state a]
type = velset
trigger1 = animelem = 3
x = 0

[state a]
type = velset
trigger1 = animelem = 4
x = 3

[state a]
type = velset
trigger1 = animelem = 5
x = 22

[state a]
type = velset
trigger1 = animelem = 6
x = 32

[state a]
type = velset
trigger1 = animelem = 6,=3
x = 0

[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;疾風瞬歩・強
[Statedef 910]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 105
velset = 0,0
anim = 901
ctrl = 0

;---------------------[演出]

[State 1000, Afterimage]
type = Afterimage
trigger1 = animelem = 4,=0
time = 12
trans = add1
length = 4
timeGap = 2
frameGap = 1
palBright = 0, 0, 0
palContrast = 128, 128, 128
palAdd = 0, 0, 0
palMul = 1, 1, 1

[state a]
type = playsnd
trigger1 = animelem = 4,=0
value = 777,7

[state a]
type = playsnd
trigger1 = animelem = 4,=1
value = 777,8

[State explod];エフェクト
type = Explod
trigger1 = animelem = 4,=0
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = 26,9
bindtime = 1
supermove = 0
scale = 1.3,0.95
under = 0
ownpal = 1

;---------------------[移動]

[state a]
type = velset
trigger1 = animelem = 3
x = 0

[state a]
type = velset
trigger1 = animelem = 4
x = 3

[state a]
type = velset
trigger1 = animelem = 5
x = 28

[state a]
type = velset
trigger1 = animelem = 6
x = 37

[state a]
type = velset
trigger1 = animelem = 6,=3
x = 0

[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;EX・疾風瞬歩
[Statedef 920]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 105
velset = 0,0
anim = 902
ctrl = 0

;---------------------[光るぜ]
[State a];点滅
type = palfx
trigger1 = gametime % 2 = 0
time = 1
add = 42,76,154
color = 124
ignorehitpause = 1

[State a];点滅
type = palfx
trigger1 = gametime % 2 = 1
time = 1
add = 16,33,72
color = 256
ignorehitpause = 1

[State 1030, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 15
trans = add
timegap = 1
framegap = 4
length = 15
palbright = 0,0,64
palcontrast = 120,120,168
paladd = 0,0,0
pausemovetime = 999

[State EX]
type = Explod
trigger1 = time = 0
anim = 6110
id = 6110
sprpriority = 20
postype = p1
pos = 0,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48
pausemovetime = 999

[State EX]
type = Explod
trigger1 = time = 0
anim = 6120
id = 6100
sprpriority = -20
postype = p1
pos = 0,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48
pausemovetime = 999

;---------------------[演出]

[State 2000, 2]
type = Pause
trigger1 = time = 0
time = 7
movetime = 7

[state a];おりゃァ
type = playsnd
trigger1 = animelem = 1
value = 777,2
channel = 6

[state a];無駄だ！
type = playsnd
trigger1 = animelem = 1
value = 700,0


[state a]
type = playsnd
trigger1 = animelem = 4,=0
value = 777,7

[state a]
type = playsnd
trigger1 = animelem = 4,=1
value = 777,8

[State explod];エフェクト
type = Explod
trigger1 = animelem = 4,=0
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = 26,9
bindtime = 1
supermove = 0
scale = 1.3,0.95
under = 0
ownpal = 1

;---------------------[移動]

[state a]
type = velset
trigger1 = animelem = 3
x = 0

[state a]
type = velset
trigger1 = animelem = 4
x = 18

[state a]
type = velset
trigger1 = animelem = 5
x = 40

[state a]
type = velset
trigger1 = animelem = 6
x = 52

[state a]
type = velset
trigger1 = animelem = 6,=3
x = 0

[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;弱・功夫双手突き
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 85
velset = 0,0
anim = 1000
ctrl = 0

;---------------------[投げ無敵]

[State 40,1]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

;---------------------[効果音]
[state a];おりゃァ
type = playsnd
trigger1 = animelem = 2
value = 1400,2

[state a];
type = playsnd
trigger1 = animelem = 5
value = 1300,1

;---------------------[速度計算]
[state a]
type = velset
trigger1 = animelem = 3
x = 3

[state a]
type = velset
trigger1 = animelem = 4
x = 6

[state a]
type = velset
trigger1 = animelem = 5,=1
x = 15

[state a]
type = velset
trigger1 = animelem = 5,=4
x = 8

[state a]
type = velset
trigger1 = animelem = 6
x = 0

[State explod];エフェクト
type = Explod
trigger1 = animelem = 4,=2
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = 0,10
bindtime = 1
supermove = 0
scale = 0.9,0.75
under = 0
ownpal = 1

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = hard
damage    = 75,10
getpower = 106,16
guardflag = M
pausetime = 15,13
sparkno = s-1
sparkxy = -20,-69
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -10,0
air.velocity = -6,-3
fall = 0
air.fall = 1
fall.recover = 0
envshake.ampl=6
envshake.time=7
ground.cornerpush.veloff = -14

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +46) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに移行]

;[state a] 
;type = changestate
;trigger1 = command = "EX疾風瞬歩"
;value = 920
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱疾風瞬歩"
value = 900
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強疾風瞬歩"
value = 910
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫遠当て"
;value = 1052
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫遠当て"
value = 1050
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫遠当て"
value = 1051
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫空連脚"
;value = 1302
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫空連脚"
value = 1300
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫空連脚"
value = 1301
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫飛天脚"
;value = 1356
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫飛天脚"
value = 1350
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫飛天脚"
value = 1355
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "特足払い"
value = 1500
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "特肘打ち"
value = 1501
ctrl = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;強・功夫双手突き
[Statedef 1001]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 85
velset = 0,0
anim = 1001
ctrl = 0

;---------------------[投げ無敵]

[State 40,1]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

;---------------------[効果音]
[state a];おりゃァ
type = playsnd
trigger1 = animelem = 2
value = 1400,2

[state a];
type = playsnd
trigger1 = animelem = 5
value = 1300,1

;---------------------[速度計算]
[state a]
type = velset
trigger1 = animelem = 5
x = 9

[state a]
type = velset
trigger1 = animelem = 6
x = 10

[state a]
type = velset
trigger1 = animelem = 5,=1
x = 25

[state a]
type = velset
trigger1 = animelem = 5,=4
x = 10

[state a]
type = velset
trigger1 = animelem = 6
x = 0

[State explod];エフェクト
type = Explod
trigger1 = animelem = 4,=3
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = 24,13
supermove = 0
scale = 0.9,0.8
under = 0
ownpal = 1

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = hard
damage    = 85,10
getpower = 106,16
guardflag = M
pausetime = 15,13
sparkno = s-1
sparkxy = -20,-69
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -11,0
air.velocity = -6,-3
fall = 0
air.fall = 1
fall.recover = 0
envshake.ampl=6
envshake.time=7
ground.cornerpush.veloff = -14

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +46) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに移行]

;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫空連脚"
;value = 1302
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫空連脚"
value = 1301
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫空連脚"
value = 1300
ctrl = 0


[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫飛天脚"
value = 1350
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫飛天脚"
value = 1355
ctrl = 0

;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫飛天脚"
;value = 1356
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "特足払い"
value = 1500
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "特肘打ち"
value = 1501
ctrl = 0


[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;EX・功夫双手突き
[Statedef 1002]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= -500
velset = 0,0
anim = 1000
ctrl = 0

;---------------------[投げ無敵]

[State 40,1]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

;---------------------[光るぜ]
[State a];点滅
type = palfx
trigger1 = gametime % 2 = 0
time = 1
add = 42,76,154
color = 124
ignorehitpause = 1

[State a];点滅
type = palfx
trigger1 = gametime % 2 = 1
time = 1
add = 16,33,72
color = 256
ignorehitpause = 1

[State 1030, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 20
trans = add
timegap = 1
framegap = 4
length = 15
palbright = 0,0,64
palcontrast = 120,120,168
paladd = 0,0,0

[State EX]
type = Explod
trigger1 = time = 0
anim = 6110
id = 6110
sprpriority = 20
postype = p1
pos = 31,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[State EX]
type = Explod
trigger1 = time = 0
anim = 6120
id = 6100
sprpriority = -20
postype = p1
pos = 31,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

;---------------------[効果音]
[state a]
type = playsnd
trigger1 = animelem = 2
value = 1400,0

[state a]
type = playsnd
trigger1 = animelem = 1
value = 777,2

[state a];
type = playsnd
trigger1 = animelem = 5
value = 1300,1

;---------------------[速度計算]
[state a]
type = velset
trigger1 = animelem = 3
x = 10

[state a]
type = velset
trigger1 = animelem = 4
x = 11

[state a]
type = velset
trigger1 = animelem = 5,=1
x = 27

[state a]
type = velset
trigger1 = animelem = 5,=4
x = 12

[state a]
type = velset
trigger1 = animelem = 6
x = 0

[State explod];エフェクト
type = Explod
trigger1 = animelem = 3,=2
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = 15,13
bindtime = 1
supermove = 0
scale = 1.4,1.15
under = 0
ownpal = 1

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = hard
damage    = 101,10
getpower = 106,16
guardflag = M
pausetime = 17,13
sparkno = s-1
sparkxy = -20,-69
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 24
ground.velocity = -15,0
air.velocity = -7,-3
fall = 0
air.fall = 1
fall.recover = 0
envshake.ampl=7
envshake.time=9
ground.cornerpush.veloff = -14

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +50) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫空連脚"
;value = 1302
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫空連脚"
value = 1301
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫空連脚"
value = 1300
ctrl = 0


[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫飛天脚"
value = 1350
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫飛天脚"
value = 1355
ctrl = 0

;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫飛天脚"
;value = 1356
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "特足払い"
value = 1500
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "特肘打ち"
value = 1501
ctrl = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 弱・功夫遠当て
[Statedef 1050]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 90
velset = 0,0
anim = 1050
ctrl = 0

;---------------------[]
[state a]
type = playsnd
trigger1 = time = 0
value = 1000,0

[state a]
type = playsnd
trigger1 = animelem = 6
value = 1050,0

[state a]
type = playsnd
trigger1 = animelem = 6
value = 1050,1

[State 1020, 4]
type = EnvShake
trigger1 = animelem = 6
time = 10
ampl = -4
freq = 95
phase = 95

[state a]
type = varset
trigger1 = enemy,movetype = H
trigger1 = animelemtime(9) = 0
v = 4
value = 10

[State explod];エフェクト
type = Explod
trigger1 = animelem = 6,=2
anim = 6250
id = 6250
sprpriority = -3
postype = p1
pos = 50,-2
bindtime = 1
supermove = 0
scale = 0.3,0.3
under = 0
ownpal = 1

[State 1000, 2]
type = Projectile
trigger1 = AnimElemtime(6) = 1
attr = S, SP
projanim = 1060
projhitanim = -1
projid = 1050
projpriority = 7
projsprpriority = 7
projedgebound = 220
projremovetime = 15
hitflag =HA,MA,LA,AA
postype = p1
getpower = 0,0
offset = 0,0
velocity = 0
damage = 36*2,5
animtype = Hard
guardflag = M
pausetime = 0,13
sparkno = -1
guard.sparkno = -1;s-1
sparkxy = Floor(enemy,pos x - pos x),-50
hitsound = S1150,1
guardsound = S121,0
ground.type = high
ground.slidetime = 11
ground.hittime = 9
ground.velocity = -9,0
air.velocity = -4,-4
fall = 0
air.fall = 1
fall.recover = 0
ownpal = 1

[State 1000, 5];ヒットエフェクト
type = Explod
trigger1 = animelem = 6,>= 1
trigger1 = animelem = 7,<=4
trigger1 = p2movetype = H
trigger1 = p2statetype != L
trigger1 = enemy,stateno != [120,159]
trigger1 = numproj = 0
anim = 30002
sprpriority = 3
postype = p2
velset = 0,0
pos = 0,-72
bindtime = 1
supermove = 1
persistent = 0
ignorehitpause = 1
under = 0
ownpal = 1

[State 1000, 5];ヒットエフェクト
type = Explod
trigger1 = p2movetype = H
trigger1 = enemy,stateno = [120,159]
anim = 30040
sprpriority = 3
postype = p2
velset = 0,0
scale = 0.5,0.5
pos = 5,-66
bindtime = 1
supermove = 1
persistent = 0
ignorehitpause = 1
under = 0
ownpal = 1


[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;強・功夫遠当て
[Statedef 1051]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 90
velset = 0,0
anim = 1051
ctrl = 0

[state a]
type = playsnd
trigger1 = time = 0
value = 1000,0

[state a]
type = playsnd
trigger1 = animelem = 6
value = 1050,0

[state a]
type = playsnd
trigger1 = animelem = 6
value = 1050,1

[State 1020, 4]
type = EnvShake
trigger1 = animelem = 6
time = 10
ampl = -4
freq = 95
phase = 95

[state a]
type = varset
trigger1 = enemy,movetype = H
trigger1 = animelemtime(9) = 0
v = 4
value = 10

[State explod];エフェクト
type = Explod
trigger1 = animelem = 6,=2
anim = 6250
id = 6250
sprpriority = -3
postype = p1
pos = 50,-2
bindtime = 1
supermove = 0
scale = 0.35,0.35
under = 0
ownpal = 1

[State 1000, 2]
type = Projectile
trigger1 = AnimElemtime(6) = 1
attr = S, SP
projanim = 1061
projhitanim = -1
projid = 1050
projpriority = 7
projsprpriority = 7
projedgebound = 220
projremovetime = 16
hitflag =HA,MA,LA,AA
postype = p1
getpower = 0,0
offset = 0,0
velocity = 0
damage = 37*2,5
animtype = Hard
guardflag = M
pausetime = 0,13
sparkno = -1;s-1
guard.sparkno = -1;s-1
sparkxy = Floor(enemy,pos x - pos x),-50
hitsound = S1150,1
guardsound = S121,0
ground.type = high
ground.slidetime = 14
ground.hittime = 13
ground.velocity = -9,0
air.velocity = -4,-4
air.fall = 1
fall = 0
fall.recover = 0
ownpal = 1

[State 1000, 5];ヒットエフェクト
type = Explod
trigger1 = animelem = 6,>= 1
trigger1 = animelem = 7,<=4
trigger1 = p2movetype = H
trigger1 = p2statetype != L
trigger1 = enemy,stateno != [120,159]
trigger1 = numproj = 0
anim = 30002
sprpriority = 3
postype = p2
velset = 0,0
pos = 0,-72
bindtime = 1
supermove = 1
persistent = 0
ignorehitpause = 1
under = 0
ownpal = 1

[State 1000, 5];ヒットエフェクト
type = Explod
trigger1 = p2movetype = H
trigger1 = enemy,stateno = [120,159]
anim = 30040
sprpriority = 3
postype = p2
velset = 0,0
scale = 0.5,0.5
pos = 5,-66
bindtime = 1
supermove = 1
persistent = 0
ignorehitpause = 1
under = 0
ownpal = 1

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;EX・功夫遠当て
[Statedef 1052]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= -500
velset = 0,0
anim = 1051
ctrl = 0

;---------------------[無敵]
[State 1];無敵の状態を作る
type = NotHitBy 
trigger1 = animelem = 7,<=0
value = SCA
time = 1

;---------------------[光るぜ]
[State a];点滅
type = palfx
trigger1 = gametime % 2 = 0
time = 1
add = 42,76,154
color = 124
ignorehitpause = 1

[State a];点滅
type = palfx
trigger1 = gametime % 2 = 1
time = 1
add = 16,33,72
color = 256
ignorehitpause = 1

[State 1030, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 22
trans = add
timegap = 1
framegap = 4
length = 15
palbright = 0,0,64
palcontrast = 120,120,168
paladd = 0,0,0

[State EX]
type = Explod
trigger1 = time = 0
anim = 6110
id = 6110
sprpriority = 20
postype = p1
pos = 0,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[State EX]
type = Explod
trigger1 = time = 0
anim = 6120
id = 6100
sprpriority = -20
postype = p1
pos = 0,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

;---------------------[効果音]
[state a];おりゃァ
type = playsnd
trigger1 = animelem = 1
value = 777,2
channel = 6

[state a]
type = playsnd
trigger1 = time = 1
value = 1000,3

[state a]
type = playsnd
trigger1 = animelem = 6
value = 1050,0
channel = 7

[state a]
type = playsnd
trigger1 = animelem = 6
value = 1050,1
channel = 8

[State 1020, 4]
type = EnvShake
trigger1 = animelem = 6
time = 10
ampl = -4
freq = 105
phase = 105

[state a]
type = varset
trigger1 = enemy,movetype = H
trigger1 = animelemtime(9) = 0
v = 4
value = 7

[State explod];エフェクト
type = Explod
trigger1 = animelem = 6,=2
anim = 6250
id = 6250
sprpriority = -3
postype = p1
pos = 50,-2
bindtime = 1
supermove = 0
scale = 0.42,0.42
under = 0
ownpal = 1

[State 1000, 2]
type = Projectile
trigger1 = AnimElemtime(6) = 1
attr = S, SP
projanim = 1061
projhitanim = -1
projid = 1050
projpriority = 7
projsprpriority = 7
projedgebound = 220
projremovetime = 16
hitflag =HA,MA,LA,AA
postype = p1
getpower = 0,0
offset = 0,0
velocity = 0
damage = 39*2,35
animtype = Hard
guardflag = M
pausetime = 0,13
sparkno = -1;s-1
guard.sparkno = -1;s-1
sparkxy = Floor(enemy,pos x - pos x),-50
hitsound = S1200,2
guardsound = S121,0
ground.type = high
ground.slidetime = 14
ground.hittime = 12
ground.velocity = -16,-6
air.velocity = -16,-5
air.fall = 1
fall = 1
fall.recover = 0
ownpal = 1
p2stateno = 5700
p2facing = 1

[State 1000, 5];ヒットエフェクト
type = Explod
trigger1 = animelem = 6,>= 1
trigger1 = animelem = 7,<=4
trigger1 = p2movetype = H
trigger1 = p2statetype != L
trigger1 = enemy,stateno != [120,159]
trigger1 = numproj = 0
anim = 30002
sprpriority = 3
postype = p2
velset = 0,0
pos = 0,-72
bindtime = 1
supermove = 1
persistent = 0
ignorehitpause = 1
under = 0
ownpal = 1

[State 1000, 5];ヒットエフェクト
type = Explod
trigger1 = p2movetype = H
trigger1 = enemy,stateno = [120,159]
anim = 30040
sprpriority = 3
postype = p2
velset = 0,0
scale = 0.55,0.55
pos = 5,-66
bindtime = 1
supermove = 1
persistent = 0
ignorehitpause = 1
under = 0
ownpal = 1

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 弱飛翔！功夫アッパー
[Statedef 1100]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 91
velset = 0,0
anim = 1100
ctrl = 0

;---------------------[無敵の状態を作る]
[State 1];
type = NotHitBy
trigger1 = animelem = 4,<=2
value = SCA

;---------------------[効果音]
[state a];おりゃ
type = playsnd
trigger1 = time = 2
value = 1100,0

[state a]
type = playsnd
trigger1 = animelem = 3,=2
value = 777,3

;---------------------[ステートの状態変更、速度計算]
[state a]
type = statetypeset
trigger1 = animelem = 4
value = A

[state a]
type = velset
trigger1 = animelem = 4
x = 2
y = -5.8

[state a]
type = veladd
trigger1 = animelem = 4,>=0
y = 0.43

[state a]
type = veladd
trigger1 = vel x > 0
x = -0.1

[state a]
type = velset
trigger1 = vel x <=0
x = 0

[state a]
type = posadd
trigger1 = animelem = 5
trigger2 = animelem = 6
x = 8

[State 1040, explod]
type = explod
trigger1 = animElem = 3,=1
anim = 6220
sprpriority = -3
ownpal = 1
removeongethit = 1
pos = 15, 8
scale = 0.8,0.8

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = animElem = 3
trigger1 = movehit = 0
attr = A, SA
animtype  = hard
damage    = 88,10
getpower = 105,15
guardflag = M
pausetime = 9,11
sparkno = s-1
sparkxy = -20,-88
hitsound   = s1200,2
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = -2,-8.8
air.velocity = -2,-8.8
envshake.ampl=3
envshake.time=5
fall = 1
air.fall = 1
fall.recover = 0

[State 2];攻撃の指定
type = HitDef
trigger1 = animElem = 4
trigger1 = p2movetype != H
trigger1 = p2statetype != L
trigger1 = enemy,stateno != [120,159]
attr = A, SA
animtype  = hard
damage    = 88,10
getpower = 45,45
guardflag = M
pausetime = 14,15
sparkno = s-1
sparkxy = -20,-88
hitsound   = s1200,2
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = -2,-8.5
air.velocity = -2,-8.5
envshake.ampl=3
envshake.time=5
fall = 1
air.fall = 1
fall.recover = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -73)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-27), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

;---------------------[着地ステートに移行]
[state a] 
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1105


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 強飛翔！功夫アッパー
[Statedef 1101]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 91
velset = 0,0
anim = 1101
ctrl = 0

;---------------------[無敵の状態を作る]
[State 1];
type = NotHitBy
trigger1 = animelem = 4,<=0
value = SCA

;---------------------[効果音]
[state a];おりゃ
type = playsnd
trigger1 = time = 2
value = 1100,0

[state a]
type = playsnd
trigger1 = animelem = 3,=3
value = 777,3

;---------------------[ステートの状態変更、速度計算]
[state a]
type = statetypeset
trigger1 = animelem = 4
value = A

[state a]
type = velset
trigger1 = animelem = 4
x = 5.4
y = -9.5

[state a]
type = veladd
trigger1 = animelem = 4,>=2
y = 0.48

[state a]
type = veladd
trigger1 = vel x > 0
x = -0.3

[state a]
type = velset
trigger1 = vel x <=0
x = 0

[state a]
type = posadd
trigger1 = animelem = 5
trigger2 = animelem = 6
x = 8

[State 1040, explod]
type = explod
trigger1 = animElem = 3,=1
anim = 6220
sprpriority = 3
ownpal = 1
removeongethit = 1
pos = 12, 8
scale = 0.9,0.9

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = hard
damage    = 43,10
getpower = 45,5
guardflag = M
pausetime = 16,16
sparkno = s-1
sparkxy = -20,-68
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -7,0
air.velocity = -4,-4.5
envshake.ampl=6
envshake.time=9
fall = 0
air.fall = 1
fall.recover = 0

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 4
attr = A, SA
animtype  = hard
damage    = 58,10
getpower = 105,15
guardflag = M
pausetime = 14,15
sparkno = s-1
sparkxy = -20,-88
hitsound   = s1200,2
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = -2,-9.5
air.velocity = -2,-9.5
envshake.ampl=5
envshake.time=8
fall = 1
air.fall = 1
fall.recover = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit 
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) <= 0
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -73)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit 
trigger1 = AnimElemTime(4) >= 0
trigger1 = AnimElemTime(5) <= 0
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +36) , floor(p2dist y/2 -83)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-27), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(4) >= 0
trigger1 = AnimElemTime(5) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-27), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

;---------------------[着地ステートに移行]
[state a] 
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1105


;着地
[Statedef 1105]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1105
ctrl = 0

;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = prevstateno = 1101
value = 1106

;---------------------[ポジション設定]
[state a]
type = posset
trigger1 = time = 0
y = 0

;---------------------[効果音]
[state a];着地
type = playsnd
trigger1 = time = 0
value = 40,0

;---------------------[立ちステートに移行]
[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; EX飛翔！功夫アッパー
[Statedef 1150]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= -500
velset = 0,0
anim = 1150
ctrl = 0

;---------------------[無敵]

[State 1];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------[光るぜ]
[State a];点滅
type = palfx
trigger1 = gametime % 2 = 0
time = 1
add = 42,76,154
color = 124
ignorehitpause = 1

[State a];点滅
type = palfx
trigger1 = gametime % 2 = 1
time = 1
add = 16,33,72
color = 256
ignorehitpause = 1

[State 1030, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 18
trans = add
timegap = 1
framegap = 4
length = 15
palbright = 0,0,64
palcontrast = 120,120,168
paladd = 0,0,0

[State EX]
type = Explod
trigger1 = time = 0
anim = 6110
id = 6110
sprpriority = 20
postype = p1
pos = 5,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[State EX]
type = Explod
trigger1 = time = 0
anim = 6120
id = 6100
sprpriority = -20
postype = p1
pos = 5,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 9
attr = S, SA
animtype  = up
damage    = 15*2,4
getpower = 45,15
guardflag = M
pausetime = 21,26
guard.pausetime = 13,13
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = 0,0
air.velocity = 0,-8
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 20
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 11
attr = S, SA
animtype  = up
damage    = 18*2,4
getpower = 15,15
guardflag = M
pausetime = 21,26
guard.pausetime = 13,13
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = 0,0
air.velocity = 0,-8
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 20
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(9) >= 0
trigger1 = AnimElemTime(10) <= 0
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +30) , floor(p2dist y/2 -73)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(11) >= 0
trigger1 = AnimElemTime(12) <= 0
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +32) , floor(p2dist y/2 -83)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(9) >= 0
trigger1 = AnimElemTime(10) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-27), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(10) >= 0
trigger1 = AnimElemTime(11) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-27), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 1040, explod]
type = explod
trigger1 = animtime = 0
anim = 6220
sprpriority = 3
ownpal = 1
removeongethit = 1
pos = 8, 25
scale = 1,1

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

[state a]
type = playsnd
trigger1 = time = 0
value = 777,2
channel = 6

[state a]
type = playsnd
trigger1 = time = 0
value = 1150,3

[state a]
type = changestate
trigger1 = animtime = 0
value = 1155

;上昇
[Statedef 1155]
type    = A
movetype= A
physics = N
velset = 6,-8.8
anim = 1155
hitdefpersist = 1
ctrl = 0

[state a]
type = playsnd
trigger1 = time = 0
value = 1150,4

[state a]
type = playsnd
trigger1 = time = 0
value = 777,3

;---------------------[光るぜ]
[State a];点滅
type = palfx
trigger1 = time<=30
trigger1 = gametime % 2 = 0
time = 1
add = 42,76,154
color = 124
ignorehitpause = 1

[State a];点滅
type = palfx
trigger1 = time<=30
trigger1 = gametime % 2 = 1
time = 1
add = 16,33,72
color = 256
ignorehitpause = 1

[State 1030, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 17
trans = add
timegap = 1
framegap = 4
length = 15
palbright = 0,0,64
palcontrast = 120,120,168
paladd = 0,0,0

[State 1];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[State 3040, 7];画面フラッシュ
type = EnvColor
trigger1 = movehit = 1
persistent = 0
ignorehitpause = 1
time = 1
value = 255,255,255
under = 1

[state a]
type = playsnd
trigger1 = time = 0
value = 1150,0

[state a]
type = posadd
trigger1 = time = 0
x = 6
y = -18.4

[state a]
type = veladd
trigger1 = animelem = 2,<=0
x = -0.2

[state a]
type = veladd
trigger1 = 1;animelem = 2,>=0
y = 0.5

[state a]
type = velset
trigger1 = animelem = 2
x = 0

[State 2];攻撃の指定
type = HitDef
trigger1 = time = 0
attr = A, SA
animtype  = up
damage    = 62*2,4
getpower = 15,15
guardflag = M
pausetime = 27,28
guard.pausetime = 15,15
sparkno = s-1
sparkxy = -10,-65
hitsound   = s1200,2
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = -5,-10.3
air.velocity = -5,-10.3
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 20
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +28) , floor(p2dist y/2 -85)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.62
;Size.YScale = 0.62
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-27), floor(p2dist y/2 -75)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a] 
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 弱・功夫空連脚
[Statedef 1300]
type    = S
movetype= A
physics = N
juggle  = 7
poweradd= 106
velset = 0,0
anim = 1320
ctrl = 0

;---------------------[効果音]

[state a];おりゃ
type = playsnd
trigger1 = time = 0
value = 777,3

[state a];おりゃ
type = playsnd
trigger1 = animelem = 3,=4
value = 1300,1
channel = 7

[state a]
type = playsnd
trigger1 = time = 3
value = 1350,2

;---------------------[ステートの状態変更、速度計算]
[state a]
type = statetypeset
trigger1 = animelem = 2
value = A

[State 1030, 6]
type = velset
trigger1 = AnimElem = 2
x = 5
y = -0.8

[State 1030, 6]
type = velset
trigger1 = AnimElem = 6
x = 6

[State 1030, 7]
type = veladd
trigger1 = AnimElem = 6,> 3
y = .39

[State 1040, explod]
type = explod
trigger1 = animElem = 2,=1
anim = 6230
sprpriority = 3
ownpal = 1
removeongethit = 1
pos = -5, 20
scale = 0.75,0.6

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 3
attr = A, SA
animtype  = hard
damage    = 30,10
getpower = 61,11
guardflag = M
pausetime = 8,10
sparkno = s-1
sparkxy = -20,-52
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -5.5,-5.8
air.velocity = -5.5,-5
ground.slidetime = 15
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 6
attr = A, SA
animtype  = hard
damage    = 58,10
getpower = 61,11
guardflag = M
pausetime = 16,19
sparkno = s-1
sparkxy = -20,-63
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -8,-4.5
air.velocity = -8,-4.5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(5) >= 0
trigger1 = AnimElemTime(6) <= 0
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +32) , floor(p2dist y/2 -75)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(10) >= 0
trigger1 = AnimElemTime(11) <= 0
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +45) , floor(p2dist y/2 -83)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(5) >= 0
trigger1 = AnimElemTime(6) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(10) >= 0
trigger1 = AnimElemTime(11) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

;---------------------[着地ステートに移行]
[state a] 
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1305

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 強・功夫空連脚
[Statedef 1301]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= 106
velset = 0,0
anim = 1321
ctrl = 0

;---------------------[効果音]

[state a];おりゃ
type = playsnd
trigger1 = time = 0
value = 777,4

[state a];おりゃ
type = playsnd
trigger1 = animelem = 3,=4
value = 1300,1
channel = 7

[state a]
type = playsnd
trigger1 = time = 3
value = 1350,3

;---------------------[ステートの状態変更、速度計算]
[state a]
type = statetypeset
trigger1 = animelem = 2
value = A

[State 1030, 6]
type = velset
trigger1 = AnimElem = 2
x = 6.9
y = -5.6

[State 1030, 6]
type = velset
trigger1 = AnimElem = 6
x = 6

[State 1030, 7]
type = veladd
trigger1 = AnimElem = 2,> 3
y = .39

[State 1040, explod]
type = explod
trigger1 = animElem = 2,=4
anim = 6230
sprpriority = 3
ownpal = 1
removeongethit = 1
pos = -15, 35
scale = 0.75,0.6

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 3
attr = A, SA
animtype  = hard
damage    = 30,10
getpower = 61,61
guardflag = M
pausetime = 10,10
sparkno = s-1
sparkxy = -20,-52
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -7.5,-6
air.velocity = -7.5,-6
ground.slidetime = 15
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 6
attr = A, SA
animtype  = hard
damage    = 52,10
getpower = 61,61
guardflag = M
pausetime = 16,16
sparkno = s-1
sparkxy = -20,-63
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -10,-4.5
air.velocity = -10,-4.5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) <= 0
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +30) , floor(p2dist y/2 -76)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(6) >= 0
trigger1 = AnimElemTime(7) <= 0
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +45) , floor(p2dist y/2 -80)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(6) >= 0
trigger1 = AnimElemTime(7) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

;---------------------[着地ステートに移行]
[state a] 
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1305

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; EX・功夫空連脚
[Statedef 1302]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= -500
velset = 0,0
anim = 1322
ctrl = 0

;---------------------[光るぜ]
[State a];点滅
type = palfx
trigger1 = gametime % 2 = 0
time = 1
add = 42,76,154
color = 124
ignorehitpause = 1

[State a];点滅
type = palfx
trigger1 = gametime % 2 = 1
time = 1
add = 16,33,72
color = 256
ignorehitpause = 1

[State 1030, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 32
trans = add
timegap = 1
framegap = 4
length = 15
palbright = 0,0,64
palcontrast = 120,120,168
paladd = 0,0,0

[State EX]
type = Explod
trigger1 = time = 0
anim = 6110
id = 6110
sprpriority = 20
postype = p1
pos = 5,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[State EX]
type = Explod
trigger1 = time = 0
anim = 6120
id = 6100
sprpriority = -20
postype = p1
pos = 5,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

;---------------------[効果音]

[state a];おりゃァ
type = playsnd
trigger1 = animelem = 1
value = 777,2
channel = 6

[state a];おりゃ
type = playsnd
trigger1 = animelem = 1
value = 777,4

[state a];おりゃ
type = playsnd
trigger1 = animelem = 3,=6
value = 1300,1
channel = 7

[state a];おりゃ
type = playsnd
trigger1 = animelem = 10,=3
value = 1300,1
channel = 8

[state a];
type = playsnd
trigger1 = animelem = 1
value = 1350,4

;---------------------[ステートの状態変更、速度計算]
[state a]
type = statetypeset
trigger1 = animelem = 2
value = A

[State 1030, 6]
type = velset
trigger1 = AnimElem = 2
x = 7.5
y = -4.8

[State 1030, 7]
type = veladd
trigger1 = AnimElem = 4,> 2
y = .35

[State 1040, explod]
type = explod
trigger1 = animElem = 2,=2
anim = 6230
sprpriority = 3
ownpal = 1
removeongethit = 1
pos = -10, 20
scale = 0.8,0.65

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 3
attr = A, SA
animtype  = hard
damage    = 39,10
getpower = 61,16
guardflag = M
pausetime = 9,9
sparkno = s-1
sparkxy = -20,-52
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4,-6.2
air.velocity = -4,-6.2
ground.slidetime = 15
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 6
attr = A, SA
animtype  = hard
damage    = 68,10
getpower = 61,61
guardflag = M
pausetime = 12,12
sparkno = s-1
sparkxy = -20,-63
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -8.5,-5
air.velocity = -8.5,-5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 12
attr = A, SA
animtype  = hard
damage    = 72,10
getpower = 51,16
guardflag = M
pausetime = 15,13
sparkno = s-1
sparkxy = -20,-63
hitsound   = s1200,2
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = 0,9
air.velocity = 0,9
guard.velocity = -8
fall.yvelocity = -5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 9
envshake.ampl = -6
envshake.freq = 92
envshake.phase = 92

[State 1035, 5];振りおろしエフェクト
type = Explod
trigger1 = AnimElem = 9,=2
anim = 6100
ID = 6100
pos = -32,-38
bindtime = -1
sprpriority = 3
ontop = 0
scale = 1,1
shadow = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 1
scale = 1.05,1.08

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) <= 0
name = "hit"
ID = 7002
pos = -22,-80
postype = p2
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.55
;Size.YScale = 0.55
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(6) >= 0
trigger1 = AnimElemTime(7) <= 0
name = "hit"
ID = 7002
pos = -25,-85
postype = p2
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.55
;Size.YScale = 0.55
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(12) >= 0
trigger1 = AnimElemTime(13) <= 0
name = "hit"
ID = 7002
pos = -46,-70
postype = p2
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.68
;Size.YScale = 0.68
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(6) >= 0
trigger1 = AnimElemTime(7) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(12) >= 0
trigger1 = AnimElemTime(13) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

;---------------------[着地ステートに移行]
[state a] 
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1305


; 功夫空連脚　着地
[Statedef 1305]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1305
ctrl = 0

;---------------------[アニメーション変更]
[state a]
type = changeanim
trigger1 = time = 0
trigger1 = prevstateno = 1301
value = 1306

;---------------------[ポジション設定]
[state a]
type = posset
trigger1 = time = 0
y = 0

;---------------------[効果音]
[state a];着地
type = playsnd
trigger1 = time = 0
value = 40,0

;---------------------[立ちステートに移行]
[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 弱・功夫飛天脚
[Statedef 1350]
type    = S
movetype= A
physics = N
juggle  = 3
poweradd= 106
velset = 0,0
anim = 1300
ctrl = 0


;---------------------[無敵]
[State 1];
type = NotHitBy
trigger1 = animelem = 3,<=0
value = SCA
time = 1

;---------------------[効果音]

[state a];おりゃ
type = playsnd
trigger1 = time = 0
value = 777,4

[state a];おりゃ
type = playsnd
trigger1 = time = 0
value = 1350,5

[state a];おりゃ
type = playsnd
trigger1 = animelem = 1,=0
value = 1300,1
channel = 7

;---------------------[ステートの状態変更、速度計算]
[state a]
type = statetypeset
trigger1 = animelem = 2
value = A

[State 1030, 6]
type = velset
trigger1 = AnimElem = 2,=0
x = 5.2
y = -3.5

[State 1030, 6]
type = velset
trigger1 = AnimElem = 2,=2
x = 5.2
y = -8

[State 1030, 7]
type = veladd
trigger1 = AnimElem = 2,> 3
y = .37

[State 1030, 7]
type = veladd
trigger1 = AnimElem = 3,> 0
y = .3

;---------------------[エフェクト]
[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=0
anim = 1002
id = 3000
sprpriority = -20
postype = p1
pos = 15,-6
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42

[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=0
anim = 1003
id = 3000
sprpriority = -10
postype = p1
pos = 14,-8
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42

[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=0
anim = 1004
id = 3000
sprpriority = 10
postype = p1
pos = 14,-8
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42

[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=0
anim = 1005
id = 3000
sprpriority = -20
postype = p1
pos = 14,-8
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42

[State 1040, explod]
type = explod
trigger1 = animElem = 1,=0
anim = 6220
sprpriority = 3
ownpal = 1
removeongethit = 1
pos = -8, 10
scale = 0.75,0.6

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 2,=1
attr = A, SA
animtype  = hard
damage    = 90,10
getpower = 61,11
guardflag = M
pausetime = 13,15
sparkno = s-1
sparkxy = -20,-52
hitsound   = s1200,2
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -1,-5.8
air.velocity = -1,-5.8
ground.slidetime = 15
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 7
envshake.ampl = -6
envshake.freq = 95
envshake.phase = 95

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) <= 0
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +32) , floor(p2dist y/2 -75)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

;---------------------[着地ステートに移行]

[state a] 
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1305


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 強・功夫飛天脚
[Statedef 1355]
type    = S
movetype= A
physics = N
juggle  = 3
poweradd= 126
velset = 0,0
anim = 1300
ctrl = 0

;---------------------[無敵]
[State 1];
type = NotHitBy
trigger1 = animelem = 3,<=0
value = SCA
time = 1

;---------------------[効果音]

[state a];おりゃ
type = playsnd
trigger1 = time = 0
value = 777,4

[state a];おりゃ
type = playsnd
trigger1 = time = 0
value = 1350,5

[state a];おりゃ
type = playsnd
trigger1 = animelem = 1,=0
value = 1300,1
channel = 7

;---------------------[ステートの状態変更、速度計算]
[state a]
type = statetypeset
trigger1 = animelem = 2
value = A

[State 1030, 6]
type = velset
trigger1 = AnimElem = 2,=0
x = 4
y = -3.5

[State 1030, 6]
type = velset
trigger1 = AnimElem = 2,=2
x = 4.5
y = -9

[State 1030, 7]
type = veladd
trigger1 = AnimElem = 2,> 3
y = .37

[State 1030, 7]
type = veladd
trigger1 = AnimElem = 3,> 0
y = .3

;---------------------[エフェクト]
[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=2
anim = 1002
id = 3000
sprpriority = -20
postype = p1
pos = 14,-8
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42

[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=2
anim = 1003
id = 3000
sprpriority = -10
postype = p1
pos = 14,-8
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42

[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=2
anim = 1004
id = 3000
sprpriority = 10
postype = p1
pos = 14,-8
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42

[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=2
anim = 1005
id = 3000
sprpriority = -20
postype = p1
pos = 14,-8
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42


[State 1040, explod]
type = explod
trigger1 = animElem = 1,=0
anim = 6220
sprpriority = 3
ownpal = 1
removeongethit = 1
pos = -8, 10
scale = 0.75,0.6

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = !movecontact
trigger1 = animelem = 2,=[1,3]
attr = A, SA
animtype  = hard
damage    = 30,10
getpower = 61,11
guardflag = M
pausetime = 6,8
sparkno = s-1
sparkxy = -20,-52
hitsound   = s222,0
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -1,-7.8
air.velocity = -1,-3
ground.slidetime = 15
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 7
envshake.ampl = -6
envshake.freq = 95
envshake.phase = 95

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 2,=6
attr = A, SA
animtype  = hard
damage    = 85,10
getpower = 61,11
guardflag = M
pausetime = 16,14
sparkno = s-1
sparkxy = -20,-52
hitsound   = s1200,2
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -1,-7.8
air.velocity = -1,-7.8
ground.slidetime = 15
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 7
envshake.ampl = -6
envshake.freq = 95
envshake.phase = 95

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(2) >= 1
trigger1 = AnimElemTime(2) <= 3
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +32) , floor(p2dist y/2 -75)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(2) >= 6
trigger1 = AnimElemTime(2) <= 13
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +32) , floor(p2dist y/2 -75)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(2) >= 1
trigger1 = AnimElemTime(2) <= 3
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(2) >= 6
trigger1 = AnimElemTime(2) <= 7
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

;---------------------[着地ステートに移行]

[state a] 
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1305

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; EX・功夫空連脚
[Statedef 1356]
type    = S
movetype= A
physics = N
juggle  = 3
poweradd= -500
velset = 0,0
anim = 1300
ctrl = 0

;---------------------[無敵]
[State 1];無敵の状態を作る
type = NotHitBy 
trigger1 = animelem = 4,<=0
value = SCA
time = 1

;---------------------[光るぜ]
[State a];点滅
type = palfx
trigger1 = gametime % 2 = 0
time = 1
add = 42,76,154
color = 124
ignorehitpause = 1

[State a];点滅
type = palfx
trigger1 = gametime % 2 = 1
time = 1
add = 16,33,72
color = 256
ignorehitpause = 1

[State 1030, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 22
trans = add
timegap = 1
framegap = 4
length = 15
palbright = 0,0,64
palcontrast = 120,120,168
paladd = 0,0,0

[State EX]
type = Explod
trigger1 = time = 0
anim = 6110
id = 6110
sprpriority = 20
postype = p1
pos = 8,0
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[State EX]
type = Explod
trigger1 = time = 0
anim = 6120
id = 6100
sprpriority = -20
postype = p1
pos = 8,0
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48


;---------------------[効果音]

[state a];おりゃ
type = playsnd
trigger1 = time = 0
value = 777,4

[state a];おりゃ
type = playsnd
trigger1 = time = 0
value = 1350,5

[state a];おりゃァ
type = playsnd
trigger1 = animelem = 1
value = 777,2

[state a];おりゃ
type = playsnd
trigger1 = animelem = 1,=0
value = 1300,1
channel = 7

;---------------------[ステートの状態変更、速度計算]
[state a]
type = statetypeset
trigger1 = animelem = 2
value = A

[State 1030, 6]
type = velset
trigger1 = AnimElem = 2,=0
x = 3
y = -3.8

[State 1030, 6]
type = velset
trigger1 = AnimElem = 2,=1
x = 4
y = -11

[State 1030, 7]
type = veladd
trigger1 = AnimElem = 2,> 3
y = .37

[State 1030, 7]
type = veladd
trigger1 = AnimElem = 3,> 0
y = .3

;---------------------[エフェクト]
[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=2
anim = 1002
id = 3000
sprpriority = -20
postype = p1
pos = 14,-8
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42

[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=2
anim = 1003
id = 3000
sprpriority = -10
postype = p1
pos = 14,-8
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42

[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=2
anim = 1004
id = 3000
sprpriority = 10
postype = p1
pos = 14,-8
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42

[State explod];エフェクト
type = Explod
trigger1 = animelem = 2,=2
anim = 1005
id = 3000
sprpriority = -20
postype = p1
pos = 14,-8
bindtime = -1
ignorehitpause = 0
under = 0
ownpal = 1
scale = 0.42,0.42


[State 1040, explod]
type = explod
trigger1 = animElem = 1,=0
anim = 6220
sprpriority = 3
ownpal = 1
removeongethit = 1
pos = -8, 10
scale = 0.75,0.6

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = !movecontact
trigger1 = animelem = 2,=[1,2]
attr = A, SA
animtype  = hard
damage    = 31,10
getpower = 61,11
guardflag = M
pausetime = 7,8
sparkno = s-1
sparkxy = -20,-52
hitsound   = s222,0
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -1,-7.8
air.velocity = -1,-3
ground.slidetime = 15
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 7
envshake.ampl = -6
envshake.freq = 95
envshake.phase = 95

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 2,=4
attr = A, SA
animtype  = hard
damage    = 30,10
getpower = 61,11
guardflag = M
pausetime = 8,9
sparkno = s-1
sparkxy = -20,-52
hitsound   = s222,0
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -1,-7.8
air.velocity = -1,-3
ground.slidetime = 15
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 7
envshake.ampl = -6
envshake.freq = 95
envshake.phase = 95

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 2,=6
attr = A, SA
animtype  = hard
damage    = 90,10
getpower = 61,11
guardflag = M
pausetime = 16,17
sparkno = s-1
sparkxy = -20,-52
hitsound   = s1200,2
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -1,-7.8
air.velocity = -1,-7.8
ground.slidetime = 15
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 7
envshake.ampl = -6
envshake.freq = 95
envshake.phase = 95

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(2) >= 1
trigger1 = AnimElemTime(2) <= 2
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +32) , floor(p2dist y/2 -75)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(2) >= 3
trigger1 = AnimElemTime(2) <= 4
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +32) , floor(p2dist y/2 -75)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(2) >= 6
trigger1 = AnimElemTime(2) <= 13
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +32) , floor(p2dist y/2 -75)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(2) >= 1
trigger1 = AnimElemTime(2) <= 2
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(2) >= 3
trigger1 = AnimElemTime(2) <= 4
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(2) >= 6
trigger1 = AnimElemTime(2) <= 7
name = "hit"
ID = 7011
pos = floor(p2dist x/2-22), floor(p2dist y/2 -77)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

;---------------------[着地ステートに移行]

[state a] 
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1305


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;疾風功夫突き・弱
[Statedef 1400]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 85
velset = 0,0
anim = 1400
ctrl = 0

;---------------------[投げに対して無敵]

[State 40,1]
type = HitBy
trigger1 = time=0
value = SCA, NA,SA,HA,NP,SP,HP
time = 22 

;---------------------[効果音]
[state a];おりゃァ
type = playsnd
trigger1 = animelem = 3
value = 1400,1

[state a];
type = playsnd
trigger1 = animelem = 4
value = 1300,1

;---------------------[速度計算]
[state a]
type = velset
trigger1 = animelem = 4,=2
x = 16

[state a]
type = velset
trigger1 = animelem = 5,=1
x = 12

[state a]
type = velset
trigger1 = animelem = 5,=2
x = 10

[state a]
type = velset
trigger1 = animelem = 5,=3
x = 0

[State explod];エフェクト
type = Explod
trigger1 = animelem = 4,=2
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = -26,9
bindtime = 1
supermove = 0
scale = 0.9,0.75
under = 0
ownpal = 1

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = hard
damage    = 78,10
getpower = 106,16
guardflag = M
pausetime = 15,15
sparkno = s-1
sparkxy = -20,-69
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -10,0
air.velocity = -4,-4.5
fall = 0
air.fall = 1
fall.recover = 0
envshake.ampl=5
envshake.time=6
ground.cornerpush.veloff = -14

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +46) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに移行]

;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX疾風瞬歩"
;value = 920
;ctrl = 0


[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱疾風瞬歩"
value = 900
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強疾風瞬歩"
value = 910
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫双手突き"
;value = 1002
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫双手突き"
value = 1000
ctrl = 0
F
[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫双手突き"
value = 1001
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫遠当て"
;value = 1052
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫遠当て"
value = 1050
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫遠当て"
value = 1051
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫空連脚"
;value = 1302
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫空連脚"
value = 1300
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫空連脚"
value = 1301
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "功夫山靠・EX"
;value = 1702
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "功夫山靠・弱"
value = 1700
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "功夫山靠・強"
value = 1700
ctrl = 0


[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "特足払い"
value = 1500
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "特肘打ち"
value = 1501
ctrl = 0


[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.85
persistent = 0
ignorehitpause = 1

[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;疾風功夫突き・強
[Statedef 1401]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 85
velset = 0,0
anim = 1401
ctrl = 0

;---------------------[投げ無敵]

[State 40,1]
type = HitBy
trigger1 = time=0
value = SCA, NA,SA,HA,NP,SP,HP
time = 22 

;---------------------[効果音]
[state a];おりゃァ
type = playsnd
trigger1 = animelem = 2
value = 1400,1

[state a];
type = playsnd
trigger1 = animelem = 4
value = 1300,1

;---------------------[速度計算]
[state a]
type = velset
trigger1 = animelem = 5
x = 18

[state a]
type = velset
trigger1 = animelem = 5,=3
x = 13

[state a]
type = velset
trigger1 = animelem = 5,=6
x = 10

[state a]
type = velset
trigger1 = animelem = 6,=1
x = 8

[state a]
type = velset
trigger1 = animelem = 6,=2
x = 6

[state a]
type = velset
trigger1 = animelem = 6,=3
x = 3

[state a]
type = velset
trigger1 = animelem = 6,=4
x = 0

[state a]
type = velset
trigger1 = animelemtime(7) = 10
x = 0

[State explod];エフェクト
type = Explod
trigger1 = animelem = 5,=0
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = 0,10
bindtime = 1
supermove = 0
scale = 0.9,0.8
under = 0
ownpal = 1

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = hard
damage    = 19,10
getpower = 66,16
guardflag = M
pausetime = 9,6
sparkno = s-1
sparkxy = -20,-82
hitsound   = s1550,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 23
ground.velocity = -10,0
air.velocity = -4,-4.5
fall = 0
air.fall = 1
fall.recover = 0

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 6
attr = S, SA
animtype  = hard
damage    = 82,10
getpower = 76,16
guardflag = M
pausetime = 14,13
sparkno = s-1
sparkxy = -20,-69
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -13,0
air.velocity = -4,-4.5
fall = 0
air.fall = 1
fall.recover = 0
envshake.ampl=5
envshake.time=6
ground.cornerpush.veloff = -20

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(5) >= 0
trigger1 = AnimElemTime(6) <= 0
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +46) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(6) >= 0
trigger1 = AnimElemTime(7) <= 0
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +46) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(5) >= 0
trigger1 = AnimElemTime(6) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = AnimElemTime(6) >= 0
trigger1 = AnimElemTime(7) <= 0
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0


;---------------------[立ちステートに移行]

;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX疾風瞬歩"
;value = 920
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱疾風瞬歩"
value = 900
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強疾風瞬歩"
value = 910
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫双手突き"
;value = 1002
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫双手突き"
value = 1000
ctrl = 0
F
[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫双手突き"
value = 1001
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫遠当て"
;value = 1052
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫遠当て"
value = 1050
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫遠当て"
value = 1051
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫空連脚"
;value = 1302
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫空連脚"
value = 1300
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫空連脚"
value = 1301
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫飛天脚"
;value = 1356
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫飛天脚"
value = 1350
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫飛天脚"
value = 1355
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "功夫山靠・EX"
;value = 1702
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "功夫山靠・弱"
value = 1700
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "功夫山靠・強"
value = 1700
ctrl = 0


[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "特足払い"
value = 1500
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "特肘打ち"
value = 1501
ctrl = 0


[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.85
persistent = 0
ignorehitpause = 1

[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;疾風功夫突き・EX
[Statedef 1402]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= -500
velset = 0,0
anim = 1401
ctrl = 0

;---------------------[無敵]

[State 1];無敵の状態を作る
type = NotHitBy 
trigger1 = animelem = 9,<=0
value = SCA
time = 1

;---------------------[光るぜ]
[State a];点滅
type = palfx
trigger1 = gametime % 2 = 0
time = 1
add = 42,76,154
color = 124
ignorehitpause = 1

[State a];点滅
type = palfx
trigger1 = gametime % 2 = 1
time = 1
add = 16,33,72
color = 256
ignorehitpause = 1

[State 1030, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 42
trans = add
timegap = 1
framegap = 4
length = 15
palbright = 0,0,64
palcontrast = 120,120,168
paladd = 0,0,0

[State EX]
type = Explod
trigger1 = time = 0
anim = 6110
id = 6110
sprpriority = 20
postype = p1
pos = 5,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[State EX]
type = Explod
trigger1 = time = 0
anim = 6120
id = 6100
sprpriority = -20
postype = p1
pos = 5,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[state a];おりゃァ
type = playsnd
trigger1 = animelem = 1
value = 777,2

;---------------------[効果音]
[state a];おりゃァ
type = playsnd
trigger1 = animelem = 2
value = 1400,0

[state a];おりゃァ
type = playsnd
trigger1 = animelem = 1
value = 777,2

[state a];
type = playsnd
trigger1 = animelem = 5
value = 1300,1


;---------------------[速度計算]
[state a]
type = velset
trigger1 = animelem = 5
x = 26

[state a]
type = velset
trigger1 = animelem = 5,=3
x = 15

[state a]
type = velset
trigger1 = animelem = 5,=6
x = 12

[state a]
type = velset
trigger1 = animelem = 6,=1
x = 8

[state a]
type = velset
trigger1 = animelem = 6,=2
x = 6

[state a]
type = velset
trigger1 = animelem = 6,=3
x = 3

[state a]
type = velset
trigger1 = animelem = 6,=4
x = 0

[state a]
type = velset
trigger1 = animelemtime(7) = 10
x = 0

[State explod];エフェクト
type = Explod
trigger1 = animelem = 5,=0
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = 15,13
bindtime = 1
supermove = 0
scale = 1.45,1.2
under = 0
ownpal = 1

;---------------------[攻撃判定]

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 6
attr = S, SA
animtype  = hard
damage    = 100,10
getpower = 76,16
guardflag = M
pausetime = 14,9
sparkno = s-1
sparkxy = -20,-69
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -13,-8
air.velocity = -13,-4.5
p2stateno = 5700
p2facing = 1
fall = 0
air.fall = 1
fall.recover = 0       
envshake.ampl=7
envshake.time=8
ground.cornerpush.veloff = -20

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +52) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.55
;Size.YScale = 0.55
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.85
persistent = 0
ignorehitpause = 1

;---------------------[立ちステートに移行]
[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;派生・下段蹴り
[Statedef 1500]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 80
ctrl = 0
anim = 421
sprpriority = 2

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 221, 0
channel = 10

[State 2];攻撃の指定
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = hard
damage    = 40,10
getpower = 106,16
guardflag = M
pausetime = 17,18
sparkno = s-1
sparkxy = -20,-69
hitsound   = s225,0
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -6,0
air.velocity = -4,-4.5
fall = 0
air.fall = 1
fall.recover = 0
envshake.ampl=6
envshake.time=8
ground.cornerpush.veloff = -14

;---------------------[効果音]
[state a];おりゃァ
type = playsnd
trigger1 = animelem = 2
value = 777,25

[state a];
type = playsnd
trigger1 = animelem = 3,=1
value = 1300,1

[state a]
type = velset
trigger1 = animelem = 2,=1
x = 3

[state a]
type = velset
trigger1 = animelem = 3,=1
x = 10

[state a]
type = velset
trigger1 = animelem = 4,=1
x = 30

[state a]
type = velset
trigger1 = animelem = 5,=1
x = 10

[state a]
type = velset
trigger1 = animelem = 5,=3
x = 0


[State explod];エフェクト
type = Explod
trigger1 = animelem = 3,=2
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = -45,10
bindtime = 1
supermove = 0
scale = 0.9,0.75
under = 0
ownpal = 1

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -10)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-29), floor(p2dist y/2 -10)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX疾風瞬歩"
;value = 920
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱疾風瞬歩"
value = 900
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強疾風瞬歩"
value = 910
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫空連脚"
;value = 1302
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫空連脚"
value = 1301
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫空連脚"
value = 1300
ctrl = 0


[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫飛天脚"
value = 1350
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫飛天脚"
value = 1355
ctrl = 0

;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫飛天脚"
;value = 1356
;ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "功夫山靠・EX"
;value = 1702
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "功夫山靠・弱"
value = 1700
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "功夫山靠・強"
value = 1701
ctrl = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;派生・肘打ち
[Statedef 1501]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 50
ctrl = 0
anim = 1510
sprpriority = 2

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 221, 0
channel = 10

[State 2];攻撃の指定
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = hard
damage    = 55,10
getpower = 106,16
guardflag = M
pausetime = 15,15
sparkno = s-1
sparkxy = -20,-69
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -10,0
air.velocity = -4,-4.5
fall = 0
air.fall = 1
fall.recover = 0
envshake.ampl=8
envshake.time=10
ground.cornerpush.veloff = -14

;---------------------[効果音]
[state a];おりゃァ
type = playsnd
trigger1 = animelem = 2
value = 777,25

[state a];
type = playsnd
trigger1 = animelem = 3,=1
value = 1300,1

[state a]
type = velset
trigger1 = animelem = 2,=1
x = 3

[state a]
type = velset
trigger1 = animelem = 3,=1
x = 10

[state a]
type = velset
trigger1 = animelem = 4,=1
x = 30

[state a]
type = velset
trigger1 = animelem = 5,=0
x = 10

[state a]
type = velset
trigger1 = animelem = 5,=3
x = 0


[State explod];エフェクト
type = Explod
trigger1 = animelem = 3,=2
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = -45,10
bindtime = 1
supermove = 0
scale = 0.9,0.75
under = 0
ownpal = 1

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-29), floor(p2dist y/2 -10)
postype = p2
facing = -1
stateno = 7011
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.7
;Size.YScale = 0.7
ignorehitpause = 1
persistent = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX疾風瞬歩"
;value = 920
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱疾風瞬歩"
value = 900
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強疾風瞬歩"
value = 910
ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫空連脚"
;value = 1302
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫空連脚"
value = 1301
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫空連脚"
value = 1300
ctrl = 0


[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "弱功夫飛天脚"
value = 1350
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "強功夫飛天脚"
value = 1355
ctrl = 0

;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "EX功夫飛天脚"
;value = 1356
;ctrl = 0


;[state a] 
;type = changestate
;trigger1 = movecontact
;trigger1 = command = "功夫山靠・EX"
;value = 1702
;ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "功夫山靠・弱"
value = 1700
ctrl = 0

[state a] 
type = changestate
trigger1 = movecontact
trigger1 = command = "功夫山靠・強"
value = 1701
ctrl = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 功夫連撃・序
[Statedef 1540]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 200
velset = 0,0
anim = 1550
ctrl = 0

[State 1];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

[state a]
type = velset
trigger1 = animelem = 5
x = 10

[state a]
type = velset
trigger1 = animelem = 7,=0
x = 0

[state a]
type = playsnd
trigger1 = time = 5
value = 1550,2

[State 2];攻撃の指定
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = hard
damage    = 18*2,23
guardflag = N;MA
pausetime = 8,12
guard.pausetime = 16,16
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = 0,0
air.velocity = 0,0
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 6
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 14
attr = S, SA
animtype  = hard
damage    = 15*2,5
guardflag = N;MA
pausetime = 8,11
guard.pausetime = 11,12
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = 0,0
air.velocity = 0,0
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 82
envshake.phase = 82

[state a]
type = posadd
trigger1 = animelem = 16
trigger2 = animelem = 17
trigger3 = animelem = 18
trigger4 = animelem = 19
trigger5 = animelem = 20
trigger6 = animelem = 21
trigger7 = animelem = 22
trigger8 = animelem = 23
trigger9 = animelem = 24
trigger10= animelem = 25
trigger11= animelem = 26
trigger12= animelem = 27
trigger13= animelem = 28
trigger14= animelem = 29
trigger15= animelem = 30
x = 8

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(7) >= 0
trigger1 = AnimElemTime(8) <= 0
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(14) >= 0
trigger1 = AnimElemTime(15) <= 0
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a]
type = changestate
trigger1 = animelem = 9,=0
trigger1 = !EnemyNear(var(58)),movetype = H
value = 0
ctrl = 1

[state a]
type = changestate
trigger1 = animelem = 15,=0
value = 1541
ctrl = 0

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 功夫連撃・終
[Statedef 1541]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 111
velset = 0,0
anim = 1320
ctrl = 0

;---------------------[効果音]
[state a];
type = playsnd
trigger1 = animelem = 5
value = 1300,1

[state a];着地
type = playsnd
trigger1 = animelem = 16
value = 40,0

;---------------------[ステートの状態変更、速度計算]
[state a]
type = statetypeset
trigger1 = animelem = 4
value = A

[state a]
type = velset
trigger1 = animelem = 4
x=18

[state a]
type = velset
trigger1 = animelem = 5
x=0

[state a]
type = velset
trigger1 = animelem = 9
x=25

[state a]
type = velset
trigger1 = animelem = 10,=2
x=0

;---------------------[攻撃判定]
[State 2];攻撃の指定
type = HitDef
trigger1 = time = 0
attr = A, SA
animtype  = hard
damage    = 30,10
getpower = 16,16
guardflag = M
pausetime = 5,5
sparkno = -1
sparkxy = -20,-78
hitsound   = s225,1
guard.sparkno = S30040
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0,0
air.velocity = -4,-4.5
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 82
envshake.phase = 82

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 10
attr = A, SA
animtype  = hard
damage    = 68,10
getpower = 76,16
guardflag = M
pausetime = 18,19
sparkno = -1
sparkxy = -20,-63
hitsound   = s1200,2
guard.sparkno = S30040
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -9,-3
guard.velocity = -10
air.velocity = -6,-3.5
fall = 1
air.fall = 1
fall.recover = 0
envshake.time = 20
envshake.ampl = -4
envshake.freq = 92
envshake.phase = 92

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(5) >= 0
trigger1 = AnimElemTime(6) <= 0
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -76)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(10) >= 0
trigger1 = AnimElemTime(11) <= 0
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -76)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに移行]
[state a] 
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; EX_功夫連撃
[Statedef 1550]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= -500
velset = 0,0
anim = 1550
ctrl = 0

;---------------------[無敵]
[State 1];無敵の状態を作る
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------[光るぜ]
[State a];点滅
type = palfx
trigger1 = gametime % 2 = 0
time = 1
add = 42,76,154
color = 124
ignorehitpause = 1

[State a];点滅
type = palfx
trigger1 = gametime % 2 = 1
time = 1
add = 16,33,72
color = 256
ignorehitpause = 1

[State 1030, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 68
trans = add
timegap = 1
framegap = 4
length = 15
palbright = 0,0,64
palcontrast = 120,120,168
paladd = 0,0,0

[State EX]
type = Explod
trigger1 = time = 0
anim = 6110
id = 6110
sprpriority = 20
postype = p1
pos = 5,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[State EX]
type = Explod
trigger1 = time = 0
anim = 6120
id = 6100
sprpriority = -20
postype = p1
pos = 5,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[State explod];エフェクト
type = Explod
trigger1 = animelem = 32,=2
anim = 6250
id = 6250
sprpriority = -3
postype = p1
pos = 45,0
bindtime = 1
supermove = 0
scale = 0.4,0.4
under = 0
ownpal = 1

[state a]
type = playsnd
trigger1 = time = 5
value = 777,26

[state a]
type = playsnd
trigger1 = time = 54
value = 1150,4


[State vel]
type = velset
trigger1 = animelem = 32,=0
x=13

[State vel]
type = velset
trigger1 = animelem = 33,=0
x=0

[State 2000, 2]
type = Pause
trigger1 = animelem = 1,=0
time = 7
movetime = 7
anim = -1

[State 2];攻撃の指定
type = HitDef
trigger1 = Time = 0
attr = S, ST
animtype  = hard
damage    = 23
hitflag = M- 
pausetime = 6,12
guard.pausetime = 11,12
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = -1,0
air.velocity = 0,-2
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 82
envshake.phase = 82

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 14
attr = S, SA
animtype  = hard
damage    = 18
guardflag = N;MA
pausetime = 5,30
guard.pausetime = 11,12
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = -2,0
air.velocity = 0,-2
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 82
envshake.phase = 82

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 20
attr = S, SA
animtype  = hard
damage    = 13
guardflag = N;MA
pausetime = 5,30
guard.pausetime = 9,10
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = -2,0
air.velocity = 0,-1
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 82
envshake.phase = 82

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 26
attr = S, SA
animtype  = hard
damage    = 13
guardflag = N;MA
pausetime = 7,8
guard.pausetime = 9,10
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = -6,0
air.velocity = 0,-1
fall = 0
air.fall = 1
fall.recover = 0
envshake.time = 5
envshake.ampl = -4
envshake.freq = 82
envshake.phase = 82

[State 2];攻撃の指定
type = HitDef
trigger1 = animelem = 33
attr = S, SA
animtype  = hard
damage    = 18*2,5
guardflag = N;MA
pausetime = 14,14
guard.pausetime = 9,10
sparkno = s-1
sparkxy = -10,-65
hitsound   = s1200,2
guard.sparkno = s-1
guardsound = s121,0
ground.type = low
ground.slidetime = 0
ground.hittime  = 18
ground.velocity = -22,-7
air.velocity = 0,0
p2stateno = 5700
p2facing = 1
fall = 0
air.fall = 1
fall.recover = 0       
envshake.ampl=7
envshake.time=8
ground.cornerpush.veloff = -20

[state a]
type = posadd
trigger1 = animelem = 16
trigger2 = animelem = 17
trigger3 = animelem = 18
trigger4 = animelem = 19
trigger5 = animelem = 20
trigger6 = animelem = 21
trigger7 = animelem = 22
trigger8 = animelem = 23
trigger9 = animelem = 24
trigger10= animelem = 25
trigger11= animelem = 26
trigger12= animelem = 27
trigger13= animelem = 28
trigger14= animelem = 29
trigger15= animelem = 30
x = 1

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(7) >= 0
trigger1 = AnimElemTime(8) <= 0
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(14) >= 0
trigger1 = AnimElemTime(15) <= 0
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -70)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(20) >= 0
trigger1 = AnimElemTime(21) <= 0
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -78)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(26) >= 0
trigger1 = AnimElemTime(27) <= 0
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -78)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
trigger1 = AnimElemTime(33) >= 0
trigger1 = AnimElemTime(34) <= 0
name = "hit"
ID = 7001
pos = floor(p2dist x/2 +34) , floor(p2dist y/2 -78)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.58
;Size.YScale = 0.58
ignorehitpause = 1
persistent = 0

[state a]
type = changestate
trigger1 = animelem = 9,=0
trigger1 = !EnemyNear(var(58)),movetype = H
value = 0
ctrl = 1

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;弱・急襲！功夫空刃脚

[Statedef 1600]
type = A
movetype = A
physics = N
anim = 1600
velset = 0,0
ctrl = 0
juggle = 6
hitcountpersist = 1
poweradd= 75

[State 1020, 3]
type = gravity
trigger1 = Animelem = 4, >= 0

[state a];
type = playsnd
trigger1 = animelem = 4
value = 777,3

[state a];
type = playsnd
trigger1 = animelem = 3
value = 1600,0


[State 1020, 2]
type = velset
trigger1 = AnimElem = 3
y =-2.0

[State 1020, 2]
type = veladd
trigger1 = AnimElem = 4
x = 4.5
y = 9.5

[State 1020, 1]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
damage = 65,12
animtype = Hard
guardflag = H
hitflag = MAFD
priority = 7, Hit
getpower = 60,10
pausetime = 11,13
sparkno = s-1
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
sparkxy = -12,-22
ground.slidetime = 10
ground.hittime  = 21
ground.velocity = -4,0
air.velocity = -3,0
air.hittime = 18
guard.velocity = -8
envshake.ampl=5
envshake.time=7

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +28) , floor(p2dist y/2 -58)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2 -5) , floor(p2dist y/2 -82)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.95
persistent = 0
ignorehitpause = 1

[State 1020, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1602

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;強・急襲！功夫空刃脚

[Statedef 1601]
type = A
movetype = A
physics = N
anim = 1601
velset = 0,0
ctrl = 0
juggle = 5
hitcountpersist = 1
poweradd= 70

[State 1020, 3]
type = gravity
trigger1 = Animelem = 3, >= 0

[state a];
type = playsnd
trigger1 = animelem = 4
value = 777,3

[state a];
type = playsnd
trigger1 = animelem = 3
value = 1600,0


[State 1020, 2]
type = veladd
trigger1 = AnimElem = 4,=1
x = 7
y = 10

[State 1020, 1]
type = HitDef
trigger1 = animelem = 3
attr = A, SA
damage = 105,22
animtype = Hard
guardflag = H
hitflag = MAFD
priority = 7, Hit
getpower = 70,10
pausetime = 15,16
sparkno = s-1
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
sparkxy = -12,-22
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -3,-6.5
air.velocity = -3,-5.5
air.hittime = 18
guard.velocity = -8
fall = 1
fall.recover = 0
envshake.ampl=5
envshake.time=7

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +28) , floor(p2dist y/2 -58)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.5
;Size.YScale = 0.5
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2 -5) , floor(p2dist y/2 -82)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[State 1020, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1602

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;EX・急襲！功夫空刃脚_1

[Statedef 1603]
type = A
movetype = A
physics = N
anim = 1603
velset = 0,0
ctrl = 0
juggle = 3
hitcountpersist = 1
poweradd= -500

;---------------------[無敵]

[State 1];無敵の状態を作る
type = NotHitBy 
trigger1 = time = 0
value = SCA
time = 12

;---------------------[光るぜ]

[State a];点滅
type = palfx
trigger1 = gametime % 2 = 0
time = 1
add = 42,76,154
color = 124
ignorehitpause = 1

[State a];点滅
type = palfx
trigger1 = gametime % 2 = 1
time = 1
add = 16,33,72
color = 256
ignorehitpause = 1

[State 1030, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 12
trans = add
timegap = 1
framegap = 4
length = 15
palbright = 0,0,64
palcontrast = 120,120,168
paladd = 0,0,0

[State EX]
type = Explod
trigger1 = time = 0
anim = 6110
id = 6110
sprpriority = 20
postype = p1
pos = 20,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[State EX]
type = Explod
trigger1 = time = 0
anim = 6120
id = 6100
sprpriority = -20
postype = p1
pos = 20,9
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48


[state a];おりゃァ
type = playsnd
trigger1 = time = 0
value = 777,2
channel = 6

[state a];
type = playsnd
trigger1 = animelem = 4
value = 777,3

[state a];
type = playsnd
trigger1 = animelem = 3
value = 1600,0


[State 1020, 3]
type = gravity
trigger1 = Animelem = 3, >= 0


[State 1020, 2]
type = veladd
trigger1 = AnimElem = 2
x = 0
y = -1

[State 1020, 2]
type = veladd
trigger1 = AnimElem = 3
x = 5.5
y = 13.7

[State 1020, 1]
type = HitDef
trigger1 = animelem = 3
attr = A, SA
damage = 115,12
animtype = Hard
guardflag = H
hitflag = MAFD
priority = 7, Hit
getpower = 40,40
pausetime = 12,18
sparkno = s-1
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
sparkxy = -12,-22
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -3,-10
air.velocity = -3.7,-10
air.hittime = 18
guard.velocity = -8
fall = 1
fall.recover = 0
envshake.ampl=7
envshake.time=8

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +25) , floor(p2dist y/2 -53)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.55
;Size.YScale = 0.55
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2 -5) , floor(p2dist y/2 -82)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[State 1020, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1602

;---------------------------------------------------------------------------
; 極限キック着地
[Statedef 1602]
type = S
movetype = I
physics = S
anim = 1602
velset = 0,0
ctrl = 0

[State 1126, 2]
type = posset
trigger1 = Time = 0
y = 0

[State 1126, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;功夫山靠・弱
[Statedef 1700]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 90
velset = 0,0
anim = 1900
ctrl = 0

;---------------------[無敵]
[State 181, 1]
type = NotHitBy
trigger1 = time=0
value = SCA
time = 23

;---------------------[演出]

[state a];
type = playsnd
trigger1 = animelem = 7,=0
value = 1300,1

[state a];
type = playsnd
trigger1 = animelem = 8,=0
value = 1400,3

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 5
x = 1

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 6
x = 3

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 7
x = 4

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 8
x = 5

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 9
x = 30

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 11
x = 23

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 12,=0
x = 5

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 13,=0
x = 0

[State explod];エフェクト
type = Explod
trigger1 = animelem = 6,=0
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = 15,10
bindtime = 1
supermove = 0
scale = 0.9,0.75
under = 0
ownpal = 1

[State 2];攻撃の指定
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = hard
damage    = 97,20
getpower = 55,15
guardflag = H
pausetime = 22,20
guard.pausetime = 11,12
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -11,-4
air.velocity = -11,-4
fall = 1
air.fall = 1
fall.recover = 0
envshake.ampl=6
envshake.time=10

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +37) , floor(p2dist y/2 -73)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.52
;Size.YScale = 0.52
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;功夫山靠・強
[Statedef 1701]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 90
velset = 0,0
anim = 1901
ctrl = 0

;---------------------[無敵]
[State 181, 1]
type = NotHitBy
trigger1 = time=0
value = SCA
time = 27

;---------------------[演出]

[state a];
type = playsnd
trigger1 = animelem = 7,=0
value = 1300,1

[state a];
type = playsnd
trigger1 = animelem = 8,=0
value = 1400,3

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 5
x = 2

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 6
x = 4

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 7
x = 5

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 8
x = 6

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 9
x = 34

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 11
x = 20

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 12,=0
x = 5

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 13,=0
x = 0


[State explod];エフェクト
type = Explod
trigger1 = animelem = 7,=0
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = 15,10
bindtime = 1
supermove = 0
scale = 0.9,0.8
under = 0
ownpal = 1

[State 2];攻撃の指定
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = hard
damage    = 103,20
getpower = 55,15
guardflag = H
pausetime = 22,20
guard.pausetime = 11,12
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 22
ground.hittime  = 18
ground.velocity = -11,-4
air.velocity = -11,-4
fall = 1
air.fall = 1
fall.recover = 0
envshake.ampl=6
envshake.time=10

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +37) , floor(p2dist y/2 -73)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.53
;Size.YScale = 0.53
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;功夫山靠・EX
[Statedef 1702]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= -500
velset = 0,0
anim = 1900
ctrl = 0

;---------------------[無敵]
[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------[光るぜ]
[State a];点滅
type = palfx
trigger1 = time<=30
trigger1 = gametime % 2 = 0
time = 1
add = 42,76,154
color = 124
ignorehitpause = 1

[State a];点滅
type = palfx
trigger1 = time<=30
trigger1 = gametime % 2 = 1
time = 1
add = 16,33,72
color = 256
ignorehitpause = 1

[State 1030, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 19
trans = add
timegap = 1
framegap = 4
length = 15
palbright = 0,0,64
palcontrast = 120,120,168
paladd = 0,0,0

[State EX]
type = Explod
trigger1 = time = 0
anim = 6110
id = 6110
sprpriority = 20
postype = p1
pos = 24,7
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

[State EX]
type = Explod
trigger1 = time = 0
anim = 6120
id = 6100
sprpriority = -20
postype = p1
pos = 24,7
bindtime = 1
ignorehitpause = 1
persistent = 0
under = 0
ownpal = 1
scale = 0.48,0.48

;---------------------[効果音]
[state a];おりゃァ
type = playsnd
trigger1 = animelem = 3
value = 1400,4

[state a];おりゃァ
type = playsnd
trigger1 = animelem = 1
value = 777,2

[state a];
type = playsnd
trigger1 = animelem = 7,=0
value = 1300,1
;---------------------[移動]

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 5
x = 10

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 6
x = 11

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 7
x = 12

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 8
x = 14

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 9
x = 60

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 10
x = 5

[State 200, 2]
type = VelSet
trigger1 = AnimElem = 10,=3
x = 0

[State 200, 2]
type = VelSet
trigger1 = p2bodydist x <= 15
x = 2

[State explod];エフェクト
type = Explod
trigger1 = animelem = 6,=0
anim = 6240
id = 6240
sprpriority = 3
postype = p1
pos = 15,13
bindtime = 1
supermove = 0
scale = 1.45,1.2
under = 0
ownpal = 1

[State 2];攻撃の指定
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = hard
damage    = 158,20
getpower = 45,15
guardflag = H
pausetime = 22,20
guard.pausetime = 11,12
sparkno = s-1
sparkxy = -10,-65
hitsound   = s225,1
guard.sparkno = s-1
guardsound = s121,0
ground.type = high
ground.slidetime = 24
ground.hittime  = 18
ground.velocity = -17,-5
air.velocity = -17,-4
fall = 1
air.fall = 1
fall.recover = 0
envshake.ampl=8
envshake.time=11

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit && numtarget
name = "hit"
ID = 7002
pos = floor(p2dist x/2 +37) , floor(p2dist y/2 -78)
postype = p1
stateno = 7002
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.65
;Size.YScale = 0.65
ignorehitpause = 1
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
name = "hit"
ID = 7011
pos = floor(p2dist x/2-39), floor(p2dist y/2 -65)
postype = p2
facing = -1
stateno = 7012
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
;Size.XScale = 0.6
;Size.YScale = 0.6
ignorehitpause = 1
persistent = 0

[State 200];補正
type = Varset
trigger1 = movehit
fv = 1
value = fVar(1)*0.9
persistent = 0
ignorehitpause = 1

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
; 気力溜め
[Statedef 1650]
type = S
ctrl = 0
anim = 1650
velset = 0,0
movetype = I
physics = S
sprpriority = 1

[state a]
Type = StopSnd
trigger1 = power = powermax
trigger2 = command != "おしっぱなしz"&&command != "おしっぱなしc"
channel = 3

[state a]
Type = PlaySnd
trigger1 = time = 1
value = 777, 17
channel = 2

[state a]
Type = PlaySnd
trigger1 = time = 5
value = 190, 0


[state a]
type = poweradd
trigger1 = animelem = 3,>=0
value = 12

[State a];オーラ
type = Explod
trigger1 = numexplod(2515)=0
trigger1 = Anim = 1650
anim = 2515
id = 2515
sprpriority = -5
postype = p1
pos = -9,-6
bindtime = -1
under = 0
ownpal = 1
scale = 0.46,0.41

[State a];オーラ
type = Explod
trigger1 = numexplod(2516)=0
trigger1 = Anim = 1650
anim = 2516
id = 2516
sprpriority = 10
postype = p1
pos = -10,-8;0
bindtime = -1
under = 0
ownpal = 1
scale = 0.46,0.43

[State a];オーラ
type = Explod
trigger1 = numexplod(2513)=0
trigger1 = Anim = 1650
anim = 2513
id = 2513
sprpriority = -5
postype = p1
pos = -24,10
bindtime = -1
under = 0
ownpal = 1
scale = 0.44,0.46

[State a];オーラ
type = Explod
trigger1 = numexplod(2514)=0
trigger1 = Anim = 1650
anim = 2514
id = 2514
sprpriority = 10
postype = p1
pos = -24,10
bindtime = -1
under = 0
ownpal = 1
scale = 0.44,0.46

[state a]
type = changestate
trigger1 = power = powermax
trigger2 = command != "おしっぱなしz"&&command != "おしっぱなしc"
value = 1651


; ゲージ溜め終了
[Statedef 1651]
type = S
ctrl = 0
anim = 1651
velset = 0,0
movetype = I
physics = S
sprpriority = 1

[state a]
type = removeexplod
trigger1 = time = 0
id = 1655

[state a]
type = removeexplod
trigger1 = time = 0
id = 2513

[state a]
type = removeexplod
trigger1 = time = 0
id = 2514

[state a]
type = removeexplod
trigger1 = time = 0
id = 2515

[state a]
type = removeexplod
trigger1 = time = 0
id = 2516


[State 191, 3]
type = stopSnd
trigger1 = animelem = 1
channel = 2

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ガードクラッシュ
[Statedef 1710]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 3

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1710

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = changestate
trigger1 = prevstateno = [120,159]
value = 1711

[state a]
type = selfstate
trigger1 = animtime = 0
value = 0
ctrl = 1


;ガードクラッシュ２
[Statedef 1711]
type    = A
movetype= H
physics = N
velset = -6,0
sprpriority = 3

[state a]
type = veladd
trigger1 = 1
y = 0.4

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5300

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 


;---------------------------------------------------------------------------
;High Damage Hit_1
[Statedef 5700]
type    = A
movetype= H
physics = N
velset = 0,0

[State 700,ChangeAnim] 
type = ChangeAnim2
trigger1 = 1
value = 5700

[State 700,ChangeState]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 5701

;---------------------------------------------------------------------------
;High Damage Hit_2
[Statedef 5701]
type    = A
movetype= H
physics = N

[State 701,Vel]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 701,Vel]
type = VelAdd
trigger1 = 1
y = .45

[State 701,Screen]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 701,ChangeState]
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 5702

[State 701,ChangeState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;High Damage Hit_3
[Statedef 5702]
type    = A
movetype= H
physics = N

[State 702,Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 702,Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 702,Pos]
type = PosFreeze
trigger1 = 1
value = 1

[State 702,Screen]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 702, Explod]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 702,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 702,ChangeAnim]
type = ChangeAnim2
trigger1 = Time = 0
value = 5702

[State 702,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 5703

;---------------------------------------------------------------------------
;High Damage Hit_4
[Statedef 5703]
type    = A
movetype= H
physics = N

[State 703,Vel]
type = VelSet
trigger1 = Time = 0
y = -6

[State 703,Vel]
type = VelSet
trigger1 = Time = 0
x = 2.6

[State 703,Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 703,Vel]
type = VelAdd
trigger1 = 1
y = .35

[State 703,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 703,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 703,ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 703,ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 703,ChangeState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
; Varのラウンド持ち越し
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
farst = 2
last = 59
value = 0

[State 5900, 2] ;Clear all float variables
type = null;VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

;----------------------------------------------------------------------------
;(HELPER)超必殺
[Statedef 6005]
type = S
ctrl = 0
anim = 6005
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[変数]
[state varset]
type = varset
trigger1 = time = 0
var(2) = 0

[state varadd]
type = varadd
trigger1 = time < 8
var(2) = 32

[state varadd]
type = varadd
trigger1 = time > 40
var(2) = -8

;---------------------[演出]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = 0,0,0
invertall = 0
color = 256 - var(2)

;---------------------[消去]
[state destroyself]
type = destroyself
trigger1 = time = 71

;----------------------------------------------------------------------------
;(HELPER)EX超必殺
[Statedef 6006]
type = S
ctrl = 0
anim = 6005
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[変数]
[state varset]
type = varset
trigger1 = time = 0
var(2) = 0

[state varadd]
type = varadd
trigger1 = time < 8
var(2) = 32

[state varadd]
type = varadd
trigger1 = time > 30
var(2) = -8

;---------------------[演出]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = -var(2),-var(2),-var(2)
invertall = 0
color = 256 - var(2)

;---------------------[消去]
[state destroyself]
type = destroyself
trigger1 = time = 52

;----------------------------------------------------------------------------
;(HELPER)NEO MAX超必殺
[Statedef 6007]
type = S
ctrl = 0
anim = 6005
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[変数]
[state varset]
type = varset
trigger1 = time = 0
var(2) = 256

[state varadd]
type = null;varadd
trigger1 = time > 40
var(2) = -8

;---------------------[演出]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = -var(2),-var(2),-var(2)
invertall = 0
color = 256 - var(2)

[State assertspecial]
type = assertspecial
trigger1 = var(2) = 256
flag = NoBG
flag2 = NoFG

;---------------------[消去]
[state changestate]
type = changestate
trigger1 = root,stateno != 2700
trigger2 = root,movetype = H
value = 6008

;----------------------------------------------------------------------------
;(HELPER)NEO MAX超必殺
[Statedef 6008]
type = S
ctrl = 0
anim = 6005
velset = 0,0
movetype = I
physics = N
sprpriority = 0

;---------------------[変数]
[state varset]
type = varset
trigger1 = time = 0
var(21) = 550

[state varadd]
type = varadd
trigger1 = 1
var(21) = -1

[state varadd]
type = varset
trigger1 = root,stateno =2105
trigger2 = root,movetype =H
var(21) = 0

;---------------------[演出]
[state bgpalfx]
type = bgpalfx
trigger1 = 1
time = 1
add = -var(21),-var(21),-var(21)
invertall = 0
color = 256 - var(2)

;---------------------[消去]
[state destroyself]
type = destroyself
trigger1 = var(21) <= 0

;----------------------------------------------------------------------------
;HELPER
[Statedef 22222]
type = S
ctrl = 0
anim = 22222
velset = 0,0
movetype = I
physics = N
sprpriority = -99999

;---------------------[移動]
[state a]
type=veladd
trigger1= time=1
x=24
y=-11

[state a]
type=velset
trigger1= time=10
x=0
y=0


[state a]
type=veladd
trigger1= time=30
x=9
y=-4

[state a]
type=veladd
trigger1= time=40
x=10
y=-5

;---------------------[演出]
[state a]
type=trans
trigger1= time>=1
trigger1= time<100
trans=addalpha
alpha=(256-2*(animelemtime(1))),(2*(animelemtime(1)))

;---------------------[消去]
[state changestate]
type = changestate
trigger1 = time>=100
trigger2 = root,movetype = H
value = 6008


[Statedef 9000]; アーマー判定ヘルパー
type = A
movetype = I
physics = N

[State 9000, 0]; 不具合対策
type = ChangeState
trigger1 = !IsHelper
value = 0
ctrl = 1

[State 9000, 0]; アーマー化した瞬間に重複被弾しないための無敵
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 1

[State 9000, 0]; 投げ無敵
type = NotHitBy
trigger1 = Time >= 1
value = ,AT
time = 2

[State 9000, 0]; 透明＋影消し
type = AssertSpecial
trigger1 = 1
flag = Invisible
flag2 = NoShadow

[State 9000, 0]; 本体に追従
type = BindToParent
trigger1 = 1
time = 1
facing = 1
pos = 0,0

[State 9000, 0]; 判定を揃える
type = ChangeAnim
trigger1 = SelfAnimExist(Parent,Anim)
value = Parent,Anim
elem = Parent,AnimElemNo(0)

[State 9000, 0]; 打撃／飛び道具を受けたらステートを繰り返す
type = HitOverRide
trigger1 = IsHelper(9000)
attr = SCA,AA,AP
stateno = 9000

[State 9000, 0]; 本体がアーマーパートを過ぎたら消滅
type = DestroySelf
trigger1 = Parent,StateNo != [1000,1002]


;---------------------------------------------------------------------------
; ここから下に新しいステートを書くと分かりやすくていいと思います
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; ここは-2のステートを書いてください、ヘルパー関係です
;---------------------------------------------------------------------------
[Statedef -2]

;//////////////////////////////////////////////////////////////////////////
; 補正
[State -2];補正
type = AttackMulSet
trigger1 = !fvar(3)=1
trigger1 = 1
value = 1*fvar(1)
ignorehitpause = 1

[State -2];補正
type = Varset
trigger1 = fvar(1) < 0
fv = 1
value = 0
ignorehitpause = 1

[State -2];補正
type = Varset
trigger1 = enemy,movetype != H
trigger2 = enemy,stateno = [120,155]
fv = 1
value = 1
ignorehitpause = 1

[state -2, a];勝利した？
type = varset
trigger1 = RoundNo >= 2
trigger1 = win
v = 10
value = 1

[State -2, 1];ダッシュの音止め
type = stopSnd
trigger1 = stateno != 100
channel = 1

[state a];断鋼刃エフェクト消去
type = removeexplod
trigger1 = movetype = H
id = 2200

[state a]
type = removeexplod
trigger1 = stateno = 2200&&animelem >= 4
id = 1018

[state a];超火炎音止め
type = stopsnd
trigger1 = movetype = H
channel = 3

[state a]
type = stopsnd
trigger1 = stateno != 1055
channel = 5

[State -2, 3]
type = stopSnd
trigger1 = MoveType = H
channel = 2

;-| CPU Function |----------------------------------------------------

[State -2, デバッグ表示_1]
type =  DisplayToClipboard
trigger1 = 1
text = "V59 = %d,V10 = %d,V43 = %d,V42 = %d,V49 = %d"
params = Var(59),Var(10),Var(43),Var(42),Var(49)
ignorehitpause = 1

[State -2, デバッグ表示_2]
type =  AppendToClipboard
trigger1 = 1
text = "\nBodyDist X=%d,Y=%d, vel X=%d,Y=%d, Dist X=%d,"
params = floor(P2BodyDist X),ceil(P2BodyDist Y),floor(vel X),ceil(vel Y),floor(p2Dist X)
ignorehitpause = 1

[State -2, デバッグ表示_3]
type = null;DisplayToClipboard
trigger1 = 1
trigger1 = (NumHelper(30000) && NumHelper(31000))
ignorehitpause = 1
text = "helper(30000),rootdist x = %f\nhelper(31000,rootdist x = %f,BodyDist X=%d"
params = (helper(30000),RootDist X), (helper(31000),RootDist X),floor(P2BodyDist X)
ignorehitpause = 1

[State -2, 自キャラ空中ガード不可]
type = assertspecial 
trigger1 = 1
flag = noairguard

;各種ジャンプ用フラグ
[State -2,VarSet]
type = VarSet
trigger1 = Time = 0 && Command = "holddown"
persistent = 0
v = 28
value = 1

[State -2,VarSet]
type = VarSet
trigger1 = Var(28) != 0 && Time = 5
v = 28
value = 0

[State -2,VarSet]
type = VarSet
trigger1 = Var(25) != 0 && (StateType != A || MoveType = H)
v = 25
value = 0

[State -2,VarSet]
type = VarSet
trigger1 = Var(26) != 0 && (StateType = A || MoveType = H)
v = 26
value = 0

;AI用重力加速度計測
[state -2,yaccel]
type = varset
trigger1 = fvar(20) != EnemyNear(var(57)),const(movement.yaccel)
trigger1 = EnemyNear(var(57)),stateno != [5000,5210]
trigger1 = EnemyNear(var(57)),vel y != 0
fv = 20
value = EnemyNear(var(57)),const(movement.yaccel)
ignorehitpause = 1

[state -2,yaccel]
type = varset
trigger1 = fvar(20) != EnemyNear(var(57)),gethitvar(yaccel)
trigger1 = EnemyNear(var(57)),stateno = [5000,5210]
fv = 20
value = EnemyNear(var(57)),gethitvar(yaccel);(打撃当てた時のyaccel値)
ignorehitpause = 1

[state -2, yaccel]
type = varset
trigger1 = fvar(20) != 0
trigger1 = EnemyNear(var(57)),vel y = 0
fv = 20
value = 0;(打撃当てた時のyaccel値)
ignorehitpause = 1

[State -2, ガード回数監視]
type = Null
TriggerAll = Alive && RoundState=2
Trigger1 = StateNo=151||StateNo=153||StateNo=154
Trigger1 = Time=1
Trigger1 = var(40):=1+var(40)
Trigger2 = var(40)>=1
Trigger2 = StateNo != [120,155]
Trigger2 = var(40):=0||1
Ignorehitpause=1

[State -2,PowerAdd]
type = PowerAdd
trigger1 = GetHitVar(damage) > 0
trigger1 = GetHitVar(hitcount) > 0
value = Ceil(GetHitVar(damage)/GetHitVar(hitcount))

[State -2,PowerAdd]
type = PowerAdd
trigger1 = GetHitVar(damage) > 0
trigger1 = GetHitVar(hitcount) = 0
value = Ceil(GetHitVar(damage))

[State -2,PowerAdd]
type = PowerAdd
Trigger1 = StateNo=151||StateNo=153||StateNo=154
value = Ceil(var(40)*0.3)

[state -2,ガード硬直]
type = varadd
trigger1 = var(41)>0
var(41)=-1
ignorehitpause=1

[state -2,ガード時間]
type=varset
triggerall = var(41)>0
trigger1 = EnemyNear(var(57)),Movetype!=H
var(41)=0

[state -2,ガード硬直]
type=varset
triggerall = EnemyNear(var(57)),Movetype=H
triggerall = EnemyNear(var(57)),stateno < 200
triggerall = EnemyNear(var(57)),Statetype=A
trigger1 = !EnemyNear(var(57)),gethitvar(fall)
trigger1 = !(EnemyNear(var(57)),hitshakeover)
trigger1 = EnemyNear(var(57)),time=1 || var(0)=0
var(41) = EnemyNear(var(57)),gethitvar(ctrltime)+EnemyNear(var(57)),gethitvar(hitshaketime)+1
ignorehitpause=1

[state -2,ガード硬直]
type=varset
triggerall = EnemyNear(var(57)),Movetype=H
triggerall = EnemyNear(var(57)),stateno < 200
triggerall = EnemyNear(var(57)),Statetype!=A
trigger1 = !EnemyNear(var(57)),gethitvar(fall)
trigger1 = !(EnemyNear(var(57)),hitshakeover)
trigger1 = EnemyNear(var(57)),time=1 || var(0)=0
var(41) = ifelse(EnemyNear(var(57)),gethitvar(ctrltime)<EnemyNear(var(57)),gethitvar(hittime),EnemyNear(var(57)),gethitvar(ctrltime),EnemyNear(var(57)),gethitvar(hittime))+EnemyNear(var(57)),gethitvar(hitshaketime)+1
ignorehitpause=1

[State -2,のけぞり時間]
type=varset
triggerall = EnemyNear(var(57)),Movetype=H
triggerall =EnemyNear(var(57)),stateno > 199
trigger1 = !EnemyNear(var(57)),gethitvar(fall)
trigger1 = !(EnemyNear(var(57)),hitshakeover)
trigger1 = EnemyNear(var(57)),time=1
var(41) = EnemyNear(var(57)),gethitvar(hittime)+EnemyNear(var(57)),gethitvar(hitshaketime)+1
ignorehitpause=1

[State -2, 4050]
type = VarSet
triggerall = var(42)=0 && var(43)=0 && var(44)=0
triggerall = roundstate = 2
TriggerAll = movetype=H && time=1
trigger1= prevstateno=4050
var(42) = EnemyNear(var(57)),stateno
IgnoreHitPause = 1

[State -2, 4050]
type = VarSet
triggerall = var(42)>=1 && var(43)=0 && var(44)=0
triggerall = roundstate = 2
TriggerAll = movetype=H && time=1
trigger1= prevstateno=4050
trigger1= !(EnemyNear(var(57)),stateno=var(42))
var(43) = EnemyNear(var(57)),stateno
IgnoreHitPause = 1

[State -2, 4050]
type = VarSet
triggerall = var(42)>=1 && var(43)=1 && var(44)=0
triggerall = roundstate = 2
TriggerAll = movetype=H && time=1
trigger1= prevstateno=4050
trigger1= !(EnemyNear(var(57)),stateno=var(42))
var(44) = EnemyNear(var(57)),stateno
IgnoreHitPause = 1

[State -2, 4050]
type = VarSet
triggerall = var(45)=1 
triggerall = roundstate = 2
TriggerAll = movetype=H && time=1
trigger1= prevstateno=4050
var(45) = EnemyNear(var(57)),stateno
IgnoreHitPause = 1

[State -2, 4050]
type = VarSet
triggerall = var(45)=1 
triggerall = roundstate = 2
TriggerAll = time>=3
trigger1= stateno!=4050
var(45) = 0
IgnoreHitPause = 1

[State -2, 中段学習]
type = VarSet
triggerall = var(53)=0 && var(54)=0 && var(55)=0
triggerall = roundstate = 2
triggerall = stateno!=[120,155]
TriggerAll = movetype=H && time=1
TriggerAll = EnemyNear(Var(57)),statetype!=A
trigger1= prevstateno=131
trigger2= prevstateno=[152,153]
var(53) = EnemyNear(Var(57)),stateno
IgnoreHitPause = 1

[State -2, 中段学習]
type = VarSet
triggerall = var(53)!=0 && var(54)=0 && var(55)=0
triggerall = roundstate = 2
triggerall = EnemyNear(Var(57)),stateno != var(53)
triggerall = stateno!=[120,155]
TriggerAll = movetype=H && time=1
TriggerAll = EnemyNear(Var(57)),statetype!=A
trigger1= prevstateno=131
trigger2= prevstateno=[152,153]
var(54) = EnemyNear(Var(57)),stateno
IgnoreHitPause = 1

[State -2, 中段学習]
type = VarSet
triggerall = var(53)!=0 && var(54)!=0 && var(55)=0
triggerall = roundstate = 2
triggerall = EnemyNear(Var(57)),stateno != var(53)
triggerall = EnemyNear(Var(57)),stateno != var(54)
triggerall = stateno!=[120,155]
TriggerAll = movetype=H && time=1
TriggerAll = EnemyNear(Var(57)),statetype!=A
trigger1= prevstateno=131
trigger2= prevstateno=[152,153]
var(55) = EnemyNear(Var(57)),stateno
IgnoreHitPause = 1

[State -2, 空中下段学習]
type = VarSet
triggerall = var(56)=0
triggerall = roundstate = 2
triggerall = stateno!=[120,155]
TriggerAll = movetype=H && time=1
TriggerAll = EnemyNear(Var(57)),statetype=A
trigger1= prevstateno=130
trigger2= prevstateno=[150,151]
var(56) = EnemyNear(Var(57)),stateno
IgnoreHitPause = 1

[State -2, アーマーヘルパー呼び出し]
type = Helper
triggerall = !NumHelper(9000) && MoveType != H
trigger1 = StateNo = 1000 && Time = 1 ;双手
trigger2 = StateNo = 1001 && Time = 1 ;双手
trigger3 = StateNo = 1002 && Time = 1 ;双手

name = "Armor"
stateno = 9000
ID = 9000
;Size.XScale = 1
;Size.YScale = 1
postype = p1
pos = 0,0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State -2, アーマー中の投げ以外無敵]
type = NotHitBy
trigger1 = NumHelper(9000)
value2 = ,AA,AP
time = 2

[State -2, アーマー中に被弾した時の無敵時間延長（２重被弾抑制処置）]
type = NotHitBy
trigger1 = NumHelper(9000)
trigger1 = Helper(9000),GetHitVar(damage)
value = SCA
time = Helper(9000),GetHitVar(hitshaketime)+5

[State -2, アーマー受けした時の点滅]
type = PalFX
trigger1 = NumHelper(9000)
trigger1 = Helper(9000),GetHitVar(damage)
time = 5
add = 256,10,10

[State -2, アーマー受けした時のライフ減少]
type = LifeAdd
trigger1 = NumHelper(9000)
trigger1 = Helper(9000),GetHitVar(damage)
value = -1*Helper(9000),GetHitVar(damage)/1.2
absolute = 1
ignorehitpause = 1
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;::::::::変数設定(多分ダメージ関係が殆ど)
[state a]
type = varset
trigger1 = movetype = H
v = 12
value = 0

[state a]
type = varset
trigger1 = movetype = H
v = 13
value = 0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;::::::::パレットによるモード判別(1で本気)
[state -2, a]
type = varset
trigger1 = palno = 1
trigger2 = palno = 2
trigger3 = palno = 3
trigger4 = palno = 4
trigger5 = palno = 5
trigger6 = palno = 6
v = 1
value = 0

[state -2, a]
type = varset
trigger1 = palno = 7
trigger2 = palno = 8
trigger3 = palno = 9
trigger4 = palno = 10
trigger5 = palno = 11
trigger6 = palno = 12
v = 1
value = 1


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;::::::::スロー処理

[state -2, a];スロー処理をする時間のカウント
type = varadd
trigger1 = 1
persistent = 0
ignorehitpause = 1
v = 4
value = -1

[state -2, a];スロー処理
type = pause
trigger1 = var(4) >= 1
trigger1 = gametime % 2
persistent = 0
ignorehitpause = 1
time = 1


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;ダメージ時のエフェクト、サウンドの消去
;//////////////////////////////////////////////////////////////////////////
;ダメージ時のエフェクトの消去
[State 1]
type = removeexplod
trigger1 = MoveType = H
ID = 2450

;ダメージ時のエフェクトの消去
[State -2 ,a]
type = removeexplod
trigger1 = MoveType = H
ID = 4000

;ダメージ時のエフェクトの消去
[state -2 ,a]
type = removeexplod
trigger1 = MoveType = H
id = 4200

[state a]
type = removeexplod
trigger1 = MoveType = H
id = 1655

[state a]
type = removeexplod
trigger1 = MoveType = H
id = 1860

;ダメージ時のサウンドの消去
[state a]
type = stopsnd
trigger1 = MoveType = H
channel = 1

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;上段受け
;//////////////////////////////////////////////////////////////////////////
;---------------------------------------------------------------------------

[State -2, 1]
type = VarSet
trigger1 = fvar(30) >= 20
fvar(31) = 0

[State -2, 2]
type = VarSet
trigger1 = fvar(30) >= 20
fvar(30) = 0

[State -2, 3]
type = VarSet
triggerall = fVar(30) = 0
trigger1 = command = "上段受け" && command != "holddown"&& command != "holdup"
fvar(30) = 1

[State -2, 4]
type = VarAdd
trigger1 = fVar(30) > 0
fvar(30) = 1
ignorehitpause = 1

[State -2, 5]
type = VarSet
triggerall = fvar(30) = [1,6]
trigger1 = command != "holddown" && command != "holdup" && command != "holdfwd"&& command != "holdback"
fvar(31) = 1

[State -2, 6] 
type = HitOverride
triggerall = statetype != A && ctrl = 1
trigger1 = fVar(30) = [1,6]
trigger2 = (fVar(30) = [7,10]) && fvar(31) = 1
slot = 0
stateno = 340
attr = SA, NA, SA, HA, NP, SP, HP
time = 1

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;下段受け
;//////////////////////////////////////////////////////////////////////////
;---------------------------------------------------------------------------

[State -2, Blocking-1]
type = VarSet
trigger1 = fvar(32) >= 20
fvar(33) = 0

[State -2, Blocking-2]
type = VarSet
trigger1 = fvar(32) >= 20
fvar(32) = 0

[State -2, Blocking-3]
type = VarSet
triggerall = fVar(32) = 0
trigger1 = command = "下段受け" && command != "holdfwd"&& Command != "holdback"
fvar(32) = 1

[State -2, Blocking-4]
type = VarAdd
trigger1 = fVar(32) > 0
fvar(32) = 1
ignorehitpause = 1

[State -2, Blocking-5]
type = VarSet
triggerall = fvar(32) = [1,6]
trigger1 = command != "holdfwd" && Command != "holdback" && command != "holdup" && Command != "holddown"
fvar(33) = 1

[State -2, Blocking-6] 
type = HitOverride
triggerall = statetype != A && ctrl = 1
trigger1 = fVar(32) = [1,6]
trigger2 = (fVar(32) = [7,10]) && fvar(33) = 1
slot = 0
stateno = 350
attr = C, NA, SA, HA, NP, SP, HP
time = 1

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;空中受け
;//////////////////////////////////////////////////////////////////////////
;---------------------------------------------------------------------------

[State -2, Blocking-1]
type = VarSet
trigger1 = var(34) >= 20
var(35) = 0

[State -2, Blocking-2]
type = VarSet
trigger1 = var(34) >= 20
var(34) = 0

[State -2, Blocking-3]
type = VarSet
triggerall = Var(34) = 0
trigger1 = command = "上段受け" && command != "holddown"&& command != "holdup"
var(34) = 1

[State -2, Blocking-4]
type = VarAdd
trigger1 = Var(34) > 0
var(34) = 1
ignorehitpause = 1

[State -2, Blocking-5]
type = VarSet
triggerall = var(34) = [1,6]
trigger1 = command != "holddown" && command != "holdup" && command != "holdfwd"&& command != "holdback"
var(35) = 1

[State -2, Blocking-6] 
type = HitOverride
triggerall = statetype = A && ctrl = 1
trigger1 = Var(34) = [1,6]
trigger2 = (Var(34) = [7,8]) && var(35) = 1
slot = 0
stateno = 355
attr = SCA, NA, SA, HA, NP, SP, HP
time = 1
;///////////////////////////////////////////////////////////////////////
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;




;---------------------------------------------------------------------------
; ここから下は-3のステートを書いてください、ここに書いたものはゲーム中
; に条件が成立すればいつでも開始するステートです。
;---------------------------------------------------------------------------

[Statedef -3]

;ゲーム中に常にいつでも開始したいステート、ここでは「着地音」に使用しています
;下の条件は「52か106のステートに移動して１フレーム目に」と言う事です。
;52と106はバックステップとジャンプの着地のステートです。
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 
trigger2 = stateno = 107 
trigger3 = stateno = 103 
value = 40, 0

[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 105 
trigger2 = stateno = 101 
value = 105, 0

[State -3, 3];ダッシュの音止め
type = stopSnd
trigger1 = stateno != 100
channel = 1

;ダメージ時のエフェクトの消去
[State 1]
type = removeexplod
trigger1 = MoveType = H
ID = 2405

;ダメージ時のエフェクトの消去
[State 1]
type = removeexplod
trigger1 = MoveType = H
ID = 1000

[state a];残像消去
type = afterimagetime
trigger1 = movetype = H
time = 0


;----------------------------------------------------------------------------
;打撃エフェクト用ヘルパー（ヒット）
[Statedef 7000]
type = A
ctrl = 0
anim = 30000
VelSet = 0,0
movetype = I
physics = N
sprpriority = 4

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;[state a]
;type = Trans
;trigger1 = 1
;trans = addalpha
;alpha = 256,256

[state a]
type = destroyself
trigger1 = animtime = 0


[Statedef 7001]
type = A
ctrl = 0
anim = 30002
VelSet = 0,0
movetype = I
physics = N
sprpriority = 4

;[state a]
;type = angledraw
;trigger1 = 1
;scale = 0.88,0.88

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;[state a]
;type = Trans
;trigger1 = 1
;trans = addalpha
;alpha = 256,256

[state a]
type = destroyself
trigger1 = animtime = 0


[Statedef 7002]
type = A
ctrl = 0
anim = 30002
VelSet = 0,0
movetype = I
physics = N
sprpriority = 4

;[state a]
;type = angledraw
;trigger1 = 1
;scale = 0.85,0.85

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;[state a]
;type = Trans
;trigger1 = 1
;trans = addalpha
;alpha = 256,256

[state a]
type = destroyself
trigger1 = animtime = 0

[Statedef 7003]
type = A
ctrl = 0
anim = 30002
VelSet = 0,0
movetype = I
physics = N
sprpriority = 4

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;[state a]
;type = Trans
;trigger1 = 1
;trans = addalpha
;alpha = 256,256

[state a]
type = destroyself
trigger1 = animtime = 0

;----------------------------------------------------------------------------
;打撃エフェクト用ヘルパー(ガード)

[Statedef 7010]
type = A
ctrl = 0
anim = 30040
VelSet = 0,0
movetype = I
physics = N
sprpriority = 4

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;[state a]
;type = Trans
;trigger1 = 1
;trans = addalpha
;alpha = 256,256

[state a]
type = destroyself
trigger1 = animtime = 0


[Statedef 7011]
type = A
ctrl = 0
anim = 30040
VelSet = 0,0
movetype = I
physics = N
sprpriority = 4

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;[state a]
;type = Trans
;trigger1 = 1
;trans = addalpha
;alpha = 256,256

[state a]
type = destroyself
trigger1 = animtime = 0


[Statedef 7012]
type = A
ctrl = 0
anim = 30040
VelSet = 0,0
movetype = I
physics = N
sprpriority = 4

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;[state a]
;type = Trans
;trigger1 = 1
;trans = addalpha
;alpha = 256,256

[state a]
type = destroyself
trigger1 = animtime = 0

