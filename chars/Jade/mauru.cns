; Welcome to Mauru's constants, my friend.
; By Inverse ^_^
;
; Please send any comments to:
; mr_santana@hotmail.com
; http://inverse.mgbr.net

; ** Variables summary **

;
; Var(2)  - Continually counts down.
;           When it's 1, MIRACLE VOICE's projectile sound sample will be
;           played (only if there is a MIRACLE VOICE projectile on screen).
; Var(3)  - Used to switch to the match lost liedead animation.
; Var(4)  - Temporary variable when running.
; Var(5)  - Used to trigger the background effects when knocking out the
;           opponent with a super move.
; Var(6)  - Used to time spaces between hits in MIRACLE VOICE's projectile.
; Var(7)  - Counts SUPER MODE's remaining time, if activated (else, it' s 0).
; Var(8)  - Controls Mauru's blinking while in SUPER MODE.
; Var(9)  - Counts number of ticks after a win by KO.
; Var(13) - Records the state Mauru is when P2 is KOed (if Mauru killed P2,
;           it shows with which move).
; Var(15) - Keeps track of the state Mauru was in the last tick. Used to
;           detect when Mauru changes states.
; Var(16) - Trigger for KO effects.
; Var(20) - Combo counter for damage reduction.
;
; Var(30) - AI On(1) - Off(-1)
; Var(40) - AI Trigger 1 - G.
; Var(41) - AI Trigger 2 - EN.
; Var(42) - AI Trigger 3 - EM.
; Var(43) - AI Trigger 4 - EF.
; Var(44) - AI Trigger 5 - JF.
; Var(45) - AI Trigger 6 - ATG.
; Var(46) - AI Trigger 7 - ATA.
; Var(47) - AI Trigger 8 - GTA.
; Var(48) - AI Trigger 9 - CMB.
;
; FVar(1) - Damage increase in ES GURUGURU PUNCH (by holding button).
; 


[Data]
life = 1000          ;Amount of life to start with
attack = 100         ;100% attack power (more is stronger)
defence = 100        ;100% defensive power (more is stronger)
fall.defence_up = 50 ;Def goes up by 50% everytime player is hit on ground
liedown.time = 60    ;Time player takes before getting up from HIT_LIEDOWN
airjuggle = 15       ;Can do 15 points of juggling
sparkno = 2          ;Default spark number
guard.sparkno = 40   ;Default guard spark number
KO.echo = 0          ;1 to enable echo on KO
;;volume = 100         ;Volume offset (negative for softer)
IntPersistIndex = 60

[Size]
xscale = 1           ;Horizontal scaling factor.
yscale = 1           ;Vertical scaling factor.
head.pos = -8, -64
mid.pos = -3, -43
ground.back = 33     ;Player width (back, ground)
ground.front = 33    ;Player width (front, ground)
air.back = 33        ;Player width (back, air)
air.front = 33       ;Player width (front, air)
;z.width = 3          ;Player width (into and out)
height = 60	     ;Height of player (for opponent to jump over)
;attack.width = 33,33 ;Default attack width: back, front
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too   

[Velocity]
walk.fwd  = 2        ;Walk forward
walk.back = -1.66    ;Walk backward
run.fwd  = 5.5, 0    ;Run forward (x, y)  - if y<0, player will hop
run.back = -4.5,-3.8 ;Run backward (x, y) - if y=0, player will run
jump.neu = 0,-10    ;Neutral jumping velocity (x, y)
jump.back = -2.55    ;Jump back Speed (x, y)
jump.fwd = 2.5       ;Jump forward Speed (x, y)

[Movement]
airjump.num = 0      ;Number of air jumps allowed (opt)
airjump.height = 35  ;Minimum distance from ground before you can air jump (opt)
yaccel = .43         ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .85 ;Friction coefficient when crouching

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...

;
; ********************
; **  MAURU states  **
; ********************
;




;From Ryu718 
;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0
;ctrl = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 5 && ishelper
trigger2 = animelem = 3 && ishelper
ignorehitpause = 1
;persistent = 

[State 0, 0]
type = ChangeAnim
triggerall = life >= 661
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0 

[State 0, 1]
type = ChangeAnim
triggerall = life <= 660
;triggerall = life >= 501
triggerall = life >= 251
trigger1 = Anim != 1 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 1

;[State 0, 2]
;type = ChangeAnim
;triggerall = life <= 500
;triggerall = life >= 251
;trigger1 = Anim != 2 && Anim != 5
;trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
;value = 2

[State 0, 3]
type = ChangeAnim
triggerall = life <= 250
trigger1 = Anim != 3 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 3

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0;

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

;---------------------------------------------------------------------------
; CROUCH_DOWN
[Statedef 10]
type    = C
physics = C

[State 10, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 10

[State 10, 2]
type = VelMul
trigger1 = Time = 0
x = 0.8

[State 10, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; CROUCH
[Statedef 11]
type    = C
physics = C

[State 11, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 11

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 6
value = 11

;---------------------------------------------------------------------------
; CROUCH_UP
[Statedef 12]
type    = S
physics = S

[State 12, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 12

[State 12, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
facep2 = 1

;[State 40, 0] ;Odb718
;type = Turn
;trigger1 = P2Dist X < -5
;trigger1 = Time = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1


;---------------------------------------------------------------------------
; JUMP_LAND
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = explod
trigger1 = Time = 0
ID = 100
ownpal = 1
pos = -1, 4
postype = p1
bindtime = 1
anim = 997
sprpriority = 7
shadow = -1

[State 52, 4]
type = PlaySnd
trigger1 = Time = 0
value = 0, 21

[State 52, Guard]
type= changestate
trigger1= inguarddist
trigger1= ctrl && command="holdback"
value= 120

[State 52, 5]
type = CtrlSet
trigger1 = time = 3
value = 1

[State 52, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Running
[Statedef 100]
type    = S
physics = S
velset = 0,0
ctrl = 1
anim = 100

[State 100, 0]
type = VarSet
trigger1 = Time = 0
v = 4
value = Var(43) = [300, 699]

[State 100, 1]
type = VarSet
trigger1 = Time = 0
v = 43
value = 0

[State 100, 1]
type = VelSet
trigger1 = Time <= 4
x = 0

[State 100, 2]
type = VelSet
trigger1 = Time > 4
x = const(velocity.run.fwd.x)

[State 100, 3]
type = PlaySnd
trigger1 = Time >= 5
trigger1 = numexplod(100) = 0
trigger2 = Time = 5
value = 0,0

[State 100, 4]
type = explod
trigger1 = Time = 5
trigger2 = numexplod(100) = 0
ID = 100
ownpal = 1
pos = -16, 22
postype = p1
bindtime = 1
anim = 999
sprpriority = 7
shadow = -1

[State 100, 6] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 8]
type = Null ;CtrlSet
triggerall = Time > 4
trigger1 = command != "holdfwd"
value = 0

[State 100, 9]
type = ChangeState
triggerall = Time > 4
trigger1 = Var(30) <= 0
trigger1 = command != "holdfwd"
trigger2 = Var(30) = 1
trigger2 = Var(4) = 0
trigger2 = command != "holdfwd"
value = 101

[State 100, 10]
type = ChangeState
triggerall = Var(30) = 1
triggerall = Var(4) = 1
triggerall = Time > 4
trigger1 = P2BodyDist X = [-10, 100]
;trigger2 = EnemyNear, NumProj > 0
;trigger3 = P2MoveType = A
value = 101

;---------------------------------------------------------------------------
; Stops running (first frame)
[Statedef 101]
type    = S
physics = N
ctrl = 0
anim = 101

[State 101, 1]
type = VelSet
trigger1 = Time = 0
x = 7

[State 101, 2]
type = VelMul
trigger1 = Time = 0
x = 0.7

[State 101, 3]
type = explod
trigger1 = Time = 0
ID = 100
ownpal = 1
pos = 37, 22
postype = p1
bindtime = 1
anim = 998
sprpriority = 7
shadow = -1

[State 101, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 102

;---------------------------------------------------------------------------
; Stops running (rest of frames)
[Statedef 102]
type    = S
physics = N
ctrl = 1
anim = 102

[State 102, 2]
type = VelMul
trigger1 = Time = 0
x = 0.7

[State 102, 3]
type = VelMul
trigger1 = Time = 7
x = 0.4

[State 102, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; HOP_BACK (taking impulse)
[Statedef 105]
type    = S
physics = S
ctrl = 0
anim = 105

[State 105,1]
type = VelSet
trigger1 = Time <= 10
x = 0
y = 0

[State 105,2]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 33

[State 105, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 106

;---------------------------------------------------------------------------
; HOP_BACK (flying)
[Statedef 106]
type    = A
physics = A
ctrl = 0
anim = 106

[State 106, 0]
type = VelSet
trigger1 = Time = 0
y = -5
x = -3.375
 


[State 106, 1]
type = explod
trigger1 = Time = 0
ID = 100
ownpal = 1
pos = 14, 31
postype = p1
bindtime = 1
anim = 998
sprpriority = 7
shadow = -1

[State 106, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 60

[State 106, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 52

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
trigger1 = command = "holddown"
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140


;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
trigger1 = command != "holddown"
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0;,0

[State 170, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

;---------------------------------------------------------------------------
; WIN
[Statedef 180]
type = S
ctrl = 0
anim = 180
velset = 0,0;,0

[State 180, 0]
trigger1 = Life >= 900
type = ChangeState
value = 183

[State 180, 1]
trigger1 = Life <= 100
type = ChangeState
value = 184

[State 180, 3]
type = ChangeState
trigger1 = Var(1) <= 50
value = ifelse(Random <= 449,182,181) 

;---------------------------------------------------------------------------
; WIN POSE 1
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0;,0

[State 181, 0]
type = AssertSpecial
trigger1 = Time = [0,145]
flag = roundnotover

[State 181, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 100

[State 181, 4]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 62

[State 181, 5]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 18

[State 181, 6]
type = PlaySnd
trigger1 = AnimElem = 20
value = 0, 19

[State 181, 7]
type = PlaySnd
trigger1 = AnimElem = 20
value = 0, 20

;---------------------------------------------------------------------------
; WIN POSE 2
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0;,0

[State 182, 0]
type = AssertSpecial
trigger1 = Time = [0,145]
flag = roundnotover

[State 182, 1]
type = PlaySnd
trigger1 = AnimElem = 13
value = 0, 24

[State 182, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 100

;---------------------------------------------------------------------------
; SPECIAL WIN POSE - (Almost) perfect match
[Statedef 183]
type = S
ctrl = 0
anim = 180
velset = 0,0;,0

[State 182, 0]
type = AssertSpecial
trigger1 = Time = [0,445]
flag = roundnotover

[State 183, 2]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 100

;---------------------------------------------------------------------------
; FERNANDEZ win pose
[State 183, 5]
type = Helper
triggerall = numhelper(9080) = 0
trigger1 = Time = 20
pos = 0, -3
postype = p1
stateno = 9080
;helpertype = normal
keyctrl = 0
ownpal = 1

; DANDY-J win pose
[State 183, 6]
type = Helper
trigger1 = Time = 30
pos = -30, -200
postype = p1
stateno = 9072
;helpertype = normal
keyctrl = 0
ownpal = 1

; NATSUMI win pose
[State 183, 7]
type = Helper
trigger1 = Time = 40
pos = 40, -200
postype = p1
stateno = 9075
;helpertype = normal
keyctrl = 0
ownpal = 1

; POLITANK-Z win pose
[State 183, 8]
type = Helper
trigger1 = Time = 90
pos = 0, -200
postype = p1
stateno = 9084
;helpertype = normal
keyctrl = 0
ownpal = 1

; ARINA win pose
[State 183, 9]
type = Helper
trigger1 = Time = 90
pos = 0, -200
postype = p1
stateno = 9090
;helpertype = normal
keyctrl = 0
ownpal = 1

; RAI win pose
[State 183, 10]
type = Helper
trigger1 = Time = 100
pos = 0, -200
postype = p1
stateno = 9095
;helpertype = normal
keyctrl = 0
ownpal = 1

; TESSE win pose
[State 183, 11]
type = Helper
trigger1 = Time = 60
pos = 215, -200
postype = p1
stateno = 9100
;helpertype = normal
keyctrl = 0
ownpal = 1

; SLASH win pose
[State 183, 12]
type = Helper
trigger1 = Time = 110
pos = -170, -200
postype = p1
stateno = 9105
;helpertype = normal
keyctrl = 0
ownpal = 1

; BONUS KUN win pose
[State 183, 13]
type = Explod
trigger1 = Time = 260
anim = 9110
removetime = 160
postype = p1
pos = -320, -50
velocity = 10, 0
sprpriority = 2
ownpal = 1

[State 183, 14]
type = PlaySnd
trigger1 = Time = 280
value = 0, 74

; RAMPOO (DANDY-J's cat) win pose
[State 183, 15]
type = Helper
trigger1 = Time = 230
pos = 7, -230
postype = p1
stateno = 9115
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 183, 20]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 62

[State 183, 21]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 18

[State 183, 22]
type = PlaySnd
trigger1 = AnimElem = 20
value = 0, 19

;---------------------------------------------------------------------------
; SPECIAL WIN POSE 2 - Barely alive
[Statedef 184]
type = S
ctrl = 0
anim = 5300
velset = 0,0;,0

[State 184, 0]
type = AssertSpecial
trigger1 = Time = [0, 200]
flag = roundnotover

[State 184, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 76

[State 184, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 77

[State 184, 3]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 100

[State 184, 4]
type = VarRandom
trigger1 = Time = 68
v = 1
range = 0, 100

[State 184, 5]
type = ChangeState
trigger1 = Time = 68
trigger1 = Var(1) <= 50
value = 181

[State 184, 6]
type = ChangeState
trigger1 = Time = 68
trigger1 = Var(1) > 50
value = 182

;---------------------------------------------------------------------------
; INTRO
[Statedef 191]
type = S
ctrl = 0
velset = 0,0;,0

[State 191, 5]
type = ChangeState
trigger1 = Facing = 1
value = 192

[State 191, 10]
type = ChangeState
trigger1 = Facing != 1
value = 193


; ** Intro 1 **
[Statedef 192]
type = S
ctrl = 0
anim = 199 ;910
velset = 0,0;,0

[State 192, 0] ;Intro not yet over
type = AssertSpecial
trigger1 = Time = [0, 120]
flag = intro

[State 192, 3]
type = Explod
trigger1 = Time = 0
shadow = -1
anim = 190
removetime = 100
postype = p1
pos = -200, 0
velocity = 2, 0

[State 192, 6]
type = ChangeAnim
trigger1 = Time = 100
value = 0

[State 192, 7]
type = PlaySnd
trigger1 = Time = 95
value = 0, 23

[State 192, 8]
type = PlaySnd
trigger1 = Time = 0
;trigger2 = Time = 5
;trigger3 = Time = 38
trigger2 = Time = 32
trigger3 = Time = 64
value = 0, 22


; ** Intro 2 **
[Statedef 193]
type = S
ctrl = 0
anim = 191
velset = 0,0;,0

[State 193, 0] ;Intro not yet over
type = AssertSpecial
trigger1 = Time = [0, 260]
flag = intro

[State 192, 3]
type = Projectile
trigger1 = Time = 0
projshadow = -1
projanim = 192
projremovetime = 102
offset = 0, 0
velocity = 1.75, 0

[State 193, 4]
type = Projectile
trigger1 = AnimElem = 15
projshadow = -1
projanim = 193
projremovetime = 25
offset = 63, -70
velocity = 0, -10

[State 193, 5]
type = Projectile
trigger1 = Time = 207
projshadow = -1
projanim = 193
projremovetime = 15
offset = 0, -270
velocity = 0, 12

[State 193, 6]
type = Playsnd
trigger1 = Time = 136
value = 0, 41

[State 193, 7]
type = Playsnd
trigger1 = AnimElem = 22
value = 0, 23

[State 193, 8]
type = Playsnd
trigger1 = Time = 15
trigger2 = Time = 45
trigger3 = Time = 75
trigger4 = Time = 105
value = 0, 12

[State 193, 10]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; STAND_X - Weak punch
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 3                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 200                       ;Change animation (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)

[State 200,1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 2
 

[State 200, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage    = 20;40
animtype = Light
getpower = 20
givepower = 10
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 7,8 
numhits = 1
sparkno = S7002
guard.sparkno = S7020
sparkxy = 10, -50
hitsound = S0, 80
guardsound = S0, 83
ground.type = Low
ground.slidetime = 5
ground.hittime  = 14
ground.velocity = -8
airguard.velocity = -1.9,(enemy,vel y) 
air.velocity = -2.0,-4.0
 
[State 200, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; STAND_Y - Strong punch
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
ctrl = 0
velset = 0,0;,0
anim = 210

[State 210, 0]
type = VarAdd
trigger1 = Var(48) > 0
trigger1 = Time = 0
v = 48
value = ifelse( Var(48) = 1, -2,  -1)

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 64

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 4

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Heavy
damage    = 45;90
guardflag = MAF
pausetime = 7,8
sparkno = S7004
guard.sparkno = S7020
sparkxy = -10,-70
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -10
air.velocity = -2.4,-4.5
 
[State 210, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------------------------
; ** DOUBLE CLAW - Any punch + Any kick  **

; STAND_Z
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
ctrl = 0
velset = 0,0;,0
anim = 700

[State 700, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 9

[State 700, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 40

[State 700, 2]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype  = Heavy
damage    = 62;115
guardflag = HAF
pausetime = 7,8
sparkno = S7004
guard.sparkno = S7020
sparkxy = -10,-55
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
priority = 5
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -10
air.velocity = -2.4,-4.5
 
[State 700, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=========================================================
; ** Fake to DOUBLE CLAW  **
[Statedef 221]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
ctrl = 0
velset = 0,0;,0
anim = 701

[State 701, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 9

[State 701, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 40

[State 701, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NA
animtype  = Heavy
damage    = 62;115
guardflag = HAF
pausetime = 7,8
sparkno = S7004
guard.sparkno = S7020
sparkxy = -10,-55
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
priority = 5
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -10
air.velocity = -2.4,-4.5

[State 701, 45]
type = EnvColor
trigger1 = WinKO = 1
trigger1 = MoveHit
trigger1 = MoveHit = 1
value = 255, 255, 255
time = 1
ignorehitpause = 1

[State 701, 46]
type = PlaySnd
trigger1 = WinKO = 1
trigger1 = MoveHit
trigger1 = MoveHit = 1
value = 0, 78
channel = 8
ignorehitpause = 1

[State 701, 46]
type = MoveHitReset
trigger1 = WinKO = 1
trigger1 = MoveHit
ignorehitpause = 1

[State 701, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;=========================================================

;---------------------------------------------------------------------------
; STAND_ 
[Statedef 240]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 3                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 240                       ;Change animation (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)

[State 220,1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 220, 3]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Heavy
damage    = 45;90
guardflag = MAF
pausetime = 7,8
sparkno = S7004
guard.sparkno = S7020
sparkxy = -10,-70
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -10
air.velocity = -2.4,-4.5
 
[State 220, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; STAND_ 
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
ctrl = 0
velset = 0,0;,0
anim = 250

[State 230, 0]
type = VarAdd
trigger1 = Var(48) > 0
trigger1 = Time = 0
v = 48
value = ifelse( Var(48) = 1, -2,  -1)

[State 230, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 5

[State 230, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 6

[State 230, 3]
type = PlaySnd
trigger1 = AnimElem = 12
value = 0, 9

[State 230, 4]
type = explod
trigger1 = AnimElem = 13
ID = 100
ownpal = 1
pos = -1, 4
postype = p1
bindtime = 1
anim = 997
sprpriority = 7
shadow = -1

[State 230, 5]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Back
damage    = 50;100
guardflag = MAF
pausetime = 10, 8
sparkno = S7004
guard.sparkno = S7020
sparkxy = -10,-70
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -1.9, -8
air.velocity = -2.2,-6
fall = 1
id = 230
;fall.xvelocity = 0
fall.yvelocity = -2.5
fall.recover = 0
 
[State 230, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

 
;---------------------------------------------------------------------------
;hop over kick
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 55
ctrl = 0
anim = 230

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 2
value = 0, 5  ;0, 12 


[State 240, 0]
type = VarAdd
trigger1 = Var(48) > 0
trigger1 = Time = 0
v = 48
value = ifelse( Var(48) = 1, -2,  -1)

[State 240, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 240, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 240, 3]
type = PosAdd
trigger1 = Time = 7
trigger2 = Time = 9
trigger3 = Time = 11
trigger4 = Time = 12
trigger5 = Time = 14
trigger6 = Time = 15
trigger7 = Time = 17
trigger8 = Time = 3
trigger9 = Time = 5
x = 5

;[State 240, 4]
;type = PlaySnd
;trigger1 = AnimElem = 4
;value = 0, 5

;[State 240, 5]
;type = PlaySnd
;trigger1 = AnimElem = 9
;value = 0, 16

[State 240, 6]
type = PlaySnd
trigger1 = AnimElem = 9
value = 0, 17



[State 240, 14]
type = HitDef
trigger1 = animelem = 1
attr = S, NA
damage    = 28
animtype = Light
getpower = 20
givepower = 10
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 7,8
numhits = 1
sparkxy = 10, -50
sparkno = S7002
guard.sparkno = S7020
hitsound = S0, 79
guardsound = S0, 83
ground.type = Low
ground.slidetime = 5
ground.hittime  = 14
ground.velocity = -8
airguard.velocity = -1.9,0
air.velocity = -2.0,-4.0
 
[State 240, 30]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;==============================================================================
;Throw
[Statedef 350]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 0
ctrl = 0
anim = 350

[State 250, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 250, 19]
type = ChangeState
trigger1 = Time >= 1
trigger2 = EnemyNear, StateNo = [120, 155]
value = 600
ctrl = 1

[State 250, 20]
type = HitDef
Trigger1 = Time = 0
;Trigger1 = p2bodydist X <= 5
animtype = Medium
ground.type  = High
attr = S, NT
getpower  = 0
givepower = 0
hitflag = M-
guardflag = 
priority = 2, Miss
snap = 56,2;,1
hitsound = -1;,-1
;sparkxy = -25, -70
sparkno = -1
p2facing = 1
p1stateno = 355
p2stateno = 360
hitsound = 6,0
air.velocity = 5, -12
ground.velocity = 5, -12
fall.yvelocity = -3.5
fall.recover = 0
fall = 1
ID = 350

;---------------------------------------------------------------------------
;Throw success
[Statedef 355]
type    = S
movetype= I
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 350

[State 255, 0]
type = PlayerPush
trigger1 = 1
value = 0

[State 255, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 255, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
Time = 42

[State 255, 3]
type = TargetBind
Trigger1 = AnimElem = 2
time = 1
pos = 56, -8

[State 255, 4]
type = TargetBind
Trigger1 = AnimElem = 3
time = 1
pos = 71, -23

[State 255, 5]
type = TargetBind
Trigger1 = AnimElem = 4
time = 1
pos = 76, -33

[State 255, 6]
type = TargetBind
Trigger1 = AnimElem = 5
time = 1
pos = 76, -28

[State 255, 7]
type = TargetBind
Trigger1 = AnimElem = 6
time = 1
pos = 79, -28

[State 255, 8]
type = TargetBind
Trigger1 = AnimElem = 7
time = 1
pos = 73, -48

[State 255, 9]
type = TargetBind
Trigger1 = AnimElem = 8
time = 1
pos = 68, -55

[State 255, 10]
type = TargetBind
Trigger1 = AnimElem = 9
time = 1
pos = 38, -85

[State 255, 11]
type = TargetBind
Trigger1 = AnimElem = 10
time = 1
pos = 8, -95

[State 255,15]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0,35

[State 255,16]
type = PlaySnd
trigger1 = AnimElem = 9
value = 0,36

[State 255, 20]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Being thrown
[Statedef 360]
type    = A
movetype= H
physics = N
ctrl = 0

[State 360, 1]
type = ChangeAnim2
trigger1 = Time <= 21
value = 916

[State 360, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 360, 18]
type = Turn
trigger1 = Time = 20

[State 360, 19]
type = LifeAdd
Trigger1 = Time = 20
value = -100

[State 360, 20]
type = ChangeState
trigger1 = Time = 21
value = 951 ;5030 ;5035
ctrl = 0

;---------------------------------------------------------------------------
;Air Throw
[Statedef 370]
type    = A
movetype= A
physics = S
juggle  = 3
poweradd= 0
ctrl = 0
anim = 350

[State 370, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 370, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
Time = 42

[State 370, 4]
type = HitDef
Trigger1 = Time = 0
;Trigger1 = p2bodydist X <= 5
animtype = Medium
ground.type  = High
attr = A, NT
getpower  = 0
givepower = 0
hitflag = A-
guardflag = 
priority = 2, Miss
snap = 56, -8;, 1
hitsound = -1;, -1
;sparkxy = -25, -70
sparkno = -1
p2facing = 1
p1stateno = 375
p2stateno = 360
hitsound = 6,0
air.velocity = 5, -12
ground.velocity = 5, -12
fall.yvelocity = -3.5
fall.recover = 0
fall = 1

[State 370,19]
type = ChangeState
trigger1 = Time >= 1
trigger1 = Vel X != 0
value = 510
ctrl = 1

[State 370,20]
type = ChangeState
trigger1 = Time >= 1
trigger1 = Vel X = 0
value = 515
ctrl = 1

;---------------------------------------------------------------------------
;Air Throw success
[Statedef 375]
type    = S
movetype= I
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 350

[State 275, 0]
type = PlayerPush
trigger1 = 1
value = 0

[State 275, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 275, 3]
type = TargetBind
Trigger1 = AnimElem = 2
time = 1
pos = 56, -8

[State 275, 4]
type = TargetBind
Trigger1 = AnimElem = 3
time = 1
pos = 71, -23

[State 275, 5]
type = TargetBind
Trigger1 = AnimElem = 4
time = 1
pos = 76, -33

[State 275, 6]
type = TargetBind
Trigger1 = AnimElem = 5
time = 1
pos = 76, -28

[State 275, 7]
type = TargetBind
Trigger1 = AnimElem = 6
time = 1
pos = 79, -28

[State 275, 8]
type = TargetBind
Trigger1 = AnimElem = 7
time = 1
pos = 73, -48

[State 275, 9]
type = TargetBind
Trigger1 = AnimElem = 8
time = 1
pos = 68, -55

[State 275, 10]
type = TargetBind
Trigger1 = AnimElem = 9
time = 1
pos = 38, -85

[State 275, 11]
type = TargetBind
Trigger1 = AnimElem = 10
time = 1
pos = 8, -95

[State 275,15]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0,35

[State 275,16]
type = PlaySnd
trigger1 = AnimElem = 9
value = 0,36

[State 275, 20]
type = ChangeState
trigger1 = AnimElem = 10
value = 380
ctrl = 0

;---------------------------------------------------------------------------
;Falling after Air Throw
[Statedef 380]
type    = A
movetype= I
physics = A
juggle  = 0
poweradd= 0
ctrl = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 280, 20]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 990 

;---------------------------------------------------------------------------
; Getting Up Counterattack
[Statedef 300]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0;,0
anim = 300

[State 300, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT, NA, SA, HA, NP, SP, HP
time = 16

[State 300, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 5

[State 300, 4]
type = explod
trigger1 = AnimElem = 12
ID = 100
ownpal = 1
pos = -1, 4
postype = p1
bindtime = 1
anim = 997
sprpriority = 7
shadow = -1

[State 300, 5]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Back
damage    = 55
guardflag = MAF
pausetime = 7,8
sparkno = S7004
guard.sparkno = S7020
sparkxy = -10,-70
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -1.9, -4
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
 
[State 300, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;CROUCH_X - Weak punch
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 15
ctrl = 0
anim = 400

[State 400,1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 64

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 20;40
animtype  = Light
getpower  = 10
givepower = 8
hitflag = MAF
guardflag = L
pausetime = 10,12
sparkxy = 10, -41
sparkno = S7002
guard.sparkno = S7020
hitsound   = S0, 79
guardsound = S0, 83
ground.type = Low
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -8
air.velocity = -2.0,-4
down.velocity = -4,0
down.hittime = 20
 

[State 400, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;CROUCH_Y - Strong punch
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 410

[State 410, 2]
type = PlaySnd
trigger1 = Time = 7
value = 0, 5

[State 410, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype  = Light
damage    = 50;100
getpower  = 40
givepower = 40
hitflag = MAF
guardflag = L
pausetime = 7, 7
sparkxy = -5, -30
sparkno = S7004
guard.sparkno = S7020
hitsound   = S0, 81
guardsound = S0, 83
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1, -4
air.velocity = -2.2,-4
guard.velocity = -5
fall = 1
fall.recover = 0
 

[State 410, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------
;WAKUWAKU UPPER
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 3
poweradd= 55
ctrl = 0
anim = 420

[State 420, 2]
type = PlaySnd
trigger1 = Time = 22
value = 0, 14


[State 420, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 420, 1]
type = VarSet
trigger1 = 1
v = 16
value = 0

; First hit
[State 420, 3]
type = HitDef
trigger1 = AnimElem = 7
attr = A, NA
damage    = 20;40
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 9,10
sparkxy = 0, -31
sparkno = S7004
guard.sparkno = S7020
hitsound   = S0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -1, -10
air.velocity = -2.2,-4

; Second hit (POWERRRRR hit)
[State 420, 5]
type = HitDef
trigger1 = AnimElem = 8
attr = S, NA
damage    = 55;110
getpower  = 50
givepower = 25
guardflag = MA
animtype = Heavy
hitflag = MAF
priority = 4, Hit
pausetime = 12,10
ground.type = Low
ground.slidetime = 10
ground.hittime  = 40
ground.velocity = 0,-11
air.hittime = 28
air.velocity = -1,-10
sparkxy = 0, -68
sparkno = S7005
guard.sparkno = S7020
hitsound   = S0, 81
guardsound = S0, 83
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2facing = 1
;p2stateno = 940
ID = 600
  
[State 420, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;CROUCH_A - Weak kick
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 15
ctrl = 0
anim = 430

[State 430,1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 64

[State 430,2]
type = VelSet
trigger1 = AnimElem = 2
x = 6;2.4

[State 430, 3]
type = HitDef
trigger1 = Time = 0 
attr = C, NA
damage = 20 
animtype = Light
guardflag = L
hitflag = MAF 
ground.type = Low
;animtype  = Back
getpower  = 10
givepower = 8
guardflag = L
pausetime = 10,12
sparkxy = 25, -20
sparkno = S7000
guard.sparkno = S7020
hitsound   = S0, 79
guardsound = S0, 83
ground.slidetime = 4
ground.hittime  = 9
ground.velocity = -1,0  
air.velocity = -2,0
down.velocity = -4,0
down.hittime = 20

[State 430,9]
type = VelSet
trigger1 = AnimTime = 0
x = 0
 
[State 430, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;CROUCH_B - Strong kick
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 70
ctrl = 0
anim = 440

[State 440, 2]
type = PlaySnd
trigger1 = Time = 7
value = 0, 5

[State 440, 3]
type = PlaySnd
trigger1 = AnimElem = 11
value = 0, 9

[State 440, 4]
type = explod
trigger1 = AnimElem = 11
ID = 100
ownpal = 1
pos = 7, 4
postype = p1
bindtime = 1
anim = 997
sprpriority = 7
shadow = -1

[State 440,5]
type = VelSet
;trigger1 = AnimElem >= 5
trigger1 = Time >= 7
trigger1 = Time <= 20
x = 3.5

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Heavy
damage    = 45;90
guardflag = MAF
pausetime = 7,8
sparkno = S7004
guard.sparkno = S7020
sparkxy = -10,-70
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -10
air.velocity = -2.4,-4.5
 
[State 440, 9]
type = VelSet
trigger1 = AnimTime = 0
x = 0
 
[State 440, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------

; ** MAURU SLIDE - DF + B  **
[Statedef 450]
type    = C
movetype= A
physics = N
juggle  = 4
ctrl = 0
velset = 0,0;,0
anim = 450
poweradd = 40

[State 450, 0]
type = VarAdd
trigger1 = Var(48) > 0
trigger1 = Time = 0
v = 48
value = ifelse( Var(48) = 1, -2,  -1)

[State 450, 0]
type = PosAdd
trigger1 = AnimElem = 6
x = 10

[State 450, 1]
type = VelSet
trigger1 = AnimElem = 6
x = 9

[State 450, 2]
type = VelMul
trigger1 = Time >= 10
x = 0.9

[State 450, 3]
type = explod
trigger1 = AnimElem = 6
ownpal = 1
pos = -50, 22
postype = p1
bindtime = 1
anim = 999
sprpriority = 7

[State 450, 4]
type = HitDef
trigger1 = AnimElem = 6
attr = C, NA
damage    = 40;80
getpower  = 40
givepower = 40
hitflag = MAF
guardflag = L
priority = 4
pausetime = 7,7
sparkxy = 15, -10
sparkno = S7002
guard.sparkno = S7020
hitsound   = S0, 81
guardsound = S0, 83
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = 0, -4
air.velocity = 0 , -4
guard.velocity = 0
fall = 1
fall.recover = 0

[State 450, 6]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 57
 
[State 450, 50]
type = ChangeState
trigger1 = Time = 30
value = 460

;---------------------------------------------------------------------------
[Statedef 460]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
anim = 460

[State 460, 1]
type = ChangeState
trigger1 = AnimElem = 6
ctrl = 1
value = 11 ; Crouching


;---------------------------------------------------------------------------
;JUMP_X - Weak punch
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 55
ctrl = 0
anim = 500

[State 500, 1]
type = Width
trigger1 = 1
player = -15, -15

[State 500, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 64

[State 500, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 45;90
getpower  = 50
givepower = 25
animtype  = Light
guardflag = HA
priority = 3
pausetime = 9,10
sparkxy = -10, -10
sparkno = S7000
guard.sparkno = S7020
hitsound   = S0, 79
guardsound = S0, 83
ground.type = High
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -8
air.velocity = -2.2,-4
 
[State 500, 50]
type = Null ;ChangeAnim
trigger1 = Pos Y >= 10
trigger1 = Vel Y > 0
value = 47
ctrl = 1

;---------------------------------------------------------------------------
;JUMP_Y - Strong punch (forward/backward)
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 55
ctrl = 0
anim = 510

[State 0, Belly'em]
type = ChangeAnim
triggerall = anim = 510
triggerall = AnimElem = 4
trigger1 = command = "hold_x"
value = 511  
[State 0, release]
type = ChangeAnim
triggerall = anim = 511 
trigger1 = AnimElemtime(1) = 12
trigger1 = command != "hold_x"
trigger2 = animtime = 0
value = 512 
 
[State 510, 1]
type = Width
trigger1 = 1
player = -15, -15

[State 510, 2]
type =  PlaySnd
triggerall = anim = 510
trigger1 = AnimElem = 4
value = 0, 11
[State 510, 2]
type =  PlaySnd
triggerall = anim = 511
trigger1 = AnimElemtime(1) = 5
value = 0,16; 25

[State 510, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 20;40
getpower  = 50
givepower = 25
animtype  = Medium
guardflag = HA
priority = 4
pausetime = 9, 8
sparkxy = -10, -10
sparkno = S7002
guard.sparkno = S7020
hitsound   = S0, 80
guardsound = S0, 83
ground.type = High
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -8
air.velocity = -2.2,-4
 

[State 510, CtrlSet]
type = CtrlSet
trigger1 = (anim = 510) && (animelem =7)
trigger2 = (anim = 512) && (animelem =3)
value = 1

;---------------------------------------------------------------------------
;JUMP_Z - Strong punch (up)
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 55
ctrl = 0
anim = 515

[State 515, 1]
type = Width
trigger1 = 1
player = -15, -15

[State 515, 2]
type = PlaySnd
trigger1 = Time = 10
value = 0, 5

[State 515, 3]
type = PlaySnd
trigger1 = Time = 5
value = 0, 10

[State 515, 4]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 62;125
getpower  = 50
givepower = 25
animtype  = Medium
guardflag = HA
priority = 4
pausetime = 7,7
sparkxy = -5, 20
sparkno = S7004
guard.sparkno = S7020
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -3,8
air.velocity = -2.2,15
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2stateno = 718;910 
;Odb718 Edit
down.velocity = 3,-7
down.hittime = 23
down.bounce = 1 
envshake.time = 12
envshake.freq = 15
envshake.ampl = 15
envshake.phase = 15
fall.envshake.time = 0
;fall.envshake.freq = 
;fall.envshake.ampl = 
;fall.envshake.phase =
;ignorehitpause = 
;persistent = 
  

[State 515, 50]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 990

;---------------------------------------------------------------------------
;JUMP_A - Weak kick (forward/backward)
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 55
ctrl = 0
anim = 520
 
[State 520, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0
 
[State 520, 3]
type = HitDef
trigger1 = Time = 6
trigger2 = Time = 10
trigger3 = Time = 14
trigger4 = Time = 18
trigger5 = Time = 22
trigger6 = Time = 26
attr = A, NA
damage    = 5;20
getpower  = 50
givepower = 25
animtype  = Light
guardflag = HA
priority = 3
pausetime = 9,10
sparkxy = 15, -24
sparkno = S7000
guard.sparkno = S7020
;hitsound   = -1 ;S0, 80
hitsound   = S0,79
guardsound = S0,83
;guardsound = S0, 83
ground.type = High
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -8
air.velocity = -2.2,-4

[State 520, 10]
type = PlaySnd
trigger1 = Time = 10
trigger2 = Time = 22
value = 0,7

[State 520, 12]
type = PlaySnd
trigger1 = Time = 10
trigger2 = Time = 22
value = 0,64
 

[State 520, 14]
type = Width
trigger1 = 1
player = -15, -15
 

[State 520, 50]
type = ChangeAnim
trigger1 = Time = 28
value = 990

;---------------------------------------------------------------------------
;JUMP_A - Weak kick (up)
[Statedef 635]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 55
ctrl = 0
anim = 525

[State 525, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0,64

[State 525, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 25;50
getpower  = 50
givepower = 25
animtype  = Light
guardflag = HA
priority = 3
pausetime = 9,10
sparkxy = 15, -5
sparkno = S7000
guard.sparkno = S7020
hitsound   = S0,79
guardsound = S0,83
ground.type = High
ground.slidetime = 9
ground.hittime  = 16
ground.velocity = -8
air.velocity = -2.2,-4

[State 525, 4]
type = Width
trigger1 = 1
player = -15, -15
 

;---------------------------------------------------------------------------
;JUMP_A - Weak kick (up)
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 55
ctrl = 0
anim = 521

[State 521, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 64

[State 521, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 25;50
getpower  = 50
givepower = 25
animtype  = Light
guardflag = HA
priority = 3
pausetime = 9,10
sparkxy = 15, -5
sparkno = S7000
guard.sparkno = S7020
hitsound   = S0, 79
guardsound = S0, 83
ground.type = High
ground.slidetime = 9
ground.hittime  = 16
ground.velocity = -8
air.velocity = -2.2,-4

[State 521, 4]
type = Width
trigger1 = 1
player = -15, -15
 
;---------------------------------------------------------------------------
;JUMP_B - Strong kick
[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 55
ctrl = 0
anim = 530

[State 530, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 8

[State 530, 3]
type = PlaySnd
trigger1 = Time = 10
value = 0, 5

[State 530, 4]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 50;100
getpower  = 50
givepower = 25
animtype  = Medium
guardflag = HA
priority = 4
pausetime = 9, 8
sparkxy = 0, -51
sparkno = S7002
guard.sparkno = S7020
hitsound   = S0, 80
guardsound = S0, 83
ground.type = High
ground.slidetime = 9
ground.hittime  = 19
ground.velocity = -8
air.velocity = -2.2,-4

[State 530, 4]
type = Width
trigger1 = 1
player = -15, -15
 
[State 530, 50]
type = ChangeAnim
trigger1 = Time = 18
value = 990


;---------------------------------------------------------------------------
;Getting Up Recovery Roll Forward
[Statedef 800]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0;,0
anim = 800

[State 800, 0]
type = VelSet
trigger1 = Time >= 0
X = 3

[State 800, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT, NA, SA, HA, NP, SP, HP
time = 48

[State 800, 2]
type = VelSet
trigger1 = AnimTime = 0
X = 0

[State 800, 3]
type = Null ;PlaySnd
trigger1 = AnimElem = 5
value = 0, 6

[State 800, 4]
type = PlaySnd
trigger1 = Time = 0
value = 0, 34
;volume = 15

[State 800, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Getting Up Recovery Roll Backwards
[Statedef 810]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0;,0
anim = 810

[State 810, 0]
type = VelSet
trigger1 = Time >= 0
X = -3

[State 810, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT, NA, SA, HA, NP, SP, HP
time = 50

[State 810, 2]
type = VelSet
trigger1 = AnimTime = 0
X = 0

[State 810, 3]
type = Null ;PlaySnd
trigger1 = AnimElem = 5
value = 0, 6

[State 800, 4]
type = PlaySnd
trigger1 = Time = 0
value = 0, 34
;volume = 15

[State 810, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------
;    ** SPECIAL MOVES **
;---------------------------

;GURUGURU PUNCH (weak) - QCF + X
[Statedef 1000]
type    = S
movetype= A
physics = N
juggle  = 3
poweradd= 55
ctrl = 0
anim = 1000

[State 1000, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 1000, 0]
type = VelSet
trigger1 = Time = 0
x = 0
[State 1000, 1]
type = VelSet
trigger1 = Vel X < 0
x = 0
[State 1000, 3]
type = VelSet
trigger1 = AnimElem = 10
x = 13
[State 1000, 8]
type = VelMul
trigger1 = Time >= 0; AnimElem >= 11
x = 0.84 ;0.87


[State 1000, 2]
type = VarSet
trigger1 = Animelem = 8, = 0 
trigger2 = Animelem = 11, = 0
trigger3 = Animelem = 12, = 0
v = 16
value = 0
ignorehitpause = 1


[State 1000, 4]
type = PlaySnd
trigger1 = Time = 0
trigger2 = Time = 5
trigger3 = Time = 10
value = 0,62
;value = 0,64

[State 1000, 5]
type = PlaySnd
trigger1 = Time = 18
value = 0,15

[State 1000, 6]
type = PosAdd
trigger1 = AnimElem = 15
x = -20

[State 1000, 7]
type = explod
trigger1 = AnimElem = 6
ID = 100
ownpal = 1
pos = -21, 22
postype = p1
bindtime = 1
anim = 999
sprpriority = 7
shadow = -1

[State 1000, 11]
type = HitDef
trigger1 = AnimElem = 7 
trigger2 = AnimElem = 10 
trigger3 = AnimElem = 12
attr = A, NA
damage    = 27, 3
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -4, -4
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
 
[State 1000, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------------
;GURUGURU PUNCH (strong) - QCF + Y
[Statedef 1010]
type    = S
movetype= A
physics = N
juggle  = 3
poweradd= 55
ctrl = 0
anim = 1010

[State 1010, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 1010, 1]
type = VelSet
trigger1 = Time = 0
x = 0
[State 1010, 1]
type = VelSet
trigger1 = Vel X < 0
x = 0
[State 1010, 3]
type = VelSet
trigger1 = AnimElem = 11
x = 14.25
[State 1010, 8]
type = VelMul
trigger1 = Time >= 0; AnimElem >= 11
x = 0.87

[State 1010, 2]
type = VarSet
trigger1 = Animelem = 12, = 0
trigger2 = Animelem = 13, = 0
trigger3 = Animelem = 14, = 0
trigger4 = Animelem = 15, = 0
v = 16
value = 0
ignorehitpause = 1


[State 1010, 4]
type = PosAdd
trigger1 = AnimElem = 17
x = -20

[State 1010, 5]
type = explod
trigger1 = AnimElem = 9
ID = 100
ownpal = 1
pos = -21, 22
postype = p1
bindtime = 1
anim = 999
sprpriority = 7
shadow = -1

[State 1010, 6]
type = PlaySnd
trigger1 = Time = 0
trigger2 = Time = 8
trigger3 = Time = 15
value = 0, 64

[State 1000, 7]
type = PlaySnd
trigger1 = Time = 18
value = 0, 15

[State 1010, 11]
type = HitDef
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
trigger3 = AnimElem = 13
trigger4 = AnimElem = 14
trigger5 = AnimElem = 15
attr = A, NA
damage    = 27, 3
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
;air.sparkxy = -50,-51
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -4, -4
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
 

[State 1010, 30]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------------------------------


;---------------------------------------------------------------------------------------------------
;GURUGURU PUNCH (strong) - QCF + Y
[Statedef 1020]
type    = S
movetype= A
physics = N
juggle  = 3
poweradd= 55
ctrl = 0
anim = 1020


[State 1020, 1]
type = VelSet
trigger1 = Time = 0
x = 0
[State 1020, 1]
type = VelSet
trigger1 = Vel X < 0
x = 0
[State 1020, 3]
type = VelSet
trigger1 = AnimElem = 14
x = 17.5
[State 1020, 8]
type = VelMul
trigger1 = Time >= 0; AnimElem >= 11
x = 0.87


[State 1020, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0
[State 1020, 2]
type = VarSet
trigger1 = Animelem = 15, = 0
trigger2 = Animelem = 16, = 0
trigger3 = Animelem = 17, = 0
trigger4 = Animelem = 18, = 0
v = 16
value = 0
ignorehitpause = 1

[State 1020, 4]
type = PosAdd
trigger1 = AnimElem = 20
x = -20

[State 1020, 5]
type = explod
trigger1 = AnimElem = 12
ID = 100
ownpal = 1
pos = -21, 22
postype = p1
bindtime = 1
anim = 999
sprpriority = 7
shadow = -1

[State 1020, 6]
type = PlaySnd
trigger1 = Time = 0
trigger2 = Time = 8
trigger3 = Time = 16
trigger4 = Time = 24
value = 0,64

[State 1020, 7]
type = PlaySnd
trigger1 = Time = 24
value = 0,15

[State 1020, 11]
type = HitDef
trigger1 = AnimElem = 13
trigger2 = AnimElem = 15
trigger3 = AnimElem = 16
trigger4 = AnimElem = 17
trigger5 = AnimElem = 18
attr = A, NA
damage    = 27, 3
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
;air.sparkxy = -50,-51
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -4, -4
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
 

[State 1020, 30]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------------------
;GURUGURU PUNCH (weak) - FAKE
[Statedef 1050]
type    = S
movetype= I
physics = N
poweradd = 33
ctrl = 0
anim = 1050

[State 1050, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 1050, 0]
type = VelSet
trigger1 = Time = 0
x = 0

[State 1050, 1]
type = VelSet
trigger1 = Vel X < 0
x = 0

[State 1050, 2]
type = VarSet
trigger1 = Animelem = 11, = 0
trigger2 = Animelem = 12, = 0
trigger3 = Animelem = 13, = 0
trigger4 = Animelem = 14, = 0
v = 16
value = 0
ignorehitpause = 1

[State 1050, 3]
type = VelSet
trigger1 = AnimElem = 11
x = 15

[State 1050, 4]
type = PlaySnd
trigger1 = Time = 0
trigger2 = Time = 8
trigger3 = Time = 13
value = 0, 64

[State 1050, 6]
type = PosAdd
trigger1 = AnimElem = 16
x = -20

[State 1050, 8]
type = VelMul
trigger1 = Time >= 0; AnimElem >= 11
x = 0.84 ;0.87

[State 1050, 50]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;GURUGURU PUNCH (strong) - QCF + Y
[Statedef 1060]
type    = S
movetype= I
physics = N
poweradd= 33
ctrl = 0
anim = 1060

[State 1060, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 1060, 1]
type = VelSet
trigger1 = Time = 0
x = 0

[State 1060, 1]
type = VelSet
trigger1 = Vel X < 0
x = 0

[State 1060, 2]
type = VarSet
trigger1 = Animelem = 12, = 0
trigger2 = Animelem = 13, = 0
trigger3 = Animelem = 14, = 0
trigger4 = Animelem = 15, = 0
v = 16
value = 0
ignorehitpause = 1

[State 1060, 3]
type = VelSet
trigger1 = AnimElem = 11
x = 15

[State 1060, 4]
type = PosAdd
trigger1 = AnimElem = 17
x = -20

[State 1060, 6]
type = Null ;PlaySnd
trigger1 = Time = 0
trigger2 = Time = 8
value = 0, 64

[State 1060, 4]
type = PlaySnd
trigger1 = Time = 0
trigger2 = Time = 8
trigger3 = Time = 15
value = 0, 64

[State 1060, 8]
type = VelMul
trigger1 = Time >= 0; AnimElem >= 11
x = 0.87

[State 1060, 30]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;========================================================================================================

;BODY PRESS 
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = ifelse (((PrevStateNo = 230) && (NumTarget > 0)), 9, 13)
poweradd= 55
ctrl = 0
anim = 1100

[State 1110, 0]
type = VarAdd
trigger1 = Var(48) > 0
trigger1 = Time = 0
v = 48
value = ifelse( Var(48) = 1, -2,  -1)

[State 1110, 1]
type = VarSet
trigger1 = Time = 0
v = 58
value = 0

[State 1110, 2]
type = VarSet
trigger1 = MoveHit
v = 58
value = 1
ignorehitpause = 1

[State 1110, 3]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 1110, 5]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 1110, 6]
type = PosAdd
trigger1 = Time = 16 ;7
trigger2 = Time = 18 ;9
trigger3 = Time = 20 ;11
trigger4 = Time = 21 ;12
trigger5 = Time = 23 ;14
trigger6 = Time = 24 ;15
trigger7 = Time = 26 ;17
x = 6

[State 1110, 7]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5

[State 1110, 8]
type = PlaySnd
trigger1 = AnimElem = 10
value = 0, 16

[State 1110, 9]
type = PlaySnd
trigger1 = AnimElem = 10
value = 0, 17

[State 1110, 10]
type = PosAdd
trigger1 = AnimElem = 10
x = 48
              
[State 1110, 14]
type = HitDef
trigger1 = AnimElem = 6
attr = A, NA
damage    = 120, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = HA
priority = 5
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -2.75, -5 ;4
air.velocity = -2.75, -5 ;4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
envshake.time = 11
envshake.freq = 3
envshake.ampl = -13
envshake.phase = 13
fall.envshake.time = 0

[State 1110, 15]
type = Null ;AssertSpecial
trigger1 = Var(16) = 0; MoveHit = 0 ;1
flag = NoJuggleCheck

[State 1110, 16]
type = EnvShake
Trigger1 = AnimElem = 9
time = 10
ampl = -3
freq = 90
phase = 90
 
[State 1110, 30]
type = ChangeState
trigger1 = AnimTime = 0
value = 0 ;1120
ctrl = 1

;---------------------------------------------------------------------------------------------
;BODY PRESS 
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 55
ctrl = 0
anim = 1110

[State 1110, 0]
type = VarAdd
trigger1 = Var(48) > 0
trigger1 = Time = 0
v = 48
value = ifelse( Var(48) = 1, -2,  -1)

[State 1100, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 1100, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
 
[State 1100, 3]
type = PosAdd
trigger1 = animelemtime(5) = 0 
x = 26
[State 1100, 6]
type = PosAdd
trigger1 = animelemtime(6) = 0 
x = 24
[State 1100, 7]
type = PosAdd
trigger1 = animelemtime(7) = 0 
x = 17
[State 1100, 8]
type = PosAdd
trigger1 = animelemtime(8) = 0 
x = 12
[State 1100, 9]
type = PosAdd
trigger1 = animelemtime(9) = 0 
x = 16
[State 1100, 10]
type = PosAdd
trigger1 = animelemtime(10) = 0 
x = 21 
 
[State 1100, 13]
type = PosAdd
trigger1 = animelemtime(12) = 0 
x = 18 

[State 1100, 4]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5

[State 1100, 5]
type = PlaySnd
trigger1 = AnimElem = 9
value = 0, 16

[State 1100, 6]
type = PlaySnd
trigger1 = AnimElem = 9
value = 0, 17
 
              
[State 1100, 13]
type = Null ;Turn
trigger1 = AnimElem = 12

[State 1100, 14]
type = HitDef
trigger1 = AnimElem = 6
attr = A, NA
damage    = 110, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = HA
priority = 5
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -2.75, -5 ;4
air.velocity = -2.75, -5 ;4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
envshake.time = 12
envshake.freq = 4
envshake.ampl = -14
envshake.phase = 14
fall.envshake.time = 0

[State 1100, 16]
type = EnvShake
Trigger1 = AnimElem = 9
time = 10
ampl = -3
freq = 90
phase = 90
 
[State 1100, 30]
type = ChangeState
trigger1 = AnimTime = 0
value = 1115
ctrl = 0

;-----------------------------------------------------------------------------------------------
; Getting up from BODY PRESS
[Statedef 1115]
type    = S
movetype= A
physics = S
juggle  = 3
ctrl = 0
anim = 1115

[State 1120, 10]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 1
value = 0

;--------------------------------------------------------------------------------------------- 
;BODY PRESS 
[Statedef 1120]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 55
ctrl = 0
anim = 1120

[State 1110, 0]
type = VarAdd
trigger1 = Var(48) > 0
trigger1 = Time = 0
v = 48
value = ifelse( Var(48) = 1, -2,  -1)

[State 1100, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 1100, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 1100, 3]
type = PosAdd
trigger1 = animelemtime(3) = 0 
x = 8
[State 1100, 3]
type = PosAdd
trigger1 = animelemtime(4) = 0 
trigger2 = animelemtime(5) = 0  
x = 26
[State 1100, 6]
type = PosAdd
trigger1 = animelemtime(6) = 0 
trigger2 = animelemtime(13) = 0 
x = 24
[State 1100, 7]
type = PosAdd
trigger1 = animelemtime(7) = 0  
x = 17
[State 1100, 8]
type = PosAdd
trigger1 = animelemtime(8) = 0   
x = 12
[State 1100, 9]
type = PosAdd
trigger1 = animelemtime(9) = 0  
x = 16
[State 1100, 10]
type = PosAdd
trigger1 = animelemtime(10) = 0  
x = 21
 
[State 1100, 13]
type = PosAdd
trigger1 = animelemtime(13) = 0 
x = 18

[State 1100, 4]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5

[State 1100, 5]
type = PlaySnd
trigger1 = AnimElem = 9
value = 0, 16

[State 1100, 6]
type = PlaySnd
trigger1 = AnimElem = 9
value = 0, 17

              
[State 1100, 13]
type = Null ;Turn
trigger1 = AnimElem = 12

[State 1100, 14]
type = HitDef
trigger1 = AnimElem = 6
attr = A, NA
damage    = 110, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = HA
priority = 5
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -2.75, -5 ;4
air.velocity = -2.75, -5 ;4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
envshake.time = 12
envshake.freq = 5
envshake.ampl = -15
envshake.phase = 15
fall.envshake.time = 0

[State 1100, 16]
type = EnvShake
Trigger1 = AnimElem = 9
time = 10
ampl = -3
freq = 90
phase = 90
 
[State 1100, 30]
type = ChangeState
trigger1 = AnimTime = 0
value = 1115
ctrl = 0

;========================================================================================================

;BODY PRESS AIR
[Statedef 1150]
type    = S
movetype= A
physics = N
;juggle  = ifelse (((PrevStateNo = 230) && (NumTarget > 0)), 9, 13)
poweradd= 55
ctrl = 0
anim = 1150

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = vel x/3
y = ifelse((pos y <20),(vel y/3),vel y/(24+pos y))
ignorehitpause = 1
;persistent = 

[State 1110, 5]
type = VelSet
trigger1 = anim = 1150
trigger1 = Time = 18
x = 3.6
y = 11.1

[State 1110, 1]
type = VarSet
trigger1 = anim = 1150
trigger1 = Time = 0
v = 58
value = 0

[State 1110, 0]
type = VarAdd
trigger1 = anim = 1150
trigger1 = Var(48) > 0
trigger1 = Time = 0
v = 48
value = ifelse( Var(48) = 1, -2,  -1)

[State 1110, 2]
type = VarSet
trigger1 = anim = 1150
trigger1 = MoveHit
v = 58
value = 1
ignorehitpause = 1

[State 1110, 3]
type = VarSet
trigger1 = anim = 1150
trigger1 = Time = 0
v = 10
value = 0


[State 1110, 6]
type = PosAdd
trigger1 = anim = 1150
trigger1 = Time = 16 ;7
trigger2 = Time = 18 ;9
trigger3 = Time = 20 ;11
trigger4 = Time = 21 ;12
trigger5 = Time = 23 ;14
trigger6 = Time = 24 ;15
trigger7 = Time = 26 ;17
x = 6

[State 1110, 7]
type = PlaySnd
trigger1 = anim = 1150
trigger1 = AnimElem = 4
value = 0, 5

[State 1000, Land]
type= changeanim
trigger1 = anim = 1150 
trigger1= vel y > 0
trigger1= pos y > - vel y
value= 1151
              
[State 1110, 14]
type = HitDef
trigger1 = anim = 1151
trigger1 = animelem = 1
trigger2 = anim = 1150
trigger2 = AnimElem = 6
;trigger3 = 1
;trigger2 = !movehit
attr = A, NA
damage    = 120, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = HA
hitflag = MA
priority = 5
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -2.75, -5 ;4
air.velocity = -2.75, -5 ;4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
envshake.time = 11
envshake.freq = 3
envshake.ampl = -13
envshake.phase = 13
fall.envshake.time = 0


[State 1110, 5]
type = VelSet
triggerall = vel x != 0 && vel y != 0
trigger1 = anim = 1151
x = 0
y = 0

[State 0, PosSet]
type = PosSet
triggerall = pos y != 0
trigger1 = anim = 1151 
y = 0
ignorehitpause = 1
;persistent = 


[State 1110, 8]
type = PlaySnd
trigger1 = anim = 1151
trigger1 = AnimElem = 1
value = 0, 16

[State 1110, 9]
type = PlaySnd
trigger1 = anim = 1151
trigger1 = AnimElem = 1
value = 0, 17

[State 1110, 10]
type = PosAdd
trigger1 = anim = 1151
trigger1 = AnimElem = 3
x = 18

[State 1110, 15]
type = Null ;AssertSpecial
trigger1 = Var(16) = 0; MoveHit = 0 ;1
flag = NoJuggleCheck

[State 1110, 16]
type = EnvShake
trigger1 = anim = 1151
Trigger1 = AnimElem = 1
time = 10
ampl = -3
freq = 90
phase = 90
 
[State 1110, 30]
type = ChangeState
trigger1 = anim = 1151
trigger1 = AnimTime = 0
value = 0 ;1120
ctrl = 1

;========================================================================================================

;BODY PRESS AIR
[Statedef 1151]
type    = S
movetype= A
physics = N
;juggle  = ifelse (((PrevStateNo = 230) && (NumTarget > 0)), 9, 13)
poweradd= 55
ctrl = 0
anim = 1150

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = vel x/3
y = ifelse((pos y <20),(vel y/3),vel y/(24+pos y))
ignorehitpause = 1
;persistent = 

[State 1110, 5]
type = VelSet
trigger1 = anim = 1150
trigger1 = Time = 18
x = 6.6
y = 12.1

[State 1110, 1]
type = VarSet
trigger1 = anim = 1150
trigger1 = Time = 0
v = 58
value = 0

[State 1110, 0]
type = VarAdd
trigger1 = anim = 1150
trigger1 = Var(48) > 0
trigger1 = Time = 0
v = 48
value = ifelse( Var(48) = 1, -2,  -1)

[State 1110, 2]
type = VarSet
trigger1 = anim = 1150
trigger1 = MoveHit
v = 58
value = 1
ignorehitpause = 1

[State 1110, 3]
type = VarSet
trigger1 = anim = 1150
trigger1 = Time = 0
v = 10
value = 0


[State 1110, 6]
type = PosAdd
trigger1 = anim = 1150
trigger1 = Time = 16 ;7
trigger2 = Time = 18 ;9
trigger3 = Time = 20 ;11
trigger4 = Time = 21 ;12
trigger5 = Time = 23 ;14
trigger6 = Time = 24 ;15
trigger7 = Time = 26 ;17
x = 6

[State 1110, 7]
type = PlaySnd
trigger1 = anim = 1150
trigger1 = AnimElem = 4
value = 0, 5

[State 1000, Land]
type= changeanim
trigger1 = anim = 1150 
trigger1= vel y > 0
trigger1= pos y > - vel y
value= 1151
              
[State 1110, 14]
type = HitDef
trigger1 = anim = 1151
trigger1 = animelem = 1
trigger2 = anim = 1150
trigger2 = AnimElem = 6
;trigger3 = 1
;trigger2 = !movehit
attr = A, NA
damage    = 120, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = HA
hitflag = MA
priority = 5
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -2.75, -5 ;4
air.velocity = -2.75, -5 ;4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
envshake.time = 11
envshake.freq = 3
envshake.ampl = -13
envshake.phase = 13
fall.envshake.time = 0


[State 1110, 5]
type = VelSet
triggerall = vel x != 0 && vel y != 0
trigger1 = anim = 1151
x = 0
y = 0

[State 0, PosSet]
type = PosSet
triggerall = pos y != 0
trigger1 = anim = 1151 
y = 0
ignorehitpause = 1
;persistent = 


[State 1110, 8]
type = PlaySnd
trigger1 = anim = 1151
trigger1 = AnimElem = 1
value = 0, 16

[State 1110, 9]
type = PlaySnd
trigger1 = anim = 1151
trigger1 = AnimElem = 1
value = 0, 17

[State 1110, 10]
type = PosAdd
trigger1 = anim = 1151
trigger1 = AnimElem = 3
x = 18

[State 1110, 15]
type = Null ;AssertSpecial
trigger1 = Var(16) = 0; MoveHit = 0 ;1
flag = NoJuggleCheck

[State 1110, 16]
type = EnvShake
trigger1 = anim = 1151
Trigger1 = AnimElem = 1
time = 10
ampl = -3
freq = 90
phase = 90
 
[State 1110, 30]
type = ChangeState
trigger1 = anim = 1151
trigger1 = AnimTime = 0
value = 0 ;1120
ctrl = 1

;========================================================================================================

;BODY PRESS AIR
[Statedef 1152]
type    = S
movetype= A
physics = N
;juggle  = ifelse (((PrevStateNo = 230) && (NumTarget > 0)), 9, 13)
poweradd= 55
ctrl = 0
anim = 1150

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = vel x/3
y = ifelse((pos y <20),(vel y/3),vel y/(24+pos y))
ignorehitpause = 1
;persistent = 

[State 1110, 5]
type = VelSet
trigger1 = anim = 1150
trigger1 = Time = 18
x = 8.6
y = 12.4

[State 1110, 1]
type = VarSet
trigger1 = anim = 1150
trigger1 = Time = 0
v = 58
value = 0

[State 1110, 0]
type = VarAdd
trigger1 = anim = 1150
trigger1 = Var(48) > 0
trigger1 = Time = 0
v = 48
value = ifelse( Var(48) = 1, -2,  -1)

[State 1110, 2]
type = VarSet
trigger1 = anim = 1150
trigger1 = MoveHit
v = 58
value = 1
ignorehitpause = 1

[State 1110, 3]
type = VarSet
trigger1 = anim = 1150
trigger1 = Time = 0
v = 10
value = 0


[State 1110, 6]
type = PosAdd
trigger1 = anim = 1150
trigger1 = Time = 16 ;7
trigger2 = Time = 18 ;9
trigger3 = Time = 20 ;11
trigger4 = Time = 21 ;12
trigger5 = Time = 23 ;14
trigger6 = Time = 24 ;15
trigger7 = Time = 26 ;17
x = 6

[State 1110, 7]
type = PlaySnd
trigger1 = anim = 1150
trigger1 = AnimElem = 4
value = 0, 5

[State 1000, Land]
type= changeanim
trigger1 = anim = 1150 
trigger1= vel y > 0
trigger1= pos y > - vel y
value= 1151
              
[State 1110, 14]
type = HitDef
trigger1 = anim = 1151
trigger1 = animelem = 1
trigger2 = anim = 1150
trigger2 = AnimElem = 6
;trigger3 = 1
;trigger2 = !movehit
attr = A, NA
damage    = 120, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = HA
hitflag = MA
priority = 5
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -2.75, -5 ;4
air.velocity = -2.75, -5 ;4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
envshake.time = 11
envshake.freq = 3
envshake.ampl = -13
envshake.phase = 13
fall.envshake.time = 0


[State 1110, 5]
type = VelSet
triggerall = vel x != 0 && vel y != 0
trigger1 = anim = 1151
x = 0
y = 0

[State 0, PosSet]
type = PosSet
triggerall = pos y != 0
trigger1 = anim = 1151 
y = 0
ignorehitpause = 1
;persistent = 


[State 1110, 8]
type = PlaySnd
trigger1 = anim = 1151
trigger1 = AnimElem = 1
value = 0, 16

[State 1110, 9]
type = PlaySnd
trigger1 = anim = 1151
trigger1 = AnimElem = 1
value = 0, 17

[State 1110, 10]
type = PosAdd
trigger1 = anim = 1151
trigger1 = AnimElem = 3
x = 18

[State 1110, 15]
type = Null ;AssertSpecial
trigger1 = Var(16) = 0; MoveHit = 0 ;1
flag = NoJuggleCheck

[State 1110, 16]
type = EnvShake
trigger1 = anim = 1151
Trigger1 = AnimElem = 1
time = 10
ampl = -3
freq = 90
phase = 90
 
[State 1110, 30]
type = ChangeState
trigger1 = anim = 1151
trigger1 = AnimTime = 0
value = 0 ;1120
ctrl = 1

;---------------------------------------------------------------------------------------------
;BUNBUN COPTER 
[Statedef 1200]
type    = U;S
movetype= A
physics = N
juggle  = 3
poweradd= 55
ctrl = 0
anim = 1200

[State 1200, 0]
type = VelSet
trigger1 = Time = 0
x = ifelse(statetype != A,0,vel x)
y = 0

[State 1200, 0]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = Pos Y < 0
StateType = A

[State 1200,3]
type = Null ;NotHitBy
trigger1 = Time = 0
value = SCA
time = 6

[State 1200, 4]
type = PosAdd
trigger1 = Time = 5
y = -10

[State 1200,20]
type = ChangeState
trigger1 = AnimElem = 4
value = 1201
ctrl = 0

;Second part of BUNBUN COPTER (weak) - F,D,D/F + X
[Statedef 1201]
type    = A
movetype= A
physics = N
juggle  = 3
poweradd= 0
ctrl = 0

[State 1201, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 1201, 2]
type = VarSet
triggerall = var(16) != 0
trigger1 = 1
v = 16
value = 0

[State 1201, 3]
type = PlaySnd
trigger1 = anim != 42
trigger1 = Time = 0
value = 0, 13

[State 1201, 4]
type = PlaySnd
trigger1 = anim != 42
triggerall = MoveHit = 0
trigger1 = Time = 2
trigger2 = Time = 7
value = 0, 5
;volume = -15

[State 1201, 5]
type = VelSet
trigger1 = Time = 0
y = -10

[State 1201, 6]
type = VelMul
trigger1 = anim != 42
trigger1 = Time <= 15
y = 0.79

[State 1201, 10]
type = Gravity
trigger1 = anim != 42
trigger1 = Time >= 11
trigger2 = anim = 42

[State 1201, 11]
type = PosAdd
trigger1 = anim = 42
trigger1 = AnimElem = 1
y = 8

[State 1201, 15]
type = HitDef
trigger1 = anim != 42
trigger1 = AnimElem = 5
attr = A, NA
damage    = 50, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 7
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -0.5, -4
air.velocity = -0.5,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0

[State 1201, 17]
type = HitDef
trigger1 = AnimElem = 11
attr = A, NA
damage    = 50, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 7
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -3, -6
air.velocity = -2,-6
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
 
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1200
trigger1 = animelem = 15
value = 42
elem = 9
ignorehitpause = 1
;persistent = 



[State 1201,30]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 5
value = 1205
ctrl = 0

;------------------------------------------------------------------------------------------------------
; Landing after a BUNBUN COPTER (weak)
[Statedef 1205]
type    = S
physics = S
ctrl = 0
anim = 1205

[State 1205, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1205, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1205, 3]
type = explod
trigger1 = Time = 0
ID = 100
ownpal = 1
pos = -1, 4
postype = p1
bindtime = 1
anim = 997
sprpriority = 7
shadow = -1

[State 1205, 4]
type = PlaySnd
trigger1 = Time = 0
value = 0, 21

[State 1205, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------------------
;First part of BUNBUN COPTER (strong) - F,D,D/F + Y
[Statedef 1210]
type    = U
movetype= A
physics = N
juggle  = 3
poweradd= 55
ctrl = 0
anim = 1210

[State 1210, 0]
type = VelSet
trigger1 = Time = 0
x = ifelse(statetype != A,0,vel x)
y = 0

[State 1210, 1]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = Pos Y < 0
StateType = A

[State 1210, 2]
type = PosAdd
trigger1 = Time = 7
y = -10

[State 1210, 3]
type = explod
trigger1 = Time = 5
trigger1 = Pos Y = 0
ID = 100
ownpal = 1
pos = 0, 5
postype = p1
bindtime = 1
anim = 996
sprpriority = 7
shadow = -1

[State 1210,20]
type = ChangeState
trigger1 = AnimElem = 4
value = 1211
ctrl = 0

; Second part of BUNBUN COPTER (strong)
[Statedef 1211]
type    = A
movetype= A
physics = N
juggle  = 3
poweradd= 0
ctrl = 0
anim = 1211

[State 1211, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 1210, 2]
type = VarSet
triggerall = var(16) != 0
trigger1 = 1
v = 16
value = 0

[State 1211, 5]
type = VelSet
triggerall = anim != 42
trigger1 = Time = 0
y = -13

[State 1211, 6]
type = VelMul
trigger1 = anim != 42
trigger1 = Time <= 23
;trigger2 = anim = 42
y = 0.90

[State 1211, 7]
type = PlaySnd
triggerall = anim != 42
triggerall = MoveHit = 0
trigger1 = Time = 1
trigger2 = Time = 9
trigger3 = Time = 14
value = 0, 5
;volume = -15

[State 1200, 8]
type = PlaySnd
trigger1 = Time = 0
value = 0, 13

[State 1211, 10]
type = Gravity
trigger1 = anim != 42
trigger1 = Time >= 23
trigger2 = anim = 42

[State 1211, 11]
type = PosAdd
trigger1 = anim != 42
trigger1 = Time = 28
y = 11 ;8

[State 1211, 15]
type = HitDef
trigger1 = AnimElem = 1
attr = A, NA
damage    = 40, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 7
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -0.5, -10
air.velocity = -0.5,-10
fall = 1
fall.yvelocity = -2.5
fall.recover = 0

[State 1211, 17]
type = HitDef
trigger1 = AnimElem = 6
attr = A, NA
damage    = 40, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 7
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -0.5, -8
air.velocity = -0.5,-8
fall = 1
fall.yvelocity = -2.5
fall.recover = 0

[State 1211, 19]
type = HitDef
trigger1 = AnimElem = 12
attr = A, NA
damage    = 40, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 8
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -3, -6
air.velocity = -2,-6
fall = 1
;fall.yvelocity = -2.5
fall.recover = 0
 
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1211
trigger1 = animelem = 23
value = 42
elem = 9
ignorehitpause = 1
;persistent = 

[State 1211,30]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 5
value = 1215
ctrl = 0

;------------------------------------------------------------------------------------------------------
; Landing after a BUNBUN COPTER (strong)
[Statedef 1215]
type    = S
physics = S
ctrl = 0
anim = 1215

[State 1215, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1215, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1215, 3]
type = explod
trigger1 = Time = 0
ID = 100
ownpal = 1
pos = -1, 4
postype = p1
bindtime = 1
anim = 997
sprpriority = 7
shadow = -1

[State 1215, 4]
type = PlaySnd
trigger1 = Time = 0
value = 0, 21

[State 1215, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------------------
;First part of BUNBUN COPTER (strong) - F,D,D/F + Y
[Statedef 1220]
type    = U
movetype= A
physics = N
juggle  = 3
poweradd= 55
ctrl = 0
anim = 1210

[State 1220, 0]
type = VelSet
trigger1 = Time = 0
x = ifelse(statetype != A,0,vel x)
y = 0

[State 1220, 1]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = Pos Y < 0
StateType = A

[State 1220, 2]
type = PosAdd
trigger1 = Time = 7
y = -10

[State 1220, 3]
type = explod
trigger1 = Time = 5
trigger1 = Pos Y = 0
ID = 100
ownpal = 1
pos = 0, 5
postype = p1
bindtime = 1
anim = 996
sprpriority = 7
shadow = -1

[State 1220,20]
type = ChangeState
trigger1 = AnimElem = 4
value = 1221
ctrl = 0

; Second part of BUNBUN COPTER (strong)
[Statedef 1221]
type    = A
movetype= A
physics = N
juggle  = 3
poweradd= 0
ctrl = 0
anim = 1221

[State 1221, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

[State 1221, 2]
type = VarSet
trigger1 = 1
v = 16
value = 0

[State 1221, 5]
type = VelSet
trigger1 = Time = 0
y = -18

[State 1221, 6]
type = VelMul
trigger1 = Time <= 35
y = 0.90

[State 1221, 7]
type = PlaySnd
triggerall = MoveHit = 0
trigger1 = Time = 1
trigger2 = Time = 9
trigger3 = Time = 14
value = 0, 5
;volume = -15

[State 1221, 8]
type = PlaySnd
trigger1 = Time = 0
value = 0, 13

[State 1221, 10]
type = Gravity
trigger1 = Time >= 35

[State 1221, 11]
type = PosAdd
trigger1 = Time = 40
y = 11 ;8

[State 1221, 15]
type = HitDef
trigger1 = AnimElem = 1
attr = A, NA
damage    = 60, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 7
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -0.5, -10
air.velocity = -0.5,-10
fall = 1
fall.yvelocity = -2.5
fall.recover = 0

[State 1221, 17]
type = HitDef
trigger1 = AnimElem = 6
attr = A, NA
damage    = 60, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 7
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -0.5, -8
air.velocity = -0.5,-8
fall = 1
fall.yvelocity = -2.5
fall.recover = 0

[State 1221, 19]
type = HitDef
trigger1 = AnimElem = 12
attr = A, NA
damage    = 60, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 8
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -3, -6
air.velocity = -2,-6
fall = 1
;fall.yvelocity = -2.5
fall.recover = 0

[State 1221, 17]
type = HitDef
trigger1 = AnimElem = 18
attr = A, NA
damage    = 60, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 7
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -0.5, -8
air.velocity = -0.5,-8
fall = 1
fall.yvelocity = -2.5
fall.recover = 0

[State 1221, 19]
type = HitDef
trigger1 = AnimElem = 24
attr = A, NA
damage    = 60, 4
getpower  = 50
givepower = 25
animtype  = Back
guardflag = MA
priority = 5
pausetime = 8, 8
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -3, -6
air.velocity = -2,-6
fall = 1
;fall.yvelocity = -2.5
fall.recover = 0
 
[State 1221,30]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 5
value = 1215
ctrl = 0

;==========================================================================
;MAURU BINTA - F,D,B + B (close)
[Statedef 1300]
type    = S
movetype= A
physics = S
juggle  = 3
;poweradd= 55
ctrl = 0
anim = 1300

[State 1300, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 1300, 4]
type = HitDef
Trigger1 = Time = 0 
attr = S, NT
getpower  = 55
givepower = 30
hitflag = M-
guardflag = A
priority = 2, Miss 
hitsound = -1;, -1 
sparkno = -1
p2facing = 1
p1stateno = 1305
p2stateno = 1310 
fall.yvelocity = -3.5
fall.recover = 0
fall = 1

[State 1300,20]
type = ChangeAnim
trigger1 = anim = 1300
trigger1 = Time >= 5
value = 1301

[State 1300,20]
type = ChangeState
trigger1 = anim = 1301
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=============================================
;MAURU BINTA - success
[Statedef 1305]
type    = S
movetype= A
physics = S
ctrl = 0

[State 1305, 0]
type = NotHitBy
trigger1 = Time = 0
value = SCA
Time = 198

[State 1305,3]
type = PowerAdd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 14
value = 70

[State 1305, 4]
type = TargetBind
Trigger1 = AnimElem = 2
time = 1
pos = 76, -18

[State 1305, 5]
type = TargetBind
Trigger1 = AnimElem = 3
time = 1
pos = 71, -43

[State 1305, 6]
type = TargetBind
Trigger1 = AnimElem = 4
time = 1
pos = 76, -47

[State 1305, 7]
type = TargetBind
Trigger1 = AnimElem = 5
time = 1
pos = 70, -52

[State 1305, 8]
type = TargetBind
Trigger1 = AnimElem = 6
time = 1
pos = 73, -52

[State 1305, 9]
type = TargetBind
Trigger1 = AnimElem = 7
time = 1
pos = 75, -52

[State 1305, 10]
type = TargetBind
Trigger1 = AnimElem = 9
time = 1
pos = 83, -30

[State 1305, 11]
type = TargetBind
Trigger1 = AnimElem = 10
time = 1
pos = 70, -56

[State 1305, 12]
type = TargetBind
Trigger1 = AnimElem = 11
time = 1
pos = 74, -57

[State 1305, 13]
type = TargetBind
Trigger1 = AnimElem = 13
time = 1
pos = 76, -59

[State 1305, 14]
type = TargetBind
Trigger1 = AnimElem = 14
time = 1
pos = 80, -44

[State 1305, 15]
type = TargetBind
Trigger1 = AnimElem = 15
time = 1
pos = 70, -54

[State 1305,16]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 14
value = 0,25

[State 1305,17]
type = PlaySnd
trigger1 = AnimElem = 9
value = 0, 81

[State 1305,18]
type = PlaySnd
trigger1 = AnimElem = 14
value = 0, 80

[State 1305,19]
type = Explod
trigger1 = AnimElem = 9
trigger2 = AnimElem = 14
anim = 7004
pos = 75, -100
sprpriority = 7
random = 20,20

[State 1305,20]
type = ChangeState
trigger1 = Time = 159
value = 1307
ctrl = 0

;------------------------------------------------
;MAURU BINTA - tossing opponent away
[Statedef 1307]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 1307

[State 1307, 5]
type = TargetBind
Trigger1 = AnimElem = 1
time = 1
pos = 62, -59

[State 1307, 6]
type = TargetBind
Trigger1 = AnimElem = 2
time = 1
pos = 62, -62

[State 1307, 7]
type = TargetBind
Trigger1 = AnimElem = 3
time = 1
pos = 52, -39

[State 1307, 8]
type = TargetBind
Trigger1 = AnimElem = 4
time = 1
pos = 35, -32

[State 1307, 9]
type = TargetBind
Trigger1 = AnimElem = 5
time = 1
pos = 25, -25

[State 1307, 10]
type = TargetBind
Trigger1 = AnimElem = 6
time = 1
pos = 100, -25

[State 1307,20]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------
;Caught by MAURU BINTA
[Statedef 1310]
type    = A
movetype= H
physics = N
ctrl = 0

[State 1310,3]
type = AngleDraw
trigger1 = Time >= 0

[State 1310,5]
type = ChangeAnim2
trigger1 = Time = 0
value = 1310

[State 1310,7]
type = AngleSet
trigger1 = Time = 26
trigger2 = Time = 64
trigger3 = Time = 102
trigger4 = Time = 140
value = -50

[State 1310,8]
type = AngleAdd
trigger1 = Time = 27
trigger2 = Time = 65
trigger3 = Time = 103
trigger4 = Time = 141
value = -5

[State 1310,11]
type = AngleAdd
trigger1 = Time = 28
trigger2 = Time = 66
trigger3 = Time = 104
trigger4 = Time = 142
value = 12

[State 1310,12]
type = AngleAdd
trigger1 = Time = [29,33]
trigger2 = Time = [67,72]
trigger3 = Time = [105,109]
trigger4 = Time = [143,147]
value = 20

[State 1310,13]
type = AngleAdd
trigger1 = Time = 34
trigger2 = Time = 73
trigger3 = Time = 110
trigger4 = Time = 148
value = 5

[State 1310,14]
type = AngleAdd
trigger1 = Time = 35
trigger2 = Time = 74
trigger3 = Time = 111
trigger4 = Time = 149
value = -12

[State 1310,18]
type = AngleAdd
trigger1 = Time = [36,40]
trigger2 = Time = [75,79]
trigger3 = Time = [112,115]
trigger4 = Time = [150,153]
value = -20

[State 1310,19]
type = AngleSet
trigger1 = Time = 23
trigger2 = Time = 42
trigger3 = Time = 61
trigger4 = Time = 80
trigger5 = Time = 99
trigger6 = Time = 118
trigger7 = Time = 137
trigger8 = Time = 156
value = 0

[State 1310,20]
type = AngleSet
trigger1 = Time = 45
trigger2 = Time = 83
trigger3 = Time = 121
trigger4 = Time = 159
value = 50

[State 1310,21]
type = AngleAdd
trigger1 = Time = 46
trigger2 = Time = 84
trigger3 = Time = 122
trigger4 = Time = 160
value = 5

[State 1310,22]
type = AngleAdd
trigger1 = Time = 47
trigger2 = Time = 85
trigger3 = Time = 123
trigger4 = Time = 161
value = -12

[State 1310,23]
type = AngleAdd
trigger1 = Time = [48,52]
trigger2 = Time = [86,90]
trigger3 = Time = [124,128]
trigger4 = Time = [162,166]
value = -20

[State 1310,24]
type = AngleAdd
trigger1 = Time = 53
trigger2 = Time = 91
trigger3 = Time = 129
trigger4 = Time = 167
value = -5

[State 1310,25]
type = AngleAdd
trigger1 = Time = 54
trigger2 = Time = 92
trigger3 = Time = 130
trigger4 = Time = 168
value = 12

[State 1310,26]
type = AngleAdd
trigger1 = Time = [55,59]
trigger2 = Time = [93,97]
trigger3 = Time = [131,135]
trigger4 = Time = [169,173]
value = 20

[State 1310,30]
type = LifeAdd
trigger1 = Time = 23
trigger2 = Time = 42
trigger3 = Time = 61
trigger4 = Time = 80
trigger5 = Time = 99
trigger6 = Time = 118
trigger7 = Time = 137
trigger8 = Time = 156
value = -18
kill = 0

[State 1310,35]
type = AngleSet
trigger1 = Time = 174
value = 0

[State 1310,36]
type = VelSet
trigger1 = Time = 179
X = -5.5
Y = -0.5

[State 1310,39]
type = LifeAdd
trigger1 = Time = 179
trigger1 = Life = 1
value = -100
kill = 1

[State 1310,40]
type = SelfState
trigger1 = Time = 179
value = 5035
ctrl = 0

;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
;---------------------------
;    ** SUPER MOVES **
;---------------------------

; ES GURUGURU PUNCH - QCF + XY
; Winding up
[Statedef 3000]
type    = S
movetype= I
physics = N ;S
juggle  = 3
poweradd= -1000
ctrl = 0
anim = 3000

[State 3000, 0]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 26

; Var(5)  - Used to trigger the background effects when knocking out the
;           opponent with a super move.
[State 3000, 0]
type = VarSet
trigger1 = Time = 0
v = 5
value = 100

[State 3000, 0]
type = VarSet
trigger1 = Time = 0
v = 10
value = 0

; FVar(1) - Damage increase in ES GURUGURU PUNCH (by holding button).
[State 3000, 0]
type = VarSet
trigger1 = Time = 0
fv = 1
value = 0

[State 3000, 1]
type = VarSet
trigger1 = Animelem = 10, = 0
trigger2 = Animelem = 11, = 0
trigger3 = Animelem = 12, = 0
trigger4 = Animelem = 13, = 0
trigger5 = Animelem = 14, = 0
v = 16
value = 0
ignorehitpause = 1

[State 3000, 1]
type = VelSet
trigger1 = Vel X < 0
x = 0   
 
[State 3333, Helper]
type = Helper
trigger1 = AnimElem = 1
name = "ULTRA"
ID = 3333
stateno = 3333
pos = 0,0
postype = p1    ;p2,front,back,left,right

 
 
[State 3000, 6]
type = PlaySnd
trigger1 = Time >= 20
trigger1 = (Time % 5) = 2
value = 0, 64
channel = 5

[State 3000, 8]
type = VelSet
trigger1 = Time = 0
x = 0

[State 3000, 9]
type = VelSet
trigger1 = AnimElem = 10
x = 25

[State 3000, 10]
type = PosAdd
trigger1 = AnimElem = 17
x = -20

[State 3000, 11]
type = VelMul
trigger1 = Time >= 0
x = 0.5

[State 0, Explod]
type = Explod
triggerall = numexplod(3010) = 0
trigger1 = anim = 3005
anim = 3010
ID =   3010
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;trans = 
;supermove = 0
;pausemove = 0
;ignorehitpause = 1
;persistent = 

[State 3000, 14]
type = HitDef
trigger1 = AnimElem = 9
trigger2 = AnimElem = 10
trigger3 = AnimElem = 11
trigger4 = AnimElem = 12
trigger5 = AnimElem = 13
attr = S, HA
damage    = (252/21)*(6-HitCount) , 4 ;42, 4
getpower  = 0
givepower = 60
animtype  = Back
guardflag = MA
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -4, -4
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2stateno = 950

[State 3000, 16]
type = HitDef
trigger1 = AnimElem = 14
attr = S, HA
hitflag   = MAFP
damage    = (252/21)*(6-HitCount) , 4 ;42, 4
getpower  = 0
givepower = 60
animtype  = Back
guardflag = MA
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7005
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -4, -4
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2facing = 1
p2stateno = 960

[State 3000, 20P1]
type = ChangeState
triggerall = Var(30) <= 0
trigger1 = AnimElem = 7, >= 0
trigger1 = command != "hold_x"
trigger1 = command != "hold_y"
trigger1 = command != "hold_z"
trigger2 = Time >= 120
value = 3005
ctrl = 1

[State 3000, 21AI]
type = ChangeState
triggerall = Var(30) = 1
triggerall = AnimElem = 7, >= 0
trigger1 = Time >= 120
trigger2 = P2BodyDist Y > -60
trigger2 = EnemyNear, Vel Y >= 0
trigger3 = (Facing * (EnemyNear, Facing)) = 1
trigger3 = P2BodyDist X > 0
value = 3005
ctrl = 1

[State 3000, 30]
type = VarAdd
trigger1 = AnimElem = 7, >= 0
fv = 1
value = 0.56

;---------------------------------------------
; Blow
[Statedef 3005]
type    = S
movetype= A
physics = N ;S
juggle  = 3
ctrl = 0
anim = 3005

; Var(16) - Trigger for KO effects.
[State 3005, 2]
type = VarSet
trigger1 = Animelem = 4, = 0
trigger2 = Animelem = 5, = 0
trigger3 = Animelem = 6, = 0
trigger4 = Animelem = 7, = 0
trigger5 = Animelem = 8, = 0
v = 16
value = 0
ignorehitpause = 1

[State 3005, 1]
type = VelSet
trigger1 = Vel X < 0
x = 0
  

[State 3005, 7]
type = explod
trigger1 = AnimElem = 2
ID = 100
ownpal = 1
pos = -16, 22
postype = p1
bindtime = 1
anim = 999
sprpriority = 7
shadow = -1

[State 3005, 9]
type = VelSet
trigger1 = AnimElem = 4
x = 21

[State 3005, 10]
type = PosAdd
trigger1 = AnimElem = 11
x = -25

[State 3005, 11]
type = VelMul
trigger1 = Time >= 0
x = 0.97

[State 0, Explod]
type = Explod
triggerall = numexplod(3010) = 0
trigger1 = anim = 3005
trigger1 = animelemtime(1) = 0
anim = 3010
ID =   3010
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 6
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 1 
ignorehitpause = 1 
  
[State 3005, 12]
type = HitDef
;triggerall = FVar(1) < 50
trigger1 = AnimElem = 3, = 0
trigger2 = AnimElem = 4, = 0
trigger3 = AnimElem = 5, = 0
trigger4 = AnimElem = 6, = 0
trigger5 = AnimElem = 7, = 0
trigger6 = AnimElem = 8, = 0
attr = S, HA
damage    = 25,4;Floor((252+FVar(1))/21)*(6-HitCount) , 4 ;42, 4
getpower  = 0
givepower = 60
animtype  = Back
guardflag = MA
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -4, -4
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2stateno = 950

[State 3005, 13]
type = HitDef
;triggerall = FVar(1) >= 50
trigger1 = AnimElem = 3, = 1
trigger2 = AnimElem = 4, = 1
trigger3 = AnimElem = 5, = 1
trigger4 = AnimElem = 6, = 2
trigger5 = AnimElem = 7, = 2
trigger6 = AnimElem = 8, = 2
attr = S, HA
damage    = 25,4;Floor((252+FVar(1))/21)*(6-HitCount) , 4 ;42, 4
getpower  = 0
givepower = 60
animtype  = Back
guardflag =
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7005
guard.sparkno = S7021
hitsound   = s0, 82
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -4, -4
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2stateno = 950

[State 3005, 14]
type = PlaySnd
trigger1 = Time = 2
value = 0, 15

[State 3005, 15]
type = HitDef 
trigger1 = AnimElem = 9
attr = S, HA
hitflag   = MAFP
damage    =25,4 ;Floor((252+FVar(1))/21)*(6-HitCount) , 4 ;42, 4
getpower  = 0
givepower = 60
animtype  = Back
guardflag = MA
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7005
guard.sparkno = S7021
hitsound   = s0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -4, -4
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2facing = 1
p2stateno = 960
ID = 3000
;
;[State 3005, 16]
;type = HitDef
;trigger1 = FVar(1) >= 50
;trigger1 = AnimElem = 9
;attr = S, HA
;hitflag   = MAFP
;damage    = Floor((252+FVar(1))/21)*(6-HitCount) , 4 ;42, 4
;getpower  = 0
;givepower = 60
;animtype  = Back
;guardflag =
;priority = 6
;pausetime = 8, 10
;sparkxy = -10,-51
;sparkno = S7005
;guard.sparkno = S7021
;hitsound   = s0, 81
;guardsound = S0, 83
;ground.type = Low
;ground.slidetime = 9
;ground.hittime  = 14
;ground.velocity = -4, -4
;air.velocity = -2.2,-4
;fall = 1
;fall.yvelocity = -2.5
;fall.recover = 0
;p2facing = 1
;p2stateno = 960
;ID = 3000

[State 3005, 17]
type = VarSet
trigger1 = WinKO = 1
trigger1 = MoveContact = 1
trigger1 = Var(5) = 100
v = 5
value = 0
ignorehitpause = 1

[State 3005, 18]
type = Helper
Trigger1 = WinKO = 1
Trigger1 = MoveHit = 1
Trigger1 = Var(13) = 3005
ID = 8000
name = "Mauru's ES BG controller"
stateno = 8000
pos = 160, 120
postype = left
sprpriority = -7
pausemovetime = 300
ownpal = 1
ignorehitpause = 1

[State 3005, 19]
type = Pause
Trigger1 = WinKO = 1
Trigger1 = MoveHit = 1
Trigger1 = Var(13) = 3005
time = 6
ignorehitpause = 1

[State 3005, 20]
type = PlaySnd
Trigger1 = WinKO = 1
Trigger1 = MoveHit = 1
Trigger1 = Var(13) = 3005
value = 0, 38
channel = 8
ignorehitpause = 1

[State 3005, 20]
type = PlaySnd
Trigger1 = WinKO = 1
Trigger1 = MoveHit = 1
Trigger1 = Var(13) != 3005
value = 0, 78
channel = 8
ignorehitpause = 1

[State 3005, 21]
type = PlaySnd
Trigger1 = WinKO = 0
Trigger1 = MoveHit = 1
Trigger1 = Var(10) = 0
value = 0, 81
channel = 8
ignorehitpause = 1

[State 3005, 22]
type = EnvColor
Trigger1 = WinKO = 0
Trigger1 = MoveHit = 1
Trigger1 = Var(10) = 0
Trigger2 = WinKO = 1
Trigger2 = MoveHit = 1
Trigger2 = Var(10) = 0
Trigger2 = Var(13) != 3005
value = 255, 255, 255
time = 1
ignorehitpause = 1

[State 3005, 24]
type = MoveHitReset
Trigger1 = WinKO = 1
Trigger1 = MoveContact = 1
Trigger2 = Var(10) = 1
ignorehitpause = 1

[State 3005, 25]
type = VarAdd
Trigger1 = MoveContact = 1
Trigger2 = Var(10) = 1
v = 10
value = 1
ignorehitpause = 1

[State 3005, 26]
type = VarSet
Trigger1 = Var(10) = 2
v = 10
value = 0
ignorehitpause = 1

[State 3005, 30]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------------------
;ES BODY PRESS - QCB + AB
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= -1000
ctrl = 0
anim = 3100

[State 3100, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 3333, Helper]
type = Helper
trigger1 = AnimElem = 1
name = "ULTRA"
ID = 3333
stateno = 3333
pos = 0,0
postype = p1    ;p2,front,back,left,right

 

[State 1100, 3]
type = PosAdd
trigger1 = animelemtime(2) = 0 
x = 8
[State 1100, 3]
type = PosAdd
trigger1 = animelemtime(3) = 0 
trigger2 = animelemtime(4) = 0 
trigger3 = animelemtime(11) = 0 
trigger4 = animelemtime(12) = 0 
x = 26
[State 1100, 6]
type = PosAdd
trigger1 = animelemtime(5) = 0 
trigger2 = animelemtime(13) = 0 
x = 24
[State 1100, 7]
type = PosAdd
trigger1 = animelemtime(6) = 0 
trigger2 = animelemtime(14) = 0 
x = 17
[State 1100, 8]
type = PosAdd
trigger1 = animelemtime(7) = 0 
trigger2 = animelemtime(15) = 0 
x = 12
[State 1100, 9]
type = PosAdd
trigger1 = animelemtime(8) = 0 
trigger2 = animelemtime(16) = 0 
x = 16
[State 1100, 10]
type = PosAdd
trigger1 = animelemtime(9) = 0 
trigger2 = animelemtime(17) = 0 
x = 21
 
[State 1100, 13]
type = PosAdd
trigger1 = animelemtime(20) = 0 
x = 18





[State 3100, 11]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
hitflag   = MAF
damage    = 43, 3
getpower  = 0
givepower = 60
animtype  = Hard
air.animtype  = Back
guardflag = HA
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -1.9, -4
air.velocity = -2.2,-4
air.fall = 1
;;air.fall.yvelocity = -2.5
;;air.fall.recover = 0
p2stateno = 950

[State 3100, 12]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
hitflag   = MAF
damage    = 43, 3
getpower  = 0
givepower = 60
animtype  = Hard
air.animtype  = Back
guardflag = HA
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -1.9, -4
air.velocity = -2.2,-4
air.fall = 1
;air.fall.yvelocity = -2.5
;air.fall.recover = 0
p2stateno = 950

[State 3100, 13]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
hitflag   = MAF
damage    = 43, 3
getpower  = 0
givepower = 60
animtype  = Hard
air.animtype  = Back
guardflag = HA
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -1.9;    
air.velocity = -2.2,-4
air.fall = 1
;air.fall.yvelocity = -2.5
;air.fall.recover = 0
p2stateno = 950

[State 3100, 14]
type = HitDef
trigger1 = AnimElem = 14
attr = S, HA
hitflag   = MAF
damage    = 43, 3
getpower  = 0
givepower = 60
animtype  = Hard
air.animtype  = Back
guardflag = HA
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -1.9, -4
air.velocity = -2.2,-4
air.fall = 1
;air.fall.yvelocity = -2.5
;air.fall.recover = 0
p2stateno = 950

[State 3100, 15]
type = HitDef
trigger1 = AnimElem = 15
attr = S, HA
hitflag   = MAF
damage    = 43, 3
getpower  = 0
givepower = 60
animtype  = Hard
air.animtype  = Back
guardflag = HA
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -1.9, -4
air.velocity = -2.2, -4
air.fall = 1
;air.fall.yvelocity = -2.5
;air.fall.recover = 0
p2stateno = 950

[State 3100, 16]
type = HitDef
trigger1 = AnimElem = 16
attr = S, HA
hitflag   = MAF
damage    = 43, 3
getpower  = 0
givepower = 60
animtype  = Hard
air.animtype  = Back
guardflag = HA
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
air.velocity = -2.2,0
ground.velocity = -1.9, -4
air.fall = 1
;air.fall.yvelocity = -2.5
;air.fall.recover = 0
p2stateno = 950

[State 3100, 17]
type = HitDef
trigger1 = AnimElem = 17
attr = S, HA
hitflag   = MAF
damage    = 43, 3
getpower  = 0
givepower = 60
animtype  = Back
guardflag = HA
priority = 6
pausetime = 8, 10
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -1.9, -4
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2stateno = 950
 
[State 3100, 35]
type = PlaySnd
trigger1 = AnimElem = 17
value = 0,16

[State 3100, GroundPound]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 17
value = 0,17

[State 3100, 37]
type = EnvShake
Trigger1 = AnimElem = 9
time = 10
ampl = -3
freq = 90
phase = 90

[State 3100, 38]
type = EnvShake
Trigger1 = AnimElem = 17
time = 10
ampl = -3
freq = 90
phase = 90
 

[State 3100, 26]
type = VarSet
Trigger1 = Var(10) = 2
v = 10
value = 0
ignorehitpause = 1

[State 3100, 40]
type = ChangeState
trigger1 = AnimTime = 0
value = 1115
ctrl = 0


;======================================================================================================
;ES BUNBUN COPTER - F,D,D/F + XY
[Statedef 3200]
type    = S
movetype= A
physics = N
juggle  = 3
poweradd= -1000
ctrl = 0
anim = 3200

[State 3200, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 3200, 0]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = Pos Y < 0
StateType = A

[State 3200, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 6
 
 
[State 3200, 5]
type = explod
trigger1 = Time = 4
pos = 17, -57
ownpal = 1
postype = p1
bindtime = 100
sprpriority = 7
anim = 980
;supermove = 1
 
[State 3200, 9]
type = explod
trigger1 = Time = 6
trigger1 = Pos Y = 0
ID = 100
ownpal = 1
pos = 0, 5
postype = p1
bindtime = 1
anim = 996
sprpriority = 7
shadow = -1

[State 3333, Helper]
type = Helper
trigger1 = AnimElem = 1
name = "ULTRA"
ID = 3333
stateno = 3333
pos = 0,0
postype = p1    ;p2,front,back,left,right

 
[State 3200,10]
type = ChangeState
trigger1 = AnimElem = 4
value = 3201
ctrl = 0

;----------------------------------------------------------------------------
[Statedef 3201]
type    = A
movetype= A
physics = N
juggle  = 3
poweradd= 0
ctrl = 0

[State 3201, 0]
type = VarSet
trigger1 = Time = 0
v = 5
value = 100

[State 3201, 1]
type = palfx
trigger1 = 1 ;Time <= 65
time = 1
add = 64,64, 64 ;128, 128, 128 ;White
ignorehitpause = 1

[State 3201, 2]
type = PosAdd
trigger1 = AnimElem = 5
y = -20

[State 3201, 2]
type = VarSet
trigger1 = 1
v = 16
value = 0

[State 3201, 7]
type = PlaySnd
trigger1 = Time = 2
value = 0, 13
channel = 0

[State 3201, 8]
type = PlaySnd
triggerall = MoveHit = 0
trigger1 = Time = 1
trigger2 = Time = 6
trigger3 = Time = 11
trigger4 = Time = 16
value = 0, 5
;volume = -15

[State 3201, 10]
type = VelSet
trigger1 = Time = 2
y = -25

[State 3201, 11]
type = VelMul
trigger1 = Time <= 23
y = 0.90

[State 3201, 12]
type = Gravity
trigger1 = Time >= 23

[State 3201, 13]
type = PosAdd
trigger1 = Time = 29
y = 11

[State 3201, 15]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 12
trigger4 = AnimElem = 15
trigger5 = AnimElem = 18
trigger6 = AnimElem = 21
trigger7 = AnimElem = 24
trigger8 = AnimElem = 27
trigger9 = AnimElem = 30
attr = A, HA
;damage    = Floor((252.0/45)*(9-HitCount)), 2
damage    = 30,2 
animtype  = Back
guardflag = MA
priority = 6
pausetime = 8, 7
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -0.5, -16
guard.velocity = -4
;air.velocity = -0.5,-16
air.velocity = -0.5,-6.6
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2stateno = 950
;
;[State 3201, 16]
;type = HitDef
;trigger1 = AnimElem = 7
;attr = A, HA
;;damage    = Floor((252.0/45)*(9-HitCount)), 2
;damage    = 30,2 
;animtype  = Back
;guardflag = MA
;priority = 6
;pausetime = 8, 7
;sparkxy = -10,-51
;sparkno = S7004
;guard.sparkno = S7021
;hitsound   = S0, 81
;guardsound = S0, 83
;ground.type = Low
;ground.slidetime = 9
;ground.hittime  = 14
;ground.velocity = -0.5, -16
;guard.velocity = -4
;air.velocity = -0.5,-16
;fall = 1
;fall.yvelocity = -2.5
;fall.recover = 0
;p2stateno = 950
;
;[State 3201, 17]
;type = HitDef
;trigger1 = AnimElem = 9
;attr = A, HA
;;damage    = Floor((252.0/45)*(9-HitCount)), 2
;damage    = 30,2  
;animtype  = Back
;guardflag = MA
;priority = 6
;pausetime = 8, 7
;sparkxy = -10,-51
;sparkno = S7004
;guard.sparkno = S7021
;hitsound   = S0, 81
;guardsound = S0, 83
;ground.type = Low
;ground.slidetime = 9
;ground.hittime  = 14
;ground.velocity = -0.5, -14
;guard.velocity = -4
;air.velocity = -0.5,-14
;fall = 1
;fall.yvelocity = -2.5
;fall.recover = 0
;p2stateno = 950
;
;[State 3201, 18]
;type = HitDef
;trigger1 = AnimElem = 11
;attr = A, HA
;;damage    = Floor((252.0/45)*(9-HitCount)), 2
;damage    = 30,2 
;animtype  = Back
;guardflag = MA
;priority = 6
;pausetime = 8, 7
;sparkxy = -10,-51
;sparkno = S7004
;guard.sparkno = S7021
;hitsound   = S0, 81
;guardsound = S0, 83
;ground.type = Low
;ground.slidetime = 9
;ground.hittime  = 14
;ground.velocity = -0.5, -14
;guard.velocity = -4
;air.velocity = -0.5,-14
;fall = 1
;fall.yvelocity = -2.5
;fall.recover = 0
;p2stateno = 950
;
;[State 3201, 19]
;type = HitDef
;trigger1 = AnimElem = 13
;attr = A, HA
;;damage    = Floor((252.0/45)*(9-HitCount)), 2
;damage    = 30,2 
;animtype  = Back
;guardflag = MA
;priority = 6
;pausetime = 8, 7
;sparkxy = -10,-51
;sparkno = S7004
;guard.sparkno = S7021
;hitsound   = S0, 81
;guardsound = S0, 83
;ground.type = Low
;ground.slidetime = 9
;ground.hittime  = 14
;ground.velocity = -0.5, -10
;guard.velocity = -4
;air.velocity = -0.5,-10
;fall = 1
;fall.yvelocity = -2.5
;fall.recover = 0
;p2stateno = 950
;
;[State 3201, 20]
;type = HitDef
;trigger1 = AnimElem = 15
;attr = A, HA
;;damage    = Floor((252.0/45)*(9-HitCount)), 2
;damage    = 30,2 
;animtype  = Back
;guardflag = MA
;priority = 6
;pausetime = 8, 7
;sparkxy = -10,-51
;sparkno = S7004
;guard.sparkno = S7021
;hitsound   = S0, 81
;guardsound = S0, 83
;ground.type = Low
;ground.slidetime = 9
;ground.hittime  = 14
;ground.velocity = -0.5, -10
;guard.velocity = -4
;air.velocity = -0.5,-10
;fall = 1
;fall.yvelocity = -2.5
;fall.recover = 0
;p2stateno = 950
;
;[State 3201, 21]
;type = HitDef
;trigger1 = AnimElem = 17
;attr = A, HA
;;damage    = Floor((252.0/45)*(9-HitCount)), 2
;damage    = 30,2 
;animtype  = Back
;guardflag = MA
;priority = 6
;pausetime = 8, 7
;sparkxy = -10,-51
;sparkno = S7004
;guard.sparkno = S7021
;hitsound   = S0, 81
;guardsound = S0, 83
;ground.type = Low
;ground.slidetime = 9
;ground.hittime  = 14
;ground.velocity = -0.5, -10
;guard.velocity = -4
;air.velocity = -0.5,-10
;fall = 1
;fall.yvelocity = -2.5
;fall.recover = 0
;p2stateno = 950
;
;[State 3201, 22]
;type = HitDef
;trigger1 = AnimElem = 19
;attr = A, HA
;;damage    = Floor((252.0/45)*(9-HitCount)), 2
;damage    = 30,2 
;animtype  = Back
;guardflag = MA
;priority = 6
;pausetime = 8, 7
;sparkxy = -10,-51
;sparkno = S7004
;guard.sparkno = S7021
;hitsound   = S0, 81
;guardsound = S0, 83
;ground.type = Low
;ground.slidetime = 9
;ground.hittime  = 14
;ground.velocity = -3, -6
;guard.velocity = -4
;air.velocity = -2,-6
;fall = 1
;fall.yvelocity = -2.5
;fall.recover = 0
;p2stateno = 950
;
;[State 3201, 23]
;type = HitDef
;trigger1 = AnimElem = 21
;attr = A, HA
;;damage    = Floor((252.0/45)*(9-HitCount)), 2
;damage    = 30,2 
;animtype  = Back
;guardflag = MA
;priority = 6
;pausetime = 8, 8
;sparkxy = -10,-51
;sparkno = S7004
;guard.sparkno = S7021
;hitsound   = S0, 81
;guardsound = S0, 83
;ground.type = Low
;ground.slidetime = 9
;ground.hittime  = 14
;ground.velocity = -3, -6
;guard.velocity = -4
;air.velocity = -2,-6
;fall = 1
;;fall.yvelocity = -2.5
;fall.recover = 0
;p2stateno = 950

[State 3201, 36]
type = VarSet
trigger1 = WinKO = 1
trigger1 = MoveContact = 1
trigger1 = Var(5) = 100
v = 5
value = 0
ignorehitpause = 1

[State 3201, 18]
type = Helper
Trigger1 = WinKO = 1
Trigger1 = MoveHit = 1
Trigger1 = Var(13) = 3201
ID = 8000
name = "Mauru's ES BG controller"
stateno = 8000
pos = 160, 120
postype = left
sprpriority = -7
pausemovetime = 300
ownpal = 1
ignorehitpause = 1

[State 3201, 19]
type = Pause
Trigger1 = WinKO = 1
Trigger1 = MoveHit = 1
Trigger1 = Var(13) = 3201
time = 3
ignorehitpause = 1

[State 3201, 20]
type = PlaySnd
Trigger1 = WinKO = 1
Trigger1 = MoveHit = 1
Trigger1 = Var(13) = 3201
value = 0, 38
channel = 8
ignorehitpause = 1

[State 3201, 20]
type = PlaySnd
Trigger1 = WinKO = 1
Trigger1 = MoveHit = 1
Trigger1 = Var(13) != 3201
value = 0, 78
channel = 8
ignorehitpause = 1

[State 3201, 21]
type =null; PlaySnd
Trigger1 = WinKO = 0
Trigger1 = MoveHit = 1
Trigger1 = Var(10) = 0
value = 0,81
channel = 8
ignorehitpause = 1

[State 3201, 22]
type = EnvColor
Trigger1 = WinKO = 0
Trigger1 = MoveHit = 1
Trigger1 = Var(10) = 0
Trigger2 = WinKO = 1
Trigger2 = MoveHit = 1
Trigger2 = Var(10) = 0
Trigger2 = Var(13) != 3201
value = 255, 255, 255
time = 1
ignorehitpause = 1

[State 3201, 24]
type = MoveHitReset
Trigger1 = WinKO = 1
Trigger1 = MoveContact = 1
Trigger2 = Var(10) = 1
ignorehitpause = 1

[State 3201, 25]
type = VarAdd
Trigger1 = MoveContact = 1
Trigger2 = Var(10) = 1
v = 10
value = 1
ignorehitpause = 1

[State 3201, 26]
type = VarSet
Trigger1 = Var(10) = 2
v = 10
value = 0
ignorehitpause = 1

[State 3201,40]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 5
value = 3205
ctrl = 0


;---------------------------------------------------------
; Landing after an ES BUNBUN COPTER
[Statedef 3205]
type    = S
physics = S
ctrl = 0
anim = 3205

[State 3100, 0]
type = PalFx
trigger1 = 1 ;AnimTime > -32
time = 1
add = (32-Time)*2, (32-Time)*2, (32-Time)*2
ignorehitpause = 1

[State 3205, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 3205, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3205, 3]
type = explod
trigger1 = Time = 0
ID = 100
ownpal = 1
pos = -1, 4
postype = p1
bindtime = 1
anim = 997
sprpriority = 7
shadow = -1

[State 3205, 4]
type = PlaySnd
trigger1 = Time = 0
value = 0, 21

[State 3205, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;======================================================================================================

;  - - -  Laughing 
[Statedef 3400]
type    = S
movetype= I
physics = S
anim = 4950
ctrl = 0
velset = 0, 0
poweradd= -1000 

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 31   ;fv = 10
value = Ifelse(P2BodyDist X<150, floor(P2BodyDist X),150)
ignorehitpause = 1
;persistent = 

[State 3333, Helper]
type = Helper
trigger1 = AnimElem = 1
name = "ULTRA"
ID = 3333
stateno = 3333
pos = 0,0
postype = p1    ;p2,front,back,left,right


;FERNANDEZ win pose
[State 183, 5] ;hit done
type = Helper
trigger1 = Time = 20
pos = 0, -3
postype = p1
stateno = 9079  ; FERNANDEZ 
ID = 9080
keyctrl = 0
ownpal = 1
sprpriority = -996
 
[State 4760, Dandy] ;hit done
type = Helper
trigger1 = Time = 10
stateno = 9060
ID = 9500
pos = -40, 0
postype = back
;helpertype = normal
keyctrl = 0
ownpal = 1
 
; NATSUMI win pose ;  - - -  Laughing 
[State 183, 7] ;hit done
type = Helper
trigger1 = Time = 40
stateno = 9075
pos = 40, -200
postype = p1
;helpertype = normal
keyctrl = 0
ownpal = 1

; POLITANK-Z win pose
[State 183, 8]    ;hit done
type = Helper
trigger1 = Time = 90
stateno = 9085
pos = 20, -500
postype = p1
helpertype = normal
keyctrl = 0
ownpal = 1
 
; RAI win pose
[State 183, 10]    ;hit done
type = Helper
trigger1 = (Time = 110- floor(P2bodydist x/15))
pos = 40, -200
postype = p1
stateno = 9095
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 4721, BackSlash]  ;hit done
type = Helper
trigger1 = Time = 0 
stateno = 3420  ;slash jump in
ID = 9500
pos = var(31)-(115), -200
;pos = floor(enemynear, pos x)-45, -200
postype = p1; back
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 4721, BackSlash]
type = Helper
trigger1 =  Time = 80
stateno = 3420         ;slash jump in
ID = 9500
pos = -215, -200
postype = p2; back
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 4700, Bonus]   ;hit done
type = Helper
trigger1 = Time = 10
stateno = 3405               ;coming down
ID = 9500
pos =floor(pos x)*facing, -200
postype = back
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 4740, Tesse]   ;hit done
type = Helper
trigger1 = Time = 50
stateno = 9040            ;floating down
ID = 9500
pos = 10+ floor(P2bodydist x/5), -200
postype = back
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 4721, 5]
type = ChangeState
trigger1 = Time = 260;340
value = 0
ctrl = 1

;-----------------------------------
; ** Bonus Coming down **
[Statedef 3405]
type = A
movetype = I
anim = 9015
velset = 6, 4

[State 9005, 0]
type = HitOverride
trigger1 = time = 0
time = 150
attr = SCA, AA, AT, AP
slot = 0
stateno = 9016

[State 9005, 3]
type = Gravity
trigger1 = Time <= 46

[State 9005, 5]
type = ChangeState
trigger1 = Pos Y > -45
value = 3410

; ** Taking impulse **
[Statedef 3410]
type = S
movetype = I
anim = 9005

[State 9010, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 9010, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 46

[State 9010, 3]
type = PlaySnd
trigger1 = Time > 11
trigger1 = TimeMod = 8, 0
value = 0, 44

[State 9010, 4]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = -1, 46
postype = p1
bindtime = 1
sprpriority = 7
anim = 997

[State 9010, 5]
type = ChangeState
trigger1 = Time = 30
value = 3415

; ** Attacking **
[Statedef 3415]
type = A
movetype = A
anim = 9000

[State 9000, 0]
type = Width
trigger1 = Time >= 0
value = 40, 40

[State 9000, 1]
type = VelSet
trigger1 = Time >= 0
x = 20
y = 0

[State 9000, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 45
channel = 6

[State 9000, 3]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 9000, 4]
type = SndPan
trigger1 = 1
channel = 6
abspan = 0

[State 9000, 5]
type = HitDef
trigger1 = Time = 1
attr = S, NA
animtype  = Heavy
damage    = 62;115
guardflag = HAF
pausetime = 7,8
sparkno = S7004
guard.sparkno = S7020
sparkxy = -10,-55
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
priority = 5
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -10
air.velocity = -2.4,-4.5
 
[State -2, Combo ParentVarAdd]
type = ParentVarAdd
trigger1 = (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 1
ignorehitpause = 1 

[State 9000, 50]
type = DestroySelf
trigger1 = time = 35

;--------------------------------------------------
; ** Attacking **
[Statedef 3416]
type = A
movetype = A
anim = 9000

[State 9000, 0]
type = Width
trigger1 = Time >= 0
value = 40, 40

[State 9000, 1]
type = VelSet
trigger1 = Time >= 0
x = 20
y = 0

[State 9000, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 45
channel = 6

[State 9000, 3]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 9000, 4]
type = SndPan
trigger1 = 1
channel = 6
abspan = 0

[State 9000, 5]
type = HitDef
trigger1 = Time = 1
attr = S, NA
animtype  = Back
damage    = 50
guardflag = MA
pausetime = 7,8
sparkxy = 10, 0
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
priority = 5
ground.velocity = -1.9, -6
air.animtype = Back
air.velocity = -2.2, -6
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
 
[State -2, Combo ParentVarAdd]
type = ParentVarAdd
trigger1 = (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 1
ignorehitpause = 1 

[State 9000, 50]
type = DestroySelf
trigger1 = time = 35

;--------------------------------------------------
;SLASH Jump In
[Statedef 3420]
type = A
movetype = A
anim = 9020
velset = 6, 0

[State 9020, 0]
type = VelAdd
trigger1 = Pos Y <= 0
y = 0.5

[State 9020, 1]
type = VelSet
trigger1 = Pos Y > 0
x = 0
y = 0

[State 9020, 2]
type = HitOverride
trigger1 = time = 0
time = 130
attr = SCA, AA, AT, AP
slot = 0
stateno = 9030

[State 9020, 3]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 49

[State 9020, 4]
type = PlaySnd
trigger1 = Time = 26
value = 0, 46

[State 9020, dust]
type = explod
trigger1 = AnimElem = 5
ownpal = 1
pos = -3, 0
postype = p1
bindtime = 1
sprpriority = 7
anim = 9035         

[State 9020, 6]
type = HitDef
trigger1 = Time = 1
attr = S, NA
animtype  = Back
damage    = 28
guardflag = MA
pausetime = 10,10
sparkxy = -10, -50
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0,50
guardsound = S0, 83
ground.type = High
ground.slidetime = 32
ground.hittime  = 62
ground.velocity = -1.9, 0
air.animtype = Back
air.velocity = -2.2,0
priority = 9
fall = 0 
 
[State -2, Combo ParentVarAdd]
type = ParentVarAdd
trigger1 = (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 1
ignorehitpause = 1 


[State 9020, 7]
type = PosAdd
trigger1 = AnimElem = 11
x = -30
y = 0

[State 9020, 8]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 9020, 9]
type = Helper
trigger1 = Time = 0
stateno = 9200
ID = 9200
pos = 0, 0
postype = p1
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 9020, 0]
type = StateTypeSet
trigger1 = AnimElem = 5, = 0
statetype = S

[State 9020, 44]
type = AssertSpecial
trigger1 = WinKO = 0
trigger1 = MoveHit
flag = NoKOSlow
ignorehitpause = 1

[State 9020, 45]
type = EnvColor
trigger1 = WinKO = 1
trigger1 = MoveHit
value = 255, 255, 255
time = 1
ignorehitpause = 1

[State 9020, 46]
type = PlaySnd
trigger1 = WinKO = 1
trigger1 = MoveHit
value = 0, 78
channel = 8
ignorehitpause = 1

[State 9020, 46]
type = MoveHitReset
trigger1 = WinKO = 1
trigger1 = MoveHit
ignorehitpause = 1

[State 9020, 47]
type = ParentVarSet
trigger1 = WinKO
trigger1 = parent, Var(13) = 0
v = 13
value = StateNo
ignorehitpause = 1

[State 9020, 50]
type = ChangeState
trigger1 = Time >= 56
value = 9025

;---------------------------------------
 
; ** ARINA  Jumping **
[Statedef 3430]
type = S
movetype = I
anim = 9093

[State 9090, 0]
type = SprPriority
trigger1 = Time = 0
value = -1

[State 9090, 1]
type = Null ;PlaySnd
trigger1 = AnimElem = 4
value = 0, 63

[State 9090, 2]
type = VelSet
trigger1 = Time = 0
x = 3
y = 2

[State 0, HitDef]
type = HitDef
trigger1 = time = 1
attr = S,NA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
hitflag = MAF        ;HLAFD+-
guardflag = MA         ;HLA
;affectteam = E          ;B,E,F
animtype = light          ;light,medium,hard,back,up,diagup
air.animtype = light
;fall.animtype = Back
;priority = 4,Hit
damage = 40,0
pausetime = 0 ,0
;guard.pausetime = 0,0
sparkno = S3000
guard.sparkno = S3100
sparkxy = 0,0
hitsound = S1,0
guardsound = S2,0
ground.type = High      ;Low,Trip,None
;air.type = High
ground.slidetime = 33
;guard.slidetime = 0
ground.hittime = 33
;guard.hittime = 0
air.hittime = 30
;guard.ctrltime = 0
;guard.dist = 320
;yaccel = 0.5
ground.velocity = 0,0
;guard.velocity = 0
air.velocity = 0,0
;airguard.velocity = 0,0
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
;down.cornerpush.veloff = 0
;guard.cornerpush.veloff = 0
;airguard.cornerpush.veloff = 0
;airguard.ctrltime = 0
;air.juggle = 0
;mindist = 0,0
;maxdist = 0,0
;snap = 0,0
p1sprpriority = 5  
;p1facing = 
p1getp2facing = 0
;p2facing = 
;p1stateno = 
;p2stateno = 
;p2getp1state = 1
;forcestand = 0
fall = 0
;fall.xvelocity = 0
fall.yvelocity = -4.5
fall.recover = 1
fall.recovertime = 4
fall.damage = 0
;air.fall = 0
;down.velocity = 0,0
;down.hittime = 0
down.bounce = 0
id = 0
chainID = -1
nochainID = -1
hitonce = 1
kill = 1
guard.kill = 1
fall.kill = 1
numhits = 1
;getpower = 0,0
;givepower = 0,0
palfx.time = 0
;palfx.mul = 
;palfx.add = 
envshake.time = 0
;envshake.freq =
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
;fall.envshake.freq = 
;fall.envshake.ampl = 
;fall.envshake.phase =
ignorehitpause = 1
;persistent = 



[State 9090, 3]
type = Gravity
trigger1 = Time >= 0

[State 9090, 4]
type = ChangeState
trigger1 = Pos Y >= 0
value = 9092


;======================================================================================================
; ** SUPER MODE - Power exploding **
[Statedef 3500]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= -1000
ctrl = 0
anim = 3500

[State 3500, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 3500, 1]
type = VarSet
trigger1 = Time = 0
v = 7
value = 328

[State 3500, 2]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 24

[State 3500, 3]
type = Playsnd
trigger1 = AnimElem = 6
value = 0, 61

[State 0, Explod]
type = Explod
;triggerall = numexplod() = 0
trigger1 = numexplod(3500) = 0
trigger1 = time = 0
anim = 3510
ID =   3500
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;trans = 
;supermove = 0
;pausemove = 0
;ignorehitpause = 1
;persistent = 


[State 3500, 5]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype  = Back
damage    = 125
guardflag = MAF
pausetime = 7,8
sparkno = S7004
guard.sparkno = S7021
sparkxy = -10,-70
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -1.9, -4
air.velocity = -2.2,-4
p2stateno = 952
fall = 1
fall.yvelocity = -2.5
fall.recover = 0

[State 3500, 8]
type = AfterImage
trigger1 = AnimElem = 5
length = 5
palbright = 255, 255, 0
palmul = 1.2, 1.2, 1
trans = add1
timegap = 1
framegap = 4
time = 700

[State 3500, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=======================================================================================================
;BUNBUN TYPHOON - rotate 360 + XY
[Statedef 3600]
type    = A
movetype= A
physics = N
juggle  = 3
poweradd= -1000
ctrl = 0
anim = 3600

[State 3600, 0]
type = VarSet
trigger1 = Time = 0
v = 5
value = 100

[State 3600, 0]
type = VarSet
trigger1 = 1
v = 16
value = 0

[State 3600, 1]
type = VelSet
trigger1 = Time >= 0
Y = 0
X = 0

[State 3333, Helper]
type = Helper
TriggerAll = Anim = 3600
trigger1 = time = 0
name = "ULTRA"
ID = 3333
stateno = 3333
pos = 0,0
postype = p1    ;p2,front,back,left,right

;[State 3600, 2]
;type = SuperPause
;trigger1 = Time = 4
;pos = -20, -62
;p2defmul = 1
;time = 52
;anim = -1
;darken = 0
;movetime = 52

[State 3600, 3]
type = BGPalFX
trigger1 = WinKO = 0
trigger2 = WinKO = 1
trigger2 = Var(13) != 3600
time = 2
add = 25, 25, 25
mul = 100, 100, 100
;supermovetime = 5
ignorehitpause = 1

;[State 3600, 3]
;type = explod
;trigger1 = Time = 4
;pos = 17, -57
;ownpal = 1
;postype = p1
;bindtime = 100
;sprpriority = 7
;anim = 981
;;supermove = 1

[State 3600, 4]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 60

[State 3600, 5]
type = PosAdd
trigger1 = Time = 38
Y = -15

[State 3600, 6]
type = PosAdd
trigger1 = command = "holdup"
trigger1 = anim = 3602
Y = -4

[State 3600, 7]
type = PosAdd
trigger1 = command = "holddown"
trigger1 = anim = 3602
trigger1 = Pos Y <= -15
Y = 4

[State 3600, 8]
type = PosAdd
trigger1 = command = "holdfwd"
trigger1 = anim = 3602
X = 4

[State 3600, 9]
type = PosAdd
trigger1 = command = "holdback"
trigger1 = anim = 3602
X = -4

[State 3600, 10]
type = PalFX
trigger1 = TimeMod = 14, 0 
trigger1 = Time = (38, 123)
time = 1
color = 0
add = 48,-80,48 ; Purple
ignorehitpause = 1

[State 3600, 11]
type = PalFX
trigger1 = TimeMod = 14, 2
trigger1 = Time = (38, 123)
time = 1
color = 0
add = 64,-128,-128 ; Red
ignorehitpause = 1

[State 3600, 12]
type = PalFX
trigger1 = TimeMod = 14, 4
time = 1
color = 0
add = 32,-32,-160 ; Orange
ignorehitpause = 1

[State 3600, 13]
type = PalFX
trigger1 = TimeMod = 14, 6
time = 1
color = 0
add = 80,80,-144 ; Yellow
ignorehitpause = 1

[State 3600, 14]
type = PalFX
trigger1 = TimeMod = 14, 8
time = 1
color = 0
add = -160,64,-160 ; Green
ignorehitpause = 1

[State 3600, 15]
type = PalFX
trigger1 = TimeMod = 14, 10
trigger1 = Time = (38, 121)
time = 1
color = 0
add = -96,64,96 ; Cyan
ignorehitpause = 1

[State 3600, 16]
type = PalFX
trigger1 = TimeMod = 14, 12
time = 1
color = 0
add = -128,-128,128 ; Blue
ignorehitpause = 1

;[State 3600, 17]
;type = Helper
;trigger1 = Time = 0
;ID = 6000
;stateno = 6000
;;supermovetime = 43
;ownpal = 1

[State 3600, 20]
type = HitDef
trigger1 = Time = 9
trigger2 = Time = 21
trigger3 = Time = 33
trigger4 = Time = 45
;trigger1 = Time = 38
;trigger2 = Time = 50
;trigger3 = Time = 62
;trigger4 = Time = 74
attr = S, HA
hitflag   = MAF
guardflag = MA
damage    = 30, 3
getpower  = 0
givepower = 60
priority = 6
pausetime = 8, 8
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = -1 ;S0, 81
guardsound = S0, 83
animtype  = Hard
air.animtype  = Back
ground.type = Low
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -5,ifelse( command = "holdup",-10,0)
air.velocity = -2.2,-4
air.fall = 1
;air.fall.yvelocity = -2.5
;air.fall.recover = 0
p2stateno = 950

[State 3600, 22]
type = HitDef
trigger1 = Time = 5
trigger2 = Time = 17
trigger3 = Time = 29
trigger4 = Time = 41
;trigger1 = Time = 34
;trigger2 = Time = 56
;trigger3 = Time = 68
;trigger4 = Time = 80
attr = S, HA
guardflag = MA
hitflag   = MAF
damage    = 30, 3
getpower  = 0
givepower = 60
priority = 6
pausetime = 8, 8
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = -1 ;S0, 81
guardsound = S0, 83
animtype  = Hard
air.animtype  = Back
ground.type = High
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -7,ifelse( command = "holdup",-10,0)
air.velocity = -2.2,-4
air.fall = 1
;air.fall.yvelocity = -2.5
;air.fall.recover = 0
p2stateno = 950

[State 3600, 24]
type = HitDef
trigger1 = Time =47; 86
attr = S, NA
animtype  = Back
damage    = 30, 3
guardflag = MA
pausetime = 8,8
sparkno = S7004
guard.sparkno = S7021
sparkxy = -10,-51
sparkno = S7004
guard.sparkno = S7021
hitsound   = -1 ;S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -1.9, -7
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2stateno = 950

[State 3600, 32]
type = VarSet
trigger1 = WinKO = 1
;trigger1 = MoveContact = 1
trigger1 = Var(5) = 100
v = 5
value = 0
ignorehitpause = 1

[State 3600, 33]
type = ChangeAnim
triggerall = Anim = 3600
trigger1 = AnimTime = 0
value = 3602

[State 3600, 34]
type = ChangeAnim
triggerall = Anim = 3602
trigger1 = Time = 53;92
value = 3605

[State 3600, 35]
type = PosAdd
trigger1 = Time = 63;102
Y = 10

[State 3600, 36]
type = PlaySnd
triggerall = MoveHit = 0
trigger1 = Time = 5;41
trigger2 = Time = 11;47
trigger3 = Time = 17;53
trigger4 = Time = 23;59
trigger5 = Time = 29;65
trigger6 = Time = 35;71
trigger7 = Time = 41;77
trigger8 = Time = 47;83
trigger9 = Time = 53;89
value = 0, 5
;volume = -15
 
[State 3600, 18]
type = Helper
Trigger1 = WinKO = 1
Trigger1 = MoveHit = 1
Trigger1 = Var(13) = 3600
Trigger1 = NumHelper(8100) = 0
ID = 8100
name = "Mauru's DokiDoki BG controller"
stateno = 8100
pos = 160, 120
postype = left
sprpriority = -7
pausemovetime = 300
ownpal = 1
ignorehitpause = 1
;
;[State 3600, 19]
;type = Pause
;Trigger1 = WinKO = 1
;Trigger1 = MoveHit = 1
;Trigger1 = Var(13) = 3600
;time = 3
;ignorehitpause = 1

[State 3600, 20]
type = PlaySnd
Trigger1 = WinKO = 1
Trigger1 = MoveHit = 1
Trigger1 = Var(13) = 3600
value = 0, 39
channel = 8
ignorehitpause = 1

[State 3600, 20]
type = PlaySnd
Trigger1 = WinKO = 1
Trigger1 = MoveHit = 1
Trigger1 = Var(13) != 3600
value = 0, 78
channel = 8
ignorehitpause = 1

[State 3600, 21]
type = PlaySnd
Trigger1 = WinKO = 0
Trigger1 = MoveHit = 1
Trigger1 = Var(10) = 0
value = 0, 81
channel = 8
ignorehitpause = 1

[State 3600, 22]
type = EnvColor
Trigger1 = WinKO = 0
Trigger1 = MoveHit = 1
Trigger1 = Var(10) = 0
Trigger2 = WinKO = 1
Trigger2 = MoveHit = 1
Trigger2 = Var(10) = 0
Trigger2 = Var(13) != 3600
value = 255, 255, 255
time = 1
ignorehitpause = 1

[State 3600, 24]
type = MoveHitReset
Trigger1 = WinKO = 1
Trigger1 = MoveContact = 1
Trigger2 = Var(10) = 1
ignorehitpause = 1

[State 3600, 25]
type = VarAdd
Trigger1 = MoveContact = 1
Trigger2 = Var(10) = 1
v = 10
value = 1
ignorehitpause = 1

[State 3600, 26]
type = VarSet
Trigger1 = Var(10) = 2
v = 10
value = 0
ignorehitpause = 1

[State 3600, 40]
type = ChangeState
trigger1 = Time >= 63;102
value = 3605
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------
;End of BUNBUN TYPHOON
[Statedef 3605]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0

[State 3605, 20]
type = ChangeState
trigger1 = Time = 1000
value = 0
ctrl = 1

;==================================================================================================
; ** MIRACLE VOICE - D, D + AB/XY **
[Statedef 3700]
type    = S
movetype= I  ; To prevent opponent(s) from trying to block
physics = S
juggle  = 3
poweradd= -2000
ctrl = 0
anim = 3702
;
;[State 0, Explod]
;type = Explod
;triggerall = numexplod(3710) = 0
;trigger1 = time = 0
;anim = 4509
;ID =   3710
;pos = 0,0
;postype = p1  ;p2,front,back,left,right
;facing = 1
;vfacing = 1 
;removetime = -2 
;removeongethit = 1
;ignorehitpause = 1 
;bindtime = -1 
;
;[State 3700, 0]
;type = explod
;trigger1 = Time = [0,3]
;anim = 4530
;ownpal = 1
;pos = 160, 120
;postype = left
;sprpriority = -1
;bindtime = 1
;
;[State 3700, 1]
;type = explod
;trigger1 = Time = [4,7]
;anim = 4531
;ownpal = 1
;pos = 160, 120
;postype = left
;sprpriority = -1
;bindtime = 1
;
;[State 3700, 2]
;type = explod
;trigger1 = Time = [8,11]
;anim = 4532
;ownpal = 1
;pos = 160, 120
;postype = left
;sprpriority = -1
;bindtime = 1
;
;[State 3700, 3]
;type = explod
;trigger1 = Time = [12,15]
;anim = 4533
;ownpal = 1
;pos = 160, 120
;postype = left
;sprpriority = -1
;bindtime = 1
;
;[State 3700, 4]
;type = explod
;trigger1 = Time = [16,19]
;anim = 4534
;ownpal = 1
;pos = 160, 120
;postype = left
;sprpriority = -1
;bindtime = 1
;
;[State 3700, 5]
;type = explod
;trigger1 = Time = [20,23]
;anim = 4535
;ownpal = 1
;pos = 160, 120
;postype = left
;sprpriority = -1
;bindtime = 1
;
;[State 3700, 6]
;type = explod
;trigger1 = Time = [24,27]
;trigger2 = Time = [28,100]
;trigger2 = TimeMod = 2, 0
;anim = 4536
;ownpal = 1
;pos = 160, 120
;postype = left
;sprpriority = -1
;bindtime = 1

[State 3333, Helper]
type = Helper
triggerall = anim = 3702
triggerall = numhelper(3333) = 0
trigger1 = AnimElem = 1
trigger1 = time <= 3
name = "ULTRA"
ID = 3333
stateno = 3333
pos = 0,0
postype = p1    ;p2,front,back,left,right

[State 3700, 12]
type = PlaySnd
triggerall = anim = 3702
trigger1 = AnimElem = 2;19
value = 0, 30
channel = 0

[State 3700, 13]
type = PlaySnd
triggerall = anim = 3702
trigger1 = Time = 0
value = 0, 32
;volume = 30
channel = 0

[State 3700, 16]
type = Helper
triggerall = anim = 3702
triggerall = numhelper(3700) = 0
trigger1 = AnimElem = 2;19
;trigger1 = Var(7) = 0
ID = 3700
name = "Mauru's Miracle Voice Projectile"
pos = 87, -39
postype = p1
stateno = 9500
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 3700, 20]
type = ChangeAnim
triggerall = anim = 3702
trigger1 = Time = 47;145
value = 3705

[State 3700, 25]
type = ChangeState
triggerall = anim = 3705
trigger1 = Time = 69;167
value = 0
ctrl = 1

; Hit by MIRACLE VOICE
[Statedef 3720]
type    = A
movetype= H ;Get hit
physics = N

[State 3720, 0]
type = VelSet
trigger1 = Time = 0
X = 0
Y = 0

[State 3720, 1]
type = EnvColor
trigger1 = Time = 0
trigger1 = LoseKO = 0
value = 255, 255, 255
time = 1

;[State 3720, 2]
;type = GameMakeAnim
;trigger1 = Time = 0
;value = 5
;pos = 0, -50
;random = 20

[State 3720, 3]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 912

[State 3720, 4]
type = NotHitBy
trigger1 = Pos Y != 0
value = SCA, HP
time = 10

[State 3720, 5]
type = ChangeState
Trigger1 = HitShakeOver = 1
value = 4530
ctrl = 0

; get hit
[Statedef 4530]
type    = A
movetype= H ;Get hit
physics = N

[State 4530, 3]
type = Null ;ChangeAnim2
Trigger1 = Time >= 0
value = 913

[State 4530, 4]
type = SelfState
trigger1 = Time = 0
value = 5000
ctrl = 0

; ** MIRACLE VOICE projectile **
[Statedef 9500]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 3710

[State 9500, 0]
type = VarSet
trigger1 = Time = 0
v = 2
value = 10

[State 9500, 1]
type = VarSet
trigger1 = Time = 0
v = 5
value = 100

[State 9500, 2]
type = VarSet
trigger1 = Time = 0
v = 6
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0 
v = 17   ;fv = 10
value = 0
;ignorehitpause = 1
;persistent = 

[State 9500, 3]
type = PlaySnd
trigger1 = Var(2) = 10
value = 0, 31
ignorehitpause = 1

[State 9500, 4]
type = VelSet
trigger1 = Time >= 0
x = 3
y = 0

[State 9500, 5]
type = NotHitBy
trigger1 = Time = 0
value = SCA

[State 9500, 6]
type = VarSet
trigger1 = MoveHit = 1
trigger1 = Var(6) = 0
v = 6
value = 2

[State 9000, 7]
type = ParentVarSet
trigger1 = WinKO
trigger1 = parent, Var(13) = 0
v = 13
value = StateNo
ignorehitpause = 1

[State 9500, 7]
type = explod
trigger1 = MoveHit = 1
ownpal = 1
pos = -10, -57
random = 40, 40
postype = p2
bindtime = 1
sprpriority = 7
anim = 3720
ignorehitpause = 1

[State 9500, 8]
type = Helper
trigger1 = WinKO = 1
trigger1 = MoveHit = 1
trigger1 = parent, Var(13) = 9500
trigger1 = parent, Var(9) = 0
ID = 8100
name = "Mauru's HaraHara BG controller"
stateno = 8200
pos = 160, 120
postype = left
sprpriority = -7
pausemovetime = 300
ownpal = 1
ignorehitpause = 1

[State 9500, 9]
type = VarSet
trigger1 = WinKO = 1
;trigger1 = MoveContact = 1
trigger1 = Var(5) = 100
v = 5
value = 0
ignorehitpause = 1

[State 9500, 10]
type = EnvShake
Trigger1 = Time = 0
time = 20
ampl = -3
freq = 120
phase = 120

[State 9500, 12]
type = HitDef
trigger1 = Var(6) = 0
trigger1 = HitCount < 6
trigger1 = var(17) <= 6
ground.velocity = 3, 0
;projpriority = 50
attr = S, HP
hitflag = MAFP
guardflag = MA         ;HLA
damage    = (((490+( (parent, Var(7) > 0)*100 ))/21))*(6-HitCount)
animtype  = Hard
air.animtype  = Back
getpower  = 0
givepower = 10
pausetime = 0, 3
sparkno = -1 
hitsound   = -1 ;S0, 81
guardsound = S0, 83
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -2.5, -5
guard.dist = 0
;airguard.dist = 0
airguard.velocity = -3.5, -3
air.type = Low
air.velocity = -2.5,-5
air.juggle = 4
fall = 1
fall.animtype = Hard
fall.recover = 0
p2stateno = 3720

[State 0, VarAdd]
type = VarAdd
trigger1 = MoveGuarded
v = 17    ;fv = 
value = 1
ignorehitpause = 1
;persistent = 


[State 9500, 44]
type = AssertSpecial
trigger1 = WinKO = 0
trigger1 = MoveHit
flag = NoKOSlow
ignorehitpause = 1

[State 9500, 20]
type = PlaySnd
Trigger1 = WinKO = 1
Trigger1 = movehit = 1
Trigger1 = parent, Var(9) = 0
value = 0, 39
channel = 8
ignorehitpause = 1

[State 9500, 21]
type = PlaySnd
Trigger1 = WinKO = 0
Trigger1 = movehit = 1
Trigger1 = Var(10) = 0
value = 0, 81
channel = 8+(HitCount % 2)
ignorehitpause = 1

[State 9500, 24]
type = MoveHitReset
Trigger1 = WinKO = 1
Trigger1 = movecontact = 1
Trigger2 = Var(10) = 1
ignorehitpause = 1

[State 9500, 25]
type = VarAdd
Trigger1 = movecontact = 1
Trigger2 = Var(10) = 1
v = 10
value = 1
ignorehitpause = 1

[State 9500, 26]
type = VarSet
Trigger1 = Var(10) = 2
v = 10
value = 0
ignorehitpause = 1

[State 9500, 16]
type = ChangeState
trigger1 = HitCount = 6
trigger1 = Var(6) = 1
trigger2 = Pos X >= 230
trigger3 = Pos X <= -230
value = 9505

[State 9500, 17]
type = VarAdd
trigger1 = Var(6) >= 1
v = 6
value = -1

[State 9500, 18]
type = VarAdd
trigger1 = Var(2) >= 0
v = 2
value = -1
ignorehitpause = 1

[State 9500, 19]
type = VarSet
trigger1 = Var(2) <= 1
v = 2
value = 10
ignorehitpause = 1

[State 9500, 20]
type = DestroySelf
trigger1 = time = 200

; ** MIRACLE VOICE projectile removing **
[Statedef 9505]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 3715

[State 9505, 20]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Taunt
[Statedef 4950]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 4950

[State 4950,1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 2

[State 4950, 46]
type = PlaySnd
trigger1 = Time = 0
value = 0, 85
channel = 0

[State 4950, 50]
type = ChangeState
trigger1 = Time = 50
value = 0
ctrl = 1



;
; *******************************
; **  BONUS KUN related states **
; *******************************
;

; ** Calling BONUS KUN **
[Statedef 4700]
type    = S
movetype= I
physics = S
anim = 4950
ctrl = 0
velset = 0, 0
;poweradd = -250

[State 4700, 0]
type = Helper
trigger1 = Time = 0
ID = 9500
pos = -50, -200
postype = back
stateno = 9005
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 4700, 5]
type = ChangeState
trigger1 = Time = 40
value = 0
ctrl = 1

; ** Attacking **
[Statedef 9000]
type = A
movetype = A
anim = 9000

[State 9000, 0]
type = Width
trigger1 = Time >= 0
value = 40, 40

[State 9000, 1]
type = VelSet
trigger1 = Time >= 0
x = 20
y = 0

[State 9000, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 45
channel = 6

[State 9000, 3]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 9000, 4]
type = SndPan
trigger1 = 1
channel = 6
abspan = 0

[State 9000, 5]
type = HitDef
trigger1 = Time = 1
attr = S, NA
animtype  = Back
damage    = 50
guardflag = MA
pausetime = 7,8
sparkxy = 10, 0
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
priority = 5
ground.velocity = -1.9, -6
air.animtype = Back
air.velocity = -2.2, -6
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
 
[State -2, Combo ParentVarAdd]
type = ParentVarAdd
trigger1 = (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 1
ignorehitpause = 1 

[State 9000, 50]
type = DestroySelf
trigger1 = time = 35

; ** Coming down **
[Statedef 9005]
type = A
movetype = I
anim = 9015
velset = 6, 4

[State 9005, 0]
type = HitOverride
trigger1 = time = 0
time = 150
attr = SCA, AA, AT, AP
slot = 0
stateno = 9016

[State 9005, 3]
type = Gravity
trigger1 = Time <= 46

[State 9005, 5]
type = ChangeState
trigger1 = Pos Y > -45
value = 9010

; ** Taking impulse **
[Statedef 9010]
type = S
movetype = I
anim = 9005

[State 9010, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 9010, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 46

[State 9010, 3]
type = PlaySnd
trigger1 = Time > 11
trigger1 = TimeMod = 8, 0
value = 0, 44

[State 9010, 4]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = -1, 46
postype = p1
bindtime = 1
sprpriority = 7
anim = 997

[State 9010, 5]
type = ChangeState
trigger1 = Time = 30
value = 9000

; ** Hit **
[Statedef 9016]
type = A
movetype = H
anim = 9019
velset = 0, 0

[State 9016, 0]
type = PlaySnd
trigger1 = Time = 0
value = 0, 47

[State 9016, 3]
type = VelSet
trigger1 = Time >= 0
x = 0

[State 9016, 5]
type = ChangeState
Trigger1 = HitShakeOver = 1
value = 9019
ctrl = 0

; ** Flying after being hit **
[Statedef 9019]
type = S
movetype = I
velset = -2, -4

[State 9019, 3]
type = Gravity
trigger1 = Time >= 0

[State 9019, 5]
type = ChangeState
trigger1 = Pos Y > -15 ;-25
trigger1 = Vel Y > 0
value = 9015

; ** Hitting the ground, getting up and jumping out of the screen **
[Statedef 9015]
type = A
movetype = I
anim = 9010
velset = 0,0

[State 9015, 0]
type = VelSet
trigger1 = Time <= 40
x = 0

[State 9015, 1]
type = PosAdd
trigger1 = Time = 0
x = -10

[State 9015, 1]
type = PosSet
trigger1 = Time = 0
y = -20

[State 9015, 5]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = -1, 24
postype = p1
bindtime = 1
sprpriority = 7
anim = 997

[State 9015, 6]
type = VelSet
trigger1 = AnimElem >= 13
x = 3
y = -12

[State 9015, 8]
type = PlaySnd
trigger1 = Time = 0
value = F7, 0

[State 9015, 10]
type = DestroySelf
trigger1 = time = 64


;
; ****************************
; **  SLASH related states  **
; ****************************
;

; ** Calling SLASH L**
[Statedef 4720]
type    = S
movetype= I
physics = S
anim = 4950
ctrl = 0
velset = 0, 0
;poweradd = -250

[State 4720, 0]
type = Helper
trigger1 = Time = 0
ID = 9500
stateno = 9020
pos =  -110, -200
postype = p1; back
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 4720, 5]
type = ChangeState
trigger1 = Time = 40
value = 0
ctrl = 1


; ** Calling SLASH M**
[Statedef 4721]
type    = S
movetype= I
physics = S
anim = 4950
ctrl = 0
velset = 0, 0
;poweradd = -250

[State 4721, 0]
type = Helper
trigger1 = Time = 0
ID = 9500
stateno = 9020
pos =  -15, -200
postype = p1; back
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 4721, 5]
type = ChangeState
trigger1 = Time = 40
value = 0
ctrl = 1

;--------------------------------------------------
;SLASH Jump In
[Statedef 9020]
type = A
movetype = A
anim = 9020
velset = 6, 0

[State 9020, 0]
type = VelAdd
trigger1 = Pos Y <= 0
y = 0.5

[State 9020, 1]
type = VelSet
trigger1 = Pos Y > 0
x = 0
y = 0

[State 9020, 2]
type = HitOverride
trigger1 = time = 0
time = 130
attr = SCA, AA, AT, AP
slot = 0
stateno = 9030

[State 9020, 3]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 49

[State 9020, 4]
type = PlaySnd
trigger1 = Time = 26
value = 0, 46

[State 9020, dust]
type = explod
trigger1 = AnimElem = 5
ownpal = 1
pos = -3, 0
postype = p1
bindtime = 1
sprpriority = 7
anim = 9035

[State 9020, 6]
type = HitDef
trigger1 = Time = 1
attr = S, NA
animtype  = Back
damage    = 50
guardflag = MA
pausetime = 10,10
sparkxy = -10, -50
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0,50
guardsound = S0, 83
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -1.9, -4
air.animtype = Back
air.velocity = -2.2,-4
priority = 5
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
 
[State -2, Combo ParentVarAdd]
type = ParentVarAdd
trigger1 = (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 1
ignorehitpause = 1 


[State 9020, 7]
type = PosAdd
trigger1 = AnimElem = 11
x = -30
y = 0

[State 9020, 8]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 9020, 9]
type = Helper
trigger1 = Time = 0
stateno = 9200
ID = 9200
pos = 0, 0
postype = p1
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 9020, 0]
type = StateTypeSet
trigger1 = AnimElem = 5, = 0
statetype = S

[State 9020, 44]
type = AssertSpecial
trigger1 = WinKO = 0
trigger1 = MoveHit
flag = NoKOSlow
ignorehitpause = 1

[State 9020, 45]
type = EnvColor
trigger1 = WinKO = 1
trigger1 = MoveHit
value = 255, 255, 255
time = 1
ignorehitpause = 1

[State 9020, 46]
type = PlaySnd
trigger1 = WinKO = 1
trigger1 = MoveHit
value = 0, 78
channel = 8
ignorehitpause = 1

[State 9020, 46]
type = MoveHitReset
trigger1 = WinKO = 1
trigger1 = MoveHit
ignorehitpause = 1

[State 9020, 47]
type = ParentVarSet
trigger1 = WinKO
trigger1 = parent, Var(13) = 0
v = 13
value = StateNo
ignorehitpause = 1

[State 9020, 50]
type = ChangeState
trigger1 = Time >= 56
value = 9025

;---------------------------------------
;SLASH Jumping **
[Statedef 9025]
type = A
movetype = I
anim = 9025
velset = 0, 0

[State 9025, 1]
type = VelSet
trigger1 = AnimElem = 5
x = 6
y = -12

[State 9025, 10]
type = DestroySelf
trigger1 = Time >= 24

;------------------------------------------------
; SLASH Hit **
[Statedef 9030]
type = A
movetype = H
anim =  9030
velset = 0, 0

[State 9030, 0]
type = PlaySnd
trigger1 = Time = 0
value = 0, 51

[State 9030, 1]
type = Helper
trigger1 = Time = 0
stateno = 9210
ID = 9200
pos = 0, 0
postype = p1
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 9030, 3]
type = VelSet
trigger1 = Time >= 0
x = 0

[State 9030, 5]
type = ChangeState
Trigger1 = HitShakeOver = 1
value = 9031
ctrl = 0

; ** Flying after being hit **
[Statedef 9031]
type = S
movetype = I
velset = -2, -6
anim = 9031

[State 9031, 3]
type = Gravity
trigger1 = Time >= 0

[State 9031, 5]
type = ChangeState
trigger1 = Pos Y > -15
trigger1 = Vel Y > 0
value = 9032

; ** Hitting the ground and getting up **
[Statedef 9032]
type = A
movetype = I
anim = 9032
velset = 0,0

[State 9032, 0]
type = VelSet
trigger1 = Time <= 40
x = 0

[State 9032, 1]
type = PosAdd
trigger1 = Time = 0
x = -20

[State 9032, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9032, 5]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = -1, 8
postype = p1
bindtime = 1
sprpriority = 7
anim = 997

[State 9032, 6]
type = VelSet
trigger1 = AnimElem >= 13
x = 3
y = -12

[State 9032, 8]
type = PlaySnd
trigger1 = Time = 0
value = F7, 0

[State 9032, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 9025

; ** Jumping **
[Statedef 9105]
type = S
movetype = I
anim = 9105

[State 9105, 0]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 9105, 1]
type = Null ;PlaySnd
trigger1 = AnimElem = 4
value = 0, 63

[State 9105, 2]
type = VelSet
trigger1 = Time = 0
x = 3
y = 2

[State 9105, 3]
type = Gravity
trigger1 = Time >= 0

[State 9105, 4]
type = Helper
trigger1 = Time = 0
stateno = 9108
ID = 9200
pos = 0, 0
postype = p1
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 9105, 5]
type = ChangeState
trigger1 = Pos Y >= 2
value = 9106

; ** Landing & win pose **
[Statedef 9106]
type = S
movetype = I
anim = 9106

[State 9106, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 9106, 1]
type = PosSet
trigger1 = Time = 0
y = 2

[State 9106, 2]
type = Turn
trigger1 = AnimElem = 10
;y = 0

[State 9107, 3]
type = PlaySnd
trigger1 = Time = 0
value = 0, 46

[State 9107, 3]
type = PlaySnd
trigger1 = AnimElem = 10
value = 0, 73

[State 9107, 4]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = 2
anim = 997

[State 9107, 7]
type = explod
trigger1 = AnimTime = 0
ownpal = 1
pos = 0, 0
shadow = -1
postype = p1
sprpriority = 1
anim = 9107

[State 9107, 10]
type = DestroySelf
trigger1 = AnimTime = 0

; ** Landing & win pose (sword only) ** 
[Statedef 9108]
type = S
movetype = I
anim = 9108

[State 9108, 1]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 9108, 2]
type = BindToParent
trigger1 = Time = 0
time = -1
pos = 0, 0
facing = 1

[State 9108, 3]
type = ChangeAnim
trigger1 = parent, Anim = 9106
trigger1 = parent, AnimElem = 1
value = 9109

; Initially black. Change to blue.
[State 9108, 21]
type = PalFX
trigger1 = TimeMod = 45, 0
time = 300
add = 64, 0, 40
sinadd = 96, 0, 208, 25

; Change to pink.
[State 9108, 22]
type = PalFX
trigger1 = TimeMod = 45, 8
time = 300
add = 144, 16, 248
sinadd = 80, 120, -40, 25

; Change to bright blue.
[State 9108, 23]
type = PalFX
trigger1 = TimeMod = 45, 16
time = 300
add = 192, 144, 208
sinadd = -192, 104, 0, 25

; Change to blue.
[State 9108, 24]
type = PalFX
trigger1 = TimeMod = 45, 23
time = 300
add = 0, 248, 248
sinadd = 104, -112, 0, 25

; Change to bright pink.
[State 9108, 25]
type = PalFX
trigger1 = TimeMod = 45, 30
time = 300
add = 136, 104, 248
sinadd = 112, -104, 0, 25

; Change to black.
[State 9108, 26]
type = PalFX
trigger1 = TimeMod = 45, 38
time = 300
add = 248, 56, 56
sinadd = -184, -56, -16, 25

[State 9108, 30]
type = Turn
trigger1 = parent, Anim = 9106
trigger1 = parent, AnimElem = 10
;y = 0

; ** Win pose (sword only) ** 
[Statedef 9109]
type = S
movetype = I
anim = 9109

[State 9109, 1]
type = SprPriority
trigger1 = Time = 0
value = 1

; Initially black. Change to blue.
[State 9109, 21]
type = PalFX
trigger1 = TimeMod = 45, 0
time = 300
add = 64, 0, 40
sinadd = 96, 0, 208, 25

; Change to pink.
[State 9109, 22]
type = PalFX
trigger1 = TimeMod = 45, 8
time = 300
add = 144, 16, 248
sinadd = 80, 120, -40, 25

; Change to bright blue.
[State 9109, 23]
type = PalFX
trigger1 = TimeMod = 45, 16
time = 300
add = 192, 144, 208
sinadd = -192, 104, 0, 25

; Change to blue.
[State 9109, 24]
type = PalFX
trigger1 = TimeMod = 45, 23
time = 300
add = 0, 248, 248
sinadd = 104, -112, 0, 25

; Change to bright pink.
[State 9109, 25]
type = PalFX
trigger1 = TimeMod = 45, 30
time = 300
add = 136, 104, 248
sinadd = 112, -104, 0, 25

; Change to black.
[State 9109, 26]
type = PalFX
trigger1 = TimeMod = 45, 38
time = 300
add = 248, 56, 56
sinadd = -184, -56, -16, 25

;---------------------------------------------------------------------------------
; ** Coming down while slashing (sword only) ** 
[Statedef 9200]
type = S
movetype = I
anim = 9200

[State 9200, 1]
type = SprPriority
trigger1 = Time = 0
value = 10

[State 9200, 1]
type = BindToParent
trigger1 = Time = 0
time = -1
pos = 0, 0
facing = 1

[State 9200, 7]
type = ChangeAnim
trigger1 = (parent, stateno = 9020) || (parent, stateno = 3420)  
trigger1 = parent, AnimElem = 6
value = 9201

[State 9200, 8]
type = ChangeAnim
trigger1 = (parent, stateno = 9020) || (parent, stateno = 3420)  
trigger1 = parent, AnimElem = 7
value = 9202

[State 9200, 9]
type = BindToParent
trigger1 = (parent, stateno != 9020)  && (parent, stateno != 3420) && (parent, stateno != 9025)
trigger2 = AnimTime = 0
time = 1
pos = 0, 0
facing = 1

; Initially black. Change to blue.
[State 9200, 21]
type = PalFX
trigger1 = TimeMod = 45, 0
time = 300
add = 64, 0, 40
sinadd = 96, 0, 208, 25

; Change to pink.
[State 9200, 22]
type = PalFX
trigger1 = TimeMod = 45, 8
time = 300
add = 144, 16, 248
sinadd = 80, 120, -40, 25

; Change to bright blue.
[State 9200, 23]
type = PalFX
trigger1 = TimeMod = 45, 16
time = 300
add = 192, 144, 208
sinadd = -192, 104, 0, 25

; Change to blue.
[State 9200, 24]
type = PalFX
trigger1 = TimeMod = 45, 23
time = 300
add = 0, 248, 248
sinadd = 104, -112, 0, 25

; Change to bright pink.
[State 9200, 25]
type = PalFX
trigger1 = TimeMod = 45, 30
time = 300
add = 136, 104, 248
sinadd = 112, -104, 0, 25

; Change to black.
[State 9200, 26]
type = PalFX
trigger1 = TimeMod = 45, 38
time = 300
add = 248, 56, 56
sinadd = -184, -56, -16, 25

[State 9200, 30]
type = DestroySelf
trigger1 = (parent, stateno != 9020)  && (parent, stateno != 3420) && (parent, stateno != 9025)
trigger2 = AnimTime = 0
trigger3 = Time >= 90


;--------------------------------------------------------------------------------------
; ** Hit, falling back, hitting the ground and getting up (sword only) ** 
[Statedef 9210]
type = S
movetype = I
anim = 9210

[State 9210, 1]
type = SprPriority
trigger1 = Time = 0
value = 0 ;1

[State 9210, 1]
type = BindToParent
trigger1 = Time = 0
time = -1
pos = 0, 0
facing = 1

[State 9210, 7]
type = ChangeAnim
trigger1 = parent, Anim = 9031
trigger1 = parent, AnimElem = 1
value = 9211

[State 9210, 8]
type = ChangeAnim
trigger1 = parent, stateno = 9032
trigger1 = parent, AnimElem = 1
value = 9212

[State 9210, 9]
type = BindToParent
trigger1 = parent, stateno != 9030
trigger1 = parent, stateno != 9031
trigger1 = parent, stateno != 9032
trigger1 = parent, stateno != 9025
trigger2 = AnimTime = 0
time = 0
pos = 0, 0
facing = 1

; Initially black. Change to blue.
[State 9210, 21]
type = PalFX
trigger1 = TimeMod = 45, 0
time = 300
add = 64, 0, 40
sinadd = 96, 0, 208, 25

; Change to pink.
[State 9210, 22]
type = PalFX
trigger1 = TimeMod = 45, 8
time = 300
add = 144, 16, 248
sinadd = 80, 120, -40, 25

; Change to bright blue.
[State 9210, 23]
type = PalFX
trigger1 = TimeMod = 45, 16
time = 300
add = 192, 144, 208
sinadd = -192, 104, 0, 25

; Change to blue.
[State 9210, 24]
type = PalFX
trigger1 = TimeMod = 45, 23
time = 300
add = 0, 248, 248
sinadd = 104, -112, 0, 25

; Change to bright pink.
[State 9210, 25]
type = PalFX
trigger1 = TimeMod = 45, 30
time = 300
add = 136, 104, 248
sinadd = 112, -104, 0, 25

; Change to black.
[State 9210, 26]
type = PalFX
trigger1 = TimeMod = 45, 38
time = 300
add = 248, 56, 56
sinadd = -184, -56, -16, 25

[State 9210, 30]
type = DestroySelf
trigger1 = parent, stateno != 9030
trigger1 = parent, stateno != 9031
trigger1 = parent, stateno != 9032
trigger1 = parent, stateno != 9025
trigger2 = AnimTime = 0


;
; ****************************
; **  TESSE related states  **
; ****************************
;

; ** Calling TESSE **
[Statedef 4740]
type    = S
movetype= I
physics = S
anim = 4950
ctrl = 0
velset = 0, 0
;poweradd = -250

[State 4740, 0]
type = Helper
trigger1 = Time = 0
ID = 9500
pos = -50, -200
postype = back
stateno = 9040
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 4740, 5]
type = ChangeState
trigger1 = Time = 40
value = 0
ctrl = 1

; ** Calling TESSE **
[Statedef 4741]
type    = S
movetype= I
physics = S
anim = 4950
ctrl = 0
velset = 0, 0
;poweradd = -250

[State 4741, 0]
type = Helper
trigger1 = Time = 0
ID = 9500
pos = -50, -200
postype = p1; back
stateno = 9040
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 4741, 5]
type = ChangeState
trigger1 = Time = 40
value = 0
ctrl = 1

;-------------------------------------------------------------------
;** Floating in the air and landing **
[Statedef 9040]
type = A
movetype = I
anim = 9040
velset = 3, 2

[State 9040, 1]
type = VelSet
trigger1 = Pos Y > 0
x = 0
y = 0

[State 9040, 2]
type = HitOverride
trigger1 = time = 0
time = 230
attr = SCA, AA, AT, AP
slot = 0
stateno = 9056

[State 9040, 3]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 9040, 4]
type = PlaySnd
trigger1 = Time = 36
value = 0, 46

[State 9040, 5]
type = explod
trigger1 = Time = 36
ownpal = 1
pos = -1, 4
postype = p1
bindtime = 1
sprpriority = 7
anim = 997

[State 9040, 6]
type = VelMul
trigger1 = Time >= 0
y = 1.05

[State 9040, 7]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = S

[State 9040, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 9046

;** Attack start **
[Statedef 9046]
type = S
movetype = A
anim = 9046

[State 0, PosSet]
type = PosSet
trigger1 = time = 1 
y = 0
ignorehitpause = 1 

[State 9046, 0]
type = VelSet
trigger1 = AnimElem >= 6
x = 3
ignorehitpause = 1

[State 9046, 3]
type = PlaySnd
trigger1 = Time = 4
value = 0, 52

[State 9046, 4]
type = PlaySnd
trigger1 = Time = 16
trigger2 = Time = 26
trigger3 = Time = 36
trigger4 = Time = 46
value = 0, 53
ignorehitpause = 1

[State 9046, 5]
type = HitDef
trigger1 = Time = 1
attr = S, NA
animtype  = Back
damage    = 0
guardflag = MA
pausetime = 0,0
sparkxy = -14, -68
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0,50
guardsound = S0, 83
priority = 5
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -1.9, -4
air.animtype = Back
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
forcestand = 1
snap = 83,floor(enemy,P2BodyDist y)*-1
p1stateno = 9052
p2stateno = 9054


[State -2, Combo ParentVarAdd]
type = ParentVarAdd
trigger1 = (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 1
ignorehitpause = 1 

[State 9046, 48]
type = ChangeState
trigger1 =(P2Movetype = H) && (MoveHit) 
value = 9052

[State 9046, 49]
type = ChangeState
trigger1 = Time >= 45
value = 9049

[State 9046, 50]
type = ChangeState
trigger1 = MoveGuarded = 1
value = 9050

;** Attack end (succesful) **
[Statedef 9048]
type = S
movetype = I
anim = 9048
velset = 0, 0

[State 9048, 7]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 55

[State 9048, 9]
type = DestroySelf
trigger1 = AnimTime = 0

;** Attack end (bluffed) **
[Statedef 9049]
type = S
movetype = I
anim = 9049
velset = 0, 0

[State 9049, 5]
type = PlaySnd
trigger1 = Time = 1
value = 0, 53

[State 9049, 7]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 55

[State 9049, 9]
type = DestroySelf
trigger1 = AnimTime = 0

;** Attack end (blocked) **
[Statedef 9050]
type = S
movetype = I
anim = 9050
velset = 0, 0

[State 9050, 7]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 55

[State 9050, 9]
type = DestroySelf
trigger1 = AnimTime = 0

;** Successful attack **
[Statedef 9052]
type = S
movetype = A
anim = 9052
velset = 0, 0
moveHitPersist = 1 ; Needed for MoveContact to remain true

[State -2, Combo ParentVarAdd]
type = ParentVarAdd
trigger1 = (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 1
ignorehitpause = 1 

[State 9052, 1]
type = PlaySnd
trigger1 = Time = 0
trigger2 = MoveHit = 1
value = 0, 54

[State 9052, 2]
type = Null ;MoveHitReset
trigger1 = MoveHit = 1

[State 9052, 3]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0
ignorehitpause = 1 

[State 9052, 6]
type = HitDef
trigger1 = Time = 15
trigger2 = Time = 47
attr = S, NA
animtype  = Back
damage    = 4
guardflag = MA
pausetime = 0,0
sparkxy = -14, -68
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0,50
guardsound = S0, 83
priority = 5
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -1.9, -4
air.animtype = Back
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2stateno = 9055
snap = 83,0

[State 9052, 7]
type = HitDef
trigger1 = Time = 31
attr = S, NA
animtype  = Back
damage    = 4
guardflag = MA
pausetime = 0,0
sparkxy = -14, -68
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0,50
guardsound = S0, 83
priority = 5
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -1.9, -4
air.animtype = Back
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2stateno = 9054

[State 9052, 8]
type = HitDef
trigger1 = Time = 63
attr = S, NA
animtype  = Back
damage    = 10
guardflag = MA
pausetime = 0, 0; 8, 8
sparkxy = -14, -68
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0,50
guardsound = S0, 83
priority = 5
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -1.9, -4
air.animtype = Back
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0

[State -2, Combo ParentVarAdd]
type = ParentVarAdd
trigger1 = (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 1
ignorehitpause = 1 

[State 9052, 0]
type = Explod
trigger1 = Time = 0
trigger2 = MoveHit = 1
anim = 7000
postype = p1
pos = 84, -68
sprpriority = 7

[State 9052, 44]
type = AssertSpecial
trigger1 = Time = 0
trigger2 = Time = 17
trigger3 = Time = 33
trigger4 = Time = 49
trigger5 = Time = 65
flag = NoKOSlow
ignorehitpause = 1

[State 9052, 45]
type = EnvColor
triggerall = WinKO = 1
trigger1 = Time = 1
trigger2 = Time = 18
trigger3 = Time = 34
trigger4 = Time = 50
trigger5 = Time = 66
value = 255, 255, 255
time = 1
ignorehitpause = 1

[State 9052, 46]
type = PlaySnd
triggerall = WinKO = 1
trigger1 = Time = 1
trigger2 = Time = 18
trigger3 = Time = 34
trigger4 = Time = 50
trigger5 = Time = 66
value = 0, 78
channel = 8
ignorehitpause = 1

[State 9052, 46]
type = MoveHitReset
triggerall = time >= 2
trigger1 = MoveHit
ignorehitpause = 1

[State 9052, 47]
type = ParentVarSet
trigger1 = WinKO
trigger1 = parent, Var(13) = 0
v = 13
value = StateNo
ignorehitpause = 1

[State 9052, 53]
type = ChangeState
trigger1 = p2movetype != H 
trigger1 = p2stateno != 9054
trigger1 = p2stateno != 9055
trigger1 = Time <= 64
trigger2 = Time = 69
value = 9048

[State 9052, 54]
type = ChangeState
triggerall = WinKO = 1
trigger1 = Time = 16
trigger2 = Time = 32
trigger3 = Time = 48
trigger4 = Time = 64
value = 9048

[State 9052, 55]
type = DestroySelf
trigger1 = AnimTime = 0

;** Hit by attack (hit high) **
[Statedef 9054]
type = S
movetype = H
physics = N
;anim = 9054
velset = 0, 0

[State 9054, 0]
type = LifeAdd
trigger1 = Time =  0
value = -10

[State 9054, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 9054

[State 9054, 2]
type = PosAdd
triggerall = Pos Y < 0
trigger1 = TimeMod = 16, 0
trigger2 = TimeMod = 16, 8
y = 7

[State 9054, 3]
type = ChangeAnim2
trigger1 = Time = 17
value = 914

[State 9054, 4]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 9054, 10]
type = SelfState
trigger1 = Time = 20
value = 5030

;** Hit by attack (hit low) **
[Statedef 9055]
type = S
movetype = H
physics = N
;anim = 9055
velset = 0, 0

[State 9055, 0]
type = LifeAdd
trigger1 = Time = 0
value = -10

[State 9055, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 9055

[State 9055, 2]
type = PosAdd
triggerall = Pos Y < 0
trigger1 = TimeMod = 16, 0
trigger2 = TimeMod = 16, 8
y = 7

[State 9055, 3]
type = ChangeAnim2
trigger1 = Time = 17
value = 914

[State 9055, 4]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 9055, 10]
type = SelfState
trigger1 = Time = 20
value = 5030

; ** Hit **
[Statedef 9056]
type = A
movetype = H
anim =  9056
velset = 0, 0

[State 9056, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 56

[State 9056, 3]
type = VelSet
trigger1 = Time >= 0
x = 0

[State 9056, 5]
type = ChangeState
Trigger1 = HitShakeOver = 1
value = 9057
ctrl = 0

; ** Flying after being hit **
[Statedef 9057]
type = S
movetype = I
velset = -2, -6
anim = 9057

[State 9057, 3]
type = Gravity
trigger1 = Time >= 0

[State 9057, 5]
type = ChangeState
trigger1 = Pos Y > -15
trigger1 = Vel Y > 0
value = 9058

; ** Hitting the ground, getting up and teleporting out of the screen **
[Statedef 9058]
type = A
movetype = I
anim = 9058
velset = 0,0

[State 9058, 0]
type = VelSet
trigger1 = Time >= 0
x = 0

[State 9058, 1]
type = PosAdd
trigger1 = Time = 0
x = -10

[State 9058, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9058, 5]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = -1, 8
postype = p1
bindtime = 1
sprpriority = 7
anim = 997

[State 9058, 8]
type = PlaySnd
trigger1 = Time = 0
value = F7, 0

[State 9058, 9]
type = PlaySnd
trigger1 = AnimElem = 12
value = 0, 55

[State 9058, 10]
type = DestroySelf
trigger1 = AnimTime = 0

; ** Jumping with her umbrella extended ** 
[Statedef 9100]
type = S
movetype = I
anim = 9100

[State 9100, 0]
type = SprPriority
trigger1 = Time = 0
value = 0

[State 9100, 1]
type = Null ;PlaySnd
trigger1 = AnimElem = 4
value = 0, 63

[State 9100, 2]
type = VelSet
trigger1 = Time = 0
x = -1.25
y = 2

[State 9100, 3]
type = Turn
trigger1 = Time = 0

[State 9100, 4]
type = ChangeState
trigger1 = Pos Y >= 0
value = 9102

; ** Win pose & standing (floating) ** 
[Statedef 9102]
type = S
movetype = I
anim = 9101

[State 9102, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 9102, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9102, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Anim = 9101
value = 0, 46

[State 9102, 3]
type = PlaySnd
trigger1 = AnimElem = 5
trigger1 = Anim = 9101
value = 0, 72

[State 9102, 4]
type = Explod
trigger1 = Time = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = 0
anim = 997

[State 9102, 7]
type = Null ;Explod
trigger1 = AnimTime = 0
ownpal = 1
pos = 0, 0
postype = p1
sprpriority = 0
anim = 9102
removetime = -1
shadow = -1
;bindtime = -1

[State 9102, 8]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 9101
value = 9102

[State 9102, 10]
type = Null ;DestroySelf
trigger1 = AnimTime = 0


;
; ******************************
; **  DANDY-J related states  **
; ******************************
;

; ** Calling DANDY-J **
[Statedef 4760]
type    = S
movetype= I
physics = S
anim = 4950
ctrl = 0
velset = 0, 0
;poweradd = -250

[State 4760, 0]
type = Helper
trigger1 = Time = 0
ID = 9500
pos = -40, 0
postype = back
stateno = 9060
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 4760, 5]
type = ChangeState
trigger1 = Time = 40
value = 0
ctrl = 1

;** Dashing in **
[Statedef 9060]
type = S
movetype = I
anim = 9062

[State 9060, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 8

[State 9060, 2]
type = HitOverride
trigger1 = time = 0
time = 230
attr = SCA, AA, AT, AP
slot = 0
stateno = 9068

[State 9060, 3]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 9060, 6]
type = VelMul
trigger1 = Time >= 0
x = 0.96

[State 9060, 7]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 9060, 8]
type = PlaySnd
trigger1 = Time = 0
value = 0, 5

[State 9060, 9]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 46

[State 9060, 10]
type = ChangeState
trigger1 = Time >= 35
value = 9061

;** Jumping **
[Statedef 9061]
type = S
movetype = I
anim = 9061

[State 9061, 0]
type = StateTypeSet
trigger1 = Time = 3
statetype = A

[State 9061, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 2
y = -9

[State 9061, 2]
type = Gravity
trigger1 = Time = [3, 29]

[State 9061, 3]
type = VelSet
trigger1 = AnimElem >= 9
x = 0
y = 0

[State 9061, 10]
Type = ChangeState
trigger1 = Time >= 33
value = 9063

;** Falling hella fast **
[Statedef 9063]
type = A
movetype = A
anim = 9063

[State 9063, 0]
type = VelSet
trigger1 = Time = 0
y = 0.8

[State 9063, 1]
type = VelMul
trigger1 = Time >= 0
y = 1.5

[State 9063, 2]
type = VelSet
trigger1 = Time >= 0
x = 0

[State 9063, 3]
type = PlaySnd
trigger1 = Time = 0
value = 0, 58

[State 9063, 5]
type = HitDef
trigger1 = Time = 5
trigger1 = P2BodyDist Y >= 10
attr = A, NA
damage    = 50
givepower = 25
animtype  = Medium
guardflag = HA
pausetime = 7,7
sparkxy = -10,20
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0, 81
guardsound = S0, 83
priority = 5
ground.type = High
ground.slidetime = 9
ground.hittime  = 14
ground.velocity = -8
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2stateno = 910

[State -2, Combo ParentVarAdd]
type = ParentVarAdd
trigger1 = (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 1
ignorehitpause = 1 

[State 9063, 0]
type = StateTypeSet
trigger1 = Pos Y >= 0
statetype = S

[State 9063, 44]
type = AssertSpecial
trigger1 = WinKO = 0
trigger1 = MoveHit
flag = NoKOSlow
ignorehitpause = 1

[State 9063, 45]
type = EnvColor
trigger1 = WinKO = 1
trigger1 = MoveHit
value = 255, 255, 255
time = 1
ignorehitpause = 1

[State 9063, 46]
type = PlaySnd
trigger1 = WinKO = 1
trigger1 = MoveHit
value = 0, 78
channel = 8
ignorehitpause = 1

[State 9063, 46]
type = MoveHitReset
trigger1 = WinKO = 1
trigger1 = MoveHit
ignorehitpause = 1

[State 9063, 47]
type = ParentVarSet
trigger1 = WinKO
trigger1 = parent, Var(13) = 0
v = 13
value = StateNo
ignorehitpause = 1

[State 9063, 50]
type = ChangeState
trigger1 = Pos Y >= 0
value = 9064

;** Pounding the ground **
[Statedef 9064]
type = S
movetype = A
anim = 9064
velset = 0, 0
moveHitPersist = 1 ; Needed for MoveContact to remain true

[State 9064, 0]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9064, 1]
type = EnvShake
trigger1 = Time = 0
time = 28
ampl = -6
freq = 191

[State 9064, 2]
type = VelSet
trigger1 = Time >= 0
x = 0

[State 9064, 3]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = 7
anim = 9071

[State 9064, 4]
type = PlaySnd
trigger1 = Time = 0
value = 0, 17

[State 9064, 5]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Back
damage    = 50
guardflag = L
hitflag = M
pausetime = 1,1
sparkno = -1
sparkxy = 400,-300
hitsound   = S0, 81
guardsound = -1
priority = 5
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -1.9, -4
air.animtype = Back
air.velocity = -2.2,-4
fall = 1
fall.yvelocity = -2.5
fall.recover = 0

[State -2, Combo ParentVarAdd]
type = ParentVarAdd
trigger1 =  (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 1
ignorehitpause = 1 
 
 
[State 9064, 47]
type = ParentVarSet
trigger1 = WinKO
trigger1 = parent, Var(13) = 0
v = 13
value = StateNo
ignorehitpause = 1

[State 9064, 50]
type = ChangeState
trigger1 = Time >= 10
value = 9065

;** Retreating **
[Statedef 9065]
type = S
movetype = I

[State 9065, 0]
type = VelSet
trigger1 = AnimElem = 5
x = -3

[State 9065, 1]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
x = -7

[State 9065, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 9067

;** Jumping off the screen **
[Statedef 9067]
type = S
movetype = I
anim = 9067

[State 9067, 0]
type = VelSet
trigger1 = Time <= 2
x = 0
y = 0

[State 9067, 1]
type = VelSet
trigger1 = AnimElem = 3
x = 3
y = -10

[State 9067, 10]
type = DestroySelf
trigger1 = Time >= 25

; ** Hit **
[Statedef 9068]
type = A
movetype = H
anim =  9068
velset = 0, 0

[State 9068, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 59

[State 9068, 3]
type = VelSet
trigger1 = Time >= 0
x = 0

[State 9068, 5]
type = ChangeState
Trigger1 = HitShakeOver = 1
value = 9069
ctrl = 0

; ** Flying after being hit **
[Statedef 9069]
type = S
movetype = I
velset = -2, -6
anim = 9069

[State 9069, 3]
type = Gravity
trigger1 = Time >= 0

[State 9069, 5]
type = ChangeState
trigger1 = Pos Y > -15
trigger1 = Vel Y > 0
value = 9070

; ** Hitting the ground, getting up and teleporting out of the screen **
[Statedef 9070]
type = A
movetype = I
anim = 9070
velset = 0,0

[State 9070, 0]
type = VelSet
trigger1 = Time >= 0
x = 0

[State 9070, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9070, 5]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = -1, 8
postype = p1
bindtime = 1
sprpriority = 7
anim = 997

[State 9070, 8]
type = PlaySnd
trigger1 = Time = 0
value = F7, 0

[State 9070, 9]
type = Null ;PlaySnd
trigger1 = AnimElem = 12
value = 0, 55

[State 9070, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 9067

; ** Win pose (falling) **
[Statedef 9072]
type = S
movetype = I
anim = 9072

[State 9072, 0]
type = SprPriority
trigger1 = Time = 0
value = -1

[State 9072, 2]
type = VelSet
trigger1 = Time = 0
y = 2

[State 9072, 3]
type = Gravity
trigger1 = Time >= 0

[State 9072, 4]
type = PlaySnd
trigger1 = Time = 0
value = 0, 65

[State 9072, 5]
type = ChangeState
trigger1 = Pos Y >= -7
value = 9073

; ** Win pose **
[Statedef 9073]
type = S
movetype = I
anim = 9073

[State 9073, 0]
type = VelSet
trigger1 = Time = 0
y = 0

[State 9073, 1]
type = PosSet
trigger1 = Time = 0
y = -7

[State 9073, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 46

[State 9073, 4]
type = PlaySnd
trigger1 = Time = 0
value = 0, 66

[State 9073, 5]
type = PlaySnd
trigger1 = AnimElem = 19
value = 0, 67

[State 9073, 6]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = 0, 0
postype = p1
sprpriority = 0
anim = 997

[State 9073, 7]
type = explod
trigger1 = AnimTime = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = 1
;sprpriority = 0
anim = 9074
shadow = -1

[State 9073, 10]
type = DestroySelf
trigger1 = AnimTime = 0

;
; ******************************
; **  NATSUMI related states  **
; ******************************
;

;--------------------------------------------------------------
; ** NATSUMI HIT PROTECT **
[Statedef 9074]
type = S
movetype = I
anim = 4786

[State 9080, 0]
type = SprPriority
trigger1 = Time = 0
value = 20

[State 9080, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1110, 1
 
[State 0, ChangeState]
type = ChangeState
triggerall = time >= 10
trigger1 = HitShakeOver = 1
value = 9077
ctrl = 0
anim = 9079
ignorehitpause = 1
;persistent = 

;[State 1060, 30]
;type = DestroySelf
;trigger1 = AnimTime = 0  
;ignorehitpause = 1
;;persistent = 

;----------------------------------------------------------
; ** Win pose (falling) **
[Statedef 9075]
type = S
movetype = I
anim = 9075

[State 0, Explod]
type = Explod
triggerall = parent,stateno = 3400
triggerall = numexplod(90755) = 0
trigger1 = time = 0
anim = 9075
ID = 90755  
pos = 77,2020
postype = p1  ;p2,front,back,left,right 
removetime = 166 
sprpriority = 14 

[State 9075, 0]
type = SprPriority
trigger1 = Time = 0
value = 4

[State 9075, 1]
type = Null ;PlaySnd
trigger1 = AnimElem = 4
value = 0, 63

[State 9075, 2]
type = VelSet
trigger1 = Time = 0
y = 2

[State 9075, 3]
type = Gravity
trigger1 = Time >= 0

[State 9075, 4]
type = ChangeState
triggerall = numexplod(90755) = 1
trigger1 = Pos Y >= -30
value = 9077
[State 9075, 4]
type = ChangeState
trigger1 = Pos Y >= 0
value = 9076

;------------------------------------------------------------
; ** NATSUMI Win **
[Statedef 9076]
type = S
movetype = I
anim = 9076

[State 9076, 0]
type = VelSet
trigger1 = Time = 0
y = 0

[State 9076, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9076, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 46

[State 9077, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 68

[State 9077, 3]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = 0
anim = 997

[State 9077, 7]
type = explod
trigger1 = AnimTime = 0
ownpal = 1
pos = 0, 0
postype = p1
;sprpriority = 0
anim = 9077
shadow = -1

[State 9077, 10]
type = DestroySelf
trigger1 = AnimTime = 0
 
;------------------------------------------------------------
; ** NATSUMI Ultra **
[Statedef 9077]
type = S
movetype = A        ;I,A,H
;anim = 9078
sprpriority = 4 

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 9078
triggerall = Anim != 9079
trigger1 = time = 0
value = 9078 
ignorehitpause = 1  

[State 9077, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 

[State 907, HitOverride]
type = HitOverride
trigger1 = 1
time = 99
slot = 1
stateno = 9074
attr = SCA,NA,SA,HA,NP,SP,HP  
ignorehitpause = 1 
;persistent = 


[State 9076, 0]
type = VelSet
trigger1 = Anim = 9078
trigger1 = Time = 0
y = 0

[State 9076, 1]
type = PosSet
trigger1 = Anim = 9078
trigger1 = Time = 0
y = 0

[State 9076, 1]
type = PlaySnd
trigger1 = Anim = 9078
trigger1 = Time = 0
value = 0, 46

[State 9077, 2]
type = PlaySnd
trigger1 = Anim = 9078
trigger1 = AnimElem = 5
value = 0, 68

[State 9077, 3]
type = explod
trigger1 = Anim = 9078
trigger1 = Time = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = 0
anim =      997

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 9078
trigger1 = anim = 2
statetype = S       ;S,A,C,L
movetype = A        ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1
;persistent = 

; Second hit (POWERRRRR hit)
[State 420, 5]
type = HitDef
trigger1 = Anim = 9078
trigger1 = AnimElem = 2
attr = S, HA
damage    = 55;110
getpower  = 50
givepower = 25
guardflag = MA
animtype = Heavy
hitflag = MAF
priority = 9, Hit
pausetime = 12,10
ground.type = Low
ground.slidetime = 10
ground.hittime  = 40
ground.velocity = 0,-11
air.hittime = 28
air.velocity = -1,-10
sparkxy = 0, -68
sparkno = S7005
guard.sparkno = S7020
hitsound   = S0, 81
guardsound = S0, 83
fall = 1
fall.yvelocity = -2.5
fall.recover = 0
p2facing = 1 
 
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Anim = 9078
trigger1 = AnimElem = 6
statetype = S       ;S,A,C,L
movetype = I        ;I,A,H
physics = S        ;A,C,S,N
ignorehitpause = 1
;persistent = 

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim = 9078
trigger1 = AnimTime = 0
trigger2 = Time >= 37  ;bug killer
value = 9079
;elem = 1
ignorehitpause = 1
;persistent = 

[State 0, VelSet]
type = VelSet
trigger1 = Anim = 9079
trigger1 = vel x != -6
x = -6
y = 0
ignorehitpause = 1
;persistent = 


[State 9077, 10]
type = DestroySelf
trigger1 = Anim = 9079
trigger1 = Time >= 200

;
; ********************************
; **  FERNANDEZ related states  **
; ********************************
;

;--------------------------------------------------------------
; ** HIT PROTECT **
[Statedef 9078]
type = S
movetype = I
anim = 4784

[State 9080, 0]
type = SprPriority
trigger1 = Time = 0
value = -10

[State 9080, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1110, 1
 

[State 1060, 30]
type = DestroySelf
trigger1 = AnimTime = 0  
ignorehitpause = 1
;persistent = 



;--------------------------------------------------------------
; **  FERNANDEZ Ultra **
[Statedef 9079]
type = S
movetype = I
anim = 9080

[State 9080, 0]
type = SprPriority
trigger1 = Time = 0
value = -4

[State 9080, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 63
 

[State 1060, 30]
type = ChangeState
trigger1 = AnimTime = 0
value = 9083
ctrl = 0

;-----------------------------------------------------------------------
; ** Win pose **
[Statedef 9080]
type = S
movetype = I
anim = 9080

[State 9080, 0]
type = SprPriority
trigger1 = Time = 0
value = -1

[State 9080, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 63

[State 9080, 5]
type = Helper
trigger1 = AnimElem = 11
pos = 0, 0
postype = p1
stateno = 9081
;helpertype = normal
keyctrl = 0
ownpal = 1

[State 9080, 6]
type = explod
trigger1 = AnimElem = 11
ownpal = 1
pos = 0, 0
postype = p1
sprpriority = -1
anim = 9081
shadow = -1

[State 183, 10]
type = DestroySelf
trigger1 = AnimElem = 11



;---------------------------------------------------------
; ** Win pose (blinking border) **
[Statedef 9081]
type = S
movetype = I
anim = 9082

[State 9080, 6]
type = explod
triggerall = numexplod(9081) = 0
triggerall = prevstateno = 9083
trigger1 = time = 0
ownpal = 1
pos = 0, 0
postype = p1
sprpriority = -4
anim = 9081
shadow = -1
ID = 9081

[State 9081, 0]
type = SprPriority
trigger1 = Time = 0
value = -5

[State 9081, 1]
type = PalFX
trigger1 = TimeMod = 28, 0
time = 445
add = 0, 0, 0
sinadd = 0, 160, -88, 40

[State 9081, 2]
type = PalFX
trigger1 = TimeMod = 28, 13
time = 445
add = 0, 160, -88
sinadd = 0, -160, 88, 40

;++++++++++++++++++++++++++++++++++++++++
; KISS O DEATH
[Statedef 9083]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
ctrl = 0
velset = 0,0;,0
anim = 4782
sprpriority = -6

[State 9000, 0]
type = Width 
trigger1 = Time >= 0
value = 25, 30
 

[State 9080, 0]
type = SprPriority
trigger1 = anim = 4782
trigger1 = Time = 0
value = -6

[State 700, 1]
type = PlaySnd
trigger1 = anim = 4782
trigger1 = AnimElem = 6
value = 1110,0; 0, 9
 
[State 700, 2]
type = HitDef
trigger1 = anim = 4782
trigger1 = AnimElem = 6
attr = S, HA
animtype  = Heavy
damage    = 62;115
guardflag = HAF
pausetime = 7,8
sparkno = S7004
guard.sparkno = S7020
sparkxy = -10,-55
hitsound   = S0, 81
guardsound = S0, 83
ground.type = High
priority = 5
ground.slidetime = 22
ground.hittime  = 32
ground.velocity = -2
air.velocity = -2.4,-4.5
P1sprpriority = -6
p2sprpriority = 2


[State 9083, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 

[State 9083, HitOverride]
type = HitOverride
trigger1 = 1
time = 99
slot = 1
stateno = 9078
attr = SCA,NA,SA,HA,NP,SP,HP 
ignorehitpause = 1 
;persistent =  


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 4782
trigger1 = AnimTime = 0
value = 4783 
ignorehitpause = 1 

[State 0, DestroySelf]
type = DestroySelf
triggerall= IsHelper
trigger1 = anim = 4783
trigger1 = AnimTime = 0 
ignorehitpause = 1 

 
[State 700, 50]
type = ChangeState
trigger1 = (RoundState = 3) && (NumExplod(9999) < 1) && (P2Life <= 0) && (Life > 0)
trigger1 = 1 
value = 9081
ctrl = 0
ignorehitpause = 1


;
; *********************************
; **  POLITANK-Z related states  **
; *********************************
;

; ** Tank Win pose **
[Statedef 9084]
type = S
movetype = I
anim = 9084

[State 9084, 0]
type = SprPriority
trigger1 = Time = 0
value = -1

[State 9084, 1]
type = VelSet
trigger1 = Time = 0
y = 30

[State 9084, 2]
type = VelAdd
trigger1 = Time = [0, 8]
y = -5

[State 9084, 3]
type = VelSet
trigger1 = Time = 8
y = 0

[State 9084, 4]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 69

[State 9084, 7]
type = explod
trigger1 = AnimTime = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = -1
;sprpriority = 0
anim = 9086
removetime = -1

[State 9084, 10]
type = DestroySelf
trigger1 = AnimTime = 0




;==================================
; ** Tankz Fallz **
[Statedef 9085]
type = S
movetype = I
anim = 9087

[State 0, Gravity]
type = Gravity
triggerall = anim = 9087
trigger1 = pos y <= -10
ignorehitpause = 1
;persistent = 

[State 9084, 0]
type = SprPriority
trigger1 = Time = 0
value = -1 


[State 9077, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 

[State 907, HitOverride]
type = HitOverride
trigger1 = 1
time = 99
slot = 1
stateno = 9089
attr = SCA,NA,SA,HA,NP,SP,HP  
ignorehitpause = 1 
;persistent = 

[State 0, VelSet]
type = VelSet
triggerall = anim = 9087
trigger1 = pos y > -10
y = 0
ignorehitpause = 1
;persistent = 
[State 0, PosSet]
type = PosSet
triggerall = anim = 9087
trigger1 = pos y > -10
y = 0
ignorehitpause = 1
;persistent = 

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim = 9087
trigger1 = pos y = 0
trigger1 = vel y = 0
value = 9088
;elem = 1
ignorehitpause = 1
;persistent = 



[State 200, 7]
type = Helper
triggerall = numhelper(1105) = 0
triggerall = anim = 9088
trigger1 = animelem = 5
id = 1105
name = "tama"
pos = 72,-81; 76,-86
postype = p1
stateno = 9086; 1104
;helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1


[State 200, 7]
type = Helper
triggerall = numhelper(1104) = 0
triggerall = anim = 9088
trigger1 = animelem = 17
id = 1104
name = "tama"
pos = 72,-81; 76,-86
postype = p1
stateno = 9086; 1104
;helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[State 9084, 7]
type = explod
triggerall = anim = 9088
trigger1 = AnimelemTime(5) = 0
trigger2 = AnimelemTime(17) = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = -1
sprpriority = 3
anim = 7037
removetime = -2

[State 0, VelSet]
type = VelSet
triggerall = anim = 9088
trigger1 = AnimelemTime(26) = 0
x = 2
y = -9
ignorehitpause = 1
;persistent = 


[State 9084, 10]
type = DestroySelf
triggerall = anim = 9088
trigger1 = AnimTime = 0

;=====================================
 
;bombs
[Statedef 9086]
type    = A
movetype= A
physics = N
velset = 4.5,-4.2
anim = 7030;1104
ctrl = 0
sprpriority = 3

[State 200, 1]
type = varset
trigger1 = 1
var(35) = root,var(35)

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 1100, 0+(random%3)

[State 600, 3]
type = veladd
trigger1 = 1
y = 0.36

[State 1000, 0]
type = HitBy
trigger1 = 1
value = SCA,AP

[State 3100,3]
type = HitOverride
trigger1 = 1
attr = SCA, AP
time = 1
stateno = 1106
ignorehitpause = 1

[State 210, 2]
type = HitDef
;triggerall = root,var(20)=0
trigger1 = 1;var(0)=0
attr = A, HP
animtype  = hard
damage    = 30,2;floor(182*(root,fvar(2)*0.01)),22
getpower = 0,0
givepower = 0,0
hitflag = MAF
guardflag = MA
pausetime = 0,0
guard.pausetime = 0,1 
sparkxy = -10,0
sparkno = S7004
guard.sparkno = S7021
;air.sparkxy = -50,-51
hitsound   = s0, 81
guardsound = S0, 83 
ground.type = High
ground.slidetime = 34
ground.hittime  = 34
guard.hittime = 23
ground.velocity = -5.5
air.velocity = -1.8,-1.6
guard.velocity = -2
air.fall = 0
fall.recover = 0
yaccel = .4
palfx.time = 16
palfx.mul = 255,165,0
palfx.sinadd = 160,128,160,3
palfx.add = 255,0,0
palfx.invertall = 1

[State 1201,Trail]
type = Explod
trigger1 = numtarget
trigger1 = movehit
trigger1 = numexplod(62) = 0
anim = 62
id = 62
postype = p2
pos = -20,-50
sprpriority = 3
;removetime = 14
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 600, 3]
type = varset
trigger1 = time = 0
var(1) = 0

[State 600, 3]
type = varset
trigger1 = movehit
var(1) = 1
ignorehitpause = 1


[State 1000, 7]
type = ChangeState
trigger1 = movecontact
value = 9088


[State 1000, 7]
type = ChangeState
trigger1 = pos y >= 0
value = 9087

; Blast  
[Statedef 9087]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 7036;1114
ctrl = 0
sprpriority = 3

[State 210, 5]
type = EnvShake
trigger1 = time = 0
time = 16
freq = 100
ampl = -4
phase = 0
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 1000,1

[State 600, 3]
type = posset
trigger1 = Time = 0
y = 0

[State 1000, 2]
type = Projectile
trigger1 = animelem = 2
projanim = 7036;1134
projhitanim = -1
projremanim = -1
projheightbound = -10,200
ProjID = 1134
offset = 0, 0
projremovetime = 18;????????
velocity = 0,0
attr = S, SP
damage    = floor(182*(root,fvar(2)*0.01)),22
getpower = 0,0
givepower = 0,0
animtype  = back
pausetime = 0,0
sparkno = s59
guard.sparkno = s53
sparkxy = 0,-50
hitsound = s5, 2+var(35)
guardsound = s6, 0
hitflag = MAF
guardflag = L
ground.type = high
ground.slidetime = 25
ground.hittime = 25
guard.hittime = 13
ground.velocity = -1.8,-5.6
air.velocity = -1.8,-5.6
guard.velocity = -5
fall = 1
fall.recover = 0
yaccel = .4
palfx.time = 25
palfx.mul = 255,165,0
palfx.sinadd = 160,128,160,3
palfx.add = 255,0,0
palfx.invertall = 1

[State 8000 , 0]
type = destroyself
trigger1 = animtime = 0

;-------------------------------
;blast
[Statedef 9088]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 7035
ctrl = 0
sprpriority = 3

[State 200, 1]
type = PlaySnd
trigger1 = WinKO = 1
trigger1 = var(1)
persistent = 0
ignorehitpause = 1
value = 9, 4

[State 8000 , 0]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------


;--------------------------------------------------------------
; ** TANK HIT PROTECT **
[Statedef 9089]
type = S
movetype = I
anim = 42432

[State 9080, 0]
type = SprPriority
trigger1 = Time = 0
value = -1

[State 9080, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1110, 1
 
[State 0, VelSet]
type = VelSet 
trigger1 = AnimelemTime(23) = 0
x = 2
y = -9
ignorehitpause = 1
;persistent = 
 
[State 1060, 30]
type = DestroySelf
trigger1 = AnimTime = 0  
ignorehitpause = 1
;;persistent = 

 

;
; ****************************
; **  ARINA related states  **
; ****************************
;

; **  ARINA Jumping **
[Statedef 9090]
type = S
movetype = I
anim = 9090

[State 9090, 0]
type = SprPriority
trigger1 = Time = 0
value = -1

[State 9090, 1]
type = Null ;PlaySnd
trigger1 = AnimElem = 4
value = 0, 63

[State 9090, 2]
type = VelSet
trigger1 = Time = 0
x = 3
y = 2

[State 9090, 3]
type = Gravity
trigger1 = Time >= 0

[State 9090, 4]
type = ChangeState
trigger1 = Pos Y >= 0
value = 9092

; ** Landing & win pose **
[Statedef 9092]
type = S
movetype = I
anim = 9091

[State 9092, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 9092, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9092, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 46

[State 9092, 3]
type = PlaySnd
trigger1 = AnimElem = 8
value = 0, 70

[State 9092, 4]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = 7
anim = 997

[State 9092, 7]
type = explod
trigger1 = AnimTime = 0
ownpal = 1
pos = 0, 0
postype = p1
;sprpriority = 0
anim = 9092
shadow = -1

[State 9092, 10]
type = DestroySelf
trigger1 = AnimTime = 0

;
; **************************
; **  RAI related states  **
; **************************
;

;--------------------------------------------------------------
; ** RAI HIT PROTECT **
[Statedef 9094]
type = S
movetype = I
anim = 9094

[State 9080, 0]
type = SprPriority
trigger1 = Time = 0
value = 20

[State 9080, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1110, 1
 
[State 0, ChangeState]
type = ChangeState
triggerall = time >= 10
trigger1 = HitShakeOver = 1
value = 9097
ctrl = 0
anim = 4798 
ignorehitpause = 1
;persistent = 

;------------------------------------------------
; ** RAI Jumping **
[Statedef 9095]
type = S
movetype = I
anim = 9095
sprpriority = 10

[State 0, Explod]
type = Explod
triggerall = parent,stateno = 3400
triggerall = numexplod(90755) = 0
trigger1 = time = 0
anim = 9075
ID = 90755  
pos = 77,2020
postype = p1  ;p2,front,back,left,right 
removetime = 166 
sprpriority = 14 

[State 9095, 0]
type = SprPriority
trigger1 = Time = 0
value = 10

[State 9095, 1]
type = Null ;PlaySnd
trigger1 = AnimElem = 4
value = 0, 63

[State 9095, 2]
type = VelSet
trigger1 = Time = 0
x =-3 
y = 2

[State 9095, 3]
type = Gravity
trigger1 = Time >= 0

[State 9095, 4]
type = Turn
trigger1 = parent,stateno != 3400 
trigger1 = Time = 0

[State 9095, 5]
type = ChangeState
triggerall = numexplod(90755) != 0
trigger1 = Pos Y >= 0
value = 9097
[State 9095, 5]
type = ChangeState
trigger1 = Pos Y >= 0 
value = 9096

;----------------------------------------------------
; ** Landing & win pose **
[Statedef 9096]
type = S
movetype = I
anim = 9096

[State 9096, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 9096, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 9096, 2]
type = PlaySnd
trigger1 = Time = 0
value = 0, 46

[State 9096, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 71

[State 9096, dust]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = 7
anim = 997

[State 9096, 7]
type = explod
trigger1 = AnimTime = 0
ownpal = 1
pos = 0, 0
postype = p1
;sprpriority = 0
anim = 9097 
shadow = -1

[State 9096, 10]
type = DestroySelf
trigger1 = AnimTime = 0

 
;----------------------------------------------------
; ** RAI fireball **
[Statedef 9097]
type = S
movetype = I
sprpriority = 10

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 4797
triggerall = Anim != 4798
trigger1 = time = 0
value = 4797  
ignorehitpause = 1 
 
[State 9096, 0]
type = VelSet
Triggerall = Anim = 4797
trigger1 = Time = 0
x = 0
y = 0

[State 9096, 1]
type = PosSet
Triggerall = Anim = 4797
trigger1 = Time = 0
y = 0

[State 9096, 2]
type = PlaySnd
Triggerall = Anim = 4797
trigger1 = Time = 0
value = 0, 46

[State 9077, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent = 

[State 907, HitOverride]
type = HitOverride
trigger1 = 1
time = 99
slot = 1
stateno = 9094
attr = SCA,NA,SA,HA,NP,SP,HP  
ignorehitpause = 1 
;persistent = 

[State 9096, 3]
type = PlaySnd
Triggerall = Anim = 4797
trigger1 = AnimElem = 1
value = 0, 71

[State 9096, dust]
type = explod
Triggerall = Anim = 4797
trigger1 = Time = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = 11
anim = 997
 
[State 0, Helper]
type = Helper
Triggerall = Anim = 4797
triggerall = NumHelper(9098) = 0 
trigger1 = animelem = 5
;helpertype = normal ;player
name = "PendejoEx"
ID = 9098
stateno = 9098
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0 
sprpriority = 12

[State 0, ChangeAnim]
type = ChangeAnim
Triggerall = Anim = 4797
trigger1 = AnimTime = 0
value = 4798 
ignorehitpause = 1 

[State 0, VelSet]
type = VelSet
Trigger1 = anim = 4798
Trigger1 = animelem = 5
x = -6.6 
ignorehitpause = 1 


[State 9096, 10]
type = DestroySelf
Triggerall = anim = 4798
trigger1 = Time >= 260
trigger2 = frontedgedist < -70
trigger3 = backedgedist < -70

;---------------------------------------------------------------------------
; Hadou-ken mdio - modo Ken - Fireball - baseado no cdigo do Limited Moon
[Statedef 9098]
type = S
physics = N
movetype = A
anim = 4796
poweradd = 0
velset = 3.45,0
ctrl = 0
sprpriority = 12

[State 1060, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

;[State 1060, SprPiority]
;type = SprPriority
;trigger1 = 1
;value = 5
;ignorehitpause = 1

[State 1060, NotHitBy]
type = NotHitBy
trigger1 = 1
time = 99
value = , NA, NT, ST, HT
ignorehitpause = 1
;
;[State 1060, HitBy]
;type = HitBy
;trigger1 = 1
;time = 99
;value = SCA, NP, SP, HP
;ignorehitpause = 1

[State 1060, HitOverride]
type = HitOverride
trigger1 = 1
time = 99
slot = 1
stateno = 9099
attr = SCA, SA, HA, NP, SP, HP
ignorehitpause = 1 

[State 1060, HitDef perto]
type = HitDef 
trigger1 = Time = 1
attr = S, HP
animtype  = Back
damage    = 50
guardflag = MA
priority = 9,Hit
pausetime = 10,10
sparkxy = -10, -50
sparkno = S7004
guard.sparkno = S7021
hitsound   = S0,50
guardsound = S0, 83
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
ground.velocity = -1.9, -4
air.animtype = Back
air.velocity = -2.2,-4
priority = 5
fall = 1
fall.yvelocity = -2.5
fall.recover = 0

 
 
[State -2, Combo ParentVarAdd]
type = VarAdd
trigger1 = (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 2;root,var(20):= 1 ;1
ignorehitpause = 1 
 
[State 1060, ChangeState]
type = ChangeState
trigger1 = FrontEdgeBodyDist < -40
trigger2 = Movecontact
trigger3 = MoveHit
trigger4 = Time = 78
value = 9099
 
 
;---------------------------------------------------------------------------
;Hadou-Ken - modo Ken - hit
[Statedef 9099]
type = S
physics = N
movetype = A
anim = 4795
poweradd = 0
velset = 0,0
ctrl = 0

;[State 1051, Trilha de poeira dissipando] 
;type = Explod
;trigger1 = Time = 0
;anim = 8051
;ID = 8051
;pos = -4,-13
;postype = p1
;sprpriority = 5
;bindtime = 1
;removetime = -2
;vel = 1,0
;shadow = -1
;ownpal = 1
;
;[State 1051, Remover trilha]
;type = RemoveExplod
;trigger1 = Time = 0
;ID = 8050

[State 1051, DestroySelf]
type = Destroyself
trigger1 = AnimTime = 0








;
; *********************************************
; **  RAMPOO (DANDY-J's cat) related states  **
; *********************************************
;

; ** Win pose (falling) **
[Statedef 9115]
type = S
movetype = I
anim = 9098

[State 9115, 0]
type = SprPriority
trigger1 = Time = 0
value = 1

[State 9115, 1]
type = Null ;PlaySnd
trigger1 = AnimElem = 4
value = 0, 63

[State 9115, 2]
type = VelSet
trigger1 = Time = 0
y = 2

[State 9115, 3]
type = Gravity
trigger1 = Time >= 0

[State 9115, 4]
type = ChangeState
trigger1 = Pos Y >= -78
value = 9116

; ** Win pose **
[Statedef 9116]
type = S
movetype = I
anim = 9099

[State 9116, 0]
type = VelSet
trigger1 = Time = 0
y = 0

[State 9116, 1]
type = PosSet
trigger1 = Time = 0
y = -78

[State 9116, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 46

[State 9116, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 75

[State 9116, 3]
type = explod
trigger1 = Time = 0
ownpal = 1
pos = 0, 0
postype = p1
bindtime = 1
sprpriority = 0
anim = 997

[State 9116, 7]
type = explod
trigger1 = AnimTime = 0
ownpal = 1
pos = 0, 0
postype = p1
sprpriority = 2
anim = 9093
shadow = -1

[State 9116, 10]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Miscellaneous states

; Odb718's FIST 
[Statedef 718]
type    = U
movetype= H ;Get hit
physics = N
anim = 5100 
velset = 2,0

[State 0, ChangeAnim]
type = ChangeAnim;2
trigger1 = time = 4
value = 5160 
ignorehitpause = 1 

[State 910, 1]
type = VelSet 
trigger1 = statetype = A
trigger1 = time = 4
x = -3
y =12 
[State 910, 1]
type = VelSet
trigger1 = statetype != A
trigger1 = time = 4
x = -3
y = -8 

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = time >= 5
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y <= - 15
statetype = A       ;S,A,C,L
movetype = H       ;I,A,H
physics = N        ;A,C,S,N
ignorehitpause = 1
;persistent = 

[State 920,5]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y > 10
value = 5100

;-------------------------------------------

; Hit by HEAVEN'S FIST (shaking)
[Statedef 910]
type    = A
movetype= H ;Get hit
physics = N

[State 910, 0]
type = PosAdd
trigger1 = Time = 0
y = -40

[State 910, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0 

[State 910, 2]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 911

[State 910, 3]
type = ChangeState
Trigger1 = HitShakeOver = 1
value = 920

; Hit by HEAVEN'S FIST (rapidly falling to the ground)
[Statedef 920]
type    = A
movetype= H
physics = N

[State 920, 1]
type = ChangeAnim2
trigger1 = Time >= 0
value = 910

[State 920, 2]
type = VelSet
trigger1 = Time = 0
y = 20

[State 920, 3]
type = EnvShake
Trigger1 = Vel Y > 0
trigger1 = Pos Y > 10
time = 15
ampl = -3
freq = 90
phase = 90

[State 920,5]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y > 10
value = 5100

; Hit by WAKUWAKU UPPER (shaking)
[Statedef 940]
type    = A
movetype= H ;Get hit
physics = N

[State 940, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
;z = 0

[State 940, 2]
type = PosAdd
trigger1 = Time = 0
y = -20

[State 940, 3]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 912

[State 940, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 941

; Hit by WAKUWAKU UPPER (flying)
[Statedef 941]
type    = A
movetype= H ;Get hit
physics = N

[State 941, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 913

[State 941, 2]
type = VelSet
trigger1 = Time = 0
x = -20
y = -5

[State 941, 5]
type = ChangeState
trigger1 = backedgedist <= 5
value = 942

; Hit by WAKUWAKU UPPER (hitting the wall)
[Statedef 942]
type    = A
movetype= H ;Get hit
physics = N

[State 942, 0]
type = PlaySnd
Trigger1 = Time = 0
value = F5,4

[State 942, 1]
type = PosAdd
trigger1 = Time = 0
y = -20

[State 942, 2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 912

[State 942, 3]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
;z = 0

[State 942, 4]
type = EnvShake
Trigger1 = Time = 0
time = 15
ampl = -3
freq = 90
phase = 90

[State 942,19]
type = Explod
trigger1 = Time = 0
anim = F72
pos = -10, -50

[State 942, 6]
type = ChangeState
trigger1 = Time = 10
value = 943

; Hit by WAKUWAKU UPPER (falling to the ground)
[Statedef 943]
type    = A
movetype= H ;Get hit
physics = N

[State 943, 0]
type = ChangeAnim2
Trigger1 = Time = 0
value = 910

[State 943, 1]
type = Gravity
trigger1 = Time >= 0

[State 943, 5]
type = SelfState
trigger1 = Pos Y > 10
trigger1 = Vel Y > 0
value = 5100
ctrl = 0

; Hit by ES move
[Statedef 950]
type    = A
movetype= H ;Get hit
physics = N

[State 950, 2]
type = VelSet
Trigger1 = Time = 0
X = 0
Y = 0

[State 950, 3]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 913

[State 950, 10]
type = SelfState
trigger1 = Time = 0
trigger1 = Pos Y = 0
value = 5000

[State 950, 11]
type = SelfState
trigger1 = Time = 0
trigger1 = Pos Y != 0
value = 5020

;---------------------------------------------------------------------------
; Invincible Falling Opponent - Falling
[Statedef 951]
type    = A
movetype= H
physics = N
ctrl = 0

[State 951, 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 951, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 5030

[State 951, 2]
type = VelSet
trigger1 = Time = 0
x = gethitvar(xvel) * facing
y = gethitvar(yvel) 
            
[State 951, 3]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)
            
[State 951, 4]
type = PlayerPush
trigger1 = 1
value = 0

[State 951, 11]
type = ChangeAnim
trigger1 = Anim = 5030
trigger1 = AnimTime = 0
trigger1 = AnimExist(5035)
value = 5035

[State 951, 12]
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
trigger2 = Anim = 5030
trigger2 = AnimTime = 0
trigger2 = !AnimExist(5035)
value = 5050

[State 951, 20]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 20
value = 5100
ctrl = 0

;---------------------------------------------------------------------------
; Invincible Falling Opponent - Shaking
[Statedef 952]
type    = S
movetype= H
physics = N
velset = 0,0

[State 952, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 952, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 5030

[State 952, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 952, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = A
physics = A         ;A,C,S,N 


[State 952, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 951

; Hit by BUNBUN TYPHOON
[Statedef 955]
type    = A
movetype= H ;Get hit
physics = N

[State 955, 0]
type = VelSet
trigger1 = Time = 0
X = 0
Y = 0

[State 955, 1]
type = EnvColor
trigger1 = LoseKO = 0
trigger1 = Time = 0
trigger2 = Time = 2
value = 255, 255, 255
time = 1

[State 955, 3]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 913

[State 955, 10]
type = SelfState
trigger1 = HitShakeOver = 1
trigger1 = Pos Y = 0
value = 5000

[State 955, 11]
type = SelfState
trigger1 = HitShakeOver = 1
trigger1 = Pos Y != 0
value = 5020

; Hit by last hit of ES GURUGURU PUNCH (shaking)
[Statedef 960]
type    = A
movetype= H ;Get hit
physics = N

[State 960, 3]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 914

[State 960, 10]
type = ChangeState
trigger1 = Time = 0;
value = 961


;get hit
[Statedef 961]
type    = A
movetype= H ;Get hit
physics = N

[State 961, 0]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
;z = 0

[State 961, 0]
type = ChangeAnim2
Trigger1 = Time >= 0
value = 914 ;913

[State 961, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 962

; Hit by last hit of ES GURUGURU PUNCH (flying)
[Statedef 962]
type    = A
movetype= H ;Get hit
physics = N

[State 962, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 913

[State 962, 2]
type = VelSet
trigger1 = Time = 0
x = -20
y = -2

[State 962, 10]
type = ChangeState
trigger1 = backedgedist <= 5
value = 942

; ** Shadow 1 **
[Statedef 6000]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
anim = 6000

[State 6000, 0]
type = VelSet
trigger1 = Time = 0
x = 0

[State 6000, 20]
type = ChangeState
trigger1 = Time = 6
value = 6010
ctrl = 1


;======================================================================
;BUNBUN TYPHOON 
[Statedef 6010]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
anim = 3602

[State 6010, 0]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 6010, 0]
type = AssertSpecial
trigger1 = Time %2 = 0
flag = Invisible

[State 6010, 0]
type = VarSet
trigger1 = 1
fv = 1
value = FVar(2)

[State 6010, 1]
type = VarSet
trigger1 = 1
fv = 2
value = FVar(3)

[State 6010, 2]
type = VarSet
trigger1 = 1
fv = 3
value = FVar(4)

[State 6010, 3]
type = VarSet
trigger1 = 1
fv = 4
value = ParentDist X - FVar(3) - FVar(2) - FVar(1)

[State 6010, 4]
type = PosAdd
trigger1 = 1
x = FVar(1)

[State 6010, 5]
type = VarSet
trigger1 = 1
fv = 11
value = FVar(12)

[State 6010, 6]
type = VarSet
trigger1 = 1
fv = 12
value = FVar(13)

[State 6010, 7]
type = VarSet
trigger1 = 1
fv = 13
value = FVar(14)

[State 6010, 8]
type = VarSet
trigger1 = 1
fv = 14
value = ParentDist Y - FVar(13) - FVar(12) - FVar(11)

[State 6010, 9]
type = PosAdd
trigger1 = 1
y = FVar(11)

[State 6010, 5]
type = VarSet
trigger1 = 1
v = 21
value = Var(22)

[State 6010, 6]
type = VarSet
trigger1 = 1
v = 22
value = Var(23)

[State 6010, 7]
type = VarSet
trigger1 = 1
v = 23
value = Var(24)

[State 6010, 8]
type = VarSet
trigger1 = 1
v = 24
value = -1

[State 6010, 8]
type = VarSet
trigger1 = parent, Anim = 3600
trigger1 = Anim != 6000
v = 24
value = 6000

[State 6010, 8]
type = VarSet
trigger1 = parent, Anim = 3602
trigger1 = parent, AnimElem = 1, = 0
v = 24
value = 6010

[State 6010, 9]
type = VarSet
trigger1 = parent, Anim = 3602
trigger1 = parent, AnimElem = 2, >= 0
v = 24
value = 6011 + (((parent, Time) - 60) % 12)

[State 6010, 9]
type = ChangeAnim
trigger1 = Var(21) > 0
value = Var(21)

[State 6010, 8]
type = PalFX
trigger1 = TimeMod = 14, 0
time = 1
color = 0
add = 0, 100, 100
mul = 0, 255, 255
ignorehitpause = 1

[State 6010, 9]
type = PalFX
trigger1 = TimeMod = 14, 2
time = 1
color = 0
add = 0, 0, 100
mul = 0, 0, 255
ignorehitpause = 1

[State 6010, 10]
type = PalFX
trigger1 = TimeMod = 14, 4
time = 1
color = 0
add = 100, 0, 100
mul = 255, 0, 255
ignorehitpause = 1

[State 6010, 11]
type = PalFX
trigger1 = TimeMod = 14, 6
time = 1
color = 0
add = 100, 0, 0
mul = 255, 0, 0
ignorehitpause = 1

[State 6010, 12]
type = PalFX
trigger1 = TimeMod = 14, 8
time = 1
color = 0
add = 100, 75, 0
mul = 255, 192, 0
ignorehitpause = 1

[State 6010, 13]
type = PalFX
trigger1 = TimeMod = 14, 10
time = 1
color = 0
add = 100, 50, 0
mul = 255, 255, 0
ignorehitpause = 1

[State 6010, 14]
type = PalFX
trigger1 = TimeMod = 14, 12
time = 1
color = 0
add = 0, 100, 0
mul = 0, 255, 0
ignorehitpause = 1

[State 6010, 15]
type = Helper
trigger1 = Time = 4
ID = 6020
stateno = 6020
supermovetime = 43
ownpal = 1

[State 6010, 20]
type = DestroySelf
trigger1 = parent, StateNo != 3600

; ** Shadow 1 **
[Statedef 6020]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
anim = 6000

[State 6020, 0]
type = AssertSpecial
trigger1 = Time %2 = 0
flag = Invisible

[State 6020, 0]
type = VarSet
trigger1 = 1
fv = 1
value = FVar(2)

[State 6020, 1]
type = VarSet
trigger1 = 1
fv = 2
value = FVar(3)

[State 6020, 2]
type = VarSet
trigger1 = 1
fv = 3
value = FVar(4)

[State 6020, 3]
type = VarSet
trigger1 = 1
fv = 4
value = ParentDist X - FVar(3) - FVar(2) - FVar(1)

[State 6020, 4]
type = PosAdd
trigger1 = 1
x = FVar(1)

[State 6020, 5]
type = VarSet
trigger1 = 1
fv = 11
value = FVar(12)

[State 6020, 6]
type = VarSet
trigger1 = 1
fv = 12
value = FVar(13)

[State 6020, 7]
type = VarSet
trigger1 = 1
fv = 13
value = FVar(14)

[State 6020, 8]
type = VarSet
trigger1 = 1
fv = 14
value = ParentDist Y - FVar(13) - FVar(12) - FVar(11)

[State 6020, 9]
type = PosAdd
trigger1 = 1
y = FVar(11)

[State 6020, 5]
type = VarSet
trigger1 = 1
v = 21
value = Var(22)

[State 6020, 6]
type = VarSet
trigger1 = 1
v = 22
value = Var(23)

[State 6020, 7]
type = VarSet
trigger1 = 1
v = 23
value = Var(24)

[State 6020, 8]
type = VarSet
trigger1 = 1
v = 24
value = -1

[State 6020, 8]
type = VarSet
trigger1 = parent, Anim = [6010, 6022]
v = 24
value = parent, Anim

[State 6020, 9]
type = ChangeAnim
trigger1 = Var(21) > 0
value = Var(21)

[State 6020, 9]
type = ChangeAnim
trigger1 = Time = 0
value = 6000

[State 6020, 8]
type = PalFX
trigger1 = (parent, Time) % 14 = 0
time = 1
color = 0
add = 0, 100, 100
mul = 0, 255, 255
ignorehitpause = 1

[State 6020, 9]
type = PalFX
trigger1 = (parent, Time) % 14 = 2
time = 1
color = 0
add = 0, 0, 100
mul = 0, 0, 255
ignorehitpause = 1

[State 6020, 10]
type = PalFX
trigger1 = (parent, Time) % 14 = 4
time = 1
color = 0
add = 100, 0, 100
mul = 255, 0, 255
ignorehitpause = 1

[State 6020, 11]
type = PalFX
trigger1 = (parent, Time) % 14 = 6
time = 1
color = 0
add = 100, 0, 0
mul = 255, 0, 0
ignorehitpause = 1

[State 6020, 12]
type = PalFX
trigger1 = (parent, Time) % 14 = 8
time = 1
color = 0
add = 100, 75, 0
mul = 255, 192, 0
ignorehitpause = 1

[State 6020, 13]
type = PalFX
trigger1 = (parent, Time) % 14 = 10
time = 1
color = 0
add = 100, 50, 0
mul = 255, 255, 0
ignorehitpause = 1

[State 6020, 14]
type = PalFX
trigger1 = (parent, Time) % 14 = 12
time = 1
color = 0
add = 0, 100, 0
mul = 0, 255, 0
ignorehitpause = 1

[State 6020, 20]
type = DestroySelf
trigger1 = root, NumHelper(6000) = 0 ;parent, StateNo != 6000
;trigger1 = parent, StateNo != 6010



;-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
[Statedef 3333]
type = U
movetype = I
physics = N
anim = 9999;9004
sprpriority = -9

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag =  noFG 
[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 33    ;fv = 10
value = parent, stateno
 
[State 3100, 4]
type = SuperPause
triggerall = parent, AnimElem = 1
trigger1 = parent, stateno = 3100
trigger2 = parent, stateno = 3600
trigger2 = parent, anim = 3600
anim = S980 
pos = 17, -47  
p2defmul = 1
time = 38
Sound = S4,7 
  
[State 3100, 4]
type = SuperPause
triggerall = parent, AnimElem = 1
trigger1 = parent, stateno = 3000
trigger2 = parent, stateno = 3200 
anim = S980 
pos = 17, -57  
p2defmul = 1
time = 38
Sound = S4,7  

[State 3100, 4]
type = SuperPause
triggerall = parent, AnimElem = 1
trigger1 = parent, stateno = 3400
anim = S980 
pos = 17, -67  
p2defmul = 1
time = 38
Sound = S4,7  

[State 3100, 4]
type = SuperPause
triggerall = parent, anim = 3702
triggerall = parent, AnimElem = 1
trigger1 = parent, stateno = 3700
anim = S3701 
pos = 0, 0  
p2defmul = 1
time = 100
Sound = S4,7  

[State 3333, Hyper Bg]
type = Explod
trigger1 = Time = 0
ID = 8500
anim = 8500
postype = left
pos = 0, 0
bindtime = -1
removetime = -2
supermovetime = -1
sprpriority = -9
ownpal = 1

[State 3333, Hyper Combo BG 2]
type = Explod 
trigger1 = time = 0 
anim = 8550
ID = 8550
postype = left
pos = -80, -40
bindtime = -1
removetime = -1
sprpriority = -9
removeongethit = 1
ownpal = 1

[State 3333, RemoveExplod]
type = RemoveExplod
trigger1 = parent, stateno = 3201
trigger1 = parent, anim = 3200
trigger1 = parent, animelem >= 42
trigger2 = parent, stateno != [3000,3900]
id = 8550

[State 3333, HyperComboFinish]
type = explod
triggerall = (RoundState = 3) && (NumExplod(9999) < 1) && (P2Life <= 0) && (Life > 0)
trigger1 = NumHelper(3510) != 0
trigger1 = Helper(3510), MoveHit
ID = 9999
anim = 9999
postype = left
pos = 0, 0
bindtime = -1
removetime = -2
supermovetime = -1
sprpriority = -8
ownpal = 1


[State 3333, Portrait]
type = Explod
triggerall = parent, anim = 3702 
trigger1 = parent, stateno = 3700
trigger1 = Time = 0
ID = 9001
anim = 9001 ;9001
postype = Back
pos = 0,0;-169,-12
ownpal = 1
sprpriority = -2
supermovetime = -1
removeongethit = 1
bindtime = -1
removetime = -2

[State 3333, Portrait]
type = Explod
triggerall = parent, anim != 3702 
trigger1 = parent, stateno != 3700
trigger1 = Time = 0
ID = 9001
anim = 9002 ;9001
postype = Back
pos = 0,0;-169,-12
ownpal = 1
sprpriority = -2
supermovetime = -1
removeongethit = 1
bindtime = -1
removetime = -2
[State 3333, fade1]
type = Explod
trigger1 = Time = 1
ID = 9003
anim = 9003 ;9001
postype = Back
pos = 0,0;-169,-12
ownpal = 1
sprpriority = -2
supermovetime = -1
removeongethit = 1
bindtime = -1
removetime = -2
[State 3333, fade2]
type = Explod
trigger1 = Time = 5
ID = 9003
anim = 9003 ;9001
postype = Back
pos = -7,4;-169,-12
ownpal = 1
sprpriority = -2
supermovetime = -1
removeongethit = 1
bindtime = -1
removetime = -2
[State 3333, fade3]
type = Explod
trigger1 = Time = 9
ID = 9003
anim = 9003 ;9001
postype = Back
pos = -14,8;-169,-12
ownpal = 1
sprpriority = -2
supermovetime = -1
removeongethit = 1
bindtime = -1
removetime = -2
[State 3333, fade4]
type = Explod
trigger1 = Time = 11
ID = 9003
anim = 9003 ;9001
postype = Back
pos = -21,12;-169,-12
ownpal = 1
sprpriority = -2
supermovetime = -1
removeongethit = 1
bindtime = -1
removetime = -2
[State 3333, fade5]
type = Explod
trigger1 = Time = 13
ID = 9003
anim = 9003 ;9001
postype = Back
pos = -28,16;-169,-12
ownpal = 1
sprpriority = -2
supermovetime = -1
removeongethit = 1
bindtime = -1
removetime = -2

[State 3333, DestroySelf]
type = DestroySelf
trigger1 = parent, stateno = 3201
trigger1 = parent, anim = 3200
trigger1 = parent, animelem >= 42
trigger2 = parent, stateno != [3000,3900]
;ignorehitpause =
;persistent =

;---------------------------------------------------------------------------
;

;---------------------------------------------------------------------------------
;Guard Push de p
[Statedef 4100]
type = S
movetype = I
physics =  N
poweradd = 0
velset = 10,0
ctrl = 0
anim = 4100
sprpriority = 2

[State 4100, Ya!]
type = PlaySnd
trigger1 = Time = 3
value = S0,25

[State 4100, Barulho]
type = PlaySnd
trigger1 = Time = 0
value = S4,8

[State 4100, VelMul]
type =  VelMul
trigger1 = 1
x = 0.75

[State 4100, VelSet]
type = VelSet
trigger1 = Time = 10
x = 0

[State 4100, Width]
type = Width
trigger1 = 1
value = 10,0

[State 4100, NotHitBy]
type = NotHitBY
trigger1 = 1
value = SCA


[State 4100, Push Spark]
type = Explod
trigger1 = Time = 0
anim = 8015
ID = 8015
scale = 0.5,0.5
postype = p1
pos = 58,-65
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 0


[State 4100, Helper]
type = Helper
trigger1 = Time = 0
;helpertype = Normal
name = "Guard Push"
postype = P1
pos = -50,0
stateno = 4105
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 4100, Fim]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = animelem >= 3 
trigger2 = !inguarddist
value = 0
ctrl = 1

;---------------------------------------------------------------------------------
;Guard Push agachado
[Statedef 4101]
type = C
movetype = I
physics =  N
poweradd = 0
velset = 10,0
ctrl = 0
anim = 4101
sprpriority = 2

[State 4101, Ya!]
type = PlaySnd
trigger1 = Time = 3
value = S0,10

[State 4101, Barulho]
type = PlaySnd
trigger1 = Time = 0
value = S4,8

[State 4101, VelMul]
type =  VelMul
trigger1 = 1
x = 0.75

[State 4101, VelSet]
type = VelSet
trigger1 = Time = 10
x = 0

[State 4101, Width]
type = Width
trigger1 = 1
value = 10,0

[State 4101, NotHitBy]
type = NotHitBY
trigger1 = 1
value = SCA

[State 4101, Push Spark]
type = Explod
trigger1 = Time = 0
anim = 8015
ID = 8015
scale = 0.5,0.5
postype = p1
pos = 53,-46
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 0

[State 4101, Helper]
type = Helper
trigger1 = Time = 0
;helpertype = Normal
name = "Guard Push"
postype = P1
pos = -50,0
stateno = 4105
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 4101, Fim]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------------
;Guard Push areo
[Statedef 4102]
type = A
movetype = I
physics =  N
poweradd = 0
velset = 10,0
ctrl = 0
anim = 4102
sprpriority = 2

[State 4102, Ya!]
type = PlaySnd
trigger1 = Time = 3
value = S0,25

[State 4102, Barulho]
type = PlaySnd
trigger1 = Time = 0
value = S4,8

[State 4102, VelMul]
type =  VelMul
trigger1 = 1
x = 0.75

[State 4102, VelSet]
type = VelSet
trigger1 = Time = 10
x = 0

[State 4102, Width]
type = Width
trigger1 = 1
value = 10,0

[State 4102, NotHitBy]
type = NotHitBY
trigger1 = 1
value = SCA

[State 4102, Push Spark]
type = Explod
trigger1 = Time = 0
anim = 8015
ID = 8015
scale = 0.5,0.5
postype = p1
pos = 48,-85
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 0

[State 4102, Helper]
type = Helper
trigger1 = Time = 0
;helpertype = Normal
name = "Guard Push"
postype = P1
pos = -50,0
stateno = 4105
ownpal = 1
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 4102, Fim]
type = ChangeState
trigger1 = AnimTime = 0
value = 155;7999
ctrl = 1

;---------------------------------------------------------------------------------
;Guard Push - helper
[Statedef 4105]
type = S
movetype = I
physics =  N
poweradd = 0
ctrl = 0
anim = 4105
sprpriority = -4

[State 4105, PlayerPush]
type = PlayerPush
trigger1 = Time >= 0
value = 1

[State 4105, VelSet]
type = VelSet
trigger1 = Time = [0,10]
x = 30

[State 4105, VelSet]
type = VelSet
trigger1 = Time = [11,13]
x = 20

[State 4105, VelSet]
type = VelSet
trigger1 = Time >= 14
x = 10

[State 4105, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 4105, DestroySelf]
type = DestroySelf
trigger1 = Time >= 18



;---------------------------------------------------------------------------






;---------------------------------------------------------------------------
;Super Pulo - incio
[StateDef 7200]
type = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 7200, VarSet]
type = VarSet
trigger1 = Time = 0
v = 11
value = 0

[State 7200, VarSet]
type = VarSet
trigger1 = command = "holdfwd"
v = 11
value = 1

[State 7200, VarSet]
type = VarSet
trigger1 = command = "holdback"
v = 11
value = -1

[State 7200, Sombra]
type = AfterImage
trigger1 = Time = 0
time = 39
length = 12
framegap = 5
palcolor = 0
palbright = -250,-20,50
trans = add1

[State 7200, Barulho]
type = PlaySnd
trigger1 = Time = 0
value = S4,5

[State 7200, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 7201
ctrl = 1

;---------------------------------------------------------------------------
;Super Pulo
[StateDef 7201]
type = A
physics = A
anim = 41
ctrl = 1
velset = 0, -12

[State 7201, Turn]
type = Turn
trigger1 = (Var(11) = 1) && (P2Dist X < -5)

[State 7201, VelAdd]
type = VelAdd
triggerall = Vel X >= -2
trigger1 = command = "holdback"
trigger1 = Anim != 43
x = -0.1

[State 7201, VelAdd]
type = VelAdd
triggerall = Vel X <= 2.5
trigger1 = command = "holdfwd"
trigger1 = Anim != 42
x = 0.25

[State 7201, VelSet]
type = VelSet
trigger1 = Anim = 42
trigger1 = Time = [0,5]
x = 4

[State 7201, VelSet]
type = VelSet
trigger1 = Anim = 43
trigger1 = Time = [0,5]
x = -3.5

[State 7201, ChangeAnim]
type = ChangeAnim
trigger1 = Var(11) = 0
trigger1 = Time = [0,4]
value = 41

[State 7201, ChangeAnim]
type = ChangeAnim
trigger1 = Var(11) = 1
trigger1 = Time = [0,4]
value = 42

[State 7201, ChangeAnim]
type = ChangeAnim
trigger1 = Var(11) = -1
trigger1 = Time = [0,4]
value = 43

[State 7201, ChangeState]
type = ChangeState
trigger1 = Time = 27
value = 7999
ctrl = 1

;---------------------------------------------------------------------------
; Aterrisagem do Super Pulo
[Statedef 7999]
type    = A
movetype= I
physics = A
anim =990; ifelse(Var(11) = -1,7999,7998)
ctrl = 1
sprpriority = 1
 
[State 7999, Turn]
type = Turn
trigger1 = (Pos Y >= 0) && (Vel Y > 0) && (P2Dist X < -5) 

[State 7999, VelSet]
type = VelSet
trigger1 = FrontEdgeBodyDist <= 0
x = 0

[State 7999, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 52
 
;----------------------------------------------------------------------------------------------
;ES Move KO flash
[Statedef 8000]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 199

[State 8000, 0]
type = RemoveExplod
trigger1 = parent, NumHelper(8000) > 1
ID = 8001

[State 8000, 1]
type = DestroySelf
trigger1 = parent, NumHelper(8000) > 1

[State 8000, 5]
type = Explod
trigger1 = Time = 0
anim = 4540
pos = 160, 120
postype = left
sprpriority = -5
pausemovetime = 200
bindtime = 200
ID = 8001
ownpal = 1
ignorehitpause = 1
;removetime = 3

[State 8000, 6]
type = BGPalFx
trigger1 = Time = 42
add = 256, 256, 256
time = 100

[State 8000, 7]
type = BGPalFx
trigger1 = Time = [10, 41]
add = 8*(Time-10), 8*(Time-10), 8*(Time-10)
time = 2

[State 8000, 8]
type = BGPalFx
trigger1 = Time = [100, 115]
add = 16*(15-(Time-100)), 16*(15-(Time-100)), 16*(15-(Time-100))
time = 2

[State 8000, 10]
type = DestroySelf
trigger1 = Time = 120

;DOKIDOKI KO flash
[Statedef 8100]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 4545

[State 8100, 0]
type = AssertSpecial
trigger1 = 1
flag = Invisible

[State 8100, 1]
type = ChangeAnim
trigger1 = parent, WinKO = 1
trigger1 = parent, MoveHit = 1
trigger1 = parent, Var(13) = 3600
value = 4545

[State 8100, 4]
type = RemoveExplod
trigger1 = parent, WinKO = 1
trigger1 = parent, MoveHit = 1
trigger1 = parent, Var(13) = 3600
ID = 8101

[State 8100, 5]
type = Explod
trigger1 = Time = 0
trigger2 = parent, WinKO = 1
trigger2 = parent, MoveHit = 1
trigger2 = parent, Var(13) = 3600
anim = 4545
pos = 160, 120
postype = left
sprpriority = -5
pausemovetime = 200
bindtime = 200
ID = 8101
ownpal = 0
ignorehitpause = 1

[State 8100, 6]
type = BGPalFx
trigger1 = AnimElem = 1, 42
trigger1 = Anim = 4545
add = 256, 256, 256
time = 80

[State 8000, 7]
type = BGPalFx
trigger1 = AnimElem = 1;,; = [10, 41]
trigger1 = Anim = 4545
add = 8*(AnimElemTime(1)-10), 8*(AnimElemTime(1)-10), 8*(AnimElemTime(1)-10)
time = 2

[State 8100, 7]
type = BGPalFx
trigger1 = AnimElem = 1;,; = [100, 115]
trigger1 = Anim = 4545
add = 16*(15-(AnimElemTime(1)-100)), 16*(15-(AnimElemTime(1)-100)), 16*(15-(AnimElemTime(1)-100))
time = 2

[State 8100, 8]
type = PalFx
trigger1 = AnimElem = 1, 0
trigger1 = Anim = 4545
color = 0
add = 32, 256, -64
time = 3

[State 8100, 9]
type = PalFx
trigger1 = AnimElem = 2, = 4
trigger1 = Anim = 4545
color = 0
add = 128, -128, 0
time = 2

[State 8100, 9]
type = PalFx
trigger1 = AnimElem = 2, = 6
trigger1 = Anim = 4545
color = 0
add = 92, -256, 156
time = 2

[State 8100, 10]
type = PalFx
trigger1 = AnimElem = 2, = 8
trigger1 = Anim = 4545
color = 0
add = -32, -32, 128
time = 2

[State 8100, 11]
type = PalFx
trigger1 = AnimElem = 2, = 10
trigger1 = Anim = 4545
color = 0
add = 0, 0, 192
time = 2

[State 8100, 11]
type = Null ;PalFx
trigger1 = AnimElem = 2, = 16
trigger1 = Anim = 4545
color = 0
add = 92, -256, 156
time = 2

[State 8100, 11]
type = Null ;PalFx
trigger1 = AnimElem = 2, = 18
trigger1 = Anim = 4545
color = 0
add = 92, -256, 156
time = 2

[State 8100, 12]
type = PalFx
trigger1 = AnimElem = 2, = 20
trigger1 = Anim = 4545
color = 0
add = 0, 0, 256
time = 4

[State 8100, 20]
type = DestroySelf
trigger1 = AnimElem = 1, 130

;HARAHARA KO flash
[Statedef 8200]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 199

[State 8200, 0]
type = RemoveExplod
trigger1 = parent, NumHelper(8200) > 1
ID = 8001

[State 8200, 1]
type = DestroySelf
trigger1 = parent, NumHelper(8200) > 1

[State 8200, 2]
type = explod
trigger1 = Time = 0
anim = 4550
pos = 160, 120
postype = left
sprpriority = -5
bindtime = 200
pausemovetime = 200
ID = 8002
ownpal = 1
ignorehitpause = 1

[State 8200, 6]
type = BGPalFx
trigger1 = Time = 26
add = 256, 256, 256
time = 120

[State 8200, 7]
type = BGPalFx
trigger1 = Time = [10, 25]
add = 16*(Time-10), 16*(Time-10), 16*(Time-10)
time = 2

[State 8200, 7]
type = BGPalFx
trigger1 = Time = [140, 170]
add = 8*(31-(Time-140)), 8*(31-(Time-140)), 8*(31-(Time-140))
time = 2

[State 8200, 10]
type = DestroySelf
trigger1 = Time = 180







;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 0] ;Clear all int variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0

[State 5900, 1] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0

[State 5900, 2]
type = VarSet
trigger1 = Var(30) = 0
v = 30
value = -1

[State 5900, 3] ;Change palette
type = RemapPal
trigger1 = 1
source = 1,1
dest = 1,palno

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190

 


;----------------------------------------------------------------------
;DETECT AI
;Taken from Zelgadis296's (http://web.tiscali.it/zelgadis296) ZABEL
;Based on YongMing's System (THANKS TO BOTH)
;----------------------------------------------------------------------
; AI Trigger
[Statedef 9998]
anim = 9999
ctrl = 0

[State 9998, 0]
type = Turn
trigger1 = facing != parent, facing

;local variable
[State 9998, 1]
type = VarSet
trigger1 = 1
v = 30
value = parent, Var(30)

[State 9998, 2]
type = ParentVarSet
triggerall = parent, RoundState = 2
trigger1 = parent, command = "x"
trigger2 = parent, command = "y"
trigger3 = parent, command = "z"
trigger4 = parent, command = "a"
trigger5 = parent, command = "holdfwd"
trigger6 = parent, command = "holdback"
trigger7 = parent, command = "holdup"
trigger8 = parent, command = "holddown"
v = 30
value = 1 ;CPU is controlling

[State 9998, 3]
type = ParentVarSet
triggerall = parent, RoundState = 2
trigger1 = (command = "x" && parent, command = "x")
trigger2 = (command = "y" && parent, command = "y")
trigger3 = (command = "z" && parent, command = "z")
trigger4 = (command = "a" && parent, command = "a")
trigger5 = (command = "holdfwd" && parent, command = "holdfwd")
trigger6 = (command = "holdback" && parent, command = "holdback")
trigger7 = (command = "holdup" && parent, command = "holdup")
trigger8 = (command = "holddown" && parent, command = "holddown")
v = 30
value = 0 ;player is controlling

;Counter (for bug correction)
[State 9998, 4]
type = VarSet
trigger1 = Var(30) != parent, Var(30)
v = 59
value = 0

[State 9998, 5]
type = VarAdd
trigger1 = Var(30) = parent, Var(30)
v = 59
value = 1

[State 9998, 6]
type = Destroyself
trigger1 = parent, Var(30) = 0  ;Definitively controlled by player
trigger1 = Var(59) >= 23         
trigger2 = parent, Var(30) = 1           ;Definitively controlled by CPU
trigger2 = Var(59) >= 23         
trigger3 = RoundState = 3
;----------------------------------------------------------------------






;---------------------------------------------------------------------------
; Override common states (use same number to override) :

; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(44) = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 6]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = Var(44) > 0
x = const(velocity.jump.fwd.x)
y = const(velocity.jump.y)

[State 40, 7]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = A
movetype= H
physics = N ;A
anim = 820

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 6]
type = Explod
trigger1 = Time = 1
anim = 825
postype = p1
pos = 0, 2
sprpriority = 7

[State 5201, 7]
type = PlaySnd
trigger1 = Time = 1
value = 0, 84

[State 5201, 8]
type = VelSet
trigger1 = AnimElem = 4, = 0
x = -2.75
y = -6

[State 5201, 9]
type = VelAdd
trigger1 = AnimElem = 4, >= 0
x = 0
y = 0.55

[State 5201, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 52

;---------------------------------------------------------------------------
; States that are always checked
;---------------------------------------------------------------------------

[Statedef -2]

; "Jump!"
[State -2, 0]
type = PlaySnd
trigger1 = Time = 1
trigger1 = StateNo = 50
value = 0,1

; "Ahh!"
[State -2, 1]
type = PlaySnd
triggerall = Time = 0
trigger1 = stateno = 5000
trigger1 = Random <= 300
trigger2 = stateno = 5070
trigger3 = stateno = 5020
trigger3 = Random <= 300
value = 0,43

[State -2, 2]
type = PalFX
trigger1 = Var(7) >= 1
trigger1 = Var(8) = 0
time = 2
add = 128, 128, 128
ignorehitpause = 1

[State -2, 3]
type = PalFX
trigger1 = Var(7) >= 1
trigger1 = Var(8) = 2
time = 2
add = 128, 128, 0
ignorehitpause = 1

[State -2, 4]
type = PalFX
trigger1 = Var(7) >= 1
trigger1 = Var(8) = 4
time = 2
add = 64, 64, 0
ignorehitpause = 1

[State -2, 5]
type = PalFX
trigger1 = Var(7) >= 1
trigger1 = Var(8) = 6
time = 2
add = 64, 0, 0
ignorehitpause = 1

[State -2, 6]
type = PalFX
trigger1 = Var(7) >= 1
trigger1 = Var(8) = 8
time = 2
add = 64, 64, 0
ignorehitpause = 1

[State -2, 7]
type = PalFX
trigger1 = Var(7) >= 1
trigger1 = Var(8) = 10
time = 2
add = 128, 128, 0
ignorehitpause = 1

[State -2, 8]
type = AfterImageTime
trigger1 = Var(7) = 1
ignorehitpause = 1
time = 0

[State -2, 8]
type = DefenceMulSet
trigger1 = Var(7) = 1
ignorehitpause = 1
value = 1

[State -2, Ultra Armor]
type = DefenceMulSet
trigger1 = Var(7) > 1
ignorehitpause = 1
value = 0.85
 
[State -2, 10]
type = VarSet
trigger1 = Var(8) = 0
v = 8
value = 12
ignorehitpause = 1

[State -2, 11]
type = VarAdd
trigger1 = Var(8) >= 0
v = 8
value = -1
ignorehitpause = 1

[State -2, 12]
type = VarAdd
trigger1 = Var(7) > 0
v = 7
value = -1
ignorehitpause = 1

; Walking sounds
[State -2, 30]
type = PlaySnd
trigger1 = StateNo = 20
trigger1 = Vel X < 0
trigger1 = AnimElem = 12
value = 0, 12

[State -2, 31]
type = PlaySnd
triggerall = StateNo = 20
triggerall = Vel X > 0
trigger1 = AnimElem = 4
trigger2 = AnimElem = 10
value = 0, 12

[State -2, 40]
type = EnvShake
trigger1 = stateno = 5071
trigger1 = Vel Y > 0
trigger1 = Pos Y > 10
trigger2 = stateno = 5100
trigger2 = Time = 1
time = 15
ampl = -3
freq = 90
phase = 90

; Mugi crying sound
[State -2, 50]
type = PlaySnd
trigger1 = Anim = 5150
trigger1 = AnimElem = 7
value = 0, 42
 
[State -2, 71]
type = VarSet
trigger1 = 1
v = 15
value = StateNo
ignorehitpause = 1

[State -2, 72]
type = AssertSpecial
trigger1 = MoveHit = 1
trigger1 = Var(16) = 0
trigger2 = StateNo = 1307
trigger2 = Time = 20
trigger3 = StateNo = 255
trigger3 = Time = 20
trigger4 = StateNo = 275
trigger4 = Time = 20
flag = nokoslow
ignorehitpause = 1

[State -2, 73]
type = VarAdd
trigger1 = MoveHit = 1
v = 16
value = 1
ignorehitpause = 1

[State -2, 74]
type = VarSet
trigger1 = Time = 1
;trigger2 = Var(16) >= 3
v = 16
value = 0
ignorehitpause = 1

[State -2, 76]
type = EnvColor
Triggerall = WinKO = 1
triggerall = Var(9) = 1
Trigger1 = movehit = 1
trigger1 = Var(13) = [200, 999]
trigger2 = Var(13) = 1307
trigger2 = Time = 22
trigger3 = StateNo = 255
trigger3 = Time = 22
trigger4 = StateNo = 280
trigger4 = Time = 2
trigger5 = movehit = 1
trigger5 = Var(13) = 3500
value = 255, 255, 255
time = 1
ignorehitpause = 1

[State -2, 30]
type = VarAdd
triggerall = var(9) != 1
trigger1 = WinKO
v = 9
value = 1
ignorehitpause = 1

[State -2, 31]
type = VarSet
triggerall = var(9) != 0
trigger1 = !WinKO
v = 9
value = 0
ignorehitpause = 1

[State -2, 32]
type = VarSet
trigger1 = WinKO
trigger1 = Var(13) = 0
v = 13
value = StateNo
ignorehitpause = 1

[State -2, 2]
type = Null ;PalFX
trigger1 = Var(30) = 1
trigger = Time % 2 = 0
time = 1
add = 64, 64, 64 ;128, 128, 128 ;White
ignorehitpause = 1
;=======================================================================================================

;-----------------------------------------------------------------------------
;Soldats' Combo Counter

[State -2, Combo VarAdd]
type = VarAdd
trigger1 = (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
trigger2 = ProjHitTime(0) = 1
v = 20
value = 1
ignorehitpause = 1

[State -2, VarSet]
type = VarSet
trigger1 = P2Movetype != H
v = 20
value = 0

;[State -2, Combo ParentVarAdd]
;type = ParentVarAdd
;trigger1 = (hitpausetime = 1) && (P2Movetype = H) && (MoveHit)
;trigger2 = ProjHitTime(0) = 1
;v = 20
;value = 1
;ignorehitpause = 1 

;-----------------------------------------------------------------------------
;Combo tira menos sangue

[State -2, AttackMulSet 1]
type = AttackMulSet
triggerall = var(7) < 1
triggerall = stateno > 3000
trigger1 = Var(20) >= 0
trigger2 = hitdefattr = SCA, HA, HP
value = 1

[State -2, AttackMulSet 1]
type = AttackMulSet
triggerall = var(7) < 1
triggerall = stateno < 3000
trigger1 = Var(20) <= 0
value = 1

[State -2, AttackMulSet 2]
type = AttackMulSet
triggerall = var(7) < 1
triggerall = stateno < 3000
trigger1 = Var(20) = [1,4]  
value = 0.5

[State -2, AttackMulSet 3]
type = AttackMulSet
triggerall = var(7) < 1
triggerall = stateno < 3000
trigger1 = Var(20) = [5,8]  
value = 0.3

[State -2, AttackMulSet 4]
type = AttackMulSet
triggerall = var(7) < 1
triggerall = stateno < 3000
trigger1 = Var(20) > 8
value = 0.2

;---------------------------------------------------------------------------------



[State -2, Debug]
type = DisplayToClipboard
trigger1 = 1 
text = "P2BodyDist X: %f    P2Dist X: %f    P2BodyDist Y: %f    Var(20): %d"
params = P2BodyDist X, P2Dist X, P2BodyDist Y, Var(20)
ignorehitpause = 1

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3, 0 ]

[State -3, 0]
type = Explod
trigger1 = StateNo = 50
trigger1 = Time = 1
ID = 100
ownpal = 1
pos = 0, 26
postype = p1
bindtime = 1
anim = 930 + Anim
sprpriority = 7

;----------------------------------------------------------------------
;DETECT AI
;Taken from Zelgadis296's (http://web.tiscali.it/zelgadis296) ZABEL
;Based on YongMing's System (THANKS TO BOTH)
;----------------------------------------------------------------------
[State -3, AI_Check]
type = Helper
trigger1 = NumHelper(9998) = 0
trigger1 = Var(30) = -1
trigger1 = RoundState = 2
name = "AI Trigger"
id = 9998
pos = 1000, 1000
stateno = 9998
;helpertype = normal
keyctrl = 1

[State -3, Stop_AI]
type = VarSet
trigger1 = Var(30) = 1
trigger1 = RoundState = 3
var(30) = -1
