;-| Button Remapping |-----------------------------------------------------
[Remap]
x = x
y = y
z = z
a = a
b = b
c = c
s = s
;-| Default Values |-------------------------------------------------------
[Defaults]
command.time = 15
command.buffer.time = 1

;-| Super Motions |--------------------------------------------------------
[Command]
name = "Banshee Cannon"
command = ~D, DF, F, D, DF, x
time = 32

[Command]
name = "Banshee Cannon"
command = ~D, DF, F, D, DF, ~x
time = 32

[Command]
name = "Banshee Cannon"
command = ~D, DF, F, D, DF, y
time = 32

[Command]
name = "Banshee Cannon"
command = ~D, DF, F, D, DF, ~y
time = 32

[Command]
name = "Banshee Cannon"
command = ~D, DF, F, D, DF, z
time = 32

[Command]
name = "Banshee Cannon"
command = ~D, DF, F, D, DF, ~z
time = 32


[Command]
name = "Hair Smash"
command = ~D, DB, B, D, DB, b+c
time = 32

[Command]
name = "Hair Smash"
command = ~D, DB, B, D, DB, a+c
time = 32

[Command]
name = "Hair Smash"
command = ~D, DB, B, D, DB, a+b
time = 32

[Command]
name = "Brutality"
command = ~D, DF, F, D, DF, a+b
time = 32


[Command]
name = "Brutality"
command = ~D, DF, F, D, DF, b+c
time = 32

[Command]
name = "Brutality"
command = ~D, DF, F, D, DF, a+c
time = 32

[Command]
name = "Blood Grenade"
command = ~D, D, B, F, a+x
time = 32

[Command]
name = "Blood Grenade"
command = ~D, D, B, F, b+y
time = 32

[Command]
name = "Blood Grenade"
command = ~D, D, B, F, c+z
time = 32

;-| Special Motions |------------------------------------------------------
[Command]
name = "Banshee Blast L"
command = ~D, DF, F, x
time = 15

[Command]
name = "Banshee Blast L"
command = ~D, DF, F, ~x
time = 15

[Command]
name = "Banshee Blast M"
command = ~D, DF, F, y
time = 15

[Command]
name = "Banshee Blast M"
command = ~D, DF, F, ~y
time = 15

[Command]
name = "Banshee Blast S"
command = ~D, DF, F, z
time = 15

[Command]
name = "Banshee Blast S"
command = ~D, DF, F, ~z
time = 15

[Command]
name = "Low Banshee Blast"
command = ~D, DB, B, x
time = 15

[Command]
name = "Low Banshee Blast"
command = ~D, DB, B, ~x
time = 15

[Command]
name = "Low Banshee Blast"
command = ~D, DB, B, y
time = 15

[Command]
name = "Low Banshee Blast"
command = ~D, DB, B, ~y
time = 15

[Command]
name = "Low Banshee Blast"
command = ~D, DB, B, z
time = 15

[Command]
name = "Low Banshee Blast"
command = ~D, DB, B, ~z
time = 15

[Command]
name = "Flight"
command = ~B, F, a
time = 16

[Command]
name = "Flight"
command = ~B, F, b
time = 16

[Command]
name = "Flight"
command = ~B, F, c
time = 16

[Command]
name = "Scream L"
command = ~D, DF, F, a
time = 15

[Command]
name = "Scream L"
command = ~D, DF, F, ~a
time = 15

[Command]
name = "Scream M"
command = ~D, DF, F, b
time = 15

[Command]
name = "Scream M"
command = ~D, DF, F, ~b
time = 15

[Command]
name = "Scream S"
command = ~D, DF, F, c
time = 15

[Command]
name = "Scream S"
command = ~D, DF, F, ~c
time = 15

[Command]
name = "EX Scream"
command = ~D, DF, F, a+b
time = 15

[Command]
name = "EX Scream"
command = ~D, DF, F, b+c
time = 15

[Command]
name = "EX Scream"
command = ~D, DF, F, a+c
time = 15

[Command]
name = "EX Banshee Blast"
command = ~D, DF, F, x+y
time = 15

[Command]
name = "EX Banshee Blast"
command = ~D, DF, F, y+z
time = 15

[Command]
name = "EX Banshee Blast"
command = ~D, DF, F, x+z
time = 15

[Command]
name = "EX Air Banshee Blast"
command = ~D, DF, F, x+y
time = 15

[Command]
name = "EX Air Banshee Blast"
command = ~D, DF, F, y+z
time = 15

[Command]
name = "EX Air Banshee Blast"
command = ~D, DF, F, x+z
time = 15

[Command]
name = "EX Low Banshee Blast"
command = ~D, DB, B, x+y
time = 15

[Command]
name = "EX Low Banshee Blast"
command = ~D, DB, B, y+z
time = 15

[Command]
name = "EX Low Banshee Blast"
command = ~D, DB, B, x+z
time = 15

[Command]
name = "Air Throw"
command = ~D, DB, B, a
time = 15

[Command]
name = "Air Throw"
command = ~D, DB, B, ~a
time = 15

[Command]
name = "Air Throw"
command = ~D, DB, B, b
time = 15

[Command]
name = "Air Throw"
command = ~D, DB, B, b
time = 15

[Command]
name = "Air Throw"
command = ~D, DB, B, c
time = 15

[Command]
name = "Air Throw"
command = ~D, DB, B, ~c
time = 15

[Command]
name = "Air Tackle"
command = ~D, DF, F, a
time = 15

[Command]
name = "Air Tackle"
command = ~D, DF, F, ~a
time = 15

[Command]
name = "Air Tackle"
command = ~D, DF, F, b
time = 15

[Command]
name = "Air Tackle"
command = ~D, DF, F, b
time = 15

[Command]
name = "Air Tackle"
command = ~D, DF, F, c
time = 15

[Command]
name = "Air Tackle"
command = ~D, DF, F, ~c
time = 15


[Command]
name = "412p" ;Zero Counter
command = ~B, DB, D, x
time = 16

[Command]
name = "412p" ;Zero Counter
command = ~B, DB, D, y
time = 16

[Command]
name = "412p" ;Zero Counter
command = ~B, DB, D, z
time = 16

[Command]
name = "412p" ;Zero Counter
command = ~B, DB, D, ~x
time = 16

[Command]
name = "412p" ;Zero Counter
command = ~B, DB, D, ~y
time = 16

[Command]
name = "412p" ;Zero Counter
command = ~B, DB, D, ~z
time = 16

[Command]
name = "412k" ;Zero Counter
command = ~B, DB, D, a
time = 16

[Command]
name = "412k" ;Zero Counter
command = ~B, DB, D, b
time = 16

[Command]
name=  "412k" ;Zero Counter
command = ~B, DB, D, c
time = 16

[Command]
name = "412k" ;Zero Counter
command = ~B, DB, D, ~a
time = 16

[Command]
name = "412k" ;Zero Counter
command = ~B, DB, D, ~b
time = 16

[Command]
name = "412k" ;Zero Counter
command = ~B, DB, D, ~c
time = 16

;-| Double Tap |-----------------------------------------------------------
[Command]
name = "FF"     ;Required (do not remove)
command = F, F
time = 10

[Command]
name = "BB"     ;Required (do not remove)
command = B, B
time = 10

;-| 2/3 Button Combination |-----------------------------------------------
[Command]
name = "recovery";Required (do not remove)
command = x+y
time = 1

[Command]
name = "recovery"
command = y+z
time = 1

[Command]
name = "recovery"
command = x+z
time = 1

[Command]
name = "recovery"
command = a+x
time = 1

[Command]
name = "pp"
command = x+y
time = 1

[Command]
name = "pp"
command = x+z
time = 1

[Command]
name = "pp"
command = y+z
time = 1

[Command]
name = "kk"
command = a+b
time = 1

[Command]
name = "kk"
command = a+c
time = 1

[Command]
name = "kk"
command = b+c
time = 1

[Command]
name = "a+x"
command = a+x
time=1

[Command]
name = "b+y"
command = b+y
time = 1

[Command]
name = "c+z"
command = c+z
time = 1

;-| Dir + Button |---------------------------------------------------------
[Command]
name = "back_a"
command = /$B,a
time = 1

[Command]
name = "back_x"
command = /$B,x
time = 1

[Command]
name = "back_y"
command = /$B,y
time = 1

[Command]
name = "back_z"
command = /$B,z
time = 1

[Command]
name = "down_x"
command = /$D,x
time = 1

[Command]
name = "down_y"
command = /$D,y
time = 1

[Command]
name = "down_z"
command = /$D,z
time = 1

[Command]
name = "fwd_x"
command = /$F,x
time = 1

[Command]
name = "fwd_y"
command = /$F,y
time = 1

[Command]
name = "fwd_z"
command = /$F,z
time = 1

[Command]
name = "up_x"
command = /$U,x
time = 1

[Command]
name = "up_y"
command = /$U,y
time = 1

[Command]
name = "up_z"
command = /$U,z
time = 1

[Command]
name = "back_a"
command = /$B,a
time = 1

[Command]
name = "back_b"
command = /$B,b
time = 1

[Command]
name = "back_c"
command = /$B,c
time = 1

[Command]
name = "down_a"
command = /$D,a
time = 1

[Command]
name = "down_b"
command = /$D,b
time = 1

[Command]
name = "down_c"
command = /$D,c
time = 1

[Command]
name = "fwd_a"
command = /$F,a
time = 1

[Command]
name = "fwd_b"
command = /$F,b
time = 1

[Command]
name = "fwd_c"
command = /$F,c
time = 1

[Command]
name = "up_a"
command = /$U,a
time = 1

[Command]
name = "up_b"
command = /$U,b
time = 1

[Command]
name = "up_c"
command = /$U,c
time = 1

;-| Single Button |---------------------------------------------------------
[Command]
name = "a"
command = a
time = 1

[Command]
name = "b"
command = b
time = 1

[Command]
name = "c"
command = c
time = 1

[Command]
name = "x"
command = x
time = 1

[Command]
name = "y"
command = y
time = 1

[Command]
name = "z"
command = z
time = 1

[Command]
name = "s"
command = s
time = 1

;-| Single Dir |------------------------------------------------------------
[Command]
name = "fwd" ;Required (do not remove)
command = $F
time = 1

[Command]
name = "downfwd"
command = $DF
time = 1

[Command]
name = "down" ;Required (do not remove)
command = $D
time = 1

[Command]
name = "downback"
command = $DB
time = 1

[Command]
name = "back" ;Required (do not remove)
command = $B
time = 1

[Command]
name = "upback"
command = $UB
time = 1

[Command]
name = "up" ;Required (do not remove)
command = $U
time = 1

[Command]
name = "upfwd"
command = $UF
time = 1

;-| Hold Button |--------------------------------------------------------------
[Command]
name = "hold_x"
command = /x
time = 1

[Command]
name = "hold_y"
command = /y
time = 1

[Command]
name = "hold_z"
command = /z
time = 1

[Command]
name = "hold_a"
command = /a
time = 1

[Command]
name = "hold_b"
command = /b
time = 1

[Command]
name = "hold_c"
command = /c
time = 1

[Command]
name = "hold_s"
command = /s
time = 1

;-| Hold Dir |--------------------------------------------------------------
[Command]
name = "holdfwd";Required (do not remove)
command = /$F
time = 1

[Command]
name = "holdback";Required (do not remove)
command = /$B
time = 1

[Command]
name = "holdup" ;Required (do not remove)
command = /$U
time = 1

[Command]
name = "holddown";Required (do not remove)
command = /$D
time = 1

[Command]
name = "holdfwd" ;Required (do not remove)
command = /$F
time = 1

[Command]
name = "holddownfwd"
command = /$DF
time = 1

[Command]
name = "holddown" ;Required (do not remove)
command = /$D
time = 1

[Command]
name = "holddownback"
command = /$DB
time = 1

[Command]
name = "holdback" ;Required (do not remove)
command = /$B
time = 1

[Command]
name = "holdupback"
command = /$UB
time = 1

[Command]
name = "holdup" ;Required (do not remove)
command = /$U
time = 1

[Command]
name = "holdupfwd"
command = /$UF
time = 1

;---------------------------------------------------------------------------
;Release Direction
[Command]
name = "rlsfwd"
command = ~$F
time = 1

[Command]
name = "rlsback"
command = ~$B
time = 1

[Command]
name = "rlsup"
command = ~$U
time = 1

[Command]
name = "rlsdown"
command = ~$D
time = 1

;--------------------------------------------------------------------------
;Release Button
[Command]
name = "rlsx"
command = ~x
time = 1

[Command]
name = "rlsy"
command = ~y
time = 1

[Command]
name = "rlsz"
command = ~z
time = 1

[Command]
name = "rlsa"
command = ~a
time = 1

[Command]
name = "rlsb"
command = ~b
time = 1

[Command]
name = "rlsc"
command = ~c
time = 1
;---------------------------------------------------------------------------
;Other
[Command]
name = "highjump"
command = $D, $U
time = 15
;---------------------------------------------------------------------------
[Statedef -1]

[State -1, Tick Fix]
type = CtrlSet
triggerall = !ctrl
trigger1 = (StateNo = 52 || StateNo = 101 || StateNo = 5120) && !AnimTime
trigger2 = (StateNo = [200,499]) && !AnimTime
trigger3 = (StateNo = [760,762]) && !AnimTime
trigger4 = StateNo = 810 && !AnimTime
trigger5 = (StateNo = 5001 || StateNo = 5011 || StateNo = 151 || StateNo = 153) && HitOver
trigger6 = (StateNo = [700,715]) && !AnimTime
value = 1

[State -1, CtrlSet For Helpers];special thanks to 20S
type = CtrlSet
trigger1 = IsHelper
value = 0

[State -1, Hit Count For Helpers];special thanks to 20S
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = MoveHit = 1
trigger1 = !HitPauseTime 
trigger1 = !(HitDefAttr = SCA, AT)
var(13) = 1

[State -1, Juggle Count For Helpers];special thanks to 20S
type = ParentVarAdd
trigger1 = IsHelper
trigger1 = MoveHit = 1
trigger1 = !HitPauseTime 
trigger1 = !(HitDefAttr = SCA, AT)
var(15) = 1

;[State -1, ProjContact];special thanks to 20S
;type = VarSet
;trigger1 = IsHelper
;trigger1 = MoveContact = 1 && NumTarget
;var(18) = 1

;[State -1, Root ProjContact];special thanks to 20S
;type = ParentVarSet
;trigger1 = IsHelper
;trigger1 = MoveContact = 1 && NumTarget
;var(18) = 1

[State -1, Blood Grenade]
type = ChangeState
value = 3100
triggerall = command = "Blood Grenade"
triggerall = p2life <=410
triggerall = RoundState = 2 && StateType != A
triggerall = ifelse(var(20) <= 0, power >= 3000, power >= 1000)
triggerall = teammode = single
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(6)

[State -1, Brutality]
type = ChangeState
value = 3010
triggerall = command = "Brutality"
triggerall = RoundState = 2 && StateType != A
triggerall = ifelse(var(20) <= 0, power >= 2000, power >= 1000)
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(6) || var(7)

[State -1, Hair Smash]
type = ChangeState
value = 3020
triggerall = command = "Hair Smash"
triggerall = RoundState = 2 && StateType = A
triggerall = ifelse(var(20) <= 0, power >= 2000, power >= 1000)
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(6) || var(7)
trigger2 = var(43) = 10

[State -1, Kunai Barrage]
type = ChangeState
value = 3000
triggerall = command = "Banshee Cannon"
triggerall = RoundState = 2 && StateType != A
triggerall = ifelse(var(20) <= 0, power >= 1000, power >= 0)
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(6)


[State -1, EX Kunai Toss]
type = ChangeState
value = 1030
triggerall = command = "EX Banshee Blast"
triggerall = RoundState = 2 && StateType != A
triggerall = ifelse(var(20) <= 0, power >= 500, power >= 0)
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)

[State -1, EX Kunai Toss]
type = ChangeState
value = 1070
triggerall = command = "EX Low Banshee Blast"
triggerall = RoundState = 2 && StateType != A
triggerall = ifelse(var(20) <= 0, power >= 500, power >= 0)
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)

[State -1, EX Kunai Toss]
type = ChangeState
value = 1050
triggerall = command = "EX Air Banshee Blast"
triggerall = RoundState = 2 && StateType = A && numproj = 0
triggerall = ifelse(var(20) <= 0, power >= 500, power >= 0)
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(43) = 10
trigger3 = stateno = 250 && movecontact

[State -1, Strong Crimson Slide]
type = ChangeState
value = 1150
triggerall = command = "EX Scream"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)
triggerall = p2stateno != [1101,1102]
triggerall = roundstate = 2

[State -1, Medium Crimson Slide]
type = ChangeState
value = 1150
triggerall = command = "EX Scream"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)
triggerall = p2stateno != [1101,1102]
triggerall = roundstate = 2

[State -1, Light Crimson Slide]
type = ChangeState
value = 1150
triggerall = command = "EX Scream"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)
triggerall = p2stateno != [1101,1102]
triggerall = roundstate = 2

[State -1, Flight]
type = ChangeState
value = 1200
triggerall = command = "Flight"
triggerall = RoundState = 2 && StateType != A
triggerall = var(43) != 1
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)

[State -1, Air Kunai Toss]
type = ChangeState
value = 1040
triggerall = command = "Banshee Blast S"
triggerall = RoundState = 2 && StateType = A && stateno !=1040
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(43) = 10
trigger3 = stateno = 250 && movecontact

[State -1, Air Kunai Toss]
type = ChangeState
value = 1040
triggerall = command = "Banshee Blast M"
triggerall = RoundState = 2 && StateType = A && stateno !=1040
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(43) = 10
trigger3 = stateno = 250 && movecontact


[State -1, Air Kunai Toss]
type = ChangeState
value = 1040
triggerall = command = "Banshee Blast L"
triggerall = RoundState = 2 && StateType = A && stateno !=1040
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(43) = 10
trigger3 = stateno = 250 && movecontact

[State -1, Strong Crimson Slide]
type = ChangeState
value = 1100
triggerall = command = "Scream S"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)
triggerall = p2stateno != [1101,1102]
triggerall = roundstate = 2
trigger1 = var(50) = 0
trigger2 = p2bodydist x < 100 && inguarddist = 0 && p2life > 1 && abs(p2dist y) < 80
trigger2 = p2stateno = 107||(p2stateno = [50,52])||(p2stateno = [410,420])||enemy,moveguarded > 6||p2movetype = H
trigger2 = var(50) = 1 && random%30 < AILevel && p2stateno != [120,159]
trigger2 = ifelse(enemy,moveguarded = 0, (p2bodydist x > 12), (p2bodydist x > 2&&random%8 < AILevel&&p2statetype != A))

[State -1, Medium Crimson Slide]
type = ChangeState
value = 1100
triggerall = command = "Scream M"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)
triggerall = p2stateno != [1101,1102]
triggerall = roundstate = 2
trigger1 = var(50) = 0
trigger2 = p2bodydist x < 100 && inguarddist = 0 && p2life > 1 && abs(p2dist y) < 80
trigger2 = p2stateno = 107||(p2stateno = [50,52])||(p2stateno = [410,420])||enemy,moveguarded > 6||p2movetype = H
trigger2 = var(50) = 1 && random%30 < AILevel && p2stateno != [120,159]
trigger2 = ifelse(enemy,moveguarded = 0, (p2bodydist x > 12), (p2bodydist x > 2&&random%8 < AILevel&&p2statetype != A))

[State -1, Light Crimson Slide]
type = ChangeState
value = 1100
triggerall = command = "Scream L"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)
triggerall = p2stateno != [1101,1102]
triggerall = roundstate = 2
trigger1 = var(50) = 0
trigger2 = p2bodydist x < 100 && inguarddist = 0 && p2life > 1 && abs(p2dist y) < 80
trigger2 = p2stateno = 107||(p2stateno = [50,52])||(p2stateno = [410,420])||enemy,moveguarded > 6||p2movetype = H
trigger2 = var(50) = 1 && random%30 < AILevel && p2stateno != [120,159]
trigger2 = ifelse(enemy,moveguarded = 0, (p2bodydist x > 12), (p2bodydist x > 2&&random%8 < AILevel&&p2statetype != A))

[State -1, Strong Kunai Toss]
type = ChangeState
value = 1220
triggerall = command = "Air Throw"
triggerall = RoundState = 2 && StateType = A && stateno != 50
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(43) = 10
trigger3 = stateno != 50

[State -1, Strong Kunai Toss]
type = ChangeState
value = 1230
triggerall = command = "Air Tackle"
triggerall = RoundState = 2 && StateType = A && stateno != 50
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(43) = 10
trigger3 = stateno != 50

[State -1, Strong Kunai Toss]
type = ChangeState
value = 1020
triggerall = command = "Banshee Blast S"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)

[State -1, Medium Kunai Toss]
type = ChangeState
value = 1010
triggerall = command = "Banshee Blast M"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)

[State -1, Light Kunai Toss]
type = ChangeState
value = 1000
triggerall = command = "Banshee Blast L"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)

[State -1, Light Kunai Toss]
type = ChangeState
value = 1060
triggerall = command = "Low Banshee Blast"
triggerall = RoundState = 2 && StateType != A
trigger1 = ctrl || StateNo = 40 || StateNo = 52 || (StateNo = [100,101])
trigger2 = var(5)

[State -1, Zero Counter]
type = ChangeState
value = 750
trigger1 = StateNo = 150 || StateNo = 152
trigger1 = command = "412p" || command = "412k"
trigger1 = RoundState = 2 && StateType != A
trigger1 = power >= 1000 && !var(20)

[State -1, Throw]
type = ChangeState
value = 800
trigger1 = (command = "holdfwd" || command = "holdback") && command = "pp" 
trigger1 = RoundState = 2 && StateType = S
trigger1 = ctrl

[State -1, Roll Forward]
type = ChangeState
value = 710
triggerall = command = "a+x"
triggerall = RoundState = 2 && StateType != A
trigger1 = (ctrl || (StateNo = [100,101])) && command = "holdfwd"

[State -1, Roll Back]
type = ChangeState
value = 715
triggerall = command = "a+x"
triggerall = RoundState = 2 && StateType != A
trigger1 = (ctrl || (StateNo = [100,101])) && command = "holdback"

[State -1, Power Charge]
type = ChangeState
value = 730
trigger1 = command = "hold_b" && command = "hold_y"
trigger1 = RoundState = 2 && StateType != A
trigger1 = power < const(data.power) && power < PowerMax && !var(20)
trigger1 = ctrl || (StateNo = [100,101])

[State -1, MAX Mode]
type = ChangeState
value = 770
triggerall = command = "c+z"
triggerall = RoundState = 2 && StateType != A
triggerall = var(20) <= 0 && Power >= 1000
trigger1 = ctrl || (Stateno = [100,101])

[State -1, Dodge]
type = ChangeState
value = 700
triggerall = command = "a+x"
triggerall = RoundState = 2 && StateType != A
trigger1 = (ctrl || (StateNo = [100,101]))

[State -1, Run Fwd]
type = ChangeState
value = 100
trigger1 = command = "FF"
trigger1 = statetype = S
trigger1 = ctrl

[State -1, Run Back]
type = ChangeState
value = 105
trigger1 = command = "BB"
trigger1 = statetype = S
trigger1 = ctrl

;--------------------------------------------------------------------------
[State -1, Stand Light Punch]
type = ChangeState
value = 200
triggerall = command = "x"
triggerall = command != "holddown"
trigger1 = statetype != A
trigger1= ctrl || (stateno=[100,101])
trigger2= (StateNo = 200 || StateNo = 400 || StateNo = 430) && Time >=5
trigger3 = stateno = 600 && movecontact || stateno = 610 && movecontact

[State -1, Stand Medium Punch]
type = ChangeState
value = 210 
triggerall = command = "y"
triggerall = command != "holddown"  
triggerall = StateType != A
trigger1 = ctrl || (StateNo = [100,101])
trigger2 = stateno = 200 && movecontact

[State -1, Stand Strong Punch]
type = ChangeState
value = 220 
triggerall = command = "z"
triggerall = command != "holddown" 
triggerall = StateType != A
trigger1 = ctrl || (StateNo = [100,101])
trigger2 = stateno = 210 && movecontact

[State -1, Stand Light Kick]
type = ChangeState
value = 230
triggerall = command = "a"
triggerall = command != "holddown"
trigger1 = statetype != A
trigger1= ctrl || (stateno=[100,101])
trigger2 = stateno = 200 && movecontact

[State -1, Stand Medium Kick]
type = ChangeState
value = 240
triggerall = command = "b"
triggerall = command != "holddown"
trigger1 = statetype != A
trigger1= ctrl || (stateno=[100,101])
trigger2 = stateno = 230 && movecontact|| stateno = 210 && movecontact

[State -1, Standing Strong Kick]
type = ChangeState
value = 250
triggerall = command = "c"
triggerall = command != "holddown"
trigger1 = statetype != A
trigger1= ctrl || (stateno=[100,101])
trigger2 = stateno = 240 && movecontact || stateno = 220 && movecontact

[State -1, Crouching Light Punch]
type = ChangeState
value = 400
triggerAll = command = "holddown" && command = "x"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,101])
trigger2= (StateNo = 200 || StateNo = 400 || StateNo = 430) && Time >=5

[State -1, Crouching Medium Punch]
type = ChangeState
value = 410
triggerAll = command = "holddown" && command = "y"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,101])
trigger2 = stateno = 400 && movecontact

[State -1, Crouching Strong Punch]
type = ChangeState
value = 420
triggerAll = command = "holddown" && command = "z"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,101])

[State -1, Crouching Light Kick]
type = ChangeState
value = 430
triggerAll = command = "holddown" && command = "a"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,101])
trigger2= (StateNo = 200 || StateNo = 400 || StateNo = 430) && Time >=5

[State -1, Crouching Medium Kick]
type = ChangeState
value = 440
triggerAll = command = "holddown" && command = "b"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,101])
trigger2 = stateno = 430 && movecontact

[State -1, Crouching Strong Kick]
type = ChangeState
value = 450
triggerAll = command = "holddown" && command = "c"
triggerAll = StateType != A
trigger1 = ctrl || (StateNo = [100,101])
trigger2 = stateno = 440 && movecontact

[State -1, Jump Light Punch]
type = ChangeState
value = 600
triggerall = command = "x"
trigger1 = statetype = A
trigger1 = ctrl

[State -1, Jump Medium Punch]
type = ChangeState
value = 610
triggerall = command = "y"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 600 && movecontact

[State -1, Jump Strong Punch]
type = ChangeState
value = 620
triggerall = command = "z"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 610 && movecontact

[State -1, Jump Light Kick]
type = ChangeState
value = 630
triggerall = command = "a"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 600 && movecontact

[State -1, Jump Medium Kick]
type = ChangeState
value = 640
triggerall = command = "b"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 630

[State -1, Jump Strong Kick]
type = ChangeState
value = 650
triggerall = command = "c"
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 640

[State -1, Taunt]
type = ChangeState
value = 195
triggerall = command = "s"
triggerall = StateType != A
triggerall = StateNo != [200,699]
trigger1 = ctrl || (StateNo = [100,101])
trigger2 = var(5)

;-------------------------------------------------------------------------------------
;A.I. Shite
;-------------------------------------------------------------------------------------
[State -1, AI Parry Stand]
type = HitOverride
triggerall = AILevel&&statetype != A && ctrl
trigger1 = random < (250 * (AIlevel ** 2 / 64.0))
slot = 0
stateno = 6080
attr = SA, AA, AP
time = 3
;---------------------------------------------------------------
[State -1, AI Crouching Parry]
type = HitOverride
triggerall = AILevel&&statetype != A && ctrl
trigger1 =random < (250 * (AIlevel ** 2 / 64.0))
slot = 0
stateno = 6081
attr = C, AA, AP
time = 3
;---------------------------------------------------------------
[State -1, AI Aerial Parry]
type = HitOverride
triggerall = AILevel&& statetype = A && ctrl
trigger1 = random < (250 * (AIlevel ** 2 / 64.0))
slot = 0
stateno = 6082
attr = SCA, AA, AP
time = 3
;---------------------------------------------------------------------------
[State -1, Idle]
type = changestate
value = 0
triggerall = AIlevel && numenemy&&roundstate = 2 && statetype != A && enemynear, movetype = A && (p2stateno=[5100,5220])
trigger1=ctrl

[State -1, run]
type = changestate
value = 102
trigger1 = AIlevel && numenemy
trigger1 = statetype = S && roundstate = 2 && ctrl && random < (400 * (AIlevel ** 2 / 64.0))
trigger1 = (stateno != [100, 105]) && enemynear, movetype != A && p2bodydist x > 90

[State -1, dash]
type = changestate
value = 105
triggerall = AIlevel && numenemy
triggerall = statetype = S && roundstate = 2 && ctrl
triggerall = (p2bodydist x = [0, 80]) && backedgebodydist > 80 && (stateno != [100, 105])
trigger1 = enemynear, movetype = A && random < (50 * (AIlevel ** 2 / 64.0))
trigger2 = enemynear, stateno = 5120 && enemynear, animtime = -3 && random < (200 * (AIlevel ** 2 / 64.0))

[State -1, Jump]
type = changestate
value = 40
trigger1 = AIlevel && numenemy
trigger1 = roundstate = 2 && statetype != A && ctrl
trigger1 = enemynear, movetype = A && p2bodydist x < 160 && enemynear, hitdefattr = SC, AT

[state -1,AI Air Guard]
type = ChangeState
value = 132
triggerall = AIlevel && numenemy&& roundstate = 2&&InGuardDist
triggerall = ctrl&&statetype = A
trigger1 = enemynear,numproj
trigger2 = enemynear,HitDefAttr = SCA, NA,SA,HA
trigger2 = random <=ifelse(backedgedist<=10,950,800)

[State -1, Guard]
type = changestate
value = 120
trigger1 = AIlevel && numenemy
trigger1 = roundstate = 2 && inguarddist
trigger1 = ctrl && (stateno != [120, 155]) && !var(20)
trigger1 = ifelse(statetype = A, (var(9) != 2 || stateno = 5210), 1)
trigger1 = !(enemynear, hitdefattr = SCA, AT) && (enemynear, time < 120)
trigger1 = statetype != A || p2statetype = A
trigger1 = random < (ifelse((p2stateno = [200, 699]), 500, ifelse((p2stateno = [1000, 2999]), 750, 1000)) * (AIlevel ** 2 / 64.0))

[State -1, Guard]
type = ChangeState
value = 120
triggerall= AILevel && numenemy&& (StateNo!=[120,155]) && !(enemynear,ctrl) && random < (600 * (AIlevel ** 2 / 64.0))
triggerall= Ctrl||stateno = 21
triggerall=enemynear,Movetype=A && !(enemynear,hitdefattr=SCA,AT) 
trigger1 = inguarddist

[State -1, Super Jump]
type = ChangeState
value = 123
triggerall = AILevel && numenemy && var(55)=2 && statetype != A && roundstate = 2 && (p2bodydist y = [-320,5])
triggerall = stateno != 100 && pos y = 0 && (enemynear,Statetype!=C)
trigger1 = ctrl && enemy,vel y < -1 && (p2bodydist x = [ 10, 70]) && enemynear,movetype != A && random < (200 * (AIlevel ** 2 / 64.0))
trigger2 = ctrl && enemy,vel y < -1 && random < (150 * (AIlevel ** 2 / 64.0))
trigger2 = enemynear,movetype = H && (enemynear,stateno=5040)
trigger2 = p2bodydist x <= 50 && random < (150 * (AIlevel ** 2 / 64.0))
trigger3 = ctrl && enemynear,MoveType != H&&P2BodyDist Y < -90&& enemy,vel y <= 0 && random < (350 * (AIlevel ** 2 / 64.0))
trigger4 = stateno=420 && MoveHit && random < (800 * (AIlevel ** 2 / 64.0))
trigger5 = ctrl && (p2bodydist x<=140) && (enemynear,statetype!=A) && (enemynear,movetype=A) && (enemynear,stateno=[2000,4999]) && random < (750 * (AIlevel ** 2 / 64.0))

[State -1, Zero Counter]
type = changestate
value = 750
trigger1 = AIlevel && numenemy
trigger1 = (p2dist x = [-90, 90]) && stateno = 150 || stateno = 152
trigger1 = roundstate = 2 && power >= 2000 && !var(20) && !var(24) && life < 500 && random < (10 * (AIlevel ** 2 / 64.0))

;[State -1, powercharge]
;type = changestate
;value = 730
;trigger1 = AIlevel && numenemy
;trigger1 = roundstate = 2 && statetype != A && ctrl
;trigger1 = power < const(data.power) && power < powermax && !var(20)
;trigger1 = random < (50 * (AIlevel ** 2 / 64.0)) && !inguarddist && p2movetype != A && p2dist x >= 160

[State -1, roll / dodge]
type = changestate
value = ifelse(random < 600, 700, 710)
trigger1 = AIlevel && numenemy
trigger1 = roundstate = 2 && statetype != A && ctrl && random < (50 * (AIlevel ** 2 / 64.0))
trigger1 = enemynear, movetype = A && p2bodydist x < 100

[State -1, airrecover]
type=changestate
value=ifelse((pos y>=-20),5200,5210)
triggerall= AILevel && numenemy
triggerall= roundstate=2 && stateno=5050
trigger1= vel y>-1 && alive && canrecover && random < (250 * (AIlevel ** 2 / 64.0))
;-------------------------------------------------------------------
[State -1, Throw]
type = ChangeState
value = 800
triggerall = AILevel&&random < (500 * (AIlevel ** 2 / 64.0)) && !var(20)
triggerall = roundstate=2&&statetype!=A&& enemynear,statetype!=L&&(enemynear,stateno!=[5120,5201])
triggerall = enemynear,movetype!=H&&enemynear,statetype!=A&&enemynear,Hitover&&(p2bodydist x =[0,30])
triggerall = ctrl||stateno=100||stateno=52
trigger1 = random>=800
trigger2 = enemynear,stateno=[120,155]
trigger2 = random>=500
trigger3 = stateno=100
trigger4=(p2bodydist x=[0,30])&&random<250
trigger5=(p2stateno=[120,155])&&(p2bodydist x=[0,30])&&random<500
;-------------------------------------------------------------------
[State -1, Air Throw]
type = ChangeState
value = 850
triggerall = AILevel&&random < (500 * (AIlevel ** 2 / 64.0)) && !var(20)
triggerall = roundstate=2&&statetype=A&& enemynear,statetype!=L&&(enemynear,stateno!=[5120,5201])
triggerall = enemynear,movetype!=H&&enemynear,statetype=A&&enemynear,Hitover&&(p2bodydist x =[0,30])&&(p2bodydist y =[-50,0])
triggerall = ctrl
trigger1 = random>=800
trigger2 = enemynear,stateno=[120,155]
trigger2 = random>=500
trigger3=(p2bodydist x=[0,30])&&random<250
trigger4=(p2stateno=[120,155])&&(p2bodydist x=[0,30])&&random<500
;------------------------------------------------------------------------
[State -2, AI]
Type=Changestate
Triggerall=var(59)>0 ; Use this only if the AI is ON
Triggerall=Statetype=S
Triggerall=abs(P2Bodydist X)<5 ; use this move only when the opponent is close enough. Moves usually don't hit the entire screen, so specifying the distance this way is necessary
Triggerall=P2StateType=S; use it only if the opponent is standing. This way, we don't need to worry about the y position of the opponent, and we won't use it when the opponent is on the ground or is falling. Using other triggers in other cases like P2dist Y, enemynear,pos Y, P2Stateype!=L,!enemynear,hitfall, etc... might be necessary.
Triggerall=!Inguarddist; Don't use it if in guard distance. We don't want to run into a hit and get our super interrupted. This line is unnecessary if the super cannot be interrupted by hits.
Triggerall=random<var(50)*1.1
Trigger1 = ctrl
;trigger2 = stateno = 100 && movecontact
value= 200

[State -2, AI]
Type=Changestate
Triggerall=var(59)>0 ; Use this only if the AI is ON
Triggerall=Statetype=S
Triggerall=abs(P2Bodydist X)<10 ; use this move only when the opponent is close enough. Moves usually don't hit the entire screen, so specifying the distance this way is necessary
Triggerall=P2StateType=S; use it only if the opponent is standing. This way, we don't need to worry about the y position of the opponent, and we won't use it when the opponent is on the ground or is falling. Using other triggers in other cases like P2dist Y, enemynear,pos Y, P2Stateype!=L,!enemynear,hitfall, etc... might be necessary.
Triggerall=!Inguarddist; Don't use it if in guard distance. We don't want to run into a hit and get our super interrupted. This line is unnecessary if the super cannot be interrupted by hits.
Triggerall=random<var(50)*1.1
Trigger1 = stateno = 200 && movecontact
value= 210

[State -2, AI]
Type=Changestate
Triggerall=var(59)>0 ; Use this only if the AI is ON
Triggerall=Statetype=S
Triggerall=abs(P2Bodydist X)<10 ; use this move only when the opponent is close enough. Moves usually don't hit the entire screen, so specifying the distance this way is necessary
Triggerall=P2StateType=S; use it only if the opponent is standing. This way, we don't need to worry about the y position of the opponent, and we won't use it when the opponent is on the ground or is falling. Using other triggers in other cases like P2dist Y, enemynear,pos Y, P2Stateype!=L,!enemynear,hitfall, etc... might be necessary.
Triggerall=!Inguarddist; Don't use it if in guard distance. We don't want to run into a hit and get our super interrupted. This line is unnecessary if the super cannot be interrupted by hits.
Triggerall=random<var(50)*1.1
Trigger1 = stateno = 210 && movecontact
trigger2 = stateno = 100 && abs(P2Bodydist X)<5
value= 220
;---------------------------------------------------------------------------
[State -2, AI]
Type=Changestate
Triggerall=var(59)>0 ; Use this only if the AI is ON
Triggerall=Statetype !=A
;Triggerall=abs(P2Bodydist X)<10 ; use this move only when the opponent is close enough. Moves usually don't hit the entire screen, so specifying the distance this way is necessary
Triggerall=P2StateType=A; use it only if the opponent is standing. This way, we don't need to worry about the y position of the opponent, and we won't use it when the opponent is on the ground or is falling. Using other triggers in other cases like P2dist Y, enemynear,pos Y, P2Stateype!=L,!enemynear,hitfall, etc... might be necessary.
Triggerall=!Inguarddist; Don't use it if in guard distance. We don't want to run into a hit and get our super interrupted. This line is unnecessary if the super cannot be interrupted by hits.
Triggerall=random<var(50)*1.1
Trigger1 = stateno = 220 && movehit
value = 230

[State -2, AI]
Type=Changestate
Triggerall=var(59)>0 ; Use this only if the AI is ON
Triggerall=Statetype!=A
;Triggerall=abs(P2Bodydist X)<10 ; use this move only when the opponent is close enough. Moves usually don't hit the entire screen, so specifying the distance this way is necessary
Triggerall=P2StateType=A; use it only if the opponent is standing. This way, we don't need to worry about the y position of the opponent, and we won't use it when the opponent is on the ground or is falling. Using other triggers in other cases like P2dist Y, enemynear,pos Y, P2Stateype!=L,!enemynear,hitfall, etc... might be necessary.
Triggerall=!Inguarddist; Don't use it if in guard distance. We don't want to run into a hit and get our super interrupted. This line is unnecessary if the super cannot be interrupted by hits.
Triggerall=random<var(50)*1.1
Trigger1 = stateno = 230 && movecontact
value= 240

[State -2, AI]
Type=Changestate
Triggerall=var(59)>0 ; Use this only if the AI is ON
Triggerall=Statetype=S
Trigger1=abs(P2Bodydist Y)>25 && abs(P2Bodydist X)<1
;Triggerall= ; use this move only when the opponent is close enough. Moves usually don't hit the entire screen, so specifying the distance this way is necessary
;Triggerall=P2StateType=A; use it only if the opponent is standing. This way, we don't need to worry about the y position of the opponent, and we won't use it when the opponent is on the ground or is falling. Using other triggers in other cases like P2dist Y, enemynear,pos Y, P2Stateype!=L,!enemynear,hitfall, etc... might be necessary.
Triggerall=!Inguarddist; Don't use it if in guard distance. We don't want to run into a hit and get our super interrupted. This line is unnecessary if the super cannot be interrupted by hits.
Triggerall=random<var(50)*1.1
Trigger1 = ctrl
value= 250
;---------------------------------------------------------------------------
[State -1, Crouching Low Punch]
type = ChangeState
value = 400
triggerall = AILevel && numenemy && roundstate=2 && StateType != A
triggerall = (p2bodydist x = [0, 40]) &&(p2bodydist y = [-50,25]) && P2statetype != A && P2statetype != L && !(enemynear, hitfall)
trigger1 = ctrl && random < (100 * (AIlevel ** 2 / 64.0))
trigger2 = stateno = [100,101]
;---------------------------------------------------------------------------
[State -1, Crouching Medium Punch]
type = ChangeState
value = 410
triggerall = AILevel && numenemy && roundstate=2 && StateType != A
triggerall = (p2bodydist x = [0, 55]) &&(p2bodydist y = [-50,25]) && P2statetype != A && P2statetype != L && !(enemynear, hitfall)
trigger1 = ctrl && random < (150 * (AIlevel ** 2 / 64.0))
trigger2 = ((stateno = [200,209])|| (stateno = [230,239])||(stateno = [400,409])||(stateno = [430,439]))&& movehit&&var(55)
trigger2 = random < 800
;---------------------------------------------------------------------------
[State -1, Crouching High Punch]
type = ChangeState
value = 420
triggerall = AILevel && numenemy && roundstate=2 && StateType != A
triggerall = (p2bodydist x = [0, 10]) &&(p2bodydist y = [-80,5]) && P2statetype != L && !(enemynear, hitfall)
trigger1 = ctrl && random < (125 * (AIlevel ** 2 / 64.0))
trigger2 = ((stateno = [210,219])|| (stateno = [240,249])||(stateno = [410,419])||(stateno = [440,449]))&& movehit&&var(55)
trigger2 = random < 600
;---------------------------------------------------------------------------
[State -1, Crouching Low Kick]
type = ChangeState
value = 430
triggerall = AILevel && numenemy && roundstate=2 && StateType != A
triggerall = (p2bodydist x = [0, 35]) &&(p2bodydist y = [-50,25]) && P2statetype != A && P2statetype != L && !(enemynear, hitfall)
trigger1 = ctrl && random < (50 * (AIlevel ** 2 / 64.0))
trigger2 = ((stateno = [200,209])|| (stateno = [400,409]))&& movehit&&var(55)
;---------------------------------------------------------------------------
[State -1, Crouching Medium Kick]
type = ChangeState
value = 440
triggerall = AILevel && numenemy && roundstate=2 && StateType != A
triggerall = (p2bodydist x = [0, 45]) &&(p2bodydist y = [-50,25]) && P2statetype != A && P2statetype != L && !(enemynear, hitfall)
trigger1 = ctrl && random < (75 * (AIlevel ** 2 / 64.0))
trigger2 = ((stateno = [210,219])|| (stateno = [230,239])||(stateno = [410,419])||(stateno = [430,439]))&& movehit&&var(55)
trigger2 = random < 350
;---------------------------------------------------------------------------
[State -1, Crouching High Kick]
type = ChangeState
value = 450
triggerall = AILevel && numenemy && roundstate=2 && StateType != A && P2statetype != A
triggerall = (p2bodydist x = [0, 55]) && (p2bodydist y = [ -50, 50]) && p2statetype != L && p2statetype = S && !(enemynear, hitfall)
trigger1 = ctrl && random < (100 * (AIlevel ** 2 / 64.0))
trigger2 = ((stateno = [220,229])|| (stateno = [240,249])||(stateno = [420,429])||(stateno = [440,449]))&& movehit&&var(55)
trigger2 = random < 900
;---------------------------------------------------------------------------
[State -1, Jumping Low Punch]
type = ChangeState
value = 600
triggerall = AILevel && numenemy&&roundstate=2&&statetype = A && (p2bodydist x = [0,60]) && (p2bodydist y = [ -50, 50]) && p2statetype != L
trigger1 = ctrl && random < (500 * (AIlevel ** 2 / 64.0))
;---------------------------------------------------------------------------
[State -1, Jumping Medium Punch]
type = ChangeState
value = 610
triggerall = AILevel && numenemy&&roundstate=2&&statetype = A && (p2bodydist x = [0, 70]) && (p2bodydist y = [ -50, 50]) && p2statetype != L 
trigger1 = ctrl && random < (ifelse((vel x > 0 && p2statetype = A), 250, 125) * (AIlevel ** 2 / 64.0)) 
trigger2 = (stateno = [600,609])&& movehit && var(55)=2 && random < 750
trigger3 = (stateno = [630,639])&& movehit && var(55)=2 && random < 250
;---------------------------------------------------------------------------
[State -1, Jumping High Punch]
type = ChangeState
value = 620
triggerall = AILevel && numenemy&&roundstate=2&&statetype = A && (p2bodydist x = [0, 100]) && (p2bodydist y = [ -80, 50]) && p2statetype != L 
trigger1 = ctrl && random < (150 * (AIlevel ** 2 / 64.0)) && !(enemynear, hitfall)
trigger2 = (stateno = [610,619])&& movehit && var(55)=2 && random < 700
trigger3 = (stateno = [640,649])&& movehit && var(55)=2 && random < 200
;---------------------------------------------------------------------------
[State -1, Jumping Low Kick]
type = ChangeState
value = 630
triggerall = AILevel && numenemy&&roundstate=2&&statetype = A && (p2bodydist x = [0, 70]) && (p2bodydist y = [ -50, 50]) && p2statetype != L 
trigger1 = ctrl && random < (50 * (AIlevel ** 2 / 64.0))
trigger2 = (stateno = [600,609])&& movehit && var(55)=2 && random < 250
;---------------------------------------------------------------------------
[State -1, Jumping Medium Kick]
type = ChangeState
value = 640
triggerall = AILevel && numenemy&&roundstate=2&&statetype = A && (p2bodydist x = [0, 90]) && (p2bodydist y = [ -50, 50]) && p2statetype != L 
trigger1 = ctrl && random < (250 * (AIlevel ** 2 / 64.0)) && !(enemynear, hitfall)
trigger2 = (stateno = [610,619])&& movehit && var(55)=2 && random < 100
trigger3 = (stateno = [630,639])&& movehit && var(55)=2 && random < 750
;---------------------------------------------------------------------------
[State -1, Jumping High Kick]
type = ChangeState
value = 650
triggerall = AILevel && numenemy &&roundstate=2&&statetype = A && (p2bodydist x = [0, 130]) && (p2bodydist y = [ -50, 50]) && p2statetype != L 
trigger1 = ctrl && random < (250 * (AIlevel ** 2 / 64.0)) && !(enemynear, hitfall) 
trigger2 = (stateno = [610,619])&& movehit && var(55)=2 && random < 250
trigger3 = (stateno = [640,649])&& movehit && var(55)=2 && random < 750


[State -1, Blood Stinger AI]
type=ChangeState
value=Ifelse(power>=800&&random<=250,1150,1150)
triggerall=AILevel && numenemy && RoundState=2 && StateType != A&&(enemynear,statetype != L)&&(enemynear,stateno!=[5100,5220])&&random < (250 * (AIlevel ** 2 / 64.0))
triggerall=(enemynear,stateno!=[120,155])&&(enemynear,statetype!=C) && (p2bodydist x =[5,60])&&(p2bodydist y=[-140,5])
trigger1=ctrl || StateNo=40 || StateNo=52 || (StateNo=[100,101])
trigger1= power >=500
trigger1= random <=400
trigger2=var(5)
trigger1 = var(50) = 0
trigger2 = p2bodydist x < 100 && inguarddist = 0 && p2life > 1 && abs(p2dist y) < 80
trigger2 = p2stateno = 107||(p2stateno = [50,52])||(p2stateno = [410,420])||enemy,moveguarded > 6||p2movetype = H
trigger2 = var(50) = 1 && random%30 < AILevel && p2stateno != [120,159]
trigger2 = ifelse(enemy,moveguarded = 0, (p2bodydist x > 12), (p2bodydist x > 2&&random%8 < AILevel&&p2statetype != A))

;-----------------------------------------------------------------------
[State -1, Kunai Toss AI]
type=ChangeState
value=Ifelse(power>=1200&&random<=50,1030,1000)
triggerall=AILevel && numenemy && RoundState=2 && StateType != A && Ifelse(!var(20),!Numhelper(1005),Numhelper(1005)<15)
triggerall=(enemynear,statetype != L)&&(enemynear,stateno!=[5100,5220])&&(enemynear,stateno!=[120,155])
triggerall=random < (200 * (AIlevel ** 2 / 64.0)) && (p2bodydist x >=35)&&(p2bodydist y=[-80,5])
trigger1=ctrl || StateNo=40 || StateNo=52 || (StateNo=[100,103])
trigger2=var(5)
;------------------------------------------------------------------
[State -1, Blood Ball AI]
type=ChangeState
value=Ifelse(power>=1200&&random<=50,1070,1060)
triggerall=AILevel && numenemy && RoundState=2 && StateType != A && Ifelse(!var(20),!Numhelper(1005),Numhelper(1005)<15)
triggerall=(enemynear,statetype != L)&&(enemynear,stateno!=[5100,5220])&&(enemynear,stateno!=[120,155])
triggerall=random < (200 * (AIlevel ** 2 / 64.0)) && (p2bodydist x >=35)&&(p2bodydist y=[-80,5])
trigger1=ctrl || StateNo=40 || StateNo=52 || (StateNo=[100,103])
trigger2=var(5)
;------------------------------------------------------------------
[State -1, Blood Drop AI]
type=ChangeState
value=Ifelse(power>=1200&&var(29)>=4,1230,1220)
triggerall=AILevel && numenemy && RoundState=2 && Power>200 && StateType = A && StateType !=L && random < (100 * (AIlevel ** 2 / 64.0)) && (p2bodydist x >=80)
trigger1=ctrl || StateNo=40 || StateNo=52 || (StateNo=[100,101])
trigger2 = var(43) = 10
trigger2=var(5)
trigger3=(stateno=1000||stateno=1000)
trigger3=Numhelper(1005)
trigger3=Helper(1005), var(18)=1

[State -1, HHK]
type=ChangeState
value=3100
triggerall=AILevel && numenemy && RoundState=2 && StateType != A &&var(20)<=0 && power >= 3000 && random < (450 * (AIlevel ** 2 / 64.0))
triggerall = p2life <=410
triggerAll = (P2BodyDist x = [-20,40]) && P2BodyDist y = 0
trigger1=ctrl || StateNo=40 || StateNo=52 || (StateNo=[100,101])
trigger2=var(6)

[State -1,Kunai Barrage AI]
type=ChangeState
value=3000
trigger1= random <=300
triggerall=AILevel && numenemy && RoundState=2 && StateType != A &&var(20)<=0 && power >= 1000 && random < (450 * (AIlevel ** 2 / 64.0))
triggerall=(enemynear,stateno!=5120)&&(enemynear,stateno!=[120,155])&&(p2bodydist x >=140)&&(p2bodydist y=[-140,5])
trigger1=ctrl || StateNo=40 || StateNo=52 || (StateNo=[100,101])
trigger2=var(6)
;----------------------------------------------------------------------

[State -1, Nova Sparkler]
type=ChangeState
value=3010
triggerall=AILevel && numenemy && RoundState=2 && StateType != A &&var(20)<=0 && power >= 2000 && random < (450 * (AIlevel ** 2 / 64.0))
triggerall=(enemynear,stateno!=5120)&&(enemynear,stateno!=[120,155])&&(p2bodydist x >=75)&&(p2bodydist y=[-75,5])
trigger1=ctrl || StateNo=40 || StateNo=52 || (StateNo=[100,101])
trigger2=var(6)

[State -1, Air Power Fist]
type=ChangeState
value= 3020
triggerall = power >=2000
triggerall=AILevel && numenemy && RoundState=2 && StateType = A && (stateno!=3050) && Pos y<=-15 && var(20) <= 0 && power >= 1000 && random < (150 * (AIlevel ** 2 / 64.0))
triggerall=(enemynear,stateno!=[5120,5220])&&(p2bodydist x =[80,160])&&(p2bodydist y=[-20,255])&&(enemynear,Statetype!=C)
trigger1=ctrl || StateNo = 1020 && Movehit || StateNo = 640
trigger2=var(6)|| var(7)
trigger3=(stateno=[600,650]) && movecontact

[State -1, Standing Parry]
type = hitoverride
triggerall = AIlevel && numenemy
triggerall = roundstate = 2 && statetype != A && StateType = S
trigger1 = (Ctrl || StateNo=20) && var(40) != 2
trigger1 = Random < ((IfElse(P2bodydist x > 90,280+(Lifemax-Life)/2, 90+(Lifemax-Life)/2) + 6*time + 60*(var(4)=2)) * (AIlevel ** 2 / 64.0))
trigger1 = var(21) := 1
trigger2 = StateNo = [760, 761]
trigger2 = Random < ((80+120*(var(40)=2)+(Lifemax-Life)/3) * (AIlevel ** 2 / 64.0))
trigger2 = var(21) := 1
trigger3 = (Ctrl || StateNo=20) && (Enemynear,NumProj || Enemynear,NumHelper)
trigger3 = random < (380+120*(var(40)=2)+(Lifemax-Life)/2) * (AIlevel ** 2 / 64.0)
trigger3 = var(21) := 1
trigger4 = (Ctrl || StateNo=20) && var(40) = 2
trigger4 = Random < ((IfElse(P2bodydist x > 90,400+(Lifemax-Life)/2, 290+(Lifemax-Life)/2) + 12*time + 60*(var(4)=2)) * (AIlevel ** 2 / 64.0))
trigger4 = var(21) := 1
trigger5 = var(59) = 3200
trigger5 = (Ctrl || StateNo=20) || (StateNo = [760,762])
trigger5 = var(21) := 1
attr = SA, AA, AP
stateno = 760
slot = 0
time = 8

[State -1, Crouching Parry]
type = hitoverride
triggerall = AIlevel && numenemy
triggerall = roundstate = 2 && statetype != A && StateType = C
trigger1 = (Ctrl || StateNo=20) && var(40) != 2
trigger1 = Random < ((IfElse(P2Statetype=C,260+(Lifemax-Life)/2, 100+(Lifemax-Life)/2) + 10*time + 90*(var(4)=2)) * (AIlevel ** 2 / 64.0))
trigger1 = var(21) := 2
trigger2 = StateNo = [760, 761]
trigger2 = Random < (150 + 190*(var(4)=2) +(Lifemax-Life)/3) * (AIlevel ** 2 / 64.0)
trigger2 = var(21) := 2
trigger3 = time < 5 || StateNo=20
trigger3 = var(21) := 2
trigger4 = (Ctrl || StateNo=20) && var(40) = 2
trigger4 = Random < ((IfElse(P2Statetype=C,460+(Lifemax-Life)/2, 200+(Lifemax-Life)/2) + 16*time) * (AIlevel ** 2 / 64.0))
trigger4 = var(21) := 2
attr = C, AA, AP
stateno = 761
slot = 1
time = 8

[State -1, Air Parry]
type = hitoverride
triggerall = AIlevel && numenemy
triggerall = roundstate = 2 && statetype = A && StateType != S
trigger1 = ctrl && var(40) != 2
trigger1 = random < ((10 + 50*(anim=41) + 90*(var(4)=2) +(Lifemax-Life)/10) * (AIlevel ** 2 / 64.0))
trigger1 = var(21) := 3
trigger2 = stateno = 762
trigger2 = random < ((50+150*(var(40)=2)+(Lifemax-Life)/3) * (AIlevel ** 2 / 64.0))
trigger2 = var(21) := 3
trigger3 = Ctrl && (Enemynear,NumProj || Enemynear,NumHelper)
trigger3 = random < ((10+190*(var(40)=2)+(Lifemax-Life)/2) * (AIlevel ** 2 / 64.0))
trigger3 = var(21) := 3
trigger4 = ctrl && var(40) = 2
trigger4 = random < ((150 + 150*(anim=41)+(Lifemax-Life)/10) * (AIlevel ** 2 / 64.0))
trigger4 = var(21) := 3
trigger5 = Ctrl && vel y > 3
trigger5 = random < 180 * (AIlevel ** 2 / 64.0)
trigger5 = var(21) := 3
trigger6 = var(59) = 3200
trigger6 = (Ctrl || StateNo=20) || (StateNo = [760,762])
trigger6 = var(21) := 3
attr = SA, AA, AP
stateno = 762
forceair = 1
slot = 0
time = 6


[state -1,AI Air Guard]
type = ChangeState
value = 132
triggerall = AIlevel && numenemy&& roundstate = 2&&InGuardDist
triggerall = ctrl&&statetype = A
trigger1 = enemynear,numproj
trigger2 = enemynear,HitDefAttr = SCA, NA,SA,HA
trigger2 = random <=ifelse(backedgedist<=10,950,800)

[State -1, Roll Forward]
type = ChangeState
value = 710
trigger1 = AILevel && NumEnemy
trigger1 = RoundState = 2 && StateType != A
trigger1 = Random < (50 * (AILevel ** 2 / 64.0))
trigger1 = (ctrl || (StateNo = [100,101])) && var(20) <= 164 && !var(26)
trigger1 = (EnemyNear, MoveType = A) && !(EnemyNear, HitDefAttr = SCA, AT) && (P2BodyDist x = [92,122])

[State -1, Dodge]
type = ChangeState
value = 700
trigger1 = AILevel && NumEnemy
trigger1 = RoundState = 2 && StateType != A
trigger1 = Random < (50 * (AIlevel ** 2 / 64.0))
trigger1 = (ctrl || (StateNo = [100,101])) && var(20) <= 164 && !var(26)
trigger1 = (EnemyNear, MoveType = A) && !(EnemyNear, HitDefAttr = SCA, AT) && (P2BodyDist x = [0,60])

[State -1, Dodge]
type = ChangeState
value = 700
triggerall = AIlevel && numenemy
triggerall = (facing=1 && (enemy,facing=-1)) || (facing=-1 && (enemy,facing=1))
triggerall = (ctrl || StateNo = 52 || (StateNo = [100,101])) && Random < (145 * (AILevel ** 2 / 64.0))
triggerall = roundstate=2  && statetype != A
trigger1 = enemynear,movetype=A && (p2bodydist x=[0,40])&&(p2bodydist y=[0,0])
trigger2 = ((enemynear,numproj) || (enemynear,numhelper)) && inguarddist && p2bodydist x>=25 
trigger3 = RoundState = 2 && InGuardDist
trigger3 = ctrl && (StateNo != [120, 155]) && !var(20)
trigger3 = !var(26) || P2BodyDist x >= 40
trigger3 = !(EnemyNear, HitDefAttr = SCA, AT) && (EnemyNear, Time < 120)
trigger3 = StateType != A || P2StateType = A
trigger3 = ifElse(StateType = A, ((var(3) != [1, 2]) || StateNo = 5210), 1)
trigger3 = Random <  (ifElse((P2StateNo = [200, 699]), 125, ifElse((P2StateNo = [1000,2999]), 333, 1000)) * (AILevel ** 2 / 64.0))

[State -1, Dash Backward]
type = ChangeState
value = 105
triggerAll = AILevel && NumEnemy
triggerAll = RoundState = 2 && StateType = S
triggerAll = ctrl && (StateNo != [100,106]) && var(20) <= 150 && !var(26)
trigger1 = (EnemyNear, MoveType = A) && BackEdgeDist >= 80 && (P2BodyDist x = [80,120]) && (EnemyNear, vel x)
trigger1 = Random < (ifElse((EnemyNear, HitDefAttr = SC, AT), 150, 50) * (AILevel ** 2 / 64.0))
trigger2 = (P2BodyDist x = [0,80]) && BackEdgeBodyDist >= 80
trigger2 = EnemyNear, StateNo = 5120 && EnemyNear, AnimTime = -4 && Random < (750 * (AILevel ** 2 / 64.0))

[State -1, Guard]
type = ChangeState
value = 120
trigger1 = AILevel && NumEnemy
trigger1 = RoundState = 2 && InGuardDist
trigger1 = ctrl && (StateNo != [120, 155]) && !var(20)
trigger1 = !var(26) || P2BodyDist x >= 40
trigger1 = !(EnemyNear, HitDefAttr = SCA, AT) && (EnemyNear, Time < 120)
trigger1 = StateType != A || P2StateType = A
trigger1 = ifElse(StateType = A, ((var(3) != [1, 2]) || StateNo = 5210), 1)
trigger1 = Random < (ifElse((P2StateNo = [200, 699]), 100, ifElse((P2StateNo = [1000,2999]), 333, 1000)) * (AILevel ** 2 / 64.0))

[State -1, Zero Counter]
type = ChangeState
value = 750
trigger1 = AILevel && NumEnemy
trigger1 = StateNo = 150 || StateNo = 152
trigger1 = RoundState = 2 && StateType != A
trigger1 = Power >= 1000 && var(20) <= 60
trigger1 = Random < (25 * (AILevel ** 2 / 64.0))
trigger1 = (P2BodyDist x = [0,50]) && (Life < 0.5 * LifeMax)

[State -1, Guarding var]
type = varset
triggerall = AIlevel && numenemy && roundstate=2
trigger1 = var(28)
var(28) = 0

[State -1, StopGuarding var]
type = varset
triggerall = AIlevel && numenemy && roundstate=2
trigger1 = Statetype = A
trigger2 = P2BodyDist X >= 110
trigger3 = (EnemyNear,p2dist x<8)
trigger4 = (stateno=[120,132]) && !(stateno=[150,155]) && (enemynear,time > 110) && (enemynear,vel x=0) && (enemynear,vel y=0)
trigger5 = Enemynear,time > 400
trigger6 = Life < 100
trigger6 = ((Enemynear,NumHelper || Enemynear, NumProj) || Enemynear,hitDefAttr=SCA,SA,HA,SP,HP) && InGuardDist
trigger7 = var(4) = 3 && Random < 300
trigger8 = var(4) = 3 && P2MoveType = A && Enemynear,time > 17 && P2Bodydist x < 50
trigger9 = var(59) = 3200
var(28) = 1
ignorehitpause = 1

[State -1, StopGuarding]
type = AssertSpecial
triggerall = AIlevel && numenemy && roundstate=2
trigger1 = var(28)
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard
ignorehitpause = 1

[State -1, StopGuarding]
type = ChangeState
triggerall = StateNo = [120,130]
trigger1 = var(28)
value = 140

[State -1, Guard]
type = ChangeState
value = 120
triggerall = AILevel && var(59)=0 && NumEnemy
triggerall = RoundState = 2 && InGuardDist && var(28) = 0
triggerall = (Ctrl || StateNo=100) && (StateNo != [120, 155]) && !var(20)
triggerall = !var(26) || P2BodyDist x >= 40
triggerall = !(EnemyNear, HitDefAttr = SCA, AT) && (EnemyNear, Time < 120)
triggerall = StateType != A || P2StateType = A
triggerall = ifElse(StateType = A, ((var(3) != [1, 2]) || StateNo = 5210), 1)
trigger1 = Random < (ifElse((P2StateNo = [200, 699]), 100, ifElse((P2StateNo = [1000,2999]), 333, 1000)) * (AILevel ** 2 / 64.0))
trigger2 = var(40) = 2 && Random < (900 * (AILevel ** 2 / 64.0))