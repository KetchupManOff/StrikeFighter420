; Constants and state file.

[Data]
life = 750
power = 3000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 0 ; HAH
sparkno = 2
guard.sparkno = s6220
KO.echo = 0
volumescale = 100
IntPersistIndex = 59
FloatPersistIndex = 40


[Size]
xscale = .8			;Horizontal scaling factor.
yscale = .8			;Vertical scaling factor.
ground.back = 15		;Player width (back, ground)
ground.front = 16		;Player width (front, ground)
air.back = 12		;Player width (back, air)
air.front = 12		;Player width (front, air)
height = 50			;Height of player (for opponent to jump over)
attack.dist = 160		;Default attack distance
proj.attack.dist = 90	;Default attack distance for projectiles
proj.doscale = 0		;Set to 1 to scale projectiles too   
head.pos = 0, -40	;Approximate position of head
mid.pos = 0, -20		;Approximate position of midsection
shadowoffset = 0		;Number of pixels to vertically offset the shadow
draw.offset = 0,0		;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 2		;Walk forward
walk.back = -2		;Walk backward
run.fwd  = 8, 0		;Run forward (x, y)
run.back = -6,-3	;Hop backward (x, y)
jump.neu = 0,-8.4		;Neutral jumping velocity (x, y)
jump.back = -2.55		;Jump back Speed (x, y)
jump.fwd = 2.5		;Jump forward Speed (x, y)
runjump.back = -2.55,-8.1;Running jump speeds (opt)
runjump.fwd = 4,-8.1	;.
airjump.neu = 0,-8	;.
airjump.back = -2.55	;Air jump speeds (opt)
airjump.fwd = 2.5		;.

[Movement]
airjump.num = 1		;Number of air jumps allowed (opt)
airjump.height = 40	;Minimum distance from ground before you can air jump (opt)
yaccel = .4		;Vertical acceleration
stand.friction = .85	;Friction coefficient when standing
crouch.friction = .82	;Friction coefficient when crouching

[Quotes]
victory0 = "Winner! \nI mean, erm....Jigglypuff!"
victory1 = "You're saying I spin too much? Spinning is SO much cooler than not spinning, dude!"
victory2 = "Getting sleepy already? I must be good at my job."
victory3 = "Would it be ironic if I said I was the one who popped you like a balloon?"

; Win with Porygon-Z (The oddest matchup in existience but hey)
victory4 = "Hee hee~ We're an unbeatable team!"
victory5 = "Hey, Porygon-Z! What'd you think of that?"
victory6 = "We win! Thanks for the match!"
victory7 = "You're terminated!"; fucker

; Vs. Porygon-Z
victory8 = "Thanks for the sparring match, Porygon-Z!"; (Neutral)
victory9 = "How's that? OWNED, SUCKAH!!!"; Jiggs, did you just steal one of Porygon-Z's own winquotes? (Perfect)
victory10 = "That was close...mind going easier next time, Porygon-Z?"; (Low Health)

; Vs. Jigglypuff
victory11 = "Hm? Hey, you dropped something! It's...a marker?"; animejokes.wav (Neutral)
victory12 = "Hey! Quit copying me! That's my job!"; (Mirror Match)

; Vs. Wigglytuff from Nintendo Land
victory14 = "If you really want to learn how to use Mimic that way, try sucking more."

;---------------------- Integer variable list ----------------------

; var(0):= 168 - Self-Destruct Schit 2: Electric Boogaloo, 1398 - Ster_, 3101 - Echoed Voice (yellow ring), 3102 - Echoed Voice (Pink ring)
; var(1):= -1 - Don't remove the following line. It's required by the CMD standard.
; var(3):= 800 - Throw - Attempt
; var(4):= 3000 - Frustration - Startup, 3005 - Frustration - Grounded Finish, 3010 - Frustration - Air Startup, 3015 - Frustration - Air Finish
; var(5):= 40 - Jump start, 45 - AirJump Start
; var(6):= 140 - Guard (end), -2 - States that are always executed (use statedef -2)
; var(7):= -2 - States that are always executed (use statedef -2)
; var(8):= 165 - Jigglypuff's best Team Rocket impression, 166 - ded, 5300 - Stun, -2 - States that are always executed (use statedef -2)
; var(9):= 3050 - Puff Up, 2510 - Arm Thrust (first punch), 2511 - Arm Thrust (second punch)
;var(10):= 1000 - Double Slap Light, 1010 - Double Slap Medium, 1020 - Double Slap Heavy, 1005 - Double Slap Light (Air), 1015 - Double Slap Medium (Air), 1025 - Double Slap Heavy (Air), 3000 - Frustration - Startup, 3010 - Frustration - Air Startup
;var(11):= 1100 - Gyro Ball Forwards, 1110 - Gyro Ball Diagonal, 1120 - Gyro Ball Upward, 1150 - Gyro Ball (Guard Cancel), 1200 - Rollout Light, 1210 - Rollout Medium, 1220 - Rollout Heavy, 1206 - Rollout Hit!, -2 - States that are always executed (use statedef -2)
;var(13):= 1100 - Gyro Ball Forwards, 1110 - Gyro Ball Diagonal, 1120 - Gyro Ball Upward, 1150 - Gyro Ball (Guard Cancel)
;var(14):= 1100 - Gyro Ball Forwards, 1110 - Gyro Ball Diagonal, 1120 - Gyro Ball Upward, 1150 - Gyro Ball (Guard Cancel), -2 - States that are always executed (use statedef -2)
;var(15):= -2 - States that are always executed (use statedef -2)
;var(16):= -2 - States that are always executed (use statedef -2)
;var(21):= -2 - States that are always executed (use statedef -2)
;var(38):= -2 - States that are always executed (use statedef -2)
;var(40):= 45 - AirJump Start, -2 - States that are always executed (use statedef -2)
;var(42):= -2 - States that are always executed (use statedef -2)
;var(43):= -2 - States that are always executed (use statedef -2)
;var(46):= -2 - States that are always executed (use statedef -2)
;var(50):= 3900 - Raging Demon, -2 - States that are always executed (use statedef -2)
;var(51):= -2 - States that are always executed (use statedef -2)
;var(52):= -2 - States that are always executed (use statedef -2), 2000 - Light Kung Fu Palm, 2001 - Medium Kung Fu Palm, 2002 - Heavy Kung Fu Palm, 2500 - Flamethrower (weak), 2501 - Flamethrower (medium), 2502 - Flamethrower (strong)
;var(53):= 1430 - Mimic Success (P1), 3900 - Raging Demon

;---------------------- Float variable list ----------------------

; fvar(0):= 160 - Smashy Bubbly Thingy (Standby), 162 - Smashy Bubbly Thingy (Dust), 168 - Self-Destruct Schit 2: Electric Boogaloo, 1398 - Ster_, 3101 - Echoed Voice (yellow ring), 3102 - Echoed Voice (Pink ring)
; fvar(1):= 168 - Self-Destruct Schit 2: Electric Boogaloo
; fvar(5):= 3100 - Echoed Voice - First Charge, 3110 - Echoed Voice - Second Charge, 3120 - Echoed Voice - Third Charge, 3900 - Raging Demon, -3
; fvar(6):= -2 - States that are always executed (use statedef -2)
; fvar(9):= 3050 - Puff Up
;fvar(10):= -3
;fvar(11):= 200 - Standing Light A, 201 - Standing Light B, 210 - Standing Medium, 220 - Standing Heavy, 400 - Crouching Light, 410 - Crouching Medium, 420 - Crouching Heavy, 600 - Jump Light Punch, 610 - Jump Medium, 620 - Jump Heavy, 700 - Launcher, 710 - OTG Attack, 720 - Meteor Smash, 750 - Dash Attack, 950 - Pound (hehe), 955 - Air Pound, 1000 - Double Slap Light, 1010 - Double Slap Medium, 1020 - Double Slap Heavy, 1005 - Double Slap Light (Air), 1015 - Double Slap Medium (Air), 1025 - Double Slap Heavy (Air), 1100 - Gyro Ball Forwards, 1110 - Gyro Ball Diagonal, 1120 - Gyro Ball Upward, 1150 - Gyro Ball (Guard Cancel), 1200 - Rollout Light, 1210 - Rollout Medium, 1220 - Rollout Heavy, 1300 - Rest, 3000 - Frustration - Startup, 3005 - Frustration - Grounded Finish, 3010 - Frustration - Air Startup, 3015 - Frustration - Air Finish, 3050 - Puff Up, 3100 - Echoed Voice - First Charge, 3110 - Echoed Voice - Second Charge, 3120 - Echoed Voice - Third Charge, -2 - States that are always executed (use statedef -2), 2000 - Light Kung Fu Palm, 2001 - Medium Kung Fu Palm, 2002 - Heavy Kung Fu Palm, 2510 - Arm Thrust (first punch), 2511 - Arm Thrust (second punch), 2512 - Arm Thrust (third punch)


;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = prevstateno = 20 && anim = 21
value = 5

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10
facep2 = ifelse(prevstateno=20,1,0)

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2] ;Stop moving if low velocity
type = VelSet
trigger1 = abs(vel x) < Const(movement.crouch.friction.threshold)
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S10,0
channel = 1

[State 10, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

[State 11, 2] ;Stop moving if low velocity
type = VelSet
trigger1 = abs(vel x) < Const(movement.crouch.friction.threshold)
x = 0

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S10,1
channel = 1

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 20
trigger1 = animelem = 6
trigger2 = anim = 21
trigger2 = animelem = 8
value = S20,0
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 20
trigger1 = animelem = 12
trigger2 = anim = 21
trigger2 = animelem = 14
value = S20,1
channel = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noautoturn
ignorehitpause = 1

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21


;-------------------------------------------------------------
;Jump start
[Statedef 40]
type = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
facep2 = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 40, longjump];ƒƒ“ƒOƒWƒƒƒ“ƒv
type = VarSet
triggerall = var(59) <= 0
trigger1 = command = "longjump"
trigger2 = prevstateno = 101 && command = "holdfwd"
var(5) = 1

[State 40, 4]
type = VarSet
trigger1 = var(59) <= 0
trigger1 = command = "holdfwd"
trigger2 = var(59) >= 1
trigger2 = p2Movetype = H || Random <= 500
sysvar(1) = 1

[State 40, 5]
type = VarSet
trigger1 = var(59) <= 0
trigger1 = command = "holdback"
trigger2 = var(59) >= 1
trigger2 = p2Movetype != H
sysvar(1) = -1

[State 40, 6]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
; AirJump Start
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0

[State 50, 3]
type = ChangeAnim
trigger1 = 1
value = 48

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0 && var(40) < 6
v = 40    ;fv =
value = 1

[State 40, 2]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, 2, -2))
[State 45, 6]
type = VelAdd
trigger1 = Time = 2
y = const(velocity.airjump.y)

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 55
ctrl = 0

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S40,0
channel = 1

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 0, VelAdd]
type = VelAdd
triggerall = vel x < 4 && vel x > -4
trigger1 = command = "holdfwd"
x = 0.1
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = vel x < 4 && vel x > -4
trigger1 = command = "holdback"
x = -0.1
ignorehitpause = 1

[State 50, 2]
type = VelSet
trigger1 = Time = 0 && Var(5)
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-5,6))
y = const(velocity.jump.y)

[State 50, 3]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = anim = [41,43]
trigger1 = vel y >= 0
value = anim+3

;---------------------------------------------------------------------------
; Air Jump Up
[Statedef 55]
type    = A
physics = N
ctrl = 0

[State -1, Guard]
Type = Changestate
Triggerall = Inguarddist && roundstate = 2
Triggerall = !var(59)
Triggerall = enemy, movetype = A
Trigger1 = command = "holdback"
value = 120

[State 0, VelAdd]
type = VelAdd
trigger1 = anim = 48
y = .4
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
trigger1 = anim = 49
y = .3
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S40,var(40)
channel = 1

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 0, VelAdd]
type = VelAdd
triggerall = vel x < 4
trigger1 = command = "holdfwd"
x = 0.1
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = vel x > -4
trigger1 = command = "holdback"
x = -0.1
ignorehitpause = 1

[State 50, 2]
type = VelSet
trigger1 = Time = 0 && Var(5)
x = IfElse(vel x = 0,0,IfElse(vel x < 0,-5,6))
y = const(velocity.airjump.y)

[State 50, 3]
type = ChangeAnim
trigger1 = Time = 0
value = 48

[State 50, 3]
type = ChangeAnim
triggerall = anim = 48
trigger1 = vel y >= 0
value = 49

[State 0, ChangeState]
type = ChangeState
triggerall = var(40) <= 4
trigger1 = command = "up" && anim = 49
value = 45
[State 0, ChangeState]
type = ChangeState
trigger1 = command = "x"
value = 600
[State 0, ChangeState]
type = ChangeState
trigger1 = command = "y"
value = 610
[State 0, ChangeState]
type = ChangeState
trigger1 = command = "z" && command != "holdfwd"
value = 620
[State 0, ChangeState]
type = ChangeState
trigger1 = command = "z" && command = "holdfwd"
value = 955
[State 0, ChangeState]
type = ChangeState
trigger1 = command = "c"
value = 720

[State 200, 5]
type = ChangeState
triggerall = vel y > 0
trigger1 = pos y >= 0
value = 52

;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type    = A
physics = A

[State 51, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
statetype = A
physics = S
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S52,ifelse(prevstateno = 1206,1,0)
channel = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6007
ID = 6007
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, ChangeAnim]
type = ChangeAnim
;triggerall = time = 0
trigger1 = time = 0;anim != 
value = 47
[State 0, ChangeAnim]
type = null;ChangeAnim
trigger1 = time = 0
value = 48

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 52, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 52, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Dash start
[Statedef 100]
type = S
movetype = I
physics = N
anim = 100
velset = 4.5,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nowalk
flag2 = noautoturn
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,0
ignorehitpause = 1

[State 100, 1]
type = ChangeState
trigger1 = Animelem = 3
value = 101

;Dash
[Statedef 101]
type = S
movetype = I;A
physics = N;N
ctrl = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animtime = 0
value = S20,0
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S20,1
channel = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nowalk
flag2 = noautoturn
ignorehitpause = 1

[State 100, dust]
type = Explod
trigger1 = time %6 = 0
anim = 8104
postype = p1
pos = -10,0
bindtime = 1
sprpriority = 2
ownpal = 1
scale = .7,1

[State 100, 1]
type = VelAdd
trigger1 = vel x < 9
x = .1

[State 101, 3]
type = ChangeState
triggerall = var(59) <= 0
trigger1 = command = "holdup"
value = 40

[State 100, 5.1]
type = ChangeState
triggerall = var(59) <= 0
trigger1 = command != "holdfwd"
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hop backwards
[Statedef 105]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S40,0
channel = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 100, dust]
type = Explod
trigger1 = AnimElem = 1
anim = 103
postype = p1
pos = 50,2
bindtime = 1
sprpriority = 2
facing = -1
ownpal = 1
scale = .25,.25

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; Hop backwards (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 47

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S52,0
channel = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6007
ID = 6007
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 106, 5]
type = ChangeState
trigger1 = Time = 7
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120+(var(6)*10000) + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; Stand guard (guarding)
[Statedef 130]
type    = S
physics = S

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 130+(var(6)*10000)

[State 130, Hi to Lo]
type = ChangeState
trigger1 = command = "holddown"
value = 131

[State 130, OH SHI-]
type = ChangeState
trigger1 = var(6) && fvar(6) <= 0
value = 165

[State 130, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist && !var(6)
value = 140

;---------------------------------------------------------------------------
; Crouch guard (guarding)
[Statedef 131]
type    = C
physics = C

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 131+(var(6)*10000)

[State 131, Lo to Hi]
type = ChangeState
trigger1 = command != "holddown"
value = 130

[State 131, OH SHI-]
type = ChangeState
trigger1 = var(6) && fvar(6) <= 0
value = 165

[State 131, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist && !var(6)
value = 140

;---------------------------------------------------------------------------
; Air guard (guarding)
[Statedef 132]
type    = A
physics = N

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 132+(var(6)*10000)

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
triggerall = !var(6)
trigger1 = sysvar(0)
value = 52
[State 132, 7]
type = ChangeState
triggerall = var(6)
trigger1 = sysvar(0)
value = 130

[State 132, OH SHI-]
type = ChangeState
trigger1 = var(6) && fvar(6) <= 0
value = 165

[State 132, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist && !var(6)
value = 140

;---------------------------------------------------------------------------
; Guard (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140+((anim=[10120,10159])*10000) + (statetype = C) + (statetype = A)*2

[State 0, VarSet]
type = VarSet
trigger1 = time > 0
v = 6    ;fv = 10
value = 0
ignorehitpause = 1

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; Stand guard hit (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 150+(var(6)*10000)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 0
value = anim
ignorehitpause = 1

[State 0, LifeAdd]
type = LifeSet
trigger1 = var(6)
value = var(7)
ignorehitpause = 1

[State 130, OH SHI-]
type = ChangeState
trigger1 = var(6) && fvar(6) <= 0
value = 165

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; Stand guard hit (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = (150+(10000*var(6)))

[State 0, LifeAdd]
type = LifeSet
trigger1 = var(6)
value = var(7)
ignorehitpause = 1

[State 130, OH SHI-]
type = ChangeState
trigger1 = var(6) && fvar(6) <= 0
value = 165

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 0, VelMul]
type = VelMul
triggerall = var(6)
trigger1 = time = 0
x = 1.5
ignorehitpause = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; Crouch guard hit (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 151+(var(6)*10000)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 0
value = anim
ignorehitpause = 1

[State 0, LifeAdd]
type = LifeSet
trigger1 = var(6)
value = var(7)
ignorehitpause = 1

[State 130, OH SHI-]
type = ChangeState
trigger1 = var(6) && fvar(6) <= 0
value = 165

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; Crouch guard hit (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = (151+(10000*var(6)))

[State 0, LifeAdd]
type = LifeSet
trigger1 = var(6)
value = var(7)
ignorehitpause = 1

[State 130, OH SHI-]
type = ChangeState
trigger1 = var(6) && fvar(6) <= 0
value = 165

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 0, VelMul]
type = VelMul
triggerall = var(6)
trigger1 = time = 0
x = 1.5
ignorehitpause = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; Air guard hit (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0


[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 152+(var(6)*10000)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 0
value = anim
ignorehitpause = 1

[State 0, LifeAdd]
type = LifeSet
trigger1 = var(6)
value = var(7)
ignorehitpause = 1

[State 130, OH SHI-]
type = ChangeState
trigger1 = var(6) && fvar(6) <= 0
value = 165

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; Air guard hit (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = (152+(10000*var(6)))

[State 0, LifeAdd]
type = LifeSet
trigger1 = var(6)
value = var(7)
ignorehitpause = 1

[State 130, OH SHI-]
type = ChangeState
trigger1 = var(6) && fvar(6) <= 0
value = 165

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 0, VelMul]
type = VelMul
triggerall = var(6)
trigger1 = time = 0
x = 1.5
y = 1.5
ignorehitpause = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52


;-------------------------------------------------------------------------------
; Smashy Bubbly Thingy (Standby)
[Statedef 160]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 5

[State 0, Helper]
type = Helper
triggerall = root, statetype != A
trigger1 = time %14 = 0
helpertype = normal ;player
name = "Dust"
ID = 162
stateno = 162
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1

[State 0, PalFXWiz]
type = PalFX
triggerall = anim = 160
triggerall = root,time = 1
trigger1 = (root,stateno = 150) || (root,stateno = 152) || (root,stateno = 154)
time = 3
add = 250,150,150
[State 0, PalFXWiz]
type = PalFX
triggerall = anim = 161
triggerall = root,time = 1
trigger1 = (root,stateno = 150) || (root,stateno = 152) || (root,stateno = 154)
time = 3
add = 150,150,250
[State 0, PalFXWiz]
type = PalFX
triggerall = anim = 162
triggerall = root,time = 1
trigger1 = (root,stateno = 150) || (root,stateno = 152) || (root,stateno = 154)
time = 3
add = 250,250,250

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = parent,ailevel = 0
trigger1 = teamside = 1
value = 160
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = parent,ailevel = 0
trigger1 = teamside = 2
value = 161
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = parent,ailevel > 0
value = 162
ignorehitpause = 1

[State 0, BindToRoot]
type = BindToRoot
;trigger1 = root, statetype = S
trigger1 = root, anim = 10120
trigger2 = root, anim = 10130
trigger3 = root, anim = 10140
trigger4 = root, anim = 10150
time = 1
facing = 0
pos = 0,-26
ignorehitpause = 1
[State 0, BindToRoot]
type = BindToRoot
;trigger1 = root, statetype = C
trigger1 = root, anim = 10121
trigger2 = root, anim = 10131
trigger3 = root, anim = 10141
trigger4 = root, anim = 10151
time = 1
facing = 0
pos = 0,-13
ignorehitpause = 1
[State 0, BindToRoot]
type = BindToRoot
;trigger1 = root, statetype = A
trigger1 = root, anim = 10122
trigger2 = root, anim = 10132
trigger3 = root, anim = 10142
trigger4 = root, anim = 10152
time = 1
facing = 0
pos = 0,-40
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
fv = 0    ;fv = 10
value = root,fvar(6)
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S160,0
channel = 1
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 0
scale = .75*fvar(0),.75*fvar(0)
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = root, var(6) = 0
trigger2 = root,stateno = [5000,5300]
trigger3 = root,anim != [10120,10159]
value = 161
ctrl = 0
ignorehitpause = 1

;-------------------------------------------------------------------------------
; Smashy Bubbly Thingy (Exit)
[Statedef 161]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 5
anim = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = root, stateno != [5000,5999]
value = S160,1
channel = 1
persistent = 0
ignorehitpause = 1

[state 120]
type = destroyself
trigger1 = time = 1

;-------------------------------------------------------------------------------
; Smashy Bubbly Thingy (Dust)
[Statedef 162]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 9999
sprpriority = 5

[State 0, VarSet]
type = VarSet
trigger1 = 1
fv = 0    ;fv = 10
value = root,fvar(6)
ignorehitpause = 1

[State 0, BindToRoot]
type = BindToRoot
;trigger1 = root, statetype = S
trigger1 = 1
time = 1
facing = 0
pos = 0,0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6007
ID = 6007
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = (0.25*fvar(0)),(0.25*fvar(0))
sprpriority = -2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6010
ID = 6010
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = (0.25*fvar(0)),(0.25*fvar(0))
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time
ignorehitpause = 1

;---------------------------------------------------------------------------
; Jigglypuff's best Team Rocket impression
[Statedef 165]
type = A
movetype = H
physics = N
velset = 0,0
anim = 165
sprpriority = 0
ctrl = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokosnd
flag2 = nokoslow
ignorehitpause = 1

[State 0, StunVar]
type = VarSet
trigger1 = 1
v = 8    ;fv = 10
value = 1
ignorehitpause = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 10
x = 0
y = -36

[State 0, StunVar]
type = null;VarSet
trigger1 = 1
v = 8    ;fv = 10
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S161,0
channel = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0 
anim = 6208
ID = 165
pos = 10,-26
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 8
scale = 2,2
sprpriority = 10
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Pause]
type = Pause
trigger1 = time <= 6
time = 1
movetime = 1
pausebg = 0
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time <= 6
value = SCA
time = 1
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time > 10
value = 36*time-10
ignorehitpause = 1

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= Const(movement.air.gethit.groundlevel)
value = 5100 ;Downed get-hit (hit ground from fall)

[State 0, ChangeState]
type = ChangeState
trigger1 = screenpos y <= -100
value = 166
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; ded
[Statedef 166]
type = S
movetype = H
physics = N
velset = 0,0
anim = 9999
sprpriority = 0
ctrl = 0

[State 0, Helper]
type = Helper
trigger1 = numhelper(166) = 0
name = "BOOM"
ID = 166
stateno = 167
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokosnd
flag2 = nokoslow
ignorehitpause = 1

[State 0, StunVar]
type = VarSet
trigger1 = 1
v = 8    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = time = 1
value = S11,1
volumescale = 150
channel = 0
ignorehitpause = 1

[State 0, LifeSet]
type = LifeSet
trigger1 = time >= 1
value = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = time = 90
y = 99999999
ignorehitpause = 1

[State 0, ChangeState]
type = SelfState
trigger1 = time = 90
value = 5150
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Self-Destruct Schit
[Statedef 167]
type = S
movetype = I
physics = N
velset = 0,0
sprpriority = 10
ctrl = 0

[State 0, Helper]
type = Helper
triggerall = time < 20
trigger1 = time %3 = 0
name = "twinkly"
ID = 168
stateno = 168
pos = -25+random%50,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = time < 30
trigger1 = time %4 = 0
anim = 1613
ID = 1613
pos = -30+random%60,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,12
accel = 0,0
random = 0,0
removetime = 30
pausemovetime = 0
scale = 1.5,1.5
sprpriority = 15
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, BindToRoot]
type = BindToParent
trigger1 = time = 0
time = 1
pos = 0,0
ignorehitpause = 1

[State 0, AngleSet]
type = AngleDraw
trigger1 = 1
value = 180
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = time = 0
triggerall = parent,ailevel = 0
trigger1 = parent,teamside = 1
value = 1610
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = time = 0
triggerall = parent,ailevel = 0
trigger1 = parent,teamside = 2
value = 1611
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = time = 0
trigger1 = parent,ailevel > 0
value = 1612
ignorehitpause = 1

[state 1900, shake]
type = envshake
trigger1 = time = 0
time = 30
freq = 180
ampl = -7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S161,1
volumescale = 180
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time > 34 && root, stateno != 166
ignorehitpause = 1

;---------------------------------------------------------------------------
; Self-Destruct Schit 2: Electric Boogaloo
[Statedef 168]
type = S
movetype = I
physics = N
velset = 0,10+random%8
anim = 1614
sprpriority = 8
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = time < 16
fv = 0    ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = time < 16
fv = 1    ;fv = 10
value = 1
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
triggerall = fvar(0) > 0
trigger1 = time >= 16
trigger2 = time >= 32
trigger3 = time >= 48
trigger4 = time >= 64
trigger5 = time >= 80
fv = 0     ;fv = 
value = -.01
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
triggerall = fvar(1) > 0
trigger1 = time >= 16
trigger2 = time >= 32
trigger3 = time >= 48
trigger4 = time >= 64
trigger5 = time >= 80
fv = 1     ;fv = 
value = -.02
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 0    ;fv = 10
value = -180+random%270
ignorehitpause = 1

[State 0, AngleSet]
type = AngleDraw
trigger1 = 1
value = var(0)
scale = fvar(0),fvar(1)
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = 1
y = .95

[State 0, DestroySelf]
type = DestroySelf
triggerall = time > 0
trigger1 = fvar(0) <= 0
trigger2 = fvar(1) <= 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1300,1
channel = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
triggerall = matchover = 1
trigger1 = prevstateno != 3920
value = 182
[State 180, 1]
type = ChangeState
trigger1 = prevstateno != 3920
value = 181

;---------------------------------------------------------------------------
; Win pose 1
; CNS difficulty: basic
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1300,1
channel = 0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S200,0
channel = 0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S10,0
channel = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S0,0
channel = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 200
flag = roundnotover
ignorehitpause = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 1
; CNS difficulty: basic
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S10,0
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 181
trigger1 = animelem = 3
value = S10,1
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 181
trigger1 = animelem = 4
value = S0,2
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 181
trigger1 = animelem = 4
value = S40,0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 181
trigger1 = animelem = 3
value = S195,0
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 182
trigger1 = animelemtime(1) = 1
value = S52,0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 182
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = anim = 181
trigger1 = animelem = 4
y = -6
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = anim = 181
trigger1 = animelemtime(4) >= 0
y = .45
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = anim = 182
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = anim = 182
y = 0
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 200
flag = roundnotover
ignorehitpause = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = time = 0
value = 191+random%2

;---------------------------------------------------------------------------
; Rest Intro
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 6
trigger3 = animelem = 10
value = S190,0
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 15
value = S1300,1
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 19
trigger2 = animelem = 23
value = S1301,1
channel = 1
ignorehitpause = 1

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Rollout Intro
[Statedef 192]
type = S
ctrl = 0
anim = 192
velset = 0,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = roundstate = 0
value = 192
ignorehitpause = 1

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, Helper]
type = Helper
triggerall = numhelper(193) = 0
trigger1 = roundstate = 1
helpertype = normal ;player
name = "rolling in"
ID = 193
stateno = 193
pos = 300,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = anim = 192 && animtime = 0
value = 0

;---------------------------------------------------------------------------
; Rollout Intro (helper)
[Statedef 193]
type = S
physics = N
ctrl = 0
anim = 191
velset = 0,0
sprpriority = 40

[State 0, SprPriority]
type = SprPriority
trigger1 = animelem = 3
value = 2
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 0    ;fv = 10
value = 28
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
triggerall = var(0) > -28
trigger1 = animelemtime(3) >= 0
v = 0    ;fv = 
value = -3
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 1
x = -9
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 4
length = 20
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 220,120,120
paladd = 200,200,200
palmul = .7,.5,.6
timegap = 1
framegap = 4
trans = add
[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = time
time = 4
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1200,2
channel = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time % 9 = 1
trigger1 = time = [1,42]
value = S1201,2
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S191,0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 64
value = var(11)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 11    ;fv = 10
value = -90

[State 0, VarSet]
type = VarAdd
trigger1 = time > 0
v = 11    ;fv = 10
value = var(0)

[State 0, VelAdd]
type = VelAdd
triggerall = vel x < 6
trigger1 = animelemtime(3) >= 0
x = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 64
value = 194
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Rollout Intro (helper)
[Statedef 194]
type = S
physics = N
ctrl = 0
anim = 1205
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = .82
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S10,0
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S10,1
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S0,2
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S195,0
channel = 0
ignorehitpause = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light A
; CNS difficulty: easy
[Statedef 200]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 0;1				;Number of air juggle points move takes
;Commonly-used controllers:
velset = ifelse((prevstateno=[100,101]),(vel x),0),0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 200				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.98
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 6
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animtime = 0
x = -12
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, NA			;Attribute: Standing, Normal Attack
damage = ceil(20*fvar(11)), 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = M			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 4, 6			;Time attacker pauses, time opponent shakes
sparkno = S6200				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -23		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 0			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 0+1*(var(42))
ground.velocity = -4		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
triggerall = random < 500
trigger1 = time = 0
value = S200,3
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,0
channel = 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
movetype = I        ;I,A,H
ignorehitpause = 1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Light B
; CNS difficulty: easy
[Statedef 201]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 0;1				;Number of air juggle points move takes
;Commonly-used controllers:
;velset = ifelse((prevstateno=[100,101]),(vel x),0),0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.98
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim = 200
trigger1 = animelemtime(5) >= 0
value = 201
elem = 1
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim = 200
trigger1 = animelemtime(5) < 0
trigger1 = animelemtime(4) >= 0
value = 201
elem = 2
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim = 200
trigger1 = animelemtime(4) < 0
value = 201
elem = 3
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
triggerall = anim = 201
trigger1 = animelem = 4
trigger2 = animelem = 5
x = 3
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
triggerall = anim = 201
trigger1 = animelem = 7
trigger2 = animelem = 8
trigger3 = animtime = 0
x = -6
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = anim = 201
trigger1 = animelem = 5
attr = S, NA			;Attribute: Standing, Normal Attack
damage = ceil(20*fvar(11)), 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = M			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 4, 6			;Time attacker pauses, time opponent shakes
sparkno = S6200				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -23		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 0			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 0+1*(var(42))
ground.velocity = -4		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
triggerall = random < 250
trigger1 = time = 0
value = S200,3
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 201
trigger1 = animelem = 4
value = S0,1
channel = 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 201
trigger1 = animelem = 6
movetype = I        ;I,A,H
ignorehitpause = 1

[State 200, 5]
type = ChangeState
trigger1 = anim = 201
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Medium
; CNS difficulty: easy
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 0;4
poweradd= 20
ctrl = 0
velset = ifelse((prevstateno=[100,101]),(vel x),0),0
anim = 210
sprpriority = -1

[State 0, SprPriority]
type = SprPriority
trigger1 = animelemtime(5) < 0
value = -1
ignorehitpause = 1
[State 0, SprPriority]
type = SprPriority
trigger1 = animelemtime(5) >= 0
value = 2
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.95
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = time = 0 
trigger1 = prevstateno = 200 || prevstateno = 201
trigger2 = prevstateno = 400
x = 2.5
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 4
x = 10
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 22
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 5
x = -10
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = -4
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = -20
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 8
x = -8
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = Medium
priority = 3,Hit
damage = ceil(30*fvar(11)),0
pausetime = 6,8
sparkno = S6201
guard.sparkno = s6220
sparkxy = 20,-10
hitsound = S5,4
guardsound = S6,0
ground.type = Low
air.type = Low
ground.slidetime = 18+1*(var(42))
guard.slidetime = 19
ground.hittime = 18+1*(var(42))
guard.hittime = 19
air.hittime = 18
air.fall = 0+1*(var(42))
ground.velocity = -5,0
air.velocity = -5,-2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
triggerall = random < 500
trigger1 = time = 0
value = S200,2
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1
channel = 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
movetype = I        ;I,A,H
ignorehitpause = 1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Standing Heavy
; CNS difficulty: easy
[Statedef 220]
type    = S
movetype= A
physics = N
juggle  = 0;5
poweradd= 30
ctrl = 0
velset = 0,0
anim = 220

[State 0, ScreenBound]
type = ScreenBound
triggerall = animelemtime(6) < 0
trigger1 = prevstateno != 200 
trigger1 = prevstateno != 201
trigger1 = prevstateno != 400
trigger1 = prevstateno != 210
trigger1 = prevstateno != 410
value = 0
movecamera = 1,1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
triggerall = animelemtime(6) < 0
trigger1 = prevstateno != 200 
trigger1 = prevstateno != 201
trigger1 = prevstateno != 400
trigger1 = prevstateno != 210
trigger1 = prevstateno != 410
value = 0
ignorehitpause = 1

[State 0, HitBy]
type = HitBy
triggerall = animelemtime(6) < 0
trigger1 = prevstateno != 200 
trigger1 = prevstateno != 201
trigger1 = prevstateno != 400
trigger1 = prevstateno != 210
trigger1 = prevstateno != 410
value = SCA,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(7) >= 0
x = .9
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = -22
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = -10
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 5
x = 16
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = 14
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = 2
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 6
x = 6
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 7
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Heavy
priority = 3,Hit
damage = ceil(50*fvar(11)),0
pausetime = 8,9
sparkno = S6202
guard.sparkno = s6220
sparkxy = 25,-16
hitsound = S5,5
guardsound = S6,0
ground.type = Low
air.type = Low
ground.slidetime = 24+1*(var(42))
guard.slidetime = 25
ground.hittime = 24+1*(var(42))
guard.hittime = 25
air.hittime = 25
air.fall = 1
ground.velocity = -8,0
air.velocity = -8,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = prevstateno != 200 
trigger1 = prevstateno != 201
trigger1 = prevstateno != 400
trigger1 = prevstateno != 210
trigger1 = prevstateno != 410
value = S220,0
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = animelem = 6
value = S200,4
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S0,3
channel = 1
ignorehitpause = 1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Crouching Light
; CNS difficulty: easy
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 0;5
poweradd= 20
ctrl = 0
anim = 400

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.98
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = time = 0 
trigger1 = prevstateno = 200 || prevstateno = 201
x = 3
ignorehitpause = 1

[State 400, hit]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = Light
priority = 3,Hit
damage = ceil(25*fvar(11)),0
pausetime = 5,8
sparkno = S6200
guard.sparkno = s6220
sparkxy = 0,-10
hitsound = S5,3
guardsound = S6,0
ground.type = Low
air.type = Low
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 0+1*(var(42))
ground.velocity = -4,0
air.velocity = -4,-2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
triggerall = random < 500
trigger1 = time = 0
value = S200,1
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,0
channel = 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
movetype = I        ;I,A,H
ignorehitpause = 1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
; Crouching Medium
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 0;5
poweradd= 20
ctrl = 0
anim = 410

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.95
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = time = 0 
trigger1 = prevstateno = 200 || prevstateno = 201
trigger2 = prevstateno = 400
x = 2.5
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 4
x = 6
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 10
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = -7
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = -13
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animtime = 0
x = -2
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
hitflag = MAF
guardflag = L
animtype = Medium
air.animtype = Medium
priority = 3,Hit
damage = ceil(30*fvar(11)),0
pausetime = 6,8
sparkno = S6201
guard.sparkno = s6220
sparkxy = 15,-5
hitsound = S5,4
guardsound = S6,0
ground.type = Low
air.type = Low
ground.slidetime = 15+1*(var(42))
guard.slidetime = 16
ground.hittime = 15+1*(var(42))
guard.hittime = 16
air.hittime = 15
air.fall = 0+1*(var(42))
ground.velocity = -6,0
air.velocity = -6,-2
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
triggerall = random < 500
trigger1 = time = 0
value = S200,2
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1
channel = 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 6
movetype = I        ;I,A,H
ignorehitpause = 1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Heavy
[Statedef 420]; blaze it
type    = C
movetype= A
physics = C
juggle  = 0;6
poweradd= 30
ctrl = 0
anim = 420

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 4
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 20
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 18
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 5
x = -2
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 6
trigger2 = animelem = 7
x = -3
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S0,2
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = animelem = 3
value = S200,3
channel = 0
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
hitflag = MAF
guardflag = L
animtype = Heavy
air.animtype = Heavy
priority = 3,Hit
damage = ceil(50*fvar(11)),0
pausetime = 8,9
sparkno = S6202
guard.sparkno = s6220
sparkxy = 30,-6
hitsound = S5,5
guardsound = S6,0
ground.type = Low
air.type = trip
ground.slidetime = 20+1*(var(42))
guard.slidetime = 21
ground.hittime = 20+1*(var(42))
guard.hittime = 21
air.hittime = 15
air.fall = 1
ground.velocity = -8,0
air.velocity = -2,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
movetype = I        ;I,A,H
ignorehitpause = 1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 0;2
poweradd= 20
ctrl = 0
anim = 600

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.98
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
triggerall = vel x < 4 && vel x > -4
trigger1 = command = "holdfwd"
x = 0.1
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = vel x < 4 && vel x > -4
trigger1 = command = "holdback"
x = -0.1
ignorehitpause = 1

[State 600, hit]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = Light
priority = 3,Hit
damage = ceil(25*fvar(11)),0
pausetime = 4,6
sparkno = S6200
guard.sparkno = s6220
sparkxy = 0,-40
hitsound = S5,0
guardsound = S6,0
ground.type = Low
air.type = Low
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 0+1*(var(42))
ground.velocity = -3,0
air.velocity = -4,-3.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
triggerall = random < 500
trigger1 = time = 0
value = S200,0
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,0
channel = 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
movetype = I        ;I,A,H
ignorehitpause = 1
;---------------------------------------------------------------------------
; Jump Medium
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 0;3
poweradd= 20
ctrl = 0
anim = 610

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.95
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = time = 0 && p2statetype = A
trigger1 = prevstateno = 600
x = 2
y = -4
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
triggerall = prevstateno != 600
triggerall = vel x < 4 && vel x > -4
trigger1 = command = "holdfwd"
x = 0.1
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = prevstateno != 600
triggerall = vel x < 4 && vel x > -4
trigger1 = command = "holdback"
x = -0.1
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = movecontact = 0
trigger1 = animelem = 3
attr = S, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = Medium
priority = 3,Hit
damage = ceil(30*fvar(11)),0
pausetime = 6,8
sparkno = S6201
guard.sparkno = s6220
sparkxy = 0,-30
hitsound = S5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 15+1*(var(42))
guard.slidetime = 16
ground.hittime = 15+1*(var(42))
guard.hittime = 16
air.hittime = 15
air.fall = 0+1*(var(42))
ground.velocity = -3,0
air.velocity = -5,-3.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
triggerall = movecontact = 0
trigger1 = animelem = 4
attr = S, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = Medium
priority = 3,Hit
damage = ceil(20*fvar(11)),0
pausetime = 4,6
sparkno = S6201
guard.sparkno = s6220
sparkxy = 0,-30
hitsound = S5,3
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 0+1*(var(42))
ground.velocity = -3,0
air.velocity = -4,-3.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
triggerall = random < 500
trigger1 = animelem = 2
value = S200,2+(random%2)
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1
channel = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Jump Heavy
; CNS difficulty: easy
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 0;4
poweradd= 30
ctrl = 0
anim = 620

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = time = 0 && p2statetype = A
trigger1 = prevstateno = 600
trigger2 = prevstateno = 610
x = 3.5
y = -4
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
triggerall = prevstateno != [600,610]
triggerall = vel x < 4 && vel x > -4
trigger1 = command = "holdfwd"
x = 0.1
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = prevstateno != [600,610]
triggerall = vel x < 4 && vel x > -4
trigger1 = command = "holdback"
x = -0.1
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = movecontact = 0
trigger1 = animelem = 5
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = Heavy
priority = 3,Hit
damage = ceil(55*fvar(11)),0
pausetime = 10,11
sparkno = S6202
guard.sparkno = s6220
sparkxy = 25,-16
hitsound = S5,5
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 25+1*(var(42))
guard.slidetime = 26
ground.hittime = 25+1*(var(42))
guard.hittime = 26
air.hittime = 25
air.fall = 1
ground.velocity = -3,0
air.velocity = -3,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
triggerall = movecontact = 0
trigger1 = animelem = 6
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = Heavy
priority = 3,Hit
damage = ceil(38*fvar(11)),0
pausetime = 7,8
sparkno = S6201
guard.sparkno = s6220
sparkxy = 25,-16
hitsound = S5,4
guardsound = S6,0
ground.type = High
air.type = Low
ground.slidetime = 18+1*(var(42))
guard.slidetime = 19
ground.hittime = 18+1*(var(42))
guard.hittime = 19
air.hittime = 15
air.fall = 1
ground.velocity = -3,0
air.velocity = -3,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
triggerall = random < 500
trigger1 = animelem = 4
value = S200,1
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S0,3
channel = 1
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
movetype = I        ;I,A,H
ignorehitpause = 1
;---------------------------------------------------------------------------
; Launcher
[Statedef 700]
type    = S
movetype= A
physics = S
juggle  = 0;3
poweradd= 30
ctrl = 0
velset = ifelse(prevstateno=100,(vel x),0),0
anim = 700

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = animelem = 4
trigger1 = prevstateno = 200 || prevstateno = 201
trigger2 = prevstateno = 400
trigger3 = prevstateno = 210
trigger4 = prevstateno = 410
trigger5 = prevstateno = 220
trigger6 = prevstateno = 420
x = 6
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S0,2
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = animelem = 4
value = S200,4
channel = 0
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Up
air.animtype = DiagUp
priority = 5,Hit
damage = ceil(50*fvar(11)),0
pausetime = 8,8
sparkno = S6202
guard.sparkno = s6220
sparkxy = 20,-40
hitsound = S5,5
guardsound = S6,0
ground.type = low
air.type = Low
ground.slidetime = 20+2*(var(42))
guard.slidetime = 22
ground.hittime = 20+2*(var(42))
guard.hittime = 22
air.hittime = 20
ground.velocity = -1,-10
air.velocity = -4,-4
yaccel = .5
guard.velocity = -8
fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 420, jump]
type = ChangeState
trigger1 = movecontact && Command = "holdup"
trigger1 = moveguarded = 0
value = 40
ctrl = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 8
movetype = I        ;I,A,H
ignorehitpause = 1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; OTG Attack
[Statedef 710]
type    = S
movetype= A
physics = C
juggle  = 0;5
poweradd= 20
ctrl = 0
anim = 710

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = time = 0 
trigger1 = prevstateno = 200
trigger2 = prevstateno = 400
trigger3 = prevstateno = 210
trigger4 = prevstateno = 410
trigger5 = prevstateno = 220
trigger6 = prevstateno = 420
x = 6
ignorehitpause = 1

[State 50,line1]
type = Explod
trigger1 = animelem = 4
anim = 6010
postype = p1
pos = 0, 0
ownpal = 1
bindtime = 1
sprpriority = 5
scale = .75,1
[State 50,line1]
type = Explod
trigger1 = animelem = 4
anim = 6007
postype = p1
facing = -1
pos = 0, 0
ownpal = 1
bindtime = 1
sprpriority = -5
scale = .5,.5

[State 910, hit]
type = HitDef
trigger1 = !time
attr = S, NA
hitflag = MAFD
guardflag = L
animtype = Heavy
air.animtype = Back
fall.animtype = Back
priority = 5,Hit
damage = ceil(50*fvar(11)),0
pausetime = 5,8
sparkno = S6202
guard.sparkno = s6220
sparkxy = 0,0
hitsound = S5,5
guardsound = S6,0
ground.type = Trip
air.type = Trip
ground.slidetime = 30+2*(var(42))
guard.slidetime = 32
ground.hittime = 30+2*(var(42))
guard.hittime = 32
air.hittime = 20
ground.velocity = -6,-1
air.velocity = -6,-1
down.velocity = -1,-5
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
forcestand = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S0,2
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = animelem = 4
value = S200,1
channel = 0
ignorehitpause = 1

[State 0, Recovery]
type = StateTypeSet
trigger1 = animelem = 7
movetype = I        ;I,A,H
ignorehitpause = 1

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Meteor Smash
[Statedef 720]
type    = A
movetype= A
physics = A
juggle  = 0;5
poweradd= 30
ctrl = 0
anim = 720

[State 0, VarSet]
type = VarSet
triggerall = animelemtime(12) < 0
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.98
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = animelemtime(12) >= 0
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.95
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = time = 0 && p2statetype = A 
trigger1 = prevstateno = 600
trigger2 = prevstateno = 610
trigger3 = prevstateno = 620
x = 5
y = -5
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
triggerall = prevstateno != [600,620]
triggerall = vel x < 4 && vel x > -4
trigger1 = command = "holdfwd"
x = 0.1
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = prevstateno != [600,610]
triggerall = vel x < 4 && vel x > -4
trigger1 = command = "holdback"
x = -0.1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
triggerall = random < 500
trigger1 = animelem = 3
value = S200,1
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 8
trigger4 = animelem = 10
value = S0,2
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 12
value = S0,3
channel = 1
ignorehitpause = 1

[State 600, hit]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
trigger3 = AnimElem = 8
trigger4 = AnimElem = 10
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Hard
air.animtype = Hard
priority = 5,Hit
damage = ceil(8*fvar(11)),0
pausetime = 4,4
sparkno = S6200
guard.sparkno = s6220
sparkxy = 0,30
hitsound = S5,4
guardsound = S6,0
ground.type = Low
air.type = Low
ground.slidetime = 18
guard.slidetime = 18
ground.hittime = 18
guard.hittime = 18
air.hittime = 18
air.fall = 1
ground.velocity = -2,0
air.velocity = -2,0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 620, hit]
type = HitDef
trigger1 = AnimElem = 12
id = 720
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Hard
air.animtype = Hard
priority = 5,Hit
damage = ceil(20*fvar(11))
pausetime = 5,5
sparkno = S6201
guard.sparkno = s6220
sparkxy = 0,30
hitsound = S5,5
guardsound = S6,0
ground.type = Low
air.type = Low
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -5
air.velocity = -5,8
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 13
movetype = I        ;I,A,H
ignorehitpause = 1

;----------------------------------------------------------------------
;Groundbounce'd -Sent Flying
[Statedef 725]
type = A
movetype = H
physics = N

[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = time = 0
value = ifelse(selfanimexist(5061),5061,5050)
ignorehitpause = 1
[State 0, ChangeAnim2]
type = ChangeAnim
trigger1 = time = 0
value = anim
elem = animelemno(99)
ignorehitpause = 1

[State 0, HitVelSet]
type = HitVelSet
trigger1 = time = 0
x = 1
y = 1
ignorehitpause = 1
[State 0, HitFallSet]
type = HitFallSet
trigger1 = time = 0
value = 1
[State 0, PosFreeze]
type = PosFreeze
trigger1 = !hitshakeover
value = 1
ignorehitpause = 1

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = hitshakeover
y = gethitvar(yaccel)

[State 821, 4] ;Hit ground
type = ChangeState
Trigger1 = hitshakeover
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 20
value = 726 ;Hit ground

;----------------------------------------------------------------------
;Groundbounce'd -Slam into ground
[Statedef 726]
type = A
movetype = H
physics = N

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 8]
type = Explod
trigger1 = Time = 1
anim = F60
pos = 0, 0
sprpriority = -2
supermovetime = 65535
pausemovetime = 65535
scale = 0.5,3
[State 5100, 8]
type = Explod
trigger1 = Time = 1
anim = F61
pos = 0, 0
sprpriority = -2
supermovetime = 65535
pausemovetime = 65535
scale = 1,2
[State 5100, 8]
type = Explod
trigger1 = Time = 1
anim = F62
pos = 0, 0
sprpriority = -2
supermovetime = 65535
pausemovetime = 65535
scale = 2,2

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, 2

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 727

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; Groundbounce'd -Bounce into air
[Statedef 727]
type    = A
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160
[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = VelSet
trigger1 = Time = 0
x = -2
y = -8
[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = gethitvar(yaccel)

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 20
type = SelfState
value = 5110

;----------------------------
;Dash Attack
[Statedef 750]
type = S
movetype= A
physics = S
juggle  = 0;4
velset = ifelse(prevstateno=101,(vel x),0),0             
ctrl = 0                   
anim = 750        
poweradd = 30

[State 100, dust]
type = Explod
trigger1 = AnimElem = 2
anim = 103
postype = p1
pos = -25,2
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .25,.25
[State 100, dust]
type = Explod
trigger1 = AnimElem = 16
anim = 6010
postype = p1
pos = 5,0
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .5,1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,2
channel = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = animelem = 2
value = S200,1
channel = 0
ignorehitpause = 1

[State 920, velset]
type = Velset
trigger1 = AnimElem = 2
x = 6

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(15) >= 0
x = .9
ignorehitpause = 1

[State 920, hit]
type = HitDef
trigger1 = animelem = 2
id = 750
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = Heavy
fall.animtype = diagUp
priority = 5,Hit
damage = ceil(50*fvar(11)),0
pausetime = 10,10
sparkno = S6202
guard.sparkno = s6220
sparkxy = 20,-20
hitsound = S5,2
guardsound = S6,0
ground.type = low
air.type = Low
ground.slidetime = 18+1*(var(42))
guard.slidetime = 19
ground.hittime = 18+1*(var(42))
guard.hittime = 19
air.hittime = 18
ground.velocity = -5,-5
air.velocity = -5,-5
fall = 1
fall.recover = 0
yaccel = .5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, Wallbounce]
type = TargetState
triggerall = numtarget(750)
triggerall = target(750), stateno != [751,757]
trigger1 = movehit && var(15) = 0
trigger1 = var(42)
value = 751
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 14
movetype = I
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 16
statetype = S       ;S,A,C,L
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2
statetype = A       ;S,A,C,L
physics = N
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 16
value = S100,0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
ignorehitpause = 1

;------------------
; Wallbounce'd - shaking from the hit
; (a custom gethit state)
; See State 750 for details
[Statedef 751]
type    = A
movetype= H
physics = N
velset = 0,0

[State 751, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 751

[State 751, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 752

;------------------
; Wallbounce'd - flying through the air
; (a custom gethit state)
[Statedef 752]
type    = A
movetype= H
physics = N

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = selfanimexist(5900) = 1
trigger1 = anim != 5900
value = 5900
ignorehitpause = 1

[State 752, Velocity]
type = VelSet
trigger1 = Time = 0
x = -8
y = -2

[State 752, No scroll]
type = ScreenBound
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 752, Hit wall]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 753

;------------------
; Wallbounce'd - hit wall
; (a custom gethit state)
[Statedef 753]
type    = A
movetype= H
physics = N

[State 753, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 753, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 753, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 753, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 753, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 753, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 753

[State 753, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 753, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 754

;------------------
; Wallbounce'd - bounce off wall
; (a custom gethit state)
[Statedef 754]
type    = A
movetype= H
physics = N

[State 754, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 754, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 754, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 754, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 754, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 754, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 754, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 754, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 754, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Wallstuck - shaking from the hit
; (a custom gethit state)
; See State 750 for details
[Statedef 755]
type    = A
movetype= H
physics = N
velset = 0,0

[State 751, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 751

[State 751, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 756

;------------------
; Wallstuck - flying through the air
; (a custom gethit state)
[Statedef 756]
type    = A
movetype= H
physics = N

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = selfanimexist(5900) = 1
trigger1 = anim != 5900
value = 5900
ignorehitpause = 1

[State 752, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 752, No scroll]
type = ScreenBound
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 752, Hit wall]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 757

;------------------
; Wallstuck - stick to wall
; (a custom gethit state)
[Statedef 757]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = -999
ignorehitpause = 1

[State 753, Pos]
type = null;PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 753, Stop moving]
type = PosFreeze
trigger1 = time = 0
x = 1
y = 1

[State 753, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 753, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 753, Anim]
type = ChangeAnim
trigger1 = selfanimexist(5051) = 1
value = 5051
[State 753, Anim]
type = ChangeAnim2
trigger1 = selfanimexist(5051) = 0
value = 5051

[State 753, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 0, VelAdd]
type = VelAdd
trigger1 = time >= 20
y = .2
ignorehitpause = 1

[State 0, SelfState]
type = SelfState
trigger1 = pos y >= -const(size.mid.pos.y)
trigger1 = vel y > 0
value = 5110
ignorehitpause = 1

;---------------------------------------------------------------------------
; Throw - Attempt
; CNS difficulty: medium-advanced
; Description: Throws are not difficult to make, although then can be
;     tedious at times. Throw attempt states have a HitDef of a
;     special format. The key parameters in a throw are p1stateno
;     and p2stateno. If the HitDef successfully connects, then
;     the attacker will change to the state number specified by
;     p1stateno, and the opponent will be change to the state
;     number assigned to p2stateno. The special thing about p2stateno
;     is that the opponent will be temporarily brought into the
;     attacker's state file. In this case, no matter who the
;     opponent is, he will be taken to state 820 of this file (kfm.cns)
;     and remain here until the end of the throw (look at his debug
;     information when he is being thrown; the text changes to yellow
;     to mean that he is in another player's state file).
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0;0
velset = 0,0
ctrl = 0
anim = 800
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1201,0
channel = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 3    ;fv = 10
value = ifelse(command = "holdback",-1,1)
ignorehitpause = 1

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
trigger1= var(38)=0; opponent is not in an unthrowable situation
attr = S, NT
hitflag = M
priority = 1, hit;Miss
sparkno = -1
sprpriority = 1
p1facing = 1
p2facing = 1
p1stateno = 801
p2stateno = 802+ifelse(var(3)=-1,10,0)
fall = 1
;p1facing = ifelse(command = "holdfwd",1,-1)
givepower = 50
getpower = 0

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;Throw 1 (p1)
[Statedef 801]
type    = S
movetype= A
physics = N
anim = 801
poweradd = 60
sprpriority = -1

[State -3, jumpdust1]
type = explod
trigger1 = animelem = 6
postype = p1
pos = 0,0
spacing = 1
anim = 6010
ownpal = 1
supermove = 1
sprpriority = 5
scale = 0.6,0.8

[State 0, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 1
ignorehitpause = 1

[State 0, StopSnd]
type = PlaySnd
trigger1 = animelem = 2
value = 800,0

[State 0, StopSnd]
type = PlaySnd
trigger1 = animelem = 5
value = 200,1
channel = 0
[State 0, StopSnd]
type = PlaySnd
trigger1 = animelem = 4
value = 4,8

[State 801, Throw Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 8015
ID = 8015
postype = p1
facing = -1
pos = 50,-20
sprpriority = 5
ontop = 0

[State 860, 2]
type = PlayerPush
trigger1 = AnimElem = 1
value = 1

[State 810, 5]
type = TargetBind
trigger1 = AnimElem = 1
pos = 30,0

[State 810, 5]
type = TargetBind
trigger1 = AnimElem = 3
pos = 30,-22
[State 810, 5]
type = TargetBind
trigger1 = AnimElem = 4
pos = 10,-24
[State 810, 5]
type = TargetBind
trigger1 = AnimElem = 5
pos = -10,-35
[State 810, 5]
type = TargetBind
triggerall = var(3) = 1
trigger1 = AnimElem = 6
pos = -30,-35
[State 810, 5]
type = TargetBind
triggerall = var(3) = 1
trigger1 = AnimElem = 7
pos = 0,-60

[State 0, TargetFacing]
type = TargetFacing
trigger1 = AnimElem = 3 && var(3) = -1
value = -1
ignorehitpause = 1

[State 810, Throw 11]
type = TargetState
trigger1 = AnimElem = 7 && var(3) = 1
trigger2 = AnimElem = 6 && var(3) = -1
value = 803

[State 810, Hurt 11]
type = targetlifeadd
trigger1 = AnimElem = 7 && var(3) = 1
trigger2 = AnimElem = 6 && var(3) = -1
value = -90

[State 0, SprPriority]
type = SprPriority
trigger1 = animelem = 7
value = 4

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Throw (P2 grabbed)
[Statedef 802]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = animelem = 1
value = 3

[State 620, 4]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 802

;Throw (P2 grabbed)
[Statedef 812]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = animelem = 1
value = 3

[State 620, 4]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 812

;---------------------------------------------------------------------------
; Opponent thrown into the air
; (a custom gethit state)
; Description: This state has the opponent flying through the air and
;     falling down onto the ground. The SelfState controller sets the
;     opponent back using to his own state file when he his the ground.
;     Controllers 821,2 and 821,3 allow the opponent to recover by
;     hitting his recovery command when he is falling.
[Statedef 803]
type    = A
movetype= H
physics = N
velset = -1,-10
poweradd = 40
facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1

[State 620, 4]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 820, 1]
type = ChangeAnim
triggerall = selfanimexist(5250)
Trigger1 = Time = 0
value = 5250
[State 820, 1]
type = ChangeAnim2
triggerall = selfanimexist(5250) = 0
Trigger1 = Time = 0
value = 803
[State 820, 1]
type = ChangeAnim2
triggerall = anim != 804
Trigger1 = vel y >= 0
value = 804

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;---------------------------------------------------------------------------
; Pound (hehe)
[Statedef 950]
type    = S
movetype= A
physics = S
juggle  = 0;5          
ctrl = 0 
anim = 950   
poweradd = 30 
facep2 = 1 

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.9		;Type: High, Low, Trip (def: same as ground.type)
ignorehitpause = 1

[State 100, dust]
type = Explod
trigger1 = AnimElem = 5
anim = 103
postype = p1
pos = -20,2
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .25,.15

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 9
movetype = I
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(7) < 0
x = 8
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = animelem = 6
value = S200,3
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S0,3
channel = 1
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = var(17) = 0
trigger1 = time = 0
ID = 950
attr = S, NA			;Attribute: Standing, Normal Attack
damage = ceil(60*fvar(11)), 0			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
air.animtype = Diagup
guardflag = M			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 6, 10			;Time attacker pauses, time opponent shakes
sparkno = S6200				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -23		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 14			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 45+5*(var(42))
guard.slidetime = 10
ground.hittime = 45+5*(var(42))
guard.hittime = 10
air.hittime = 40
airguard.hittime = 15
air.fall = 0+1*(var(42))
ground.velocity = -4.5		;Velocity at which opponent is pushed
airguard.velocity = -2.5,-11	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			
air.velocity = -3,-7		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.fall = 1
fall.recover = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
triggerall = var(17) = 1
trigger1 = time = 0
ID = 951
attr = S, NA			;Attribute: Standing, Normal Attack
damage = ceil(60*fvar(11)), 0			;Damage that move inflicts, guard damage
animtype = Diagup			;Animation type: Light, Medium, Heavy, Back (def: Light)
air.animtype = Diagup
guardflag = M			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 6, 10			;Time attacker pauses, time opponent shakes
sparkno = S6200				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -23		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 14			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 40
guard.slidetime = 10
ground.hittime = 40
guard.hittime = 10
air.hittime = 40
airguard.hittime = 15
fall = 1
air.fall = 0+1*(var(42))
ground.velocity = -3,-3		;Velocity at which opponent is pushed
airguard.velocity = -2.5,-11	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			
air.velocity = -3,-7		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
fall.recover = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, TargetState]
type = TargetState
triggerall = movehit
triggerall = NumTarget(950)
trigger1 = target(950),statetype = S
trigger2 = target(950),statetype = C
value = 956
ID = 950
ignorehitpause = 1
persistent = 0

[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Air Pound
[Statedef 955]
type    = A
movetype= A
physics = N
juggle  = 0;5          
ctrl = 0 
anim = 955   
poweradd = 30 

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(5) < 0
trigger1 = vel y > 0
trigger1 = pos y >= -10
trigger2 = animelem = 5
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = animelemtime(5) < 0
trigger1 = vel y > 0
trigger1 = pos y >= -10
y = -10
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 9
movetype = I
physics = A
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(7) < 0
x = 8
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(5) < 0
x = .9
y = .9
[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(8) >= 0
x = .85

[State 200, 1]
type = HitDef
triggerall = var(17) = 0
trigger1 = time = 0
ID = 950
attr = A, NA			;Attribute: Standing, Normal Attack
damage = ceil(60*fvar(11)), 0			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
air.animtype = Diagup
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 6, 10			;Time attacker pauses, time opponent shakes
sparkno = S6200				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -23		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 14			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 45+5*(var(42))
guard.slidetime = 10
ground.hittime = 45+5*(var(42))
guard.hittime = 10
air.hittime = 40
airguard.hittime = 15
air.fall = 0+1*(var(42))
ground.velocity = -4.5		;Velocity at which opponent is pushed
airguard.velocity = -2.5,-11	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -3,-7		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.fall = 1
fall.recover = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
triggerall = var(17) = 1
trigger1 = time = 0
ID = 951
attr = A, NA			;Attribute: Standing, Normal Attack
damage = ceil(60*fvar(11)), 0			;Damage that move inflicts, guard damage
animtype = Diagup			;Animation type: Light, Medium, Heavy, Back (def: Light)
air.animtype = Diagup
guardflag = M			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 6, 10			;Time attacker pauses, time opponent shakes
sparkno = S6200				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -23		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 14			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 40
guard.slidetime = 10
ground.hittime = 40
guard.hittime = 10
air.hittime = 40
airguard.hittime = 15
fall = 1
air.fall = 0+1*(var(42))
ground.velocity = -3,-3		;Velocity at which opponent is pushed
airguard.velocity = -2.5,-11	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			
air.velocity = -3,-7		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
fall.recover = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, TargetState]
type = TargetState
triggerall = movehit
triggerall = NumTarget(950)
trigger1 = target(950),statetype = S
trigger2 = target(950),statetype = C
value = 956
ID = 950
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = animelem = 6
value = S200,3
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S0,3
channel = 1
ignorehitpause = 1

;------------------
; Hit by Pound - Shaking from the hit
[Statedef 956]
type    = U
movetype= H
physics = N
velset = 0,0

[State 0, HitFallSet]
type = HitFallSet
trigger1 = !alive
trigger2 = statetype != A && pos y < 0
value = 1
ignorehitpause = 1
[State 0, HitFallSet]
type = HitFallSet
trigger1 = alive
trigger2 = statetype = A
value = 0
ignorehitpause = 1

[State 751, Anim] ;Custom animation
type = ChangeAnim2
triggerall = selfanimexist(5003) = 0
trigger1 = statetype != A
trigger1 = statetype != L
value = 956
[State 751, Anim] ;Custom animation
type = ChangeAnim
triggerall = selfanimexist(5003) = 1
trigger1 = statetype != A
trigger1 = statetype != L
value = 5003

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 956 || anim = 5003
statetype = S       ;S,A,C,L
ignorehitpause = 1

[State 751, State]
type = SelfState
trigger1 = statetype = A
trigger2 = statetype = L
trigger3 = !alive ;Are you dead?
value = 5000
[State 751, State]
type = ChangeState
triggerall = statetype != A
triggerall = statetype != L
trigger1 = HitShakeOver = 1
value = 957

;------------------
; Hit by Pound - staggering backward
[Statedef 957]
type    = S
movetype= H
physics = N

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 752, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 0, VelMul]
type = VelMul
trigger1 = time < 40
x = .95
ignorehitpause = 1
[State 0, VelMul]
type = VelMul
trigger1 = time >= 40
x = .9
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 5008
triggerall = anim != 5017
trigger1 = anim != 5003 && time = 40
value = 5017
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 5008
triggerall = anim != 5017
trigger1 = anim = 5003 && time = 40
value = 5008
ignorehitpause = 1

[State 0, HitFallSet]
type = HitFallSet
trigger1 = !alive 
trigger2 = pos y < 0
value = 1
ignorehitpause = 1

[State 754, Hit ground]
type = SelfState
triggerall = anim = 5008 || anim = 5017
trigger1 = hitover = 1
value = 0
ctrl = 1
[State 751, State] ;Are you dead?
type = SelfState
trigger1 = !alive 
trigger2 = pos y < 0
value = 5030

;---------------------------------------------------------------------------
; Double Slap Light
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 0;5 
velset = 0,0             
ctrl = 0 
anim = 1000   
poweradd = 20 
sprpriority = 2
facep2 = 1 

[State 0, VelSet]
type = VelSet
triggerall = anim = 1000
triggerall = animelem = 2
trigger1 = prevstateno = 200 || prevstateno = 201
trigger2 = prevstateno = 400
trigger3 = prevstateno = 210
trigger4 = prevstateno = 410
trigger5 = prevstateno = 220
trigger6 = prevstateno = 420
x = 5
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = anim = 1000
trigger2 = var(10) > 26
v = 10    ;fv = 10
value = 26
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = anim = 1010
trigger1 = var(10) <= 0
v = 10    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1010
trigger1 = var(10) > 0
v = 10    ;fv = 
value = -1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1010
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
v = 10    ;fv = 
value = 3

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1010
trigger1 = time%8 = 0
value = S0,1
channel = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = time = 0
value = S200,2
channel = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1000 && animtime = 0
value = 1010
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = anim = 1010
trigger1 = time %8 = 0
anim = 1011
ID = 1011
pos = -5,-50+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 3
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1
[State 0, Explod]
type = Explod
triggerall = anim = 1010
trigger1 = time %8 = 4
anim = 1012
ID = 1012
pos = 5,-50+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 1
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1

[State 200, 1]
type = HitDef
triggerall = anim = 1010
trigger1 = animelem = 3
trigger2 = animelem = 7
attr = S, SA			;Attribute: Standing, Normal Attack
damage = ceil(15*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = M			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 4, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 1			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -50+random%40		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 14			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 1
ground.velocity = -4		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1,-1		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeState]
type = ChangeAnim
triggerall = anim = 1010
trigger1 = var(10) <= 0
value = 1005
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1005
movetype = I        ;I,A,H
ignorehitpause = 1

[State 2000, 3]
type = ChangeState
trigger1 = anim = 1005 && AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Double Slap Medium
[Statedef 1010]
type    = S
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0         
ctrl = 0 
anim = 1000   
poweradd = 20 
sprpriority = 2
facep2 = 1 

[State 100, dust]
type = Explod
triggerall = anim = 1015
trigger1 = time %12 = 0
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .25,.25

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VelSet]
type = VelAdd
triggerall = anim != 1005
trigger1 = vel x < 1.5
x = .2

[State 0, VarSet]
type = VarSet
trigger1 = anim = 1000
trigger2 = var(10) > 26
v = 10    ;fv = 10
value = 26
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = anim = 1015
trigger1 = var(10) <= 0
v = 10    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1015
trigger1 = var(10) > 0
v = 10    ;fv = 
value = -1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1015
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
v = 10    ;fv = 
value = 3

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1015
trigger1 = time%8 = 0
value = S0,1
channel = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = time = 0
value = S200,2
channel = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1000 && animtime = 0
value = 1015
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = anim = 1015
trigger1 = time %8 = 0
anim = 1011
ID = 1011
pos = -5,-50+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 3
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1
[State 0, Explod]
type = Explod
triggerall = anim = 1015
trigger1 = time %8 = 4
anim = 1012
ID = 1012
pos = 5,-50+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 1
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1

[State 200, 1]
type = HitDef
triggerall = anim = 1015
trigger1 = animelem = 3
trigger2 = animelem = 7
attr = S, SA			;Attribute: Standing, Normal Attack
damage = ceil(15*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = M			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 4, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 1			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -50+random%40		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 14			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 1
ground.velocity = -5		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -2,-1		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeState]
type = ChangeAnim
triggerall = anim = 1015
trigger1 = var(10) <= 0
value = 1005
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1005
movetype = I        ;I,A,H
physics = S         ;A,C,S,N
ignorehitpause = 1

[State 2000, 3]
type = ChangeState
trigger1 = anim = 1005 && AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Double Slap Heavy
[Statedef 1020]
type    = S
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0         
ctrl = 0 
anim = 1000   
poweradd = 20 
sprpriority = 2
facep2 = 1 

[State 100, dust]
type = Explod
triggerall = anim = 1015
trigger1 = time %12 = 0
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .25,.25

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VelSet]
type = VelAdd
triggerall = anim != 1005
trigger1 = vel x < 3
x = .25

[State 0, VarSet]
type = VarSet
trigger1 = anim = 1000
trigger2 = var(10) > 26
v = 10    ;fv = 10
value = 26
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = anim = 1015
trigger1 = var(10) <= 0
v = 10    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1015
trigger1 = var(10) > 0
v = 10    ;fv = 
value = -1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1015
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
v = 10    ;fv = 
value = 3

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1015
trigger1 = time%8 = 0
value = S0,1
channel = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = time = 0
value = S200,2
channel = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1000 && animtime = 0
value = 1015
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = anim = 1015
trigger1 = time %8 = 0
anim = 1011
ID = 1011
pos = -5,-50+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 3
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1
[State 0, Explod]
type = Explod
triggerall = anim = 1015
trigger1 = time %8 = 4
anim = 1012
ID = 1012
pos = 5,-50+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 1
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1

[State 200, 1]
type = HitDef
triggerall = anim = 1015
trigger1 = animelem = 3
trigger2 = animelem = 7
attr = S, SA			;Attribute: Standing, Normal Attack
damage = ceil(15*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = M			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 4, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 1			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -50+random%40		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 14			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 1
ground.velocity = -6		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -3,-1		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeState]
type = ChangeAnim
triggerall = anim = 1015
trigger1 = var(10) <= 0
value = 1005
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1005
movetype = I        ;I,A,H
physics = S         ;A,C,S,N
ignorehitpause = 1

[State 2000, 3]
type = ChangeState
trigger1 = anim = 1005 && AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Double Slap Light (Air)
[Statedef 1005]
type    = A
movetype= A
physics = N
juggle  = 0;5 
velset = 0.5,0           
ctrl = 0 
anim = 1001   
poweradd = 20 
sprpriority = 2

[State 100, dust]
type = Explod
triggerall = anim = 1020
trigger1 = time %12 = 0 && pos y >= 0
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .25,.25

[State 0, VelAdd]
type = VelAdd
triggerall = anim != [1005,1006]
trigger1 = command != "holdup"
trigger1 = vel y < 1
y = .1
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = anim != [1005,1006]
trigger1 = command = "holdup"
trigger1 = vel y > -1
y = -.1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = anim = 1001
trigger2 = var(10) > 26
v = 10    ;fv = 10
value = 26
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = anim = 1020
trigger1 = var(10) <= 0
v = 10    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1020
trigger1 = var(10) > 0
v = 10    ;fv = 
value = -1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1020
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
v = 10    ;fv = 
value = 3

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1020
trigger1 = time%8 = 0
value = S0,1
channel = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = time = 0
value = S200,2
channel = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1001 && animtime = 0
value = 1020
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = anim = 1020
trigger1 = time %8 = 0
anim = 1011
ID = 1011
pos = -5,-60+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 3
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1
[State 0, Explod]
type = Explod
triggerall = anim = 1020
trigger1 = time %8 = 4
anim = 1012
ID = 1012
pos = 5,-60+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 1
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1

[State 200, 1]
type = HitDef
triggerall = anim = 1020
trigger1 = animelem = 3
trigger2 = animelem = 7
attr = A, SA			;Attribute: Standing, Normal Attack
damage = ceil(15*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 4, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 1			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -50+random%40		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 14			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 1
ground.velocity = -4		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1,-1		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeState]
type = ChangeAnim
triggerall = anim = 1020
trigger1 = var(10) <= 0
trigger1 = pos y < 0
value = 1006
ignorehitpause = 1
[State 0, ChangeState]
type = ChangeAnim
triggerall = anim = 1020
trigger1 = pos y >= 0
value = 1005
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1005
statetype = S
movetype = I        ;I,A,H
physics = S
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1006
movetype = I        ;I,A,H
physics = A
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = VelSet
trigger1 = pos y >= 0
y = 0
ignorehitpause = 1

[State 2000, 3]
type = ChangeState
trigger1 = anim = 1005 && AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Double Slap Medium (Air)
[Statedef 1015]
type    = A
movetype= A
physics = N
juggle  = 0;5 
velset = 1.5,0           
ctrl = 0 
anim = 1001   
poweradd = 20 
sprpriority = 2

[State 100, dust]
type = Explod
triggerall = anim = 1020
trigger1 = time %12 = 0 && pos y >= 0
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .25,.25

[State 0, VelAdd]
type = VelAdd
triggerall = anim != [1005,1006]
trigger1 = command != "holdup"
trigger1 = vel y < 1
y = .1
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = anim != [1005,1006]
trigger1 = command = "holdup"
trigger1 = vel y > -1
y = -.1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = anim = 1001
trigger2 = var(10) > 26
v = 10    ;fv = 10
value = 26
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = anim = 1020
trigger1 = var(10) <= 0
v = 10    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1020
trigger1 = var(10) > 0
v = 10    ;fv = 
value = -1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1020
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
v = 10    ;fv = 
value = 3

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1020
trigger1 = time%8 = 0
value = S0,1
channel = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = time = 0
value = S200,2
channel = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1001 && animtime = 0
value = 1020
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = anim = 1020
trigger1 = time %8 = 0
anim = 1011
ID = 1011
pos = -5,-60+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 3
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1
[State 0, Explod]
type = Explod
triggerall = anim = 1020
trigger1 = time %8 = 4
anim = 1012
ID = 1012
pos = 5,-60+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 1
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1

[State 200, 1]
type = HitDef
triggerall = anim = 1020
trigger1 = animelem = 3
trigger2 = animelem = 7
attr = A, SA			;Attribute: Standing, Normal Attack
damage = ceil(15*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 4, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 1			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -50+random%40		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 14			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 1
ground.velocity = -5		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -2,-1		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeState]
type = ChangeAnim
triggerall = anim = 1020
trigger1 = var(10) <= 0
trigger1 = pos y < 0
value = 1006
ignorehitpause = 1
[State 0, ChangeState]
type = ChangeAnim
triggerall = anim = 1020
trigger1 = pos y >= 0
value = 1005
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1005
statetype = S
movetype = I        ;I,A,H
physics = S
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1006
movetype = I        ;I,A,H
physics = A
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = VelSet
trigger1 = pos y >= 0
y = 0
ignorehitpause = 1

[State 2000, 3]
type = ChangeState
trigger1 = anim = 1005 && AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Double Slap Heavy (Air)
[Statedef 1025]
type    = A
movetype= A
physics = N
juggle  = 0;5 
velset = 3,0           
ctrl = 0 
anim = 1001   
poweradd = 20 
sprpriority = 2

[State 100, dust]
type = Explod
triggerall = anim = 1020
trigger1 = time %12 = 0 && pos y >= 0
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .25,.25

[State 0, VelAdd]
type = VelAdd
triggerall = anim != [1005,1006]
trigger1 = command != "holdup"
trigger1 = vel y < 1
y = .1
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = anim != [1005,1006]
trigger1 = command = "holdup"
trigger1 = vel y > -1
y = -.1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = anim = 1001
trigger2 = var(10) > 26
v = 10    ;fv = 10
value = 26
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = anim = 1020
trigger1 = var(10) <= 0
v = 10    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1020
trigger1 = var(10) > 0
v = 10    ;fv = 
value = -1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1020
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
v = 10    ;fv = 
value = 3

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1020
trigger1 = time%8 = 0
value = S0,1
channel = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = time = 0
value = S200,2
channel = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1001 && animtime = 0
value = 1020
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = anim = 1020
trigger1 = time %8 = 0
anim = 1011
ID = 1011
pos = -5,-60+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 3
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1
[State 0, Explod]
type = Explod
triggerall = anim = 1020
trigger1 = time %8 = 4
anim = 1012
ID = 1012
pos = 5,-60+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 1
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1

[State 200, 1]
type = HitDef
triggerall = anim = 1020
trigger1 = animelem = 3
trigger2 = animelem = 7
attr = A, SA			;Attribute: Standing, Normal Attack
damage = ceil(15*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 4, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 1			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -50+random%40		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 14			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 1
ground.velocity = -6		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -3,-1		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeState]
type = ChangeAnim
triggerall = anim = 1020
trigger1 = var(10) <= 0
trigger1 = pos y < 0
value = 1006
ignorehitpause = 1
[State 0, ChangeState]
type = ChangeAnim
triggerall = anim = 1020
trigger1 = pos y >= 0
value = 1005
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1005
statetype = S
movetype = I        ;I,A,H
physics = S
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1006
movetype = I        ;I,A,H
physics = A
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = VelSet
trigger1 = pos y >= 0
y = 0
ignorehitpause = 1

[State 2000, 3]
type = ChangeState
trigger1 = anim = 1005 && AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Gyro Ball Forwards
[Statedef 1100]
type    = S
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0             
ctrl = 0 
anim = 1100   
poweradd = 20 
sprpriority = 2
facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
triggerall = anim = 1100
trigger1 = animelemtime(2) >= 0
value = SCA,NP,SP
time = 1
ignorehitpause = 1

[State 100, dust]
type = Explod
triggerall = anim = 1100
trigger1 = animelem = 2
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .4,.3

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.95
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
v = 14    ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 2
v = 14    ;fv = 10
value = 2
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 14    ;fv = 10
value = 3
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 4
trigger2 = animelem = 5
v = 14    ;fv = 10
value = 4
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = numhelper(1100) = 0
helpertype = normal ;player
name = "SPINNY"
ID = 1100
stateno = 1101 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time < 13
v = 13    ;fv = 10
value = 7
[State 0, VarSet]
type = Varadd
triggerall = anim = 1100
trigger1 = var(13) > 0 && animelem = 5
v = 13    ;fv = 10
value = -1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1100
trigger1 = animelem = 4 || animtime = 0
value = S1100,var(13)
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1100
trigger1 = animelem = 2
value = S1101,0
;channel = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 62
value = var(11)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time <= 13
v = 11    ;fv = 10
value = 0

[State 0, VarSet]
type = VarAdd
trigger1 = time > 13
v = 11    ;fv = 10
value = 26

[State 0, VelAdd]
type = VelSet
trigger1 = time = 8
x = 5
[State 0, VelAdd]
type = VelAdd
triggerall = time = [18,35]
trigger1 = vel y > -6
y = -.1

[State 0, VelMul]
type = VelMul
triggerall = anim = 1100
trigger1 = time >= 20
x = .95
[State 0, VelMul]
type = VelMul
triggerall = anim = 1100
trigger1 = time > 35
y = .9

[State 200, 1]
type = HitDef
triggerall = anim = 1100
trigger1 = animelem = 4 || animtime = 0
attr = A, SA			;Attribute: Standing, Normal Attack
damage = ceil(10*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 5, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 3			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -30		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 0			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
fall = 1
fall.recover = 0
ground.velocity = -3,-2		;Velocity at which opponent is pushed
airguard.velocity = -2,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -3,-2		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
trigger1 = time = 62
attr = A, SA			;Attribute: Standing, Normal Attack
damage = ceil(10*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Back			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 5, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 4			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -30		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 1			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
fall = 1
fall.recover = 0
ground.velocity = -5,-3		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -5,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 62
value = 1105
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1105 && animelem = 2
movetype = I
physics = A         ;A,C,S,N
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time >= 13
statetype = A
ignorehitpause = 1

;---------------------------------------------------------------------------
; SPINNY
[Statedef 1101]
type = S
anim = ifelse(ishelper(1150),1151,1101)
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 0
time = 2
length = 10
palbright = 30,30,30
palcontrast = 120,220,120
paladd = 25,25,25
palmul = .65,.65,.65
timegap = 2
framegap = 1
trans = add
ignorehitpause = 1

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = anim = 1101
trigger2 = anim = 1151
time = 2
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,128
ignorehitpause = 1

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = -1
pos = 0,0
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = ishelper(1100)
trigger1 = root,time > 12
trigger1 = root, time < 62
trigger2 = ishelper(1150)
trigger2 = root,time > 21
trigger2 = root, time < 71
value = root,var(11)-26
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = ishelper(1100)
trigger1 = root, time = 63
trigger2 = ishelper(1150)
trigger2 = root, time = 72
value = 1106
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root, stateno != [1100,1150]
ignorehitpause = 1

;---------------------------------------------------------------------------
; Gyro Ball Diagonal
[Statedef 1110]
type    = S
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0             
ctrl = 0 
anim = 1110   
poweradd = 20 
sprpriority = 2
facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
triggerall = anim = 1110
trigger1 = animelemtime(2) >= 0
value = SCA,NP,SP
time = 1
ignorehitpause = 1

[State 100, dust]
type = Explod
triggerall = anim = 1110
trigger1 = animelem = 2
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .4,.3

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.95
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
v = 14    ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 2
v = 14    ;fv = 10
value = 2
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 14    ;fv = 10
value = 3
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 4
trigger2 = animelem = 5
v = 14    ;fv = 10
value = 4
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = numhelper(1100) = 0
helpertype = normal ;player
name = "SPINNY"
ID = 1100
stateno = 1101 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time < 13
v = 13    ;fv = 10
value = 7
[State 0, VarSet]
type = Varadd
triggerall = anim = 1110
trigger1 = var(13) > 0 && animelem = 5
v = 13    ;fv = 10
value = -1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1110
trigger1 = animelem = 4 || animtime = 0
value = S1100,var(13)
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1110
trigger1 = animelem = 2
value = S1101,0
;channel = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 62
value = var(11)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time <= 13
v = 11    ;fv = 10
value = 0

[State 0, VarSet]
type = VarAdd
trigger1 = time > 13
v = 11    ;fv = 10
value = 26

[State 0, VelAdd]
type = VelSet
trigger1 = time = 8
x = 4.5
[State 0, VelAdd]
type = VelAdd
triggerall = time = [7,30]
trigger1 = vel y > -3
y = -.15

[State 0, VelMul]
type = VelMul
triggerall = anim = 1110
trigger1 = time >= 10
x = .95
[State 0, VelMul]
type = VelMul
triggerall = anim = 1110
trigger1 = time > 35
y = .9

[State 200, 1]
type = HitDef
triggerall = anim = 1110
trigger1 = animelem = 4 || animtime = 0
attr = A, SA			;Attribute: Standing, Normal Attack
damage = ceil(10*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 5, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 3			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -30		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 0			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
fall = 1
fall.recover = 0
ground.velocity = -2,-3		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -2,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
trigger1 = time = 62
attr = A, SA			;Attribute: Standing, Normal Attack
damage = ceil(10*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Diagup			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 5, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 4			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -30		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 1			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
fall = 1
fall.recover = 0
ground.velocity = -4,-4		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -4,-4		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 62
value = 1105
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1105 && animelem = 2
movetype = I
physics = A         ;A,C,S,N
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time >= 7
statetype = A
ignorehitpause = 1

;---------------------------------------------------------------------------
; Gyro Ball Upward
[Statedef 1120]
type    = S
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0             
ctrl = 0 
anim = 1110   
poweradd = 20 
sprpriority = 2
facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
triggerall = anim = 1110
trigger1 = animelemtime(2) >= 0
value = SCA,NP,SP
time = 1
ignorehitpause = 1

[State 100, dust]
type = Explod
triggerall = anim = 1110
trigger1 = animelem = 2
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .4,.3

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.95
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
v = 14    ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 2
v = 14    ;fv = 10
value = 2
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 14    ;fv = 10
value = 3
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 4
trigger2 = animelem = 5
v = 14    ;fv = 10
value = 4
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = numhelper(1100) = 0
helpertype = normal ;player
name = "SPINNY"
ID = 1100
stateno = 1101 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time < 13
v = 13    ;fv = 10
value = 7
[State 0, VarSet]
type = Varadd
triggerall = anim = 1110
trigger1 = var(13) > 0 && animelem = 5
v = 13    ;fv = 10
value = -1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1110
trigger1 = animelem = 4 || animtime = 0
value = S1100,var(13)
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1110
trigger1 = animelem = 2
value = S1101,0
;channel = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 62
value = var(11)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time <= 13
v = 11    ;fv = 10
value = 0

[State 0, VarSet]
type = VarAdd
trigger1 = time > 13
v = 11    ;fv = 10
value = 26

[State 0, VelAdd]
type = VelSet
trigger1 = time = 8
x = 3
[State 0, VelAdd]
type = VelAdd
triggerall = time = [7,22]
trigger1 = vel y > -8
y = -.4

[State 0, VelMul]
type = VelMul
triggerall = anim = 1110
trigger1 = time >= 10
x = .95
[State 0, VelMul]
type = VelMul
triggerall = anim = 1110
trigger1 = time > 25
y = .9

[State 200, 1]
type = HitDef
triggerall = anim = 1110
trigger1 = animelem = 4 || animtime = 0
attr = A, SA			;Attribute: Standing, Normal Attack
damage = ceil(10*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 5, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 3			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -30		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 0			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
fall = 1
fall.recover = 0
ground.velocity = -1,-4		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1,-4		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
trigger1 = time = 62
attr = A, SA			;Attribute: Standing, Normal Attack
damage = ceil(10*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Up			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 5, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 4			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -30		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 1			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
fall = 1
fall.recover = 0
ground.velocity = -3,-5		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -3,-5		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 62
value = 1105
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1105 && animelem = 2
movetype = I
physics = A         ;A,C,S,N
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time >= 7
statetype = A
ignorehitpause = 1

;---------------------------------------------------------------------------
; Gyro Ball (Guard Cancel)
[Statedef 1150]
type    = S
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0             
ctrl = 0 
anim = 1150   
poweradd = 20 
sprpriority = 2
facep2 = 1

[State 1200, 0]
type = NotHitBy
trigger1 = anim = 1150
value = SCA
time = 1

[state haha]
type = superpause
trigger1 = time = 0
time = 15
movetime = 15
pos = 10,-30
anim = s1152
sound = s1150,0
unhittable = 3
poweradd = -500
darken = 1

[State 100, dust]
type = Explod
triggerall = anim = 1150
trigger1 = animelem = 2
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .4,.3

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.95
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
v = 14    ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 2
v = 14    ;fv = 10
value = 2
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 14    ;fv = 10
value = 3
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 4
trigger2 = animelem = 5
v = 14    ;fv = 10
value = 4
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = numhelper(1150) = 0
helpertype = normal ;player
name = "SPINNY"
ID = 1150
stateno = 1101 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 15
pausemovetime = 15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time < 22
v = 13    ;fv = 10
value = 7
[State 0, VarSet]
type = Varadd
triggerall = anim = 1150
trigger1 = var(13) > 0 && animelem = 5
v = 13    ;fv = 10
value = -1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1150
trigger1 = animelem = 4 || animtime = 0
value = S1100,var(13)
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1150
trigger1 = animelem = 2
value = S1101,0
;channel = 1

[State 0, StopSnd]
type = PlaySnd
triggerall = anim = 1150
trigger1 = animelem = 2
value = 3000,0
channel = 0
[State 0, StopSnd]
type = PlaySnd
trigger1 = time = 71
value = 200,4
channel = 0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 71
value = var(11)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time <= 22
v = 11    ;fv = 10
value = 0

[State 0, VarSet]
type = VarAdd
trigger1 = time > 22
v = 11    ;fv = 10
value = 26

[State 0, VelAdd]
type = VelSet
trigger1 = time = 16
x = 7
[State 0, VelAdd]
type = VelAdd
triggerall = time = [16,31]
trigger1 = vel y > -6
y = -.4

[State 0, VelMul]
type = VelMul
triggerall = anim = 1150
trigger1 = time >= 25
x = .9
[State 0, VelMul]
type = VelMul
triggerall = anim = 1150
trigger1 = time > 30
y = .9

[State 200, 1]
type = HitDef
triggerall = anim = 1150
trigger1 = animelem = 4 || animtime = 0
getpower = 0,0
attr = A, SA			;Attribute: Standing, Normal Attack
damage = ceil(15*fvar(11)), 1			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = 			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 5, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 3			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -30		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 0			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 11
guard.slidetime = 11
ground.hittime = 11
guard.hittime = 11
air.hittime = 10
fall = 1
fall.recover = 0
ground.velocity = -2,-4		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -2,-4		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
trigger1 = time = 71
getpower = 0,0
attr = A, SA			;Attribute: Standing, Normal Attack
damage = ceil(25*fvar(11)), 3			;Damage that move inflicts, guard damage
animtype = Up			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = 			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 5, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 10, 10			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -30		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 1			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 11
guard.slidetime = 11
ground.hittime = 11
guard.hittime = 11
air.hittime = 10
fall = 1
fall.recover = 0
ground.velocity = -2,-10		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -2,-10		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
yaccel = .5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 71
value = 1105
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1105 && animelem = 2
movetype = I
physics = A         ;A,C,S,N
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time >= 16
statetype = A
ignorehitpause = 1

;---------------------------------------------------------------------------
; Rollout Light
[Statedef 1200]
type    = S
movetype= I
physics = S
juggle  = 0;5 
velset = vel x,0             
ctrl = 0 
anim = 1200   
poweradd = 20 
sprpriority = 2
facep2 = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 6
time = 4
length = 20
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 220,120,120
paladd = 200,200,200
palmul = .7,.5,.6
timegap = 1
framegap = 4
trans = add
[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 4
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S1200,0
channel = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S1201,0
channel = 4
loop = 1

[State 100, dust]
type = Explod
trigger1 = animelem = 5
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 3
facing = 1
ownpal = 1
scale = .5,.5

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.85
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time = [15,34]
value = var(11)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time <= 15
v = 11    ;fv = 10
value = -90

[State 0, VarSet]
type = VarAdd
trigger1 = time > 15
v = 11    ;fv = 10
value = -25

[State 0, VelAdd]
type = VelAdd
triggerall = vel x < 6
trigger1 = time > 9
x = .4

[State 920, hit]
type = HitDef
trigger1 = !time
id = 1200
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Back
air.animtype = Back
priority = 5,Hit
damage = ceil(60*fvar(11)),6
pausetime = 10,10
sparkno = S6208
guard.sparkno = s6220
sparkxy = 20,-20
hitsound = S5,5
guardsound = S6,0
ground.type = low
air.type = Low
ground.type = Low
ground.slidetime = 18+1*(var(42))
guard.slidetime = 19
ground.hittime = 18+1*(var(42))
guard.hittime = 19
air.hittime = 18
ground.velocity = -5,-5
air.velocity = -5,-5
fall = 1
fall.recover = 1
yaccel = .5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
movetype = A        ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time > 34
value = 1205
ctrl = 0
ignorehitpause = 1
[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1206
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Rollout Medium
[Statedef 1210]
type    = S
movetype= I
physics = S
juggle  = 0;5 
velset = vel x,0             
ctrl = 0 
anim = 1210   
poweradd = 20 
sprpriority = 2
facep2 = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 6
time = 4
length = 20
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 220,120,120
paladd = 200,200,200
palmul = .7,.5,.6
timegap = 1
framegap = 4
trans = add
[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 4
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S1200,1
channel = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S1201,1
channel = 4
loop = 1

[State 100, dust]
type = Explod
trigger1 = animelem = 5
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 3
facing = 1
ownpal = 1
scale = .5,.5

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.85
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time = [18,37]
value = var(11)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time <= 18
v = 11    ;fv = 10
value = -90

[State 0, VarSet]
type = VarAdd
trigger1 = time > 18
v = 11    ;fv = 10
value = -25

[State 0, VelAdd]
type = VelAdd
triggerall = vel x < 7
trigger1 = time > 12
x = 1

[State 920, hit]
type = HitDef
trigger1 = !time
id = 1200
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Back
air.animtype = Back
priority = 5,Hit
damage = ceil(75*fvar(11)),7
pausetime = 10,10
sparkno = S6208
guard.sparkno = s6220
sparkxy = 20,-20
hitsound = S5,5
guardsound = S6,0
ground.type = low
air.type = Low
ground.type = Low
ground.slidetime = 18+1*(var(42))
guard.slidetime = 19
ground.hittime = 18+1*(var(42))
guard.hittime = 19
air.hittime = 18
ground.velocity = -6,-6
air.velocity = -6,-6
fall = 1
fall.recover = 1
yaccel = .5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
movetype = A        ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time > 37
value = 1205
ctrl = 0
ignorehitpause = 1
[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1206
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Rollout Heavy
[Statedef 1220]
type    = S
movetype= I
physics = S
juggle  = 0;5 
velset = vel x,0             
ctrl = 0 
anim = 1220   
poweradd = 20 
sprpriority = 2
facep2 = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 6
time = 4
length = 20
palcolor = 256
palinvertall = 0
palbright = 30,30,30
palcontrast = 220,120,120
paladd = 200,200,200
palmul = .7,.5,.6
timegap = 1
framegap = 4
trans = add
[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 4
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S1200,2
channel = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S1201,2
channel = 4
loop = 1

[State 100, dust]
type = Explod
trigger1 = animelem = 5
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 3
facing = 1
ownpal = 1
scale = .5,.5

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .15
fv = 11    ;fv = 10
value = .15
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .15
fvar(11) = fvar(11)*.85
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time = [21,51]
value = var(11)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time <= 21
v = 11    ;fv = 10
value = -90

[State 0, VarSet]
type = VarAdd
trigger1 = time > 21
v = 11    ;fv = 10
value = -28

[State 0, VelAdd]
type = VelAdd
triggerall = vel x < 9
trigger1 = time > 15
x = 1

[State 920, hit]
type = HitDef
trigger1 = !time
id = 1200
attr = S, SA
hitflag = MAF
guardflag = M
animtype = Back
air.animtype = Back
priority = 5,Hit
damage = ceil(90*fvar(11)),9
pausetime = 10,10
sparkno = S6208
guard.sparkno = s6220
sparkxy = 20,-20
hitsound = S5,5
guardsound = S6,0
ground.type = low
air.type = Low
ground.type = Low
ground.slidetime = 18+1*(var(42))
guard.slidetime = 19
ground.hittime = 18+1*(var(42))
guard.hittime = 19
air.hittime = 18
ground.velocity = -7,-7
air.velocity = -7,-7
fall = 1
fall.recover = 1
yaccel = .5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
movetype = A        ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time > 51
value = 1205
ctrl = 0
ignorehitpause = 1
[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 1206
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Rollout End
[Statedef 1205]
type    = S
movetype= I
physics = N
juggle  = 0;5           
ctrl = 0 
anim = 1205  
poweradd = 0 
sprpriority = 2

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = .9
ignorehitpause = 1

[State 2000, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Rollout Hit!
[Statedef 1206]
type    = A
movetype= I
physics = N
juggle  = 0;5 
velset = -1,-8           
ctrl = 0   
poweradd = 0 
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = 1
time = 4
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time <= 1
trigger2 = time > 1 && pos y < 0
value = var(11)
ignorehitpause = 1

[State 0, VarSet]
type = VarAdd
trigger1 = 1
v = 11    ;fv = 10
value = 30

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = vel y > 0 && pos y >= 0
value = 52
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Rest
[Statedef 1300]
type    = S
movetype= A
physics = S
juggle  = 0;5 
velset = vel x,0             
ctrl = 0 
anim = 1300   
poweradd = 20 
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelemtime(3) < 0
trigger2 = numtarget(1300)
flag = nokosnd
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .75
fv = 11    ;fv = 10
value = .75
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 9
anim = 1302
ID = 1302
pos = 20,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = .25,-2.2
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .3,.3
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 9
anim = 1302
ID = 1302
pos = 24,-15
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = .3,-1.5
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .3,.3
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1300
trigger1 = animelem = 9
value = S1301,0
channel = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1300
trigger1 = animelem = 7
value = S1300,0
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1310
trigger1 = animelem = 2
value = S1300,1
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1310
trigger1 = animelem = 6
trigger2 = animelem = 10
value = S1301,1
channel = 1
ignorehitpause = 1

[State 0, PalFX]
type = PalFX
triggerall = anim = 1300
triggerall = animelemtime(7) < 0
trigger1 = time%3 = 0
time = 1
add = 100,100,100
mul = 256,256,256
invertall = 0
color = 256

[State 0, NotHitBy]
type = NotHitBy
triggerall = anim = 1300
trigger1 = animelemtime(7) < 0
value = SCA
time = 1
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = time = 0
ID = 1300
attr = S, SA			;Attribute: Standing, Normal Attack
damage = ceil(100*fvar(11)), 10			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
air.animtype = Heavy
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 1, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 10, 20			;Time attacker pauses, time opponent shakes
guard.pausetime = 5, 10			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -23		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 13			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 30+5*(var(42))
guard.slidetime = 3
ground.hittime = 30+5*(var(42))
guard.hittime = 3
air.hittime = 30
air.fall = 0+1*(var(42))
ground.velocity = -2,-20		;Velocity at which opponent is pushed
airguard.velocity = -2.5,-11	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -2,-20		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
p2facing = 1
fall = 1
fall.recover = 0
;kill = 0
;guard.kill = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 3200, PoisonHelper]
type = helper
triggerall = var(16)<1
trigger1 =  movehit = 1
persistent = 0
helpertype = normal
name = "Poisoned"
ID = 1301
pos = 0,0
postype = p2
stateno = 1301
ownpal = 1
facing = 1
[State 3200, Poisoned Target]
type = targetstate
trigger1 = movehit = 1
;trigger1 = var(16)<1
id = 1300
value = 1305
persistent = 0
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 180
value = 1310
ignorehitpause = 1
[State 2000, 3]
type = ChangeState
trigger1 = anim = 1310 && AnimTime = 0
value = 0
ctrl = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
movetype = I        ;I,A,H
ignorehitpause = 1

;-----------------------
; Rest - Poison Helper
[Statedef 1301]
type = A
movetype = I
physics = N
anim = 1301
velset = 0,0
sprpriority = 2

[State 1300, Poison]
type = AttackDist
trigger1 = 1
value = 0

[State 1300, Poison]
type = nothitby
trigger1 = 1
value = SCA, AA, AP, AT
ignorehitpause = 1

[State 1300, Poison]
type = ReversalDef
trigger1 = Time = 0
reversal.attr = C,HP
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
numhits = 0
id = 1300
p2sprpriority = 1

[State 1300, Poison]
type = PosSet
trigger1 = 1
x = enemynear(0),pos x
y = enemynear(0),pos y

[State 1300, Poison]
type = targetlifeadd
;trigger1 = ishelper(1301)
trigger1 = time%5=0
value = -1
kill = 0
absolute = 1

[State 1300, Poison]
type = hitadd
trigger1 = enemy,stateno != [5000,5150]
trigger1 = enemy,movetype != H
value = -1

[State 1300, End]
type = destroyself
trigger1 = time >= 500
trigger2 = time
trigger2 = numtarget
trigger2 = enemynear,alive = 0 || enemynear,life <= 1
trigger3 = roundstate != 2

;------------------------------------------
; Rest - Poison Activator
[Statedef 1305]
type    = U
movetype = H;I
physics = N
velset = 0,0

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = .9
ignorehitpause = 1

[State 1306, Poison]
type = changeanim2
trigger1 = time = 0
value = 1305

[State 1306, Poison]
Type = HitDef
Trigger1 = Time = 0
Attr = C, HP
damage = 0,0
priority = 1, Hit
hitflag = F-
GuardFlag = L
guard.dist = 0
PauseTime = 0,0
SparkNo = -1
Guard.SparkNo = -1
Ground.SlideTime = 0
Ground.HitTime = 9
Ground.Velocity = 0
Guard.Velocity = 0
Air.Velocity = 0,0

[State 1306, End]
type = changestate
trigger1 = animtime = 0
value = ifelse(alive = 0,1307,1306)
anim = 5050+ifelse(selfanimexist(5051),1,0)

;------------------
; Rest - flying through the air
[Statedef 1306]
type    = A
movetype= H
physics = N

[State 752, Velocity]
type = VelSet
trigger1 = Time = 0
x = -2
y = -20

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .5
ignorehitpause = 1

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, Const720p(4), Const720p(-8))
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, Const(movement.air.gethit.groundlevel))
value = 5100 ;Downed get-hit (hit ground from fall)

;------------------
; Rest - preparing to blast off
[Statedef 1307]
type    = A
movetype= H
physics = N

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokosnd
flag2 = nokoslow
ignorehitpause = 1

[State 752, Velocity]
type = VelSet
trigger1 = Time = 0
x = -2
y = -20

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = screenpos y <= -200
value = ifelse(random<50,1309,1308)
ctrl = 0
ignorehitpause = 1

;------------------
; Rest - ded
[Statedef 1308]
type    = A
movetype= H
physics = N

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S11,0
channel = 0
[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = name = "Pikachu" && authorname = "Gladiacloud 'n Dylanius"
value = S11,1
channel = 0

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = -300

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -(time)*10
scale = .5-(time*.0035),.5-(time*.0035)

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = 1
value = 1308
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokosnd
flag2 = nokoslow
flag3 = noshadow
ignorehitpause = 1

[State 752, Velocity]
type = VelSet
trigger1 = Time = 0
x = .5
y = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 135
value = 1399
ctrl = 0
ignorehitpause = 1

;------------------
; Rest - ded (special)
[Statedef 1309]
type    = A
movetype= H
physics = N

[State 0, StopSnd]
type = StopSnd
trigger1 = 1
channel = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = -300

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -(time)*10
scale = .5-(time*.0035),.5-(time*.0035)

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = 1
value = 1308
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokosnd
flag2 = nokoslow
flag3 = noshadow
ignorehitpause = 1

[State 752, Velocity]
type = VelSet
trigger1 = Time = 0
x = .5
y = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 135
value = 1399
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------------------
; blasted off
[Statedef 1399]
type = S
movetype= H
physics = N
ctrl = 0

[State 0, StopSnd]
type = null;StopSnd
trigger1 = 1 
channel = 0
ignorehitpause = 1

[State 6, 2]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nokosnd
flag2 = nokoslow
flag3 = invisible
ignorehitpause = 1

[State 49999, 1]
type = LifeSet
trigger1 = 1
value = 0

[State 49999, 1]
type = PosSet
trigger1 = time = 2
y = 9000

[State 444, 0]
type = Changestate
trigger1 = time = 2
value = 5150

;---------------------------------------------------------------------------
; Ster_
[Statedef 1398]
type = S
movetype = I
physics = N
velset = 0,0
anim = 1614
sprpriority = -5
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1399,0
channel = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 0    ;fv = 10
value = 1
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
triggerall = fvar(0) > 0
trigger1 = time > 0
fv = 0     ;fv = 
value = -.03
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 0    ;fv = 10
value = -180+random%270
ignorehitpause = 1

[State 0, AngleSet]
type = AngleDraw
trigger1 = 1
value = var(0)
scale = fvar(0),fvar(0)
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
triggerall = time > 0
trigger1 = fvar(0) <= 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Mimic Short
[Statedef 1400]
type    = S
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0             
ctrl = 0 
anim = 1400   
poweradd = 20 
sprpriority = 2
facep2 = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1400,1
channel = 0

[State 100, dust]
type = Explod
trigger1 = animelem = 2
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 3
facing = 1
ownpal = 1
scale = .4,.3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 4
y = -1
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(8) >= 0
x = .9
[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(8) >= 0
y = .1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1400,0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S220,0

[State 200, 1]
type = HitDef
triggerall = prevstateno != [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = 
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
triggerall = prevstateno = [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = s6220
sparkxy = 10,-10
hitsound = -1
guardsound = S6,0
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = A       ;S,A,C,L
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 10
movetype = I        ;I,A,H
ignorehitpause = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Mimic Medium
[Statedef 1410]
type    = S
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0             
ctrl = 0 
anim = 1410   
poweradd = 20 
sprpriority = 2
facep2 = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1400,1
channel = 0

[State 100, dust]
type = Explod
trigger1 = animelem = 2
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 3
facing = 1
ownpal = 1
scale = .4,.3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 6
y = -1
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(11) >= 0
x = .9
[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(11) >= 0
y = .1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1400,0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 11
value = S220,0

[State 200, 1]
type = HitDef
triggerall = prevstateno != [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = 
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
triggerall = prevstateno = [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = s6220
sparkxy = 10,-10
hitsound = -1
guardsound = S6,0
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0


[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = A       ;S,A,C,L
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 13
movetype = I        ;I,A,H
ignorehitpause = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Mimic Far
[Statedef 1420]
type    = S
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0             
ctrl = 0 
anim = 1420   
poweradd = 20 
sprpriority = 2
facep2 = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1400,1
channel = 0

[State 100, dust]
type = Explod
trigger1 = animelem = 2
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 3
facing = 1
ownpal = 1
scale = .4,.3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 8
y = -1
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(11) >= 0
x = .9
[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(11) >= 0
y = .1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1400,0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 11
value = S220,0

[State 200, 1]
type = HitDef
triggerall = prevstateno != [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = 
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
triggerall = prevstateno = [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = s6220
sparkxy = 10,-10
hitsound = -1
guardsound = S6,0
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = A       ;S,A,C,L
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 13
movetype = I        ;I,A,H
ignorehitpause = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Mimic Success (P1)
[Statedef 1430]
type    = A
movetype= A
physics = N
anim = 1430
poweradd = 0
sprpriority = 3

[State 0, SGS Check]; first half was taken from PotS' Ryu...you'll forgive me, right?
type = VarSet;                                                  | I'm looking for Street Fighter Gouki,
triggerall = anim = 1439;                                       v                         not Dong Dong Gouki
trigger1 = (target, name = "Gouki" && target, authorname != "xiami") || target, name = "Shin Gouki" || target, name = "Akuma" || target, name = "Shin Akuma"
trigger2 = target, name = "Mech Gouki" || target, name = "Cyber Akuma"
trigger3 = target, name = "Pocket Shin Gouki" || target, name = "cvsgouki" || target, name = "cvsgouki_normal" || target, name = "cvsgouki_ex" || target, name = "SF3Gouki"
trigger4 = target, name = "Gouki_Cota" || target, name = "Gouki CVS 3"
trigger5 = target, name = "Evil Ryu" || target, name = "ERyu"
trigger6 = target, name = "Ryu" && target, authorname = "Phantom.of.the.Server" && target, var(1) != 1
trigger7 = target, name = "CVSEvilRyu" || target, name = "Destrudo Ryu"
trigger8 = target, name = "Ryu" && target, authorname = "N64Mario" && target, palno >= 7
trigger9 = target, name = "cvsryu" && target, authorname = "Warusaki3" && target, var(12) = 10 || target, name = "cvsryu_ex"
trigger10 = target, name = "eRYU -SvsC"
trigger11 = target, name = "God Rugal" || target, name = "Dark Sakura"
trigger12 = target, name = "Oyaji" && target, authorname = "Mr.Chainsaw & Phantom.of.the.Server"
trigger13 = target, name = "cvsrugal" && target, authorname = "Warusaki3" && target, var(12) = 10
trigger14 = target, name = "cvsg_rugal" && target, authorname = "Warusaki3"
trigger15 = target, name = "Tin's S_Gouki" || target, name = "Blaze Agent"
trigger16 = target, name = "pingu"
trigger17 = target, name = "Lie Meiling" || target, name = "LieMeiling_RP"
trigger18 = target, name = "Most_Mysterious"
trigger19 = target, name = "Magic Geese"
trigger20 = target, name = "Rare Akuma"; you fucking wish
trigger21 = target, name = "Kung Fu Bender"
trigger22 = target, name = "Lucario" && target, authorname = "Moku"
trigger23 = target, name = "Yukari Tanizaki"
trigger24 = target, name = "Yuri Sakazaki"; because she has an SDM in 2001 that parodies the SGS.
trigger25 = target, name = "Meta Knight" || target, name = "Meta-Knight"; WHY? I DON'T KNOW! GALAXIA DARKNESS, MAYBE?
trigger26 = target, name = "Toro Inoue"; Why is there an elephant in the room? Like, seriously.
trigger27 = target, name = "takobue"; no, hentai, stahp
trigger28 = target, name = "evil ken" || target, name = "evil homer"
trigger29 = target, name = "rogue by splode" && target, var(59) = 9
trigger30 = target, name = "homer j simpson"
v = 53    ;fv = 10
value = 1
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = anim = 1430
x = .8
y = .8

[State 0, PosAdd]
type = PosAdd
triggerall = anim = 1430
trigger1 = animelemtime(4) < 0
y = -1

[State 0, StopSnd]
type = PlaySnd
trigger1 = time = 0
value = 800,0

[State 801, Throw Explod]
type = Explod
trigger1 = time = 0
anim = 8015
ID = 8015
postype = p1
facing = -1
pos = 35,-42
sprpriority = 5
ontop = 0
[State 0, Orbs Explod]
type = Explod
triggerall = time = [15,60]
trigger1 = time %3 = 0
anim = 1431
ID = 1431
pos = -10+random%20,-8+random%16
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 4.5,1.75
accel = 0,0
random = 0,0
removetime = 9
pausemovetime = 0
scale = .75,.75
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
[State 801, Glimmer Explod]
type = Explod
trigger1 = time = 65
anim = 1432
ID = 1432
postype = p1
facing = -1
pos = 5,-50
scale = .5,.5
sprpriority = 6
ontop = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 72
value = 1439
ignorehitpause = 1

[State 901, Throw]
type = TargetState
trigger1 = Time = 0
value = 1435
[State 901, Throw]
type = TargetState
trigger1 = Time = 72
value = 1436
[State 901, Throw]
type = TargetState
triggerall = anim = 1439
trigger1 = animelem = 3
value = 1437

[State 3001, Width]
type = Width
trigger1 = anim = 1430
edge = 40,40

[State 810, 5]
type = TargetBind
triggerall = anim = 1430
trigger1 = AnimElemTime(2) < 0
pos = -35,-42
time = -1
[State 810, 5]
type = TargetBind
triggerall = anim = 1430
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
pos = 0,-48
time = -1
[State 810, 5]
type = TargetBind
triggerall = anim = 1430
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) < 0
pos = 28,-50
time = -1
[State 810, 5]
type = TargetBind
trigger1 = anim = 1430
trigger1 = AnimElemTime(4) >= 0
trigger2 = anim = 1439
trigger2 = AnimElemTime(2) < 0
pos = 40,-65
time = -1
[State 810, 5]
type = TargetBind
triggerall = anim = 1439
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
pos = 40,-40
time = -1
[State 810, 5]
type = TargetBind
triggerall = anim = 1439
trigger1 = AnimElem = 3
pos = 35,-20
time = 1

[State 0, VelSet]
type = VelSet
triggerall = anim = 1439
trigger1 = AnimElem = 3
x = -1
y = -4
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = s1401,0
channel = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 65
value = s1401,1
channel = 1

[State 810, Hurt 11]
type = targetlifeadd
trigger1 = anim = 1439
trigger1 = animelem = 3
value = -10
[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 1439
trigger1 = animelem = 2
value = s200,1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 1439
trigger1 = animelem = 3
value = s0,2

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = anim = 1439
trigger1 = AnimElem = 3
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
ignorehitpause = 1

[State 620, 4]
type = ScreenBound
trigger1 = anim = 1439
trigger1 = animelemtime(3) >= 0
value = 1
movecamera = 1,0

; Mimic (P2 grabbed)
[Statedef 1435]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = animelem = 1
value = 2

[State 620, 4]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1435

; Mimic (P2 grabbed)
[Statedef 1436]
type    = A
movetype= H
physics = N
velset = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = animelem = 1
value = 2

[State 620, 4]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1436

;---------------------------------------------------------------------------
; Opponent thrown towards ground
; (a custom gethit state)
; Description: This state has the opponent flying through the air and
;     falling down onto the ground. The SelfState controller sets the
;     opponent back using to his own state file when he his the ground.
;     Controllers 821,2 and 821,3 allow the opponent to recover by
;     hitting his recovery command when he is falling.
[Statedef 1437]
type    = A
movetype= H
physics = N
velset = -1,6
poweradd = 40

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -15
value = 5100 ;Hit ground

;---------------------------------------------------------------------------
; Air Mimic Short
[Statedef 1401]
type    = A
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0             
ctrl = 0 
anim = 1401 
poweradd = 20 
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1400,1
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 4
y = -1
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(5) >= 0
x = .9
[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(5) >= 0
y = .1
[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(11) >= 0
y = .3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1400,0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S220,0

[State 200, 1]
type = HitDef
triggerall = prevstateno != [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = 
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
triggerall = prevstateno = [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = s6220
sparkxy = 10,-10
hitsound = -1
guardsound = S6,0
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
movetype = I        ;I,A,H
ignorehitpause = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Air Mimic Medium
[Statedef 1411]
type    = A
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0             
ctrl = 0 
anim = 1411 
poweradd = 20 
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1400,1
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 6
y = -1
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(5) >= 0
x = .9
[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(5) >= 0
y = .1
[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(11) >= 0
y = .3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1400,0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S220,0

[State 200, 1]
type = HitDef
triggerall = prevstateno != [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = 
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
triggerall = prevstateno = [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = s6220
sparkxy = 10,-10
hitsound = -1
guardsound = S6,0
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
movetype = I        ;I,A,H
ignorehitpause = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Air Mimic Far
[Statedef 1421]
type    = A
movetype= A
physics = N
juggle  = 0;5 
velset = 0,0             
ctrl = 0 
anim = 1421 
poweradd = 20 
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1400,1
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 8
y = -1
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(5) >= 0
x = .9
[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(5) >= 0
y = .1
[State 0, VelAdd]
type = VelAdd
trigger1 = animelemtime(11) >= 0
y = .3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1400,0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S220,0

[State 200, 1]
type = HitDef
triggerall = prevstateno != [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = 
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0
[State 200, 1]
type = HitDef
triggerall = prevstateno = [200,999]
trigger1 = time = 0
sprpriority = 3
attr = A, ST
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = Heavy
priority = 1,Hit
damage = 0
guard.pausetime = 5,5
sparkno = -1
guard.sparkno = s6220
sparkxy = 10,-10
hitsound = -1
guardsound = S6,0
ground.type = High
air.type = Low
p1facing = -1
p2facing = 1
p1stateno = 1430
p2stateno = 1435
ground.slidetime = 0
guard.slidetime = 11
ground.hittime = 0
guard.hittime = 11
air.hittime = 0
airguard.hittime = 15
ground.velocity = 0
guard.velocity = -1
air.velocity = 0,0
airguard.velocity = -1,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
movetype = I        ;I,A,H
ignorehitpause = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Frustration - Startup
[Statedef 3000]
type = S
movetype = A
physics = N
ctrl = 0
anim = 3000
velset = 0,0
sprpriority = 2
facep2 = 1

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .2
fv = 11    ;fv = 10
value = .2
ignorehitpause = 1

[State 0, Mashing = More Damage!]
type = VarSet
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
v = 4    ;fv = 10
value = 1
[State 0, Reset]
type = VarSet
trigger1 = time = 0
trigger2 = movecontact
v = 4    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = anim = 3000
value = SCA
time = 1
ignorehitpause = 1

[State 3000, AfterImage]
type = AfterImage
trigger1 = time = 7
time = 29
length = 12
framegap = 5
palcolor = 0
palbright = -250,-20,50
trans = add1

[state haha]
type = superpause
trigger1 = time = 7
time = 40
movetime = 40
pos = 10,-50
anim = s3005
sound = s30,0
unhittable = 3
poweradd = -1000
darken = 0

[State 50,line1]
type = Explod
trigger1 = time = 7
anim = 3009
postype = p1
pos = 5, -35
ownpal = 1
bindtime = -1
removetime = 40
supermovetime = 40
sprpriority = 4
ontop = 0
;scale = .8,.8
[State 50,line1]
type = Explod
trigger1 = time = 7
anim = 3009
postype = p1
pos = 25, -35
ownpal = 1
bindtime = -1
removetime = 40
supermovetime = 40
sprpriority = 4
ontop = 0
;scale = .8,.8

[state 4002, 3.2]
type = explod
trigger1 = time = 7 && Facing = -1
anim = 3006
id = 3006
postype = back
pos = 1, 0
sprpriority = -5
ownpal = 1
bindtime = -1
supermove = 1
removeongethit = 1
persistent = 0
removetime = 40

[state 4002, 3.2]
type = explod
trigger1 = time = 7 && Facing = 1
anim = 3006
id = 3006
postype = back
pos = 0, 0
sprpriority = -5
ownpal = 1
bindtime = -1
supermove = 1
removeongethit = 1
persistent = 0
removetime = 40

[State 3000, 9] ;Super Portrait
type = Explod
trigger1 = time = 7
persistent = 0
anim = 3007
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -4
supermovetime = -1
bindtime = -1
ownpal = 1

[State 3000, 9] ;Super Portrait
type = Explod
trigger1 = time = 7
persistent = 0
anim = 3008
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
supermovetime = -1
bindtime = -1
ownpal = 1

[State 100, dust]
type = Explod
triggerall = anim = 3010
trigger1 = time %7 = 0
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .25,.25

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .2
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = anim = 3000
trigger2 = var(10) > 55
v = 10    ;fv = 10
value = 55
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = anim = 3010
trigger1 = var(10) <= 0
v = 10    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 3010
trigger1 = var(10) > 0
v = 10    ;fv = 
value = -1

[State 0, VelSet]
type = VelAdd
triggerall = anim != 3000
trigger1 = vel x < 5
x = .25

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 3010
trigger1 = time%6 = 0
value = S0,1
channel = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = time = 7
value = S3000,0
channel = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3000 && time = 48
value = 3010
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = anim = 3010
trigger1 = time %6 = 0
anim = 1011
ID = 1011
pos = -5,-50+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 3
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1
[State 0, Explod]
type = Explod
triggerall = anim = 3010
trigger1 = time %6 = 3
anim = 1012
ID = 1012
pos = 5,-50+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 1
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1

[State 200, 1]
type = HitDef
triggerall = anim = 3010
trigger1 = animelem = 3
trigger2 = animelem = 7
getpower = 0,0
givepower = 0,0
attr = S, HA			;Attribute: Standing, Normal Attack
damage = ceil(ifelse(var(4),50,20)*fvar(11)), ifelse(var(4),5,2)			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = M			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 6, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 8			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -50+random%40		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 0			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 1
ground.velocity = -6		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -4,-1		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
kill = 0
guard.kill = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 3010 && var(10) = 0
value = 3005
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Frustration - Grounded Finish
[Statedef 3005]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3015
velset = 0,0
sprpriority = 3

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .2
fv = 11    ;fv = 10
value = .2
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0
ignorehitpause = 1

[State 0, Reset]
type = VarSet
trigger1 = 1
v = 4    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .2
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 100, dust]
type = Explod
trigger1 = AnimElem = 5
anim = 103
postype = p1
pos = -20,2
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .25,.15

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 6
movetype = I
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(5) < 0
x = 10
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = animelem = 5
value = S200,4
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S0,3
channel = 1
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = time = 0
ID = 3005
getpower = 0,0
givepower = 0,0
attr = S, HA			;Attribute: Standing, Normal Attack
damage = ceil(200*fvar(11)), 10			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
air.animtype = Diagup
guardflag = M			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 8, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 12, 12			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -23		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 2			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 30+5*(var(42))
guard.slidetime = 3
ground.hittime = 30+5*(var(42))
guard.hittime = 3
air.hittime = 30
air.fall = 0+1*(var(42))
ground.velocity = -10,-2		;Velocity at which opponent is pushed
guard.velocity = -8
airguard.velocity = -5,-3	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -10,-2		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
fall = 1
fall.recover = 0
p2stateno = 3006
p2facing = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------
; Frustration - Punched
[Statedef 3006]
type    = A
movetype= H
physics = N
velset = 0,0

[State 751, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 751

[State 751, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 3007

;------------------
; Frustration - Wire'd
[Statedef 3007]
type    = A
movetype= H
physics = N

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = selfanimexist(5900) = 1
trigger1 = anim != 5900
value = 5900
ignorehitpause = 1

[State 752, Velocity]
type = VelSet
trigger1 = Time = 0
x = -18
y = -2

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .1

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

[State 752, Hit wall]
type = ChangeState
triggerall = time > 7
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 753

;---------------------------------------------------------------------------
; Frustration - Air Startup
[Statedef 3010]
type = A
movetype = A
physics = N
ctrl = 0
anim = 3001
velset = 0,0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .2
fv = 11    ;fv = 10
value = .2
ignorehitpause = 1

[State 0, Mashing = More Damage!]
type = VarSet
trigger1 = command = "x"
trigger2 = command = "y"
trigger3 = command = "z"
v = 4    ;fv = 10
value = 1
[State 0, Reset]
type = VarSet
trigger1 = time = 0
trigger2 = movecontact
v = 4    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = anim = 3001
value = SCA
time = 1
ignorehitpause = 1

[State 3000, AfterImage]
type = AfterImage
trigger1 = time = 7
time = 29
length = 12
framegap = 5
palcolor = 0
palbright = -250,-20,50
trans = add1

[state haha]
type = superpause
trigger1 = time = 7
time = 40
movetime = 40
pos = 10,-50
anim = s3005
sound = s30,0
unhittable = 3
poweradd = -1000
darken = 0

[State 50,line1]
type = Explod
trigger1 = time = 7
anim = 3009
postype = p1
pos = 5, -45
ownpal = 1
bindtime = -1
removetime = 40
supermovetime = 40
sprpriority = 4
ontop = 0
;scale = .8,.8
[State 50,line1]
type = Explod
trigger1 = time = 7
anim = 3009
postype = p1
pos = 25, -45
ownpal = 1
bindtime = -1
removetime = 40
supermovetime = 40
sprpriority = 4
ontop = 0
;scale = .8,.8

[state 4002, 3.2]
type = explod
trigger1 = time = 7 && Facing = -1
anim = 3006
id = 3006
postype = back
pos = 1, 0
sprpriority = -5
ownpal = 1
bindtime = -1
supermove = 1
removeongethit = 1
persistent = 0
removetime = 40

[state 4002, 3.2]
type = explod
trigger1 = time = 7 && Facing = 1
anim = 3006
id = 3006
postype = back
pos = 0, 0
sprpriority = -5
ownpal = 1
bindtime = -1
supermove = 1
removeongethit = 1
persistent = 0
removetime = 40

[State 3000, 9] ;Super Portrait
type = Explod
trigger1 = time = 7
persistent = 0
anim = 3007
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -4
supermovetime = -1
bindtime = -1
ownpal = 1

[State 3000, 9] ;Super Portrait
type = Explod
trigger1 = time = 7
persistent = 0
anim = 3008
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
supermovetime = -1
bindtime = -1
ownpal = 1

[State 100, dust]
type = Explod
triggerall = anim = 3011
trigger1 = time %7 = 0 && pos y >= 8
anim = 103
postype = p1
pos = -50,5
bindtime = 1
sprpriority = 2
facing = 1
ownpal = 1
scale = .25,.25

[State 0, VelSet]
type = VelSet
trigger1 = vel y > 0
trigger1 = pos y >= -10
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = vel y > 0
trigger1 = pos y >= -10
y = -10
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
triggerall = anim != 3001
trigger1 = command != "holdup"
trigger1 = vel y < 1
y = .1
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = anim != 3001
trigger1 = command = "holdup"
trigger1 = vel y > -1
y = -.1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .2
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = anim = 3001
trigger2 = var(10) > 55
v = 10    ;fv = 10
value = 55
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = anim = 3011
trigger1 = var(10) <= 0
v = 10    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 3011
trigger1 = var(10) > 0
v = 10    ;fv = 
value = -1

[State 0, VelSet]
type = VelAdd
triggerall = anim != 3001
trigger1 = vel x < 5
x = .25

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 3011
trigger1 = time%6 = 0
value = S0,1
channel = 1
[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = time = 7
value = S3000,0
channel = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3001 && time = 48
value = 3011
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = anim = 3011
trigger1 = time %6 = 0
anim = 1011
ID = 1011
pos = -5,-50+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 3
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1
[State 0, Explod]
type = Explod
triggerall = anim = 3011
trigger1 = time %6 = 3
anim = 1012
ID = 1012
pos = 5,-50+random%40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
sprpriority = 1
ontop = 0
shadow = 0,0,0
scale = .8,.8
ownpal = 0
removeongethit = 1

[State 200, 1]
type = HitDef
triggerall = anim = 3011
trigger1 = animelem = 3
trigger2 = animelem = 7
getpower = 0,0
givepower = 0,0
attr = A, HA			;Attribute: Standing, Normal Attack
damage = ceil(ifelse(var(4),50,20)*fvar(11)), ifelse(var(4),5,2)			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 6, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 2, 8			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -50+random%40		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 0			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
air.fall = 1
ground.velocity = -6		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -4,-1		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
kill = 0
guard.kill = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 3011 && var(10) = 0
value = 3015
ctrl = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; Frustration - Air Finish
[Statedef 3015]
type = A
movetype = A
physics = N
ctrl = 0
anim = 3016
velset = 0,0
sprpriority = 3

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .2
fv = 11    ;fv = 10
value = .2
ignorehitpause = 1

[State 0, Reset]
type = VarSet
trigger1 = 1
v = 4    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .2
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = animelemtime(5) < 0
trigger1 = vel y > 0
trigger1 = pos y >= -10
y = -10
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 6
movetype = I
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
physics = A
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(5) < 0
x = 8
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = animelemtime(6) >= 0
x = .85

[State 0, PlaySnd]
type = PlaySnd
;triggerall = palno != [11,12]
trigger1 = animelem = 5
value = S200,4
channel = 0
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S0,3
channel = 1
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = time = 0
ID = 3005
getpower = 0,0
givepower = 0,0
attr = A, HA			;Attribute: Standing, Normal Attack
damage = ceil(200*fvar(11)), 10			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
air.animtype = Diagup
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 8, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 12, 12			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -23		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 2			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 30+5*(var(42))
guard.slidetime = 3
ground.hittime = 30+5*(var(42))
guard.hittime = 3
air.hittime = 30
air.fall = 0+1*(var(42))
ground.velocity = -10,-2		;Velocity at which opponent is pushed
guard.velocity = -8
airguard.velocity = -5,-3	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -10,-2		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
fall = 1
fall.recover = 0
p2stateno = 3006
p2facing = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

;---------------------------------------------------------------------------
; Puff Up
[Statedef 3050]
type = S
movetype = A
physics = N
ctrl = 0
anim = 3050
velset = 0,0
sprpriority = 2
facep2 = 1

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .5
fv = 11    ;fv = 10
value = .5
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = movehit
value = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = anim = 3050
v = 9    ;fv = 10
value = 5
ignorehitpause = 1
[State 0, VarSet]
type = VarAdd
triggerall = anim = 3051
trigger1 = var(9) < 50
v = 9    ;fv = 10
value = 4
ignorehitpause = 1
[State 0, VarSet]
type = VarAdd
triggerall = anim = 3052
trigger1 = var(9) > 5
v = 9    ;fv = 10
value = -2
ignorehitpause = 1

[State 0, Width]
type = Width
trigger1 = 1
player = var(9),var(9)
ignorehitpause = 1

[State 100, dust]
type = Explod
trigger1 = time = 48
anim = 3053
postype = p1
pos = 80,5
bindtime = 1
sprpriority = 3
facing = -1
vel = 1.5,0
accel = -.05,0
ownpal = 1
scale = .5,.4
[State 100, dust]
type = Explod
trigger1 = time = 48
anim = 3053
postype = p1
pos = -80,5
bindtime = 1
sprpriority = 3
facing = 1
vel = -1.5,0
accel = .05,0
ownpal = 1
scale = .5,.4
[State 100, dust]
type = Explod
trigger1 = time = 48
anim = 3053
postype = p1
pos = 60,-5
bindtime = 1
sprpriority = -3
facing = -1
vel = 1,0
accel = -.025,0
ownpal = 1
scale = .45,.65
[State 100, dust]
type = Explod
trigger1 = time = 48
anim = 3053
postype = p1
pos = -60,-5
bindtime = 1
sprpriority = -3
facing = 1
vel = -1,0
accel = .025,0
ownpal = 1
scale = .45,.65

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 46
value = 3051
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 100
value = 3052
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = anim = 3050
fv = 9    ;fv = 10
value = 1
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
triggerall = anim = 3051
trigger1 = fvar(9) < 2.5
fv = 9    ;fv = 
value = .2
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
triggerall = anim = 3052
trigger1 = fvar(9) > 1
fv = 9    ;fv = 
value = -.05
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = fvar(9) > 1
value = 0
scale = 1*fvar(9),1*fvar(9)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .5
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = anim = 3050
trigger2 = anim = 3051
trigger3 = anim = 3052 && animelemtime(6) < 0
value = SCA
time = 1
ignorehitpause = 1

[State 3000, AfterImage]
type = AfterImage
trigger1 = anim = 3050 && animelem = 3
time = 29
length = 12
framegap = 5
palcolor = 0
palbright = -250,-20,50
trans = add1

[state haha]
type = superpause
trigger1 = anim = 3050 && animelem = 3
time = 40
movetime = 40
pos = 10,-30
anim = s3005
sound = s30,0
unhittable = 3
poweradd = -1000
darken = 0

[state 4002, 3.2]
type = explod
trigger1 = anim = 3050 && animelem = 3 && Facing = -1
anim = 3006
id = 3006
postype = back
pos = 1, 0
sprpriority = -5
ownpal = 1
bindtime = -1
supermove = 1
removeongethit = 1
persistent = 0
removetime = 40

[state 4002, 3.2]
type = explod
trigger1 = anim = 3050 && animelem = 3 && Facing = 1
anim = 3006
id = 3006
postype = back
pos = 0, 0
sprpriority = -5
ownpal = 1
bindtime = -1
supermove = 1
removeongethit = 1
persistent = 0
removetime = 40

[State 3000, 9] ;Super Portrait
type = Explod
trigger1 = anim = 3050 && animelem = 3
persistent = 0
anim = 3007
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -4
supermovetime = -1
bindtime = -1
ownpal = 1

[State 3000, 9] ;Super Portrait
type = Explod
trigger1 = anim = 3050 && animelem = 3
persistent = 0
anim = 3008
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
supermovetime = -1
bindtime = -1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 48
value = S3050,0
channel = 0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 46
value = S1200,1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 48
value = S3050,1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 100
value = S3050,2

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, HA			;Attribute: Standing, Normal Attack
damage = ceil(220*fvar(11)), 22			;Damage that move inflicts, guard damage
animtype = DiagUp			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = M			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 5, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 15			;Time attacker pauses, time opponent shakes
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = -10, -50		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 5			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 10+1*(var(42))
guard.slidetime = 11
ground.hittime = 10+1*(var(42))
guard.hittime = 11
air.hittime = 10
fall = 1
fall.recover = 0
sprpriority = 2
p2sprpriority = 3
ground.velocity = -3,-14		;Velocity at which opponent is pushed
airguard.velocity = -5,-6	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -3,-14		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 3052
movetype = I        ;I,A,H
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 3052 && animtime = 0
value = 0
ctrl = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Echoed Voice - First Charge
[Statedef 3100]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 3100
velset = 0,0
sprpriority = 2
facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
triggerall = anim = 3100
trigger1 = animelemtime(5) < 0
value = SCA
time = 1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .2
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .2
fv = 11    ;fv = 10
value = .2
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
triggerall = anim = 3100
trigger1 = animelem = 3
x = 3
[State 0, PosAdd]
type = PosAdd
triggerall = anim = 3100
trigger1 = animelem = 4
x = 4
[State 0, PosAdd]
type = PosAdd
triggerall = anim = 3100
trigger1 = animelem = 5
x = 5

[State 0, VarSet]
type = VarSet
triggerall = anim = 3100
trigger1 = animelem = 2
fv = 5    ;fv = 10
value = 0
ignorehitpause = 1

[State 3000, AfterImage]
type = AfterImage
triggerall = anim = 3100
trigger1 = Animelem = 2
time = 29
length = 12
framegap = 5
palcolor = 0
palbright = -250,-20,50
trans = add1

[state haha]
type = superpause
triggerall = anim = 3100
trigger1 = animelem = 2
time = 40
movetime = 40
pos = 6,-40
anim = s3005
sound = s30,0
unhittable = 3
poweradd = -1000
darken = 0

[state 4002, 3.2]
type = explod
triggerall = anim = 3100
trigger1 = animelem = 2
anim = 3006
id = 3006
postype = back
pos = 0, 0
sprpriority = -5
ownpal = 1
bindtime = -1
supermove = 1
removeongethit = 1
persistent = 0
removetime = 40

[State 3000, 9] ;Super Portrait
type = Explod
triggerall = anim = 3100
trigger1 = animelem = 2
persistent = 0
anim = 3007
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -4
supermovetime = -1
bindtime = -1
ownpal = 1

[State 3000, 9] ;Super Portrait
type = Explod
triggerall = anim = 3100
trigger1 = animelem = 2
persistent = 0
anim = 3008
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
supermovetime = -1
bindtime = -1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 51
value = S3100,0
channel = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 3100
triggerall = animelemtime(5) >= 0
trigger1 = time %9 = 0
value = S3101,0
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = anim = 3100
triggerall = animelemtime(5) >= 0
trigger1 = time %8 = 0
helpertype = normal ;player
name = "yellowring"
ID = 3100
stateno = 3101 
pos = 24,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State 0, Helper]
type = Helper
triggerall = anim = 3100
triggerall = animelemtime(5) >= 0
trigger1 = time %16 = 0
helpertype = normal ;player
name = "pinkring"
ID = 3100
stateno = 3102 
pos = 24,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Explod]
type = Explod
triggerall = anim = 3100
triggerall = animelemtime(5) >= 0
trigger1 = time %9 = 0
anim = 3103+random%3
ID = 3100
pos = 28,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 8,-2+random%5
removetime = 40
pausemovetime = 0
scale = .75,.75
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
;ignorehitpause =
;trans = 
;persistent =
;supermove = 0
;pausemove = 0

[State 0, Projectile]
type = Projectile
triggerall = anim = 3100
triggerall = animelemtime(5) >= 0
trigger1 = time %9 = 0
ProjID = 3100
projanim = 3107
projhitanim = 9999
projremanim = 9999
projcancelanim = 9999
projscale = 1,1
projremove = 0
projremovetime = 40
velocity = 8,0
remvelocity = 0,0
accel = 0,0
velmul = 1,1
projhits = 1
projmiss
projpriority = 7
projsprpriority = 0
projedgebound = 40
projstagebound = 40
projheightbound = -240,240
offset = 28,-30
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
getpower = 0,0
attr = S, HP			;Attribute: Standing, Normal Attack
damage = ceil(30*fvar(11)), 3			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
air.animtype = diagup
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 12			;Time attacker pauses, time opponent shakes
guard.pausetime = 0, 4
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = 0, 0		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 15			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 38+1*(var(42))
guard.slidetime = 39
ground.hittime = 38+1*(var(42))
guard.hittime = 24
air.hittime = 38
air.fall = 1
fall.recover = 0
ground.velocity = -2		;Velocity at which opponent is pushed
airguard.velocity = -1,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 136
value = 3106
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall = anim = 3106 
trigger1 = command = "scream" && power >= 1000
value = 3110
ctrl = 0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 3106 && animtime = 0
value = 0
ctrl = 1
ignorehitpause = 1

;Echoed Voice (yellow ring)
[Statedef 3101]
type = A
movetype = A
physics = N
anim = 3101
velset = 0,0
juggle = 0;0
sprpriority = 4

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = ishelper(3100)
x = 10
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = ishelper(3110)
x = 11
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = ishelper(3120)
x = 12
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
fv = 0    ;fv = 
value = .2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = ishelper(3100)
value = 0
scale = .2*fvar(0),.4*fvar(0)
ignorehitpause = 1
[State 0, AngleDraw]
type = AngleDraw
trigger1 = ishelper(3110)
value = 0
scale = .3*fvar(0),.6*fvar(0)
ignorehitpause = 1
[State 0, AngleDraw]
type = AngleDraw
trigger1 = ishelper(3120)
value = 0
scale = .4*fvar(0),.8*fvar(0)
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(0),256
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
v = 0    ;fv = 
value = 8

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(0) >= 256
ignorehitpause = 1

;Echoed Voice (Pink ring)
[Statedef 3102]
type = A
movetype = A
physics = N
anim = 3102
velset = 0,0
juggle = 0;0
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = ishelper(3100)
x = 14
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = ishelper(3110)
x = 15
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = ishelper(3120)
x = 16
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
fv = 0    ;fv = 
value = .1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = ishelper(3100)
value = 0
scale = .25*fvar(0),.5*fvar(0)
ignorehitpause = 1
[State 0, AngleDraw]
type = AngleDraw
trigger1 = ishelper(3110)
value = 0
scale = .4*fvar(0),.8*fvar(0)
ignorehitpause = 1
[State 0, AngleDraw]
type = AngleDraw
trigger1 = ishelper(3120)
value = 0
scale = .55*fvar(0),1.2*fvar(0)
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(0),256
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
v = 0    ;fv = 
value = 6

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(0) >= 256
ignorehitpause = 1


;---------------------------------------------------------------------------
; Echoed Voice - Second Charge
[Statedef 3110]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 3110
velset = 0,0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 3110
trigger1 = animelem = 2
value = S10,0
[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 3110
trigger1 = animelem = 5
value = S10,1

[State 0, NotHitBy]
type = NotHitBy
triggerall = anim = 3110
trigger1 = animelemtime(2) < 0
value = SCA
time = 1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .3
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .3
fv = 11    ;fv = 10
value = .3
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
triggerall = anim = 3110
trigger1 = animelem = 3
trigger2 = animelem = 4
x = 5
[State 0, PosAdd]
type = PosAdd
triggerall = anim = 3110
trigger1 = animelem = 6
x = 2

[State 0, VarSet]
type = VarSet
triggerall = anim = 3110
trigger1 = animelem = 2
fv = 5    ;fv = 10
value = 0
ignorehitpause = 1

[State 3000, AfterImage]
type = AfterImage
triggerall = anim = 3110
trigger1 = Animelem = 2
time = 29
length = 12
framegap = 5
palcolor = 0
palbright = -250,-20,50
trans = add1

[state haha]
type = superpause
trigger1 = time = 0
time = 45
movetime = 45
pos = 6,-40
anim = s3005
sound = s30,0
unhittable = 3
poweradd = -1000
darken = 0

[state 4002, 3.2]
type = explod
trigger1 = time = 0
anim = 3006
id = 3006
postype = back
pos = 0, 0
sprpriority = -5
ownpal = 1
bindtime = -1
supermove = 1
removeongethit = 1
persistent = 0
removetime = 40

[State 3000, 9] ;Super Portrait
type = Explod
trigger1 = time = 0
persistent = 0
anim = 3007
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -4
supermovetime = -1
bindtime = -1
ownpal = 1

[State 3000, 9] ;Super Portrait
type = Explod
trigger1 = time = 0
persistent = 0
anim = 3008
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
supermovetime = -1
bindtime = -1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 57
value = S3100,1
channel = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 3110
triggerall = animelemtime(6) >= 0
trigger1 = time %9 = 0
value = S3101,1
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = anim = 3110
triggerall = animelemtime(6) >= 0
trigger1 = time %8 = 0
helpertype = normal ;player
name = "yellowring"
ID = 3110
stateno = 3101 
pos = 18,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State 0, Helper]
type = Helper
triggerall = anim = 3110
triggerall = animelemtime(6) >= 0
trigger1 = time %16 = 0
helpertype = normal ;player
name = "pinkring"
ID = 3110
stateno = 3102 
pos = 18,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Explod]
type = Explod
triggerall = anim = 3110
triggerall = animelemtime(6) >= 0
trigger1 = time %9 = 0
anim = 3103+random%3
ID = 3100
pos = 28,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 10,-4+random%8
removetime = 40
pausemovetime = 0
scale = .75,.75
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
;ignorehitpause =
;trans = 
;persistent =
;supermove = 0
;pausemove = 0

[State 0, Projectile]
type = Projectile
triggerall = anim = 3110
triggerall = animelemtime(6) >= 0
trigger1 = time %9 = 0
ProjID = 3110
projanim = 3117
projhitanim = 9999
projremanim = 9999
projcancelanim = 9999
projscale = 1,1
projremove = 0
projremovetime = 40
velocity = 10,0
remvelocity = 0,0
accel = 0,0
velmul = 1,1
projhits = 1
projmiss
projpriority = 7
projsprpriority = 0
projedgebound = 40
projstagebound = 40
projheightbound = -240,240
offset = 28,-30
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
getpower = 0,0
attr = S, HP			;Attribute: Standing, Normal Attack
damage = ceil(40*fvar(11)), 4			;Damage that move inflicts, guard damage
animtype = Medium			;Animation type: Light, Medium, Heavy, Back (def: Light)
air.animtype = diagup
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 12			;Time attacker pauses, time opponent shakes
guard.pausetime = 0, 4
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = 0, 0		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 16			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 48+1*(var(42))
guard.slidetime = 49
ground.hittime = 48+1*(var(42))
guard.hittime = 24
air.hittime = 48
air.fall = 1
fall.recover = 0
ground.velocity = -2		;Velocity at which opponent is pushed
airguard.velocity = -1,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 144
value = 3116
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall = anim = 3116 
trigger1 = command = "scream" && power >= 1000
value = 3120
ctrl = 0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 3116 && animtime = 0
value = 0
ctrl = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
; Echoed Voice - Third Charge
[Statedef 3120]
type = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 3120
velset = 0,0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 3120
trigger1 = animelem = 6
value = S40,0
channel = 1

[State 0, NotHitBy]
type = NotHitBy
triggerall = anim = 3120
trigger1 = animelemtime(5) < 0
value = SCA
time = 1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(21) = 1 && fvar(11) > .4
fvar(11) = fvar(11)*.9
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = fvar(11) < .4
fv = 11    ;fv = 10
value = .4
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
triggerall = anim = 3120
trigger1 = animelem = 2
trigger2 = animelem = 4
x = -3
[State 0, PosAdd]
type = PosAdd
triggerall = anim = 3120
trigger1 = animelem = 3
x = -6
[State 0, PosAdd]
type = VelSet
triggerall = anim = 3120
trigger1 = animelem = 6
x = 2
y = -6

[State 0, VelAdd]
type = VelAdd
triggerall = anim = 3120
trigger1 = animelemtime(6) >= 0
y = .4
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim = 3120
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 3121
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = anim = 3120
trigger1 = animelem = 6
statetype = A       ;S,A,C,L
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = anim = 3121
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = anim = 3121
x = 0
y = 0
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 3121
statetype = S       ;S,A,C,L
physics = S
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = anim = 3120
trigger1 = animelem = 2
fv = 5    ;fv = 10
value = 0
ignorehitpause = 1

[State 3000, AfterImage]
type = AfterImage
triggerall = anim = 3120
trigger1 = Animelem = 2
time = 29
length = 12
framegap = 5
palcolor = 0
palbright = -250,-20,50
trans = add1

[state haha]
type = superpause
trigger1 = time = 0
time = 45
movetime = 45
pos = 6,-40
anim = s3005
sound = s30,0
unhittable = 3
poweradd = -1000
darken = 0

[state 4002, 3.2]
type = explod
trigger1 = time = 0
anim = 3006
id = 3006
postype = back
pos = 0, 0
sprpriority = -5
ownpal = 1
bindtime = -1
supermove = 1
removeongethit = 1
persistent = 0
removetime = 40

[State 3000, 9] ;Super Portrait
type = Explod
trigger1 = time = 0
persistent = 0
anim = 3007
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -4
supermovetime = -1
bindtime = -1
ownpal = 1

[State 3000, 9] ;Super Portrait
type = Explod
trigger1 = time = 0
persistent = 0
anim = 3008
postype = left
pos = ifelse(facing = 1, 0, 319), -100 ;0, 0
facing = facing
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
supermovetime = -1
bindtime = -1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 50
value = S3102,0
volumescale = 150
[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 3121
value = S3100,2
channel = 0
volumescale = 250
persistent = 0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 3121
value = S3102,1
volumescale = 200
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 3121
trigger1 = time %9 = 0
value = S3101,2
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = anim = 3121
trigger1 = time %8 = 0
helpertype = normal ;player
name = "yellowring"
ID = 3120
stateno = 3101 
pos = 18,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
[State 0, Helper]
type = Helper
triggerall = anim = 3121
trigger1 = time %16 = 0
helpertype = normal ;player
name = "pinkring"
ID = 3120
stateno = 3102 
pos = 18,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Explod]
type = Explod
trigger1 = anim = 3121
trigger1 = animelemtime(6) >= 0
trigger1 = time %9 = 0
trigger2 = time = 162
anim = 3103+random%3
ID = 3100
pos = 28,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 12,-6+random%12
removetime = 40
pausemovetime = 0
scale = .75,.75
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
;ignorehitpause =
;trans = 
;persistent =
;supermove = 0
;pausemove = 0

[State 0, Projectile]
type = Projectile
triggerall = anim = 3121
triggerall = animelemtime(6) >= 0
trigger1 = time %9 = 0
ProjID = 3120
projanim = 3127
projhitanim = 9999
projremanim = 9999
projcancelanim = 9999
projscale = 1,1
projremove = 0
projremovetime = 40
velocity = 12,0
remvelocity = 0,0
accel = 0,0
velmul = 1,1
projhits = 1
projmiss
projpriority = 7
projsprpriority = 0
projedgebound = 40
projstagebound = 40
projheightbound = -240,240
offset = 28,-30
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
getpower = 0,0
attr = S, HP			;Attribute: Standing, Normal Attack
damage = ceil(50*fvar(11)), 5			;Damage that move inflicts, guard damage
animtype = Heavy			;Animation type: Light, Medium, Heavy, Back (def: Light)
air.animtype = diagup
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 12			;Time attacker pauses, time opponent shakes
guard.pausetime = 0, 4
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = 0, 0		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 17			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 58+1*(var(42))
guard.slidetime = 59
ground.hittime = 58+1*(var(42))
guard.hittime = 24
air.hittime = 58
air.fall = 1
fall.recover = 0
ground.velocity = -3		;Velocity at which opponent is pushed
airguard.velocity = -1,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, Projectile]
type = Projectile
trigger1 = time = 162
ProjID = 3120
projanim = 3127
projhitanim = 9999
projremanim = 9999
projcancelanim = 9999
projscale = 1,1
projremove = 0
projremovetime = 40
velocity = 12,0
remvelocity = 0,0
accel = 0,0
velmul = 1,1
projhits = 1
projmiss
projpriority = 7
projsprpriority = 0
projedgebound = 40
projstagebound = 40
projheightbound = -240,240
offset = 28,-30
postype = p1         ;p2,front,back,left,right
projshadow = 0,0,0
supermovetime = 0
pausemovetime = 0
; HitDef
getpower = 0,0
attr = S, HP			;Attribute: Standing, Normal Attack
damage = ceil(60*fvar(11)), 6			;Damage that move inflicts, guard damage
animtype = Diagup			;Animation type: Light, Medium, Heavy, Back (def: Light)
air.animtype = diagup
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 0, 20			;Time attacker pauses, time opponent shakes
guard.pausetime = 0, 8
sparkno = S6208				;Spark anim no (Def: set above)
guard.sparkno = s6220
sparkxy = 0, 0		;X-offset for the "hit spark" rel. to p2,
					;Y-offset for the spark rel. to p1
hitsound = s5, 18			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = Low		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 68+1*(var(42))
guard.slidetime = 69
ground.hittime = 68+1*(var(42))
guard.hittime = 30
air.hittime = 68
fall = 1
fall.recover = 0
ground.velocity = -5,-5		;Velocity at which opponent is pushed
airguard.velocity = -3,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = Low			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -5,-5		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 161
value = 3126
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 3126 && animtime = 0
value = 0
ctrl = 1
ignorehitpause = 1

;-------------------------------------------------------------------------------
;"Super Effective" Hyper KO
[Statedef 4000]
type = S
ctrl = 0
anim = 9999
poweradd = 0

[state -2, finish]
type = explod
trigger1 = time = 0
anim = 4000
id = 4000
pos = 0,0
postype = back
bindtime = -1
supermove = 1 ;0
removetime = 48
ontop = 1
ownpal = 1
scale = .84,1.08
persistent = 0

[state -2, finish]
type = explod
triggerall = root, stateno != [3910,3920]
trigger1 = time = 0
anim = 4001
id = 4001
pos = 160,120
postype = back
bindtime = -1
supermove = 1 ;0
ontop = 1
ownpal = 1
persistent = 0

[state -2, finish]
type = explod
triggerall = root, stateno != [3910,3920]
trigger1 = time = 0
anim = 4002
id = 4002
pos = 160,120
postype = back
bindtime = -1
supermove = 1 ;0
ontop = 1
ownpal = 1
persistent = 0

[state -2, finish]
type = explod
triggerall = root, stateno = [3910,3920]
trigger1 = time = 0
anim = 3912
id = 3922
pos = 0,0
postype = back
sprpriority = -51
bindtime = -1
supermove = 1 ;0
removetime = 120
ontop = 0
ownpal = 1
scale = 1,1
persistent = 0
[state -2, finish]
type = explod
triggerall = root, stateno = [3910,3920]
trigger1 = time = 0
anim = 3922
id = 3922
pos = 0,0
postype = back
sprpriority = -50
bindtime = -1
supermove = 1 ;0
removetime = 120
ontop = 0
ownpal = 1
scale = 1,1
persistent = 0

[State 0, StopSnd]
type = PlaySnd
triggerall = root, stateno != [3910,3920]
trigger1 = time = 0
value = 4000,0
persistent = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = roundstate = 4
ignorehitpause = 1

;---------------------------------------------------------------------------
; Stun
[Statedef 5300]
type = S
movetype = I
physics = S
ctrl = 0
anim = 5300
velset = 0,0

[State 0, VarSet]
type = VarSet
trigger1 = var(8)
v = 8    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, ChangeState]
type = SelfState
trigger1 = time = 300
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1
fv = 21    ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = 1
fv = 22    ;fv = 10
value = 1
ignorehitpause = 1

[State 5900, 3] ;Change palette
type = RemapPal
trigger1 = 1
source = 1,1
dest = 1,palno

[State 5900, 4] ;Intro for round 1
type = ChangeState
trigger1 = roundsexisted <= 0
value = 190

[State 5900, 5] ;All other rounds
type = ChangeState
trigger1 = 1
value = 0

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]

[State 0, VarSet]
type = VarSet
trigger1 = numtarget(950)
v = 17    ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = !numtarget
trigger2 = target, movetype != H
trigger3 = target, statetype != S && target, statetype != C
v = 17    ;fv = 10
value = 0
ignorehitpause = 1

[State 410, sound]
type = PlaySnd
trigger1 = numhelper(2503)
value = 2500,0
lowpriority = 1
channel = 6
loop = 1
ignorehitpause = 1
[State 0, StopSnd]
type = StopSnd
trigger1 = !numhelper(2503)
channel = 6
ignorehitpause = 1
persistent = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(52) = 0
v = 50    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = var(50) = 0
v = 51    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = var(50) = 0
v = 52    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarSet]
type = null;VarSet
trigger1 = var(50) = 0
v = 53    ;fv = 10
value = 0
ignorehitpause = 1

;[State 0, VarSet]; All of this is for testing only
;type = VarSet
;trigger1 = 1
;v = 50    ;fv = 10
;value = 7
;ignorehitpause = 1
;[State 0, VarSet]
;type = VarSet
;trigger1 = 1
;v = 51    ;fv = 10
;value = 1
;ignorehitpause = 1
;[State 0, VarSet]
;type = VarSet
;trigger1 = 1
;v = 52    ;fv = 10
;value = 6
;ignorehitpause = 1

[State -2, MimicVar]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = target, name = "Purin" && target,authorname = "Dylanius9000"
trigger1 = target,var(50) > 0
var(50) = (target,var(50))
ignorehitpause = 1

[State -2, MimicVar]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = target, name = "Kung Fu Man"; && target, authorname = "Elecbyte"
trigger2 = target, name = "Kung Fu Girl"
trigger3 = target, name = "Evil Kung Fu Man" || target, name = "Evil Kung Fu Man Mk ii"
trigger4 = target, name = "Zee Kung Fu Man"
trigger5 = target, name = "Kung Fu Bender"
var(50) = 1
ignorehitpause = 1
[State -2, MimicVar]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = target, name = "Ryu"
trigger2 = target, name = "Ryu Hoshi"; lolwut?
trigger3 = target, name = "Evil Ryu"
trigger4 = target, name = "Master Ryu"
trigger5 = target, name = "cvsRyu"
trigger6 = target, name = "cvsRyu_normal"
trigger7 = target, name = "cvsRyu_ex"
trigger8 = target, name = "Ken"
trigger9 = target, name = "Ken Masters"
trigger10 = target, name = "Evil Ken"
trigger11 = target, name = "Violent Ken"
trigger12 = target, name = "cvsken"
trigger13 = target, name = "cvsken_normal"
trigger14 = target, name = "cvsken_ex"
trigger15 = (target, name = "Gouki" && target, authorname != "xiami") || target, name = "Shin Gouki" || target, name = "Akuma" || target, name = "Shin Akuma"
trigger16 = target, name = "Mech Gouki" || target, name = "Cyber Akuma"
trigger17 = target, name = "Pocket Shin Gouki" || target, name = "cvsgouki" || target, name = "cvsgouki_normal" || target, name = "cvsgouki_ex" || target, name = "SF3Gouki"
trigger18 = target, name = "Gouki_Cota" || target, name = "Gouki CVS 3"
trigger19 = target, name = "ERyu"
trigger20 = target, name = "CVSEvilRyu" || target, name = "Destrudo Ryu"
trigger21 = target, name = "eRYU -SvsC"
trigger22 = target, name = "evil ken" || target, name = "evil homer"
trigger23 = target, name = "Toro Inoue" 
trigger24 = target, name = "Rare Akuma" ; you fucking wish
trigger25 = target, name = "Tin's S_Gouki" || target, name = "Blaze Agent"
trigger26 = target, name = "Lucario"  ;HAHAHAHAHAHAHAHAHAHAHAHAHA (wheezing cough)
trigger27 = target, name = "rogue by splode" && target, var(59) = 1
var(50) = 2
ignorehitpause = 1
[State -2, MimicType]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = target,name = "Kyo Kusanagi" || target,name = "Kyo_WLS" || target,name = "cvskyo" || target,name = "cvskyo_normal" || target,name = "cvskyo_ex" || target,name = "NeoKyo"
trigger2 = target,name = "Kusanagi"
trigger3 = target,name = "Saisyu" || target,name = "Saisyu Kusanagi" || target,name = "Saisyu_WLS"
trigger4 = target,name = "Shingo" || target,name = "Shingo Yabuki" || target,name = "Shingo_WLS"
trigger5 = target,name = "Orochi Chris" || target,name = "Flamme"
trigger6 = target,name = "Gallade"
var(50) = 3
ignorehitpause = 1
[State -2, MimicType]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = target, name = "Iori"
trigger2 = target, name = "Iori Yagami"
trigger3 = target, name = "Iori_WLS"
trigger4 = target, name = "N.Iori_WLS"
trigger5 = target, name = "O.Iori_WLS"
trigger6 = target, name = "Yagami Iori"
trigger7 = target, name = "Iori_NMO"
trigger8 = target, name = "The Man Who Troubled The World"
trigger9 = target, name = "Trouble Maker!"
trigger10 = target, name = "cvsiori"
trigger11 = target, name = "cvsiori_normal"
trigger12 = target, name = "cvsiori_ex"
trigger13 = target, name = "dongdong_feifei"
trigger14 = target, name = "Homer J Simpson";EHHH HEH HEH HEH HEH
var(50) = 4
ignorehitpause = 1
[State -2, MimicType]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = target, name = "Mario" || target, name = "Super Mario" || target, name = "SuperMario" || target, name = "Super_Mario" || target, name = "Mario Mario"; why is mario mario and luigi mario canon
trigger2 = target, name = "Luigi" || target, name = "Super Luigi" || target, name = "SuperLuigi" || target, name = "Super_Luigi" || target, name = "Luigi Mario"; i thought it was just some bullshit the movie came up with
var(50) = 5
ignorehitpause = 1
[State -2, MimicType]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = enemy, name = "Sonic"
trigger2 = enemy, name = "Sonic the Hedgehog"
trigger3 = enemy, name = "Classic Sonic"
trigger4 = enemy, name = "Classic Sonic the Hedgehog"
trigger5 = target, name = "SonicV2"
trigger6 = target, name = "That Darn Hedgehog"
trigger7 = target, name = "Sonic the Hedgehog"
trigger8 = target, name = "Retro Suika"
var(50) = 6
ignorehitpause = 1
[State -2, MimicType]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = target, name = "megaman" || target, name = "mega man" || target, name = "mega_man"
trigger2 = target, name = "rockman" || target, name = "rock man" || target, name = "rock_man"
trigger3 = target, name = "megamari"
var(50) = 7
ignorehitpause = 1
[State -2, MimicType]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = target, name = "charizard"
trigger2 = target, name = "lizardon"
var(50) = 51
ignorehitpause = 1
[State -2, MimicType]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
triggerall = target, name = "heracross"
trigger1 = target, authorname = "Gladiacloud"
trigger2 = target, authorname = "Gladiacloud 'n Dylanius"
var(50) = 52
ignorehitpause = 1
[State -2, MimicType]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = target, name = "pikachu"
trigger2 = target, name = "pichu"
var(50) = 53
ignorehitpause = 1
;[State -2, MimicVar]
;type = VarSet
;triggerall = stateno = 1430 && anim = 1439
;trigger1 = target, name = "" && target, authorname = ""
;var(50) = 0
;ignorehitpause = 1
[State -2, MimicType]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = target, name = "Kung Fu Man"; && target, authorname = "Elecbyte"
trigger2 = target, name = "Kung Fu Girl"
trigger3 = target, name = "Evil Kung Fu Man" || target, name = "Evil Kung Fu Man Mk ii"
trigger4 = target, name = "Zee Kung Fu Man"
trigger5 = target, name = "Kung Fu Bender"
trigger6 = target, name = "charizard"
trigger7 = target, name = "lizardon"
trigger8 = target, name = "heracross" && (target, authorname = "Gladiacloud" || target, authorname = "Gladiacloud 'n Dylanius")
trigger9 = target, name = "Ryu"
trigger10 = target, name = "Ryu Hoshi"; lolwut?
trigger11 = target, name = "Evil Ryu"
trigger12 = target, name = "Master Ryu"
trigger13 = target, name = "cvsRyu"
trigger14 = target, name = "cvsRyu_normal"
trigger15 = target, name = "cvsRyu_ex"
trigger16 = target, name = "Ken"
trigger17 = target, name = "Ken Masters"
trigger18 = target, name = "Evil Ken"
trigger19 = target, name = "Violent Ken"
trigger20 = target, name = "cvsken"
trigger21 = target, name = "cvsken_normal"
trigger22 = target, name = "cvsken_ex"
trigger23 = (target, name = "Gouki" && target, authorname != "xiami") || target, name = "Shin Gouki" || target, name = "Akuma" || target, name = "Shin Akuma"
trigger24 = target, name = "Mech Gouki" || target, name = "Cyber Akuma"
trigger25 = target, name = "Pocket Shin Gouki" || target, name = "cvsgouki" || target, name = "cvsgouki_normal" || target, name = "cvsgouki_ex" || target, name = "SF3Gouki"
trigger26 = target, name = "Gouki_Cota" || target, name = "Gouki CVS 3"
trigger27 = target, name = "ERyu"
trigger28 = target, name = "CVSEvilRyu" || target, name = "Destrudo Ryu"
trigger29 = target, name = "eRYU -SvsC"
trigger30 = target, name = "evil ken" || target, name = "evil homer"
trigger31 = target, name = "Toro Inoue" 
trigger32 = target, name = "Rare Akuma" ; you fucking wish
trigger33 = target, name = "Tin's S_Gouki" || target, name = "Blaze Agent"
trigger34 = target, name = "Lucario"
trigger35 = target, name = "rogue by splode" && target, var(59) = 1
trigger36 = target, name = "Purin" && target,authorname = "Dylanius9000"
trigger37 = target,name = "Kyo Kusanagi" || target,name = "Kyo_WLS" || target,name = "cvskyo" || target,name = "cvskyo_normal" || target,name = "cvskyo_ex" || target,name = "NeoKyo"
trigger38 = target,name = "Kusanagi"
trigger39 = target,name = "Saisyu" || target,name = "Saisyu Kusanagi" || target,name = "Saisyu_WLS"
trigger40 = target,name = "Shingo" || target,name = "Shingo Yabuki" || target,name = "Shingo_WLS"
trigger41 = target,name = "Orochi Chris" || target,name = "Flamme"
trigger42 = target,name = "Gallade"
trigger43 = target, name = "Iori"
trigger44 = target, name = "Iori Yagami"
trigger45 = target, name = "Iori_WLS"
trigger46 = target, name = "N.Iori_WLS"
trigger47 = target, name = "O.Iori_WLS"
trigger48 = target, name = "Yagami Iori"
trigger49 = target, name = "Iori_NMO"
trigger50 = target, name = "The Man Who Troubled The World"
trigger51 = target, name = "Trouble Maker!"
trigger52 = target, name = "cvsiori"
trigger53 = target, name = "cvsiori_normal"
trigger54 = target, name = "cvsiori_ex"
trigger55 = target, name = "dongdong_feifei"
trigger56 = target, name = "Homer J Simpson"
trigger57 = target, name = "pikachu"
trigger58 = target, name = "pichu"
trigger59 = target, name = "megaman" || target, name = "mega man" || target, name = "mega_man"
trigger60 = target, name = "rockman" || target, name = "rock man" || target, name = "rock_man"
trigger61 = target, name = "megamari"
var(51) = 1
ignorehitpause = 1
[State -2, MimicType]
type = VarSet
triggerall = stateno = 1430 && anim = 1439
trigger1 = target, name = "Mario" || target, name = "Super Mario" || target, name = "SuperMario" || target, name = "Super_Mario" || target, name = "Mario Mario"
trigger2 = target, name = "Luigi" || target, name = "Super Luigi" || target, name = "SuperLuigi" || target, name = "Super_Luigi" || target, name = "Luigi Mario"
trigger3 = enemy, name = "Sonic"
trigger4 = enemy, name = "Sonic the Hedgehog"
trigger5 = enemy, name = "Classic Sonic"
trigger6 = enemy, name = "Classic Sonic the Hedgehog"
trigger7 = target, name = "SonicV2"
trigger8 = target, name = "That Darn Hedgehog"
trigger9 = target, name = "Sonic the Hedgehog"
trigger10 = target, name = "Retro Suika"
var(51) = 3
ignorehitpause = 1
[State -2, MimicUses]
type = VarSet
triggerall = var(50) > 0
trigger1 = stateno = 1430 && anim = 1439
var(52) = 6
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = numtarget(1300)
trigger1 = target(1300), stateno = 1309
trigger1 = target(1300), time = 1
value = S1309,0
persistent = 0

[State 0, Helper]
type = Helper
triggerall = numhelper(1399) = 0
triggerall = numtarget(1300)
trigger1 = target(1300), stateno = 1399
helpertype = normal ;player
name = "hoshikie"
ID = 1399
stateno = 1398 
pos = 0,0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, VarSet]
type = VarSet
trigger1 = numhelper(1301) = 1
v = 16    ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = numhelper(1301) = 0
v = 16    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, StopSnd]
type = StopSnd
trigger1 = stateno != [1200,1220]
trigger2 = stateno = 1205
channel = 4
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = stateno != [1100,1150]
trigger1 = stateno != [1200,1220]
trigger2 = stateno = 1205
v = 11    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = numexplod(1201) = 0
triggerall = animelemtime(6) >= 0
trigger1 = anim = 1200
anim = 1201
ID = 1201
pos = 5,-28
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .3,.6
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
triggerall = numexplod(1201) = 0
triggerall = animelemtime(6) >= 0
trigger1 = anim = 1210
anim = 1201
ID = 1201
pos = -10,-28
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .4,.65
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
triggerall = numexplod(1201) = 0
triggerall = animelemtime(6) >= 0
trigger1 = anim = 1220
anim = 1201
ID = 1201
pos = -20,-28
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .5,.6
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = anim != 1200
trigger1 = anim != 1210
trigger1 = anim != 1220
trigger2 = stateno = 1206
id = 1201
ignorehitpause = 1

[State 0, Explod]
type = Explod
 triggerall = numexplod(1015) = 0
trigger1 = anim = 1015
trigger2 = anim = 3010
anim = 1016
ID = 1015
pos = -2,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .8,.8
sprpriority = 1
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 1
[State 0, Explod]
type = Explod
triggerall = numexplod(1015) = 0
trigger1 = anim = 1020
trigger2 = anim = 3011
anim = 1016
ID = 1015
pos = -2,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .8,.8
sprpriority = 1
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = anim != 1015
trigger1 = anim != 1020
trigger1 = anim != 3010
trigger1 = anim != 3011
id = 1015
ignorehitpause = 1

[State 0, Default]
type = VictoryQuote
trigger1 = time = 0
value = 0+random%4 ; 1~99
ignorehitpause = 1
[State 0, win with an odd partner]
type = VictoryQuote
triggerall = teammode = simul
triggerall = time >= 1
trigger1 = partner, name = "Porygon-Z"
trigger1 = partner, authorname = "RoySquadRocks"
value = 4+random%4 ; 1~99
ignorehitpause = 1
[State 0, win against an odd partner]
type = VictoryQuote
triggerall = life != lifemax
triggerall = life > (lifemax/3)
triggerall = time >= 1
trigger1 = enemy, name = "Porygon-Z"
trigger1 = enemy, authorname = "RoySquadRocks"
value = 8 ; 1~99
ignorehitpause = 1
[State 0, perfect win against an odd partner]
type = VictoryQuote
triggerall = life = lifemax
triggerall = time >= 1
trigger1 = enemy, name = "Porygon-Z"
trigger1 = enemy, authorname = "RoySquadRocks"
value = 9 ; 1~99
ignorehitpause = 1
[State 0, close win against an odd partner]
type = VictoryQuote
triggerall = life <= (lifemax/3)
triggerall = time >= 1
trigger1 = enemy, name = "Porygon-Z"
trigger1 = enemy, authorname = "RoySquadRocks"
value = 10 ; 1~99
ignorehitpause = 1
[State 0, Versus a Nintendo Land-ian]
type = VictoryQuote
triggerall = time >= 1
trigger1 = enemynear, name = "Pokémon - Wigglytuff"
trigger1 = enemynear, authorname = "Joey Faust"
value = 14 ; 1~99
ignorehitpause = 1

[State 0, Give 'em some Movehitoner]
type = VarSet
trigger1 = 1
var(21) = ifelse((movehit=1||projhit=1),var(21)+1,0)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = numenemy
trigger1 = enemy, movetype != H
trigger2 = numenemy
trigger2 = enemy, stateno = [5120,5150]
trigger3 = !numenemy
fvar(11) = 1
ignorehitpause = 1

[State 0, Prevent it from getting any lower]
type = VarSet
trigger1 = fvar(11) < 0.1
fvar(11) = 0.1
ignorehitpause = 1

;-----------------------------------------------------------------------------------------------
; Counterhit detection (modified version of Ricepigeon's new method)
;-----------------------------------------------------------------------------------------------
[State -2, VarSet];Checks if opponent is in attack state
type = VarSet
triggerall = numenemy
trigger1 = enemy, movetype = A
var(42) = 1
ignorehitpause = 1

[State -2, VarSet];This resets the condition if counter not succesful and succesful
type = VarSet
triggerall = numenemy
trigger1 = enemy, movetype = I  ;Enemy is Idle
trigger2 = var(43) > 10 && enemy, movetype = H  ;10 ticks passed & enemy is on gethit state
var(42) = 0
ignorehitpause = 1

[State -2, VarSet];Counter Hit Succesful
type = VarSet
trigger1 = var(42) = 1 && movehit ;Counter Check Ok, Move Hit Succesfully.
trigger1 = stateno != [190,199] ;Does not activate during intros.
trigger1 = stateno != [800,899] ;Does not activate during throws.
trigger1 = stateno != [1300,1399] ;Don't activate during Sky Drop.
trigger2 = var(42) = 1 && projhit = 1  ;Counter Check Ok, Projectile Hit Succesfully.
trigger3 = var(42) = 1 && var(46) = 1  ;Counter Check Ok, Projectile Hit Succesfully.
var(43) = 1
ignorehitpause = 1

[State -2, VarAdd];Counter Hit Timer
type = VarAdd
trigger1 = var(43) >= 1 ;Counter was succesful
var(43) = 1
ignorehitpause = 1

[State -2, VarSet];Counter Hit Reset
type = VarSet
trigger1 = var(43) >= 22 && movehit ;Reset if 22 ticks passed and move hit
trigger2 = p2movetype != H ;Reset if P2 is no longer in gethit state
trigger3 = movetype = H ;Reset if P1 is getting hit
trigger4 = var(43) >= 22 && projhit = 1 ;Reset if 22 ticks passed and projectile hit
trigger5 = var(43) >= 22 && var(46)=1
var(43) = 0+0*(var(46):=0)
ignorehitpause = 1

[State 0, Reset every other tick]
type = VarSet
trigger1 = 1
var(46) = 0
ignorehitpause = 1

[State 0, Groundbounce Reset]
type = VarSet
trigger1 = numenemy
trigger1 = enemy, movetype != H
trigger2 = numenemy
trigger2 = enemy, stateno = [5120,5150]
trigger3 = !numenemy
v = 14    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, Wallbounce Reset]
type = VarSet
trigger1 = numenemy
trigger1 = enemy, movetype != H
trigger2 = numenemy
trigger2 = enemy, stateno = [5120,5150]
trigger3 = !numenemy
v = 15    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(8)
trigger1 = movetype = H
trigger1 = stateno != [165,166]
trigger1 = stateno != [5100,5120]
v = 8    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(8)
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(6)
trigger2 = var(8)
flag = nowalk
ignorehitpause = 1

[State 0, Stun State]
type = ChangeState
triggerall = ctrl
trigger1 = var(8)
value = 5300
ctrl = 0
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = prevstateno = 165
value = 0
ignorehitpause = 1
persistent = 0

[State 0, Remember P1 Life]
type = VarSet
trigger1 = !var(6) || var(6) && stateno != [150,159]
v = 7    ;fv = 10
value = life
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = numhelper(160) = 0
triggerall = var(6) && Stateno = [120,155]
trigger1 = anim = [10120,10159]
helpertype = normal ;player
name = "Smashy Bubbly Thingy"
ID = 160
stateno = 160
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = roundstate < 2
trigger2 = fvar(6) > 2
fv = 6    ;fv = 10
value = 2
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = var(8)
fv = 6    ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarAdd
triggerall = numhelper(160) = 0
trigger1 = fvar(6) < 2
trigger1 = fvar(6) > 0
fv = 6    ;fv = 10
value = .0015
ignorehitpause = 1
[State 0, Slow Degeneration]
type = VarAdd
trigger1 = numhelper(160) > 0
trigger1 = (stateno != 150) && (stateno != 152) && (stateno != 154)
fv = 6    ;fv = 10
value = -.0015
ignorehitpause = 1

[State 0, Guardcrush logic]
type = VarAdd
triggerall = var(6)
trigger1 = (stateno = 150) || (stateno = 152) || (stateno = 154)
trigger1 = (GetHitVar(HitShakeTime) = 1)
fv = 6    ;fv = 10
value = -.015
ignorehitpause = 1
[State 0, Guardcrush logic]
type = VarAdd
triggerall = var(6)
trigger1 = (stateno = 150) || (stateno = 152) || (stateno = 154)
trigger1 = (GetHitVar(HitShakeTime) = 5)
fv = 6    ;fv = 10
value = -.03
ignorehitpause = 1
[State 0, Guardcrush logic]
type = VarAdd
triggerall = var(6)
triggerall = (stateno = 150) || (stateno = 152) || (stateno = 154)
trigger1 = (GetHitVar(HitShakeTime) = 10)
fv = 6    ;fv = 10
value = -.045
ignorehitpause = 1
[State 0, Guardcrush logic]
type = VarAdd
triggerall = var(6)
trigger1 = (stateno = 150) || (stateno = 152) || (stateno = 154)
trigger1 = (GetHitVar(HitShakeTime) = 15)
fv = 6    ;fv = 10
value = -.06
ignorehitpause = 1

[State 0, OH SHI-]
type = SelfState
trigger1 = anim = [120,159]
trigger1 = var(6) && fvar(6) <= 0
value = 165
ignorehitpause = 1

[State 0, VarSet]
type = VarSet 
trigger1 = command != "hold_x" || command != "hold_c"
trigger1 = command != "hold_y" || command != "hold_c"
trigger1 = command != "hold_z" || command != "hold_c"
trigger2 = anim != [125,127]
trigger2 = anim != [135,137]
trigger2 = anim != [145,147]
trigger2 = anim != [155,157]
v = 6    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = command = "holdback" 
trigger1 = command = "hold_x" && command = "hold_c"
trigger2 = command = "hold_y" && command = "hold_c"
trigger3 = command = "hold_z" && command = "hold_c"
v = 6    ;fv = 10
value = 1
ignorehitpause = 1

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "Proration = %f Counter = %d Life = %d \nShield Percent = %f Puffs = %d Mimic ID = %d"
params = fvar(11), var(42), var(7), (fvar(6)*50), var(40), var(50);Placeholder
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = numhelper(4000) = 0
triggerall = roundstate = 3
triggerall = enemy, alive = 0
trigger1 = stateno = [3000,3999]
trigger1 = movecontact
trigger2 = stateno = [3100,3120]
trigger2 = win
trigger3 = var(47) = 1
trigger4 = stateno = 3920
name = "SUPER EFFECTIVE"
ID = 4000
stateno = 4000
pos = 0,0
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0 && ctrl
y = 0
ignorehitpause = 1

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = stateno = [3000,3900]
time = 2
ignorehitpause = 1

[State -2, Throws Disallowed]; Resets condition every tick to check again
type=varset
trigger1= 1
var(38)= 0

[State -2, Throws Disallowed]
type=varset
triggerall = enemy, anim != 5300
trigger1= (enemynear,stateno=[150,155])
trigger2= (enemynear,movetype=H && enemynear,statetype!=A)
trigger3= (enemynear,stateno=[5020,5040]) && !(enemynear,hitfall)
trigger4= ((enemynear,stateno=0) || (enemynear,stateno=52)) && (enemynear,prevstateno=[5000,5040]) && ((enemynear,time<=0) || !(enemynear,ctrl))
trigger5= (enemynear,stateno=0) && (enemynear,prevstateno=52) && ((enemynear,time<=0) || !(enemynear,ctrl))
trigger6= (enemynear,stateno=40) && (enemynear,time>=1 || enemynear,prevstateno=0 || enemynear,prevstateno=52)
var(38)= 1

[State 0, VarSet]
type = VarSet
trigger1 = statetype != A
trigger2 = movetype = H
v = 40    ;fv = 10
value = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
fv = 10    ;fv = 10
value = .1
persistent = 0
[State 0, VarSet]
type = VarSet
trigger1 = enemy, movetype != H
trigger2 = enemy, stateno = [5120,5150]
fv = 10    ;fv = 10
value = 1
ignorehitpause = 1

[State -3, Corner Push]; Reset
type= varset
trigger1= fvar(5)
trigger1= numtarget
trigger1= (target, hitover) || (target, gethitvar(hitshaketime) > 0 && target, time <= 0)
fvar(5)= 0

[State -3, Corner Push]; Get initial velocity
type= varset
trigger1= movecontact=1 && numtarget
fvar(5)= (target, gethitvar(xvel))
ignorehitpause= 1

[State -3, Corner Push]; Apply corner push
type= posadd
triggerall= fvar(5)
triggerall= numtarget
triggerall= !hitpausetime && (target, gethitvar(hitshaketime) <= 0)
triggerall= (target, statetype != L)
trigger1= target, frontedgebodydist <= abs(target, vel x)
trigger1= (target, gethitvar(xvel) * target, facing) > 0
trigger2= target, backedgebodydist <= abs(target, vel x)
trigger2= (target, gethitvar(xvel) * target, facing) < 0
x= (ifelse(target, frontedgebodydist <= 0, -1, 1) * (target, facing) * fvar(5))*fvar(10)

[State -3, Corner Push]; Apply friction to the velocity
type= varset
trigger1= numtarget
trigger1= target, gethitvar(hitshaketime) <= 0
fvar(5)= fvar(5) * 0.85

[State -3, jumpdust1]
type = explod
trigger1 = StateNo = 40 && Time = 1
trigger2 = StateNo = 3120 && Time = 50
postype = p1
pos = 0,0
spacing = 1
anim = 6010
ownpal = 1
supermove = 1
sprpriority = 5
scale = 0.5,0.5

;This controller plays a sound everytime the player lands from a jump, or
;from a back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = 41, 0
